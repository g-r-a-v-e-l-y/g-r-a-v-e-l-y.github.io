/* Copyright 2008 Google Inc. All Rights Reserved. */ 
var Qo=false;function Zk(a){try{throw a;}catch(b){du(b)}}function du(a,b){var c="Javascript exception: "+(b?b:"")+" "+a;if(bh()){c+=" "+a.name+": "+a.message+" ("+a.number+")"}var d="";if(typeof a=="string"){d=a+"\n"}else{for(var e in a){try{d+=e+": "+a[e]+"\n"}catch(f){}}}d+=Oo(eu);St(c+"\n"+d,1)}var eu;var Sv=/function (\w+)/;function Qt(a){var b=Sv.exec(String(a));if(b){return b[1]}return""}function Oo(a){try{if(!bh()&&!(Wi("safari")||Wi("konqueror"))&&Wi("mozilla")){return Error().stack}if(!a)return"";
var b="- "+Qt(a)+"(";for(var c=0;c<a.arguments.length;c++){if(c>0)b+=", ";var d=String(a.arguments[c]);if(d.length>40){d=d.substr(0,40)+"..."}b+=d}b+=")\n";b+=Oo(a.caller);return b}catch(e){return"[Cannot get stack trace]: "+e+"\n"}}var Tt;var Sf=null,Wk=false;function Rt(){if((Sf==null||Sf.closed)&&!Wk){try{Wk=true;Sf=window.open("","debug","width=700,height=500,toolbar=no,resizable=yes,scrollbars=yes,left=16,top=16,screenx=16,screeny=16");Sf.blur();Sf.document.open();Wk=false;var a="<font color=#ff0000><b>To turn off this debugging window,hit 'D' inside the main caribou window, then close this window.</b></font><br>";
Po(a)}catch(b){}}}function St(a,b){if(!Qo){if(typeof Bt!="undefined"){Bt(al(a))}return}try{var c=Zp()-Tt,d="["+c+"] "+al(a).replace(/\n/g,"<br>")+"<br>";if(b==1){d="<font color=#ff0000><b>Error: "+d+"</b></font>";Sf.focus()}}catch(e){}Po(d)}function Po(a){if(!Qo){return}try{Rt();Sf.document.write(a);Sf.scrollTo(0,1000000)}catch(b){}};function Wi(a){if(a in Uk){return Uk[a]}return Uk[a]=navigator.userAgent.toLowerCase().indexOf(a)!=-1}var Uk={};function bh(){return Wi("msie")&&!window.opera}function yo(a){if(typeof Error!="undefined"){throw new Error(a||"Assertion Failed");}else{throw a;}}function Wh(a){a=a||"Assertion failed";if(Xh(Zk))Zk(a+"\n");yo(a)}function bc(a,b){if(!a){b=b||"Assertion failed";Wh(b)}}function Ko(a,b,c){if(a!=b){c=c||"AssertEquals failed: <"+a+"> != <"+b+">";Wh(c)}}function Rf(a,b,c){if(typeof a==b)return;
if(a||a==""){try{if(b==It[typeof a]||a instanceof b)return}catch(d){}}var e=c===undefined;if(e){if(typeof b=="function"){var f=b.toString().match(/^\s*function\s+([^\s\{]+)/);if(f)b=f[1]}c="AssertType failed: <"+a+"> not typeof "+b}Wh(c)}var It={string:String,number:Number,"boolean":Boolean};function Av(a,b,c,d,e){b=""+b;bc(typeof a=="string"&&typeof b=="string"&&!a.match(/[\s;]/)&&!b.match(/[\s;]/),"trying to set an invalid cookie");if(!Xh(c))c=-1;if(!Xh(d))d="/";if(!Xh(e))e=null;var f=e==null?"":
";domain="+e,g=d==null?"":";path="+d,h;if(c<0){h=""}else if(c==0){var i=new Date(1970,1,1);h=";expires="+i.toUTCString()}else{var j=new Date(Zp()+c*1000);h=";expires="+j.toUTCString()}document.cookie=a+"="+b+f+g+h}function Zp(){return(new Date).getTime()}function iu(a){try{return a.parentNode}catch(b){return a}}function mu(a,b){do{if(a===b)return true;b=iu(b)}while(b&&b!==document.body);return false}function Yo(a){return Zo(a,Uv)}var Uv={IU:function(a){return a.document.body.scrollTop},JU:function(a){return a.document.documentElement.scrollTop},
X:function(a){return a.pageYOffset}};function Xo(a){return Zo(a,Tv)}var Tv={IU:function(a){return a.document.body.scrollLeft},JU:function(a){return a.document.documentElement.scrollLeft},X:function(a){return a.pageXOffset}};function Zo(a,b){try{if(!window.opera&&"compatMode"in a.document&&a.document.compatMode=="CSS1Compat"){return b.JU(a)}else if(bh()){return b.IU(a)}}catch(c){}return b.X(a)}var Jv=/&/g,Yz=/</g,Wz=/>/g;function al(a){if(!a)return"";return a.replace(Jv,"&amp;").replace(Yz,"&lt;").replace(Wz,
"&gt;").replace(bA,"&quot;")}var bA=/\"/g;function nu(a){return gl[a]}var gl;function Tl(a){if(!gl){var b={};b["\\"]="\\\\";b["'"]="\\047";b["\u0008"]="\\b";b['"']="\\042";b["<"]="\\074";b[">"]="\\076";b["&"]="\\046";b["\n"]="\\n";b["\r"]="\\r";b["\u0085"]="\\205";b["\u2028"]="\\u2028";b["\u2029"]="\\u2029";gl=b}return"'"+a.toString().replace(/[\'\\\r\n\b\"<>&\u0085\u2028\u2029]/g,nu)+"'"}var qA=/\s+/g,Kv=/^ /,Ov=/ $/;function No(a){if(!a)return"";return a.replace(qA," ").replace(Kv,"").replace(Ov,
"")}function Mo(a){var b={};b.clientX=a.clientX;b.clientY=a.clientY;b.pageX=a.pageX;b.pageY=a.pageY;b.type=a.type;b.srcElement=a.srcElement;b.target=a.target;b.cancelBubble=a.cancelBubble;b.explicitOriginalTarget=a.explicitOriginalTarget;b.button=a.button;b.shiftKey=a.shiftKey;b.ctrlKey=a.ctrlKey;return b}function aq(a){var b="",c="";for(var d=0;d<a.length;){var e=Wo(a,d);if(e.charAt(0)=="<"){var f=e.indexOf(">");c=e.substring(1,f!=-1?f:e.length)}else if(c==""){b+=e}d+=e.length}if(c==""&&b.indexOf("@")!=
-1){c=b;b=""}b=No(b);b=jq(b,"'");b=jq(b,'"');c=No(c);return[b,c]}function jq(a,b){var c=a.length;if(a.charAt(0)==b&&a.charAt(c-1)==b){return a.substring(1,c-1)}return a}function gu(a){var b=[],c="",d;for(var e=0;e<a.length;){d=Wo(a,e);if(d==","){Jo(b,c);c="";e++;continue}c+=d;e+=d.length}if(c!=""||d==","){Jo(b,c)}return b}var $z='"<([',Mv='">)]';function Wo(a,b){var c=a.charAt(b),d=$z.indexOf(c);if(d==-1)return c;var e=a.indexOf(Mv.charAt(d),b+1),f=e>=0?a.substring(b,e+1):a.substr(b);return f}function Jo(a,
b){b=Pt(b);a[a.length]=b}var rA=/[()<>@,;:\\\".\[\]]/;function Pt(a){var b=aq(a),c=b[0],d=b[1];if(c.indexOf('"')==-1){var e=rA.test(c);if(e){c='"'+c+'"'}}if(c=="")return d;else if(d=="")return c;else return c+" <"+d+">"}function Xh(a){return typeof a!="undefined"}function Pv(a){return document.getElementById(a)}function Qv(a){return document.all[a]}var Tc=document.getElementById?Pv:Qv;function $k(a){bc(a,"func passed to GetFnName() is undefined");var b;if(!("name"in a)){var c=/\W*function\s+([\w\$]+)\(/.exec(a);
if(!c){throw new Error("Cannot extract name from function: "+a);}b=c[1];a.name=b}else{b=a.name}if(!b||b=="anonymous"){throw new Error("Anonymous function has no name: "+a);}return a.name}function Bt(a){try{if(window.parent!=window&&window.parent.log){window.parent.log(window.name+"::"+a);return}}catch(b){}var c=Tc("log");if(c){var d="<p class=logentry><span class=logdate>"+new Date+"</span><span class=logmsg>"+a+"</span></p>";c.innerHTML=d+c.innerHTML}else{window.status=a}};;var $l=$l||{},N=this;var Qw=function(a,b){var c=a.split("."),d=N,e;while(e=c.shift()){if(!c.length&&Ca(b)){d[e]=b}else if(d[e]){d=d[e]}else{d=(d[e]={})}}},fk=function(a){var b=a.split("."),c=N;for(var d;d=b.shift();){if(c[d]){c=c[d]}else{return null}}return c};var ay=function(){};var Ca=function(a){return typeof a!="undefined"};var ra=function(a){return a instanceof Array||Fc(a)&&typeof a.join=="function"&&typeof a.reverse=="function"},Ge=function(a){return Fc(a)&&typeof a.length=="number"};var wa=
function(a){return typeof a=="string"};var df=function(a){return typeof a=="number"},cf=function(a){return typeof a=="function"||!(!(a&&a.call))},Fc=function(a){return a!=null&&typeof a=="object"},Vb=function(a){if(a.hasOwnProperty&&a.hasOwnProperty(fi)){return a[fi]}if(!a[fi]){a[fi]=++Ix}return a[fi]};var fi="closure_hashCode_",Ix=0,iw=function(a){if(Fc(a)){if(a.ha){return a.ha()}var b=ra(a)?[]:{};for(var c in a){b[c]=iw(a[c])}return b}return a},m=function(a,b,c){var d=a.p2;if(arguments.length>2){var e=
Array.prototype.slice.call(arguments,2);if(d){e.unshift.apply(e,d)}d=e}b=a.r2||b;a=a.q2||a;var f,g=b||N;if(d){f=function(){var h=Array.prototype.slice.call(arguments);h.unshift.apply(h,d);return a.apply(g,h)}}else{f=function(){return a.apply(g,arguments)}}f.p2=d;f.r2=b;f.q2=a;return f},Gf=function(a){var b=Array.prototype.slice.call(arguments,1);b.unshift(a,null);return m.apply(null,b)},Nr=function(a,b){for(var c in b){a[c]=b[c]}},ha=function(){return(new Date).getTime()};var ea=function(a,b){var c=
b||{};for(var d in c){a=a.replace(new RegExp("\\{\\$"+d+"\\}","gi"),c[d])}return a},Nd=function(a,b){Qw(a,b)},Ef=function(a,b,c){a[b]=c};if(!Function.prototype.apply){Function.prototype.apply=function(a,b){var c=[],d,e;if(!a)a=N;if(!b)b=[];for(var f=0;f<b.length;f++){c[f]="args["+f+"]"}e="oScope.__applyTemp__.peek().("+c.join(",")+");";if(!a.__applyTemp__){a.__applyTemp__=[]}a.__applyTemp__.push(this);d=eval(e);a.__applyTemp__.pop();return d}}Function.prototype.bind=function(a,b){if(arguments.length>
1){var c=Array.prototype.slice.call(arguments,1);c.unshift(this,a);return m.apply(null,c)}else{return m(this,a)}};Function.prototype.wH=function(){var a=Array.prototype.slice.call(arguments);a.unshift(this,null);return m.apply(null,a)};Function.prototype.k=function(a){S(this,a)};var S=function(a,b){function c(){}c.prototype=b.prototype;a.j=b.prototype;a.prototype=new c;a.prototype.constructor=a};Function.prototype.FW=function(a){Nr(this.prototype,a)};var mb=function(){};mb.prototype.ww=false;mb.prototype.da=function(){return this.ww};mb.prototype.e=function(){if(!this.ww){this.ww=true}};var Q=function(a,b){this.type=a;this.target=b;this.currentTarget=this.target};Q.k(mb);Q.prototype.Wi=false;Q.prototype.Um=true;Q.prototype.stopPropagation=function(){this.Wi=true};Q.prototype.preventDefault=function(){this.Um=false};var Xc=function(a,b){return a.indexOf(b)==0},kc=function(a,b){var c=a.length-b.length;return c>=0&&a.lastIndexOf(b,c)==c};var Eh=function(a){for(var b=1;b<arguments.length;b++){var c=String(arguments[b]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,c)}return a};var Me=function(a){return/^\s*$/.test(a)};var bs=function(a){return a.replace(/(\r\n|\r|\n)/g,"\n")},ik=function(a){return a.replace(/\xa0|\s/g," ")};var Va=function(a){return a.replace(/^\s+|\s+$/g,"")};var js=/(\.\d+)|(\d+)|(\D+)/g,is=function(a,
b){if(a==b){return 0}if(!a){return-1}if(!b){return 1}var c=a.toLowerCase().match(js),d=b.toLowerCase().match(js),e=Math.min(c.length,d.length);for(var f=0;f<e;f++){var g=c[f],h=d[f];if(g!=h){var i=parseInt(g,10);if(!isNaN(i)){var j=parseInt(h,10);if(!isNaN(j)&&i-j){return i-j}}return g<h?-1:1}}if(c.length!=d.length){return c.length-d.length}return a<b?-1:1},hy=/^[a-zA-Z0-9\-_.!~*'()]*$/,qb=function(a){a=String(a);if(!hy.test(a)){return encodeURIComponent(a)}return a},Bi=function(a){return decodeURIComponent(a.replace(/\+/g,
" "))},yn=function(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")},ca=function(a,b){if(b){return a.replace($r,as).replace(gs,hs).replace(es,fs).replace(ks,ls)}else{if(!fy.test(a))return a;if(a.indexOf(gy)!=-1){a=a.replace($r,as)}if(a.indexOf(ky)!=-1){a=a.replace(gs,hs)}if(a.indexOf(jy)!=-1){a=a.replace(es,fs)}if(a.indexOf(my)!=-1){a=a.replace(ks,ls)}return a}},gy="&",ky="<",jy=">",my='"',as="&amp;",hs="&lt;",fs="&gt;",ls="&quot;",$r=/&/g,gs=/</g,es=/>/g,ks=/\"/g,fy=/[&<>\"]/,Hc=function(a){if(hg(a,
"&")){if("document"in N&&!hg(a,"<")){return oy(a)}else{return py(a)}}return a},oy=function(a){var b=N.document.createElement("a");b.innerHTML=a;if(b.normalize){b.normalize()}a=b.firstChild.nodeValue;b.innerHTML="";return a},py=function(a){return a.replace(/&([^;]+);/g,function(b,c){switch(c){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:if(c.charAt(0)=="#"){var d=Number("0"+c.substr(1));if(!isNaN(d)){return String.fromCharCode(d)}}return b}})},Bn=function(a,
b){return yn(a.replace(/  /g," &#160;"),b)},os=function(a,b){if(a.charAt(0)==b&&a.charAt(a.length-1)==b){return a.substring(1,a.length-1)}return a},zn=function(a,b,c){if(c){a=Hc(a)}if(a.length>b){a=a.substring(0,b-3)+"..."}if(c){a=ca(a)}return a},An=function(a,b,c){if(c){a=Hc(a)}if(a.length>b){var d=Math.floor(b/2),e=a.length-d;d+=b%2;a=a.substring(0,d)+"..."+a.substring(e)}if(c){a=ca(a)}return a},xn={"\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u000b":"\\x0B",'"':'\\"',"'":"\\'",
"\\":"\\\\"},ms=function(a){a=String(a);if(a.quote){return a.quote()}else{var b=['"'];for(var c=0;c<a.length;c++){b.push(iy(a.charAt(c)))}b.push('"');return b.join("")}},iy=function(a){if(a in xn){return xn[a]}var b=a,c=a.charCodeAt(0);if(c>31&&c<127){b=a}else{if(c<256){b="\\x";if(c<16||c>256){b+="0"}}else{b="\\u";if(c<4096){b+="0"}}b+=c.toString(16).toUpperCase()}return xn[a]=b},ny=function(a){var b={};for(var c=0;c<a.length;c++){b[a.charAt(c)]=true}return b},ey=ny("()[]{}+-?*.$^|,:#<!\\"),hg=function(a,
b){return a.indexOf(b)!=-1},jk=function(a){a=String(a);var b="",c;for(var d=0;d<a.length;d++){c=a.charAt(d);if(c=="\u0008"){c="\\x08"}else if(c in ey){c="\\"+c}b+=c}return b},ns=function(a,b){return(new Array(b+1)).join(a)},Ua=function(a,b,c){var d=Math.floor(a),e=String(d);return ns("0",Math.max(0,b-e.length))+(Ca(c)?a.toFixed(c):a)},ly=function(a){return a==null?"":String(a)};var ds=function(){return Math.floor(Math.random()*2147483648).toString(36)+(Math.floor(Math.random()*2147483648)^(new Date).getTime()).toString(36)},
cs=function(a,b){var c=0,d=String(a).split("."),e=String(b).split("."),f=Math.max(d.length,e.length);for(var g=0;c==0&&g<f;g++){var h=d[g]||"",i=e[g]||"",j=new RegExp("(\\d*)(\\D*)","g"),l=new RegExp("(\\d*)(\\D*)","g");do{var p=j.exec(h)||["","",""],t=l.exec(i)||["","",""];if(p[0].length==0&&t[0].length==0){break}var w=p[1].length==0?0:parseInt(p[1],10),y=t[1].length==0?0:parseInt(t[1],10);c=wn(w,y)||wn(p[2].length==0,t[2].length==0)||wn(p[2],t[2])}while(c==0)}return c},wn=function(a,b){if(a<b){return-1}else if(a>
b){return 1}return 0};var n={};(function(){var a=false,b=false,c=false,d=false,e=false,f=false,g=false,h=false,i=false,j=false,l=false,p="";if(N.navigator){var t=navigator.userAgent;a=typeof opera!="undefined";b=!a&&t.indexOf("MSIE")!=-1;c=!a&&t.indexOf("WebKit")!=-1;l=c&&t.indexOf("Mobile")!=-1;d=!a&&navigator.product=="Gecko"&&!c;e=d&&navigator.vendor=="Camino";f=!a&&t.indexOf("Konqueror")!=-1;g=f||c;var w,y;if(a){w=opera.version()}else{if(d){y=/rv\:([^\);]+)(\)|;)/}else if(b){y=/MSIE\s+([^\);]+)(\)|;)/}else if(c){y=
/WebKit\/(\S+)/}else if(f){y=/Konqueror\/([^\);]+)(\)|;)/}if(y){y.test(t);w=RegExp.$1}}p=navigator.platform;h=p.indexOf("Mac")!=-1;i=p.indexOf("Win")!=-1;j=p.indexOf("Linux")!=-1}n.OPERA=a;n.IE=b;n.GECKO=d;n.CAMINO=e;n.KONQUEROR=f;n.SAFARI=c;n.KHTML=g;n.VERSION=w;n.PLATFORM=p;n.MAC=h;n.WINDOWS=i;n.LINUX=j;n.MOBILE=l})();n.compare=function(a,b){return cs(a,b)};n.isVersion=function(a){return n.compare(n.VERSION,a)>=0};var La=function(a,b){if(a){this.sd(a,b)}};La.k(Q);var Fw=[1,4,2];La.prototype.type=null;La.prototype.target=null;La.prototype.currentTarget=null;La.prototype.relatedTarget=null;La.prototype.offsetX=0;La.prototype.offsetY=0;La.prototype.clientX=0;La.prototype.clientY=0;La.prototype.screenX=0;La.prototype.screenY=0;La.prototype.button=0;La.prototype.keyCode=0;La.prototype.charCode=0;La.prototype.ctrlKey=false;La.prototype.altKey=false;La.prototype.shiftKey=false;La.prototype.metaKey=false;La.prototype.gf=
null;La.prototype.sd=function(a,b){this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;if(a.relatedTarget){this.relatedTarget=a.relatedTarget}else if(this.type==de){this.relatedTarget=a.fromElement}else if(this.type==tc){this.relatedTarget=a.toElement}else{this.relatedTarget=null}this.offsetX=typeof a.layerX=="number"?a.layerX:a.offsetX;this.offsetY=typeof a.layerY=="number"?a.layerY:a.offsetY;this.clientX=typeof a.clientX=="number"?a.clientX:a.pageX;this.clientY=typeof a.clientY==
"number"?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(this.type==Ld?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.gf=a;this.Um=null;this.Wi=null};La.prototype.Is=function(a){if(n.IE){return!(!(this.gf.button&Fw[a]))}else{return this.gf.button==a}};La.prototype.stopPropagation=function(){this.Wi=true;if(this.gf.stopPropagation){this.gf.stopPropagation()}else{this.gf.cancelBubble=
true}};La.prototype.preventDefault=function(){this.Um=false;if(!this.gf.preventDefault){this.gf.returnValue=false;try{this.gf.keyCode=-1}catch(a){}}else{this.gf.preventDefault()}};La.prototype.eo=function(){return this.gf};La.prototype.e=function(){if(!this.da()){Q.prototype.e.call(this);this.gf=null}};var Md=function(){},Hw=0;Md.prototype.Wx=null;Md.prototype.listener=null;Md.prototype.proxy=null;Md.prototype.src=null;Md.prototype.type=null;Md.prototype.capture=null;Md.prototype.zo=null;Md.prototype.key=0;Md.prototype.Rm=false;Md.prototype.Rv=false;Md.prototype.sd=function(a,b,c,d,e,f){if(cf(a)){this.Wx=true}else if(a&&a.ab&&cf(a.ab)){this.Wx=false}else{throw Error("Invalid listener argument");}this.listener=a;this.proxy=b;this.src=c;this.type=d;this.capture=!(!e);this.zo=f;this.Rv=false;this.key=
++Hw;this.Rm=false};Md.prototype.ab=function(a){if(this.Wx){return this.listener.call(this.zo||this.src,a)}return this.listener.ab.call(this.listener,a)};var Cq=function(a){return a[a.length-1]},Xf=function(a,b,c){if(a.indexOf){return a.indexOf(b,c)}if(Array.indexOf){return Array.indexOf(a,b,c)}if(c==null){c=0}else if(c<0){c=Math.max(0,a.length+c)}for(var d=c;d<a.length;d++){if(d in a&&a[d]===b)return d}return-1};var ab=function(a,b,c){if(a.forEach){a.forEach(b,c)}else if(Array.forEach){Array.forEach(a,b,c)}else{var d=a.length,e=wa(a)?a.split(""):a;for(var f=0;f<d;f++){if(f in e){b.call(c,e[f],f,a)}}}},gw=function(a,b,c){var d=a.length,e=wa(a)?a.split(""):
a;for(var f=d-1;f>=0;--f){if(f in e){b.call(c,e[f],f,a)}}},ii=function(a,b,c){if(a.filter){return a.filter(b,c)}if(Array.filter){return Array.filter(a,b,c)}var d=a.length,e=[],f=wa(a)?a.split(""):a;for(var g=0;g<d;g++){if(g in f){var h=f[g];if(b.call(c,h,g,a)){e.push(h)}}}return e},nh=function(a,b,c){if(a.map){return a.map(b,c)}if(Array.map){return Array.map(a,b,c)}var d=a.length,e=[],f=wa(a)?a.split(""):a;for(var g=0;g<d;g++){if(g in f){e.push(b.call(c,f[g],g,a))}}return e},hw=function(a,b,c,d){if(a.reduce){if(d){return a.reduce(m(b,
d),c)}else{return a.reduce(b,c)}}var e=c;ab(a,function(f,g){e=b.call(d,e,f,g,a)});return e};var Cj=function(a,b,c){if(a.some){return a.some(b,c)}if(Array.some){return Array.some(a,b,c)}var d=a.length,e=wa(a)?a.split(""):a;for(var f=0;f<d;f++){if(f in e&&b.call(c,e[f],f,a)){return true}}return false},ew=function(a,b,c){if(a.every){return a.every(b,c)}if(Array.every){return Array.every(a,b,c)}var d=a.length,e=wa(a)?a.split(""):a;for(var f=0;f<d;f++){if(f in e&&!b.call(c,e[f],f,a)){return false}}return true},
Ye=function(a,b){if(a.contains){return a.contains(b)}return Xf(a,b)>-1},Bq=function(a){return a.length==0},dm=function(a){if(!ra(a)){for(var b=a.length-1;b>=0;b--){delete a[b]}}a.length=0},ji=function(a,b){if(!Ye(a,b)){a.push(b)}},ki=function(a,b,c){fm(a,c,0,b)};var qc=function(a,b){var c=Xf(a,b),d;if(d=c!=-1){Aj(a,c)}return d},Aj=function(a,b){return Array.prototype.splice.call(a,b,1).length==1},em=function(a){if(ra(a)){return a.concat()}else{var b=[];for(var c=0,d=a.length;c<d;c++){b[c]=a[c]}return b}};
var fw=function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(!ra(d)){a.push(d)}else{a.push.apply(a,d)}}},fm=function(a,b,c,d){return Array.prototype.splice.apply(a,Bj(arguments,1))},Bj=function(a,b,c){if(arguments.length<=2){return Array.prototype.slice.call(a,b)}else{return Array.prototype.slice.call(a,b,c)}};var mh=function(a,b,c){var d=0,e=a.length-1,f=c||dw;while(d<=e){var g=d+e>>1,h=f(b,a[g]);if(h>0){d=g+1}else if(h<0){e=g-1}else{return g}}return-(d+1)};var dw=function(a,b){return a>
b?1:(a<b?-1:0)};var bw=function(a,b,c){var d=mh(a,b,c);if(d<0){ki(a,b,-(d+1));return true}return false},cw=function(a,b,c){var d=mh(a,b,c);return d>=0?Aj(a,d):false};var zi=function(a,b,c){for(var d in a){b.call(c,a[d],d,a)}};var cy=function(a){var b=0;for(var c in a){b++}return b};var Dh=function(a){var b=[];for(var c in a){b.push(a[c])}return b},Ai=function(a){var b=[];for(var c in a){b.push(c)}return b};var Yr=function(a,b){for(var c in a){if(a[c]==b){return true}}return false},dy=function(a){for(var b in a){return false}return true},Xr=function(a){var b=Ai(a);for(var c=b.length-1;c>=0;c--){gg(a,b[c])}},gg=function(a,b){var c;if(c=b in a){delete a[b]}return c},
Wr=function(a,b,c){if(b in a){throw Error('The object already contains the key "'+b+'"');}Zr(a,b,c)},vn=function(a,b,c){if(b in a){return a[b]}return c},Zr=function(a,b,c){a[b]=c},by=function(a){var b={};for(var c in a){b[c]=a[c]}return b};var Vr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Vg=function(a,b){var c,d;for(var e=1;e<arguments.length;e++){d=arguments[e];for(c in d){a[c]=d[c]}for(var f=0;f<Vr.length;f++){c=Vr[f];if(Object.prototype.hasOwnProperty.call(d,
c)){a[c]=d[c]}}}};var Wb=function(a,b){mb.call(this);this.Oo=b;this.Fd=[];for(var c=0;c<a;c++){this.ke(this.Cf())}};Wb.k(mb);Wb.prototype.ew=null;Wb.prototype.uw=null;Wb.prototype.qp=function(a){this.ew=a};Wb.prototype.LI=function(a){this.uw=a};Wb.prototype.rd=function(){if(this.Fd.length){return this.Fd.pop()}return this.Cf()};Wb.prototype.ke=function(a){if(this.Fd.length<this.Oo){this.Fd.push(a)}else{this.Gf(a)}};Wb.prototype.Cf=function(){if(this.ew){return this.ew()}else{return{}}};Wb.prototype.Gf=function(a){if(this.uw){this.uw(a)}else{if(cf(a.e)){a.e()}else{for(var b in a){delete a[b]}}}};
Wb.prototype.e=function(){if(!this.da()){Wb.j.e.call(this);var a=this.Fd;while(a.length){this.Gf(a.pop())}this.Fd=null}};var Mg={},id={},Df={},vh=new Wb(0,600);vh.qp(function(){return{Ma:0}});vh.LI(function(a){a.Ma=0});var Lg=new Wb(0,600);Lg.qp(function(){return[]});Lg.LI(function(a){a.length=0;delete a.$s;delete a.XG});var fr=new Wb(0,600);fr.qp(function(){var a=function(b){return Nw.call(a.src,a.key,b)};return a});var Kw=function(){return new Md},Fm=new Wb(0,600);Fm.qp(Kw);var Iw=function(){return new La},Jw=function(){var a=null;if(n.IE){a=new Wb(0,600);a.qp(Iw)}return a},cr=Jw(),Pw="on",Gm={};var q=function(a,
b,c,d,e){if(ra(b)){for(var f=0;f<b.length;f++){q(a,b[f],c,d,e)}return null}var g=!(!d),h=id;if(!(b in h)){h[b]=vh.rd()}h=h[b];if(!(g in h)){h[g]=vh.rd();h.Ma++}h=h[g];var i=Vb(a),j,l;if(!h[i]){j=(h[i]=Lg.rd());h.Ma++}else{j=h[i];for(var f=0;f<j.length;f++){l=j[f];if(l.listener==c&&l.zo==e){if(l.Rm){break}return j[f].key}}}var p=fr.rd();p.src=a;l=Fm.rd();l.sd(c,p,a,b,g,e);var t=l.key;p.key=t;j.push(l);Mg[t]=l;if(!Df[i]){Df[i]=Lg.rd()}Df[i].push(l);if(a.addEventListener){if(a==N||!a.TC){a.addEventListener(b,
p,g)}}else{a.attachEvent(er(b),p)}return t},ri=function(a,b,c,d,e){if(ra(b)){for(var f=0;f<b.length;f++){ri(a,b[f],c,d,e)}return null}var g=q(a,b,c,d,e),h=Mg[g];h.Rv=true;return g},L=function(a,b,c,d,e){if(ra(b)){for(var f=0;f<b.length;f++){L(a,b[f],c,d,e)}return null}var g=!(!d),h=dr(a,b,g);if(!h){return false}for(var f=0;f<h.length;f++){if(h[f].listener==c&&h[f].capture==g&&h[f].zo==e){return ua(h[f].key)}}return false},ua=function(a){if(!Mg[a]){return false}var b=Mg[a];if(b.Rm){return false}var c=
b.src,d=b.type,e=b.proxy,f=b.capture;if(c.removeEventListener){if(c==N||!c.TC){c.removeEventListener(d,e,f)}}else if(c.detachEvent){c.detachEvent(er(d),e)}var g=Vb(c),h=id[d][f][g];if(Df[g]){var i=Df[g];qc(i,b);if(i.length==0){delete Df[g]}}b.Rm=true;h.XG=true;br(d,f,g,h);delete Mg[a];return true},br=function(a,b,c,d){if(!d.$s){if(d.XG){for(var e=0,f=0;e<d.length;e++){if(d[e].Rm){Fm.ke(d[e]);continue}if(e!=f){d[f]=d[e]}f++}d.length=f;d.XG=false;if(f==0){Lg.ke(d);delete id[a][b][c];id[a][b].Ma--;if(id[a][b].Ma==
0){vh.ke(id[a][b]);delete id[a][b];id[a].Ma--}if(id[a].Ma==0){vh.ke(id[a]);delete id[a]}}}}},gr=function(a,b,c){var d=0,e=a==null,f=b==null,g=c==null;c=!(!c);if(!e){var h=Vb(a);if(Df[h]){var i=Df[h];for(var j=i.length-1;j>=0;j--){var l=i[j];if((f||b==l.type)&&(g||c==l.capture)){ua(l.key);d++}}}}else{zi(Df,function(p){for(var t=p.length-1;t>=0;t--){var w=p[t];if((f||b==w.type)&&(g||c==w.capture)){ua(w.key);d++}}})}return d};var dr=function(a,b,c){var d=id;if(b in d){d=d[b];if(c in d){d=d[c];var e=
Vb(a);if(d[e]){return d[e]}}}return null},Mw=function(a,b,c,d,e){var f=!(!d),g=dr(a,b,f);if(g){for(var h=0;h<g.length;h++){if(g[h].listener==c&&g[h].capture==f&&g[h].zo==e){return g[h]}}}return null};var ta="click",X="mousedown",hd="mouseup",de="mouseover",tc="mouseout",vd="mousemove",Ld="keypress",ce="keydown",ag="keyup",Cf="focus",uh="change",ee="resize",Gw,er=function(a){if(a in Gm){return Gm[a]}return Gm[a]=Pw+a},qi=function(a,b,c,d){var e=1,f=id;if(b in f){f=f[b];if(c in f){f=f[c];var g=Vb(a);
if(f[g]){var h=f[g];if(!h.$s){h.$s=1}else{h.$s++}try{var i=h.length;for(var j=0;j<i;j++){var l=h[j];if(l&&!l.Rm){e&=Em(l,d)!==false}}}finally{h.$s--;br(b,c,g,h)}}}}return Boolean(e)},Em=function(a,b){var c=a.ab(b);if(a.Rv){ua(a.key)}return c};var Lw=function(a,b){if(wa(b)){b=new Q(b,a)}else if(!(b instanceof Q)){var c=b;b=new Q(b.type,a);Vg(b,c)}else{b.target=b.target||a}var d=1,e,f=b.type,g=id;if(!(f in g)){return true}g=g[f];var h=true in g,i=false in g;if(h){e=[];for(var j=a;j;j=j.wi()){e.push(j)}for(var l=
e.length-1;!b.Wi&&l>=0;l--){b.currentTarget=e[l];d&=qi(e[l],b.type,true,b)&&b.Um!=false}}if(i){if(h){for(var l=0;!b.Wi&&l<e.length;l++){b.currentTarget=e[l];d&=qi(e[l],b.type,false,b)&&b.Um!=false}}else{for(var p=a;!b.Wi&&p;p=p.wi()){b.currentTarget=p;d&=qi(p,b.type,false,b)&&b.Um!=false}}}return Boolean(d)},Nw=function(a,b){if(!Mg[a]){return true}var c=Mg[a],d=c.type,e=id;if(!(d in e)){return true}e=e[d];var f;if(n.IE){var g=b||fk("window.event"),h=true in e;if(h){if(g.keyCode<0||g.returnValue!=
undefined){return true}Ow(g)}var i=Vb(c.src),j=cr.rd();j.sd(g,this);f=true;try{if(h){var l=Lg.rd();for(var p=j.currentTarget;p;p=p.parentNode){l.push(p)}for(var t=l.length-1;!j.Wi&&t>=0;t--){j.currentTarget=l[t];f&=qi(l[t],d,true,j)}for(var t=0;!j.Wi&&t<l.length;t++){j.currentTarget=l[t];f&=qi(l[t],d,false,j)}}else{f=Em(c,j)}}finally{if(l){l.length=0;Lg.ke(l)}j.e();cr.ke(j)}return f}var w=new La(b,this);try{f=Em(c,w)}finally{w.e()}return f},Ow=function(a){var b=false;if(a.keyCode==0){try{a.keyCode=
-1;return}catch(c){b=true}}if(b||a.returnValue==undefined){a.returnValue=true}};var cb=function(a,b){this.width=Ca(a)?Number(a):undefined;this.height=Ca(b)?Number(b):undefined},Mr=function(a,b){if(a==b){return true}if(!a||!b){return false}return a.width==b.width&&a.height==b.height};cb.prototype.ha=function(){return new cb(this.width,this.height)};cb.prototype.toString=function(){return"("+this.width+" x "+this.height+")"};cb.prototype.dN=function(){return this.width*this.height};cb.prototype.KB=function(){return this.width/this.height};cb.prototype.isEmpty=function(){return!this.dN()};
cb.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};cb.prototype.hQ=function(a){return this.width<=a.width&&this.height<=a.height};cb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};cb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};cb.prototype.scale=function(a){this.width*=a;this.height*=a;return this};cb.prototype.jZ=
function(a){var b=this.KB()>a.KB()?a.width/this.width:a.height/this.height;return this.scale(b)};var qn=function(a,b,c){return Math.min(Math.max(a,b),c)},gk=function(a,b){var c=a%b;return c*b<0?c+b:c};var Fa=function(a,b){this.x=Ca(a)?Number(a):undefined;this.y=Ca(b)?Number(b):undefined};Fa.prototype.ha=function(){return new Fa(this.x,this.y)};Fa.prototype.toString=function(){return"("+this.x+", "+this.y+")"};var Kr=function(a,b){return new Fa(a.x-b.x,a.y-b.y)},pn=function(a,b){a=Number(a);b=Number(b);this.start=a<b?a:b;this.end=a<b?b:a};pn.prototype.ha=function(){return new pn(this.start,this.end)};
pn.prototype.toString=function(){return"["+this.start+", "+this.end+"]"};var Je=function(a,b,c,d){this.left=Ca(a)?Number(a):undefined;this.top=Ca(b)?Number(b):undefined;this.width=Ca(c)?Number(c):undefined;this.height=Ca(d)?Number(d):undefined};Je.prototype.ha=function(){return new Je(this.left,this.top,this.width,this.height)};Je.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};Je.prototype.intersection=function(a){var b=Math.max(this.left,
a.left),c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top),e=Math.min(this.top+this.height,a.top+a.height);if(d<=e){this.left=b;this.top=d;this.width=c-b;this.height=e-d;return true}}return false};var gb=function(a,b,c,d){this.top=Ca(a)?Number(a):undefined;this.right=Ca(b)?Number(b):undefined;this.bottom=Ca(c)?Number(c):undefined;this.left=Ca(d)?Number(d):undefined},Ir=function(){var a=new gb(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x);for(var b=
1;b<arguments.length;b++){var c=arguments[b];a.top=Math.min(a.top,c.y);a.right=Math.max(a.right,c.x);a.bottom=Math.max(a.bottom,c.y);a.left=Math.min(a.left,c.x)}return a};gb.prototype.ha=function(){return new gb(this.top,this.right,this.bottom,this.left)};gb.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};gb.prototype.contains=function(a){return Qx(this,a)};gb.prototype.expand=function(a,b,c,d){if(Fc(a)){this.top-=a.top;this.right+=a.right;
this.bottom+=a.bottom;this.left-=a.left}else{this.top-=a;this.right+=b;this.bottom+=c;this.left-=d}return this};var Qx=function(a,b){if(!a||!b){return false}return b.x>=a.left&&b.x<=a.right&&b.y>=a.top&&b.y<=a.bottom};var pm;var Zf=function(){if(!pm){pm=new Uc}return pm},Hg=function(a){return a?new Uc(bb(a)):Zf()},qm=function(){return Zf().de()},k=function(a){return Zf().S(a)},Bc=k,rm=function(a,b,c){return Zf().iR(a,b,c)},vw=rm,Jj=function(a,b){zi(b,function(c,d){if(d=="style"){a.style.cssText=c}else if(d=="class"){a.className=c}else if(d=="for"){a.htmlFor=c}else if(d in Qq){a.setAttribute(Qq[d],c)}else{a[d]=c}})},Qq={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",
height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder"},gd=function(a){var b=a||N||window,c=b.document;if(n.SAFARI&&!n.isVersion("500")&&!n.MOBILE){if(typeof b.innerHeight=="undefined"){b=window}var d=b.innerHeight,e=b.document.documentElement.scrollHeight;if(b==b.top){if(e<d){d-=15}}return new cb(b.innerWidth,d)}var f=Hg(c),g=f.TQ()=="CSS1Compat"&&(!n.OPERA||n.OPERA&&n.isVersion("9.50"))?c.documentElement:c.body;return new cb(g.clientWidth,g.clientHeight)},rh=function(a){var b=a||
N||window,c=b.document,d,e;if(!n.SAFARI&&c.compatMode=="CSS1Compat"){d=c.documentElement.scrollLeft;e=c.documentElement.scrollTop}else{d=c.body.scrollLeft;e=c.body.scrollTop}return new Fa(d,e)},Ig=function(a){if(n.SAFARI&&!n.isVersion("500")&&!n.MOBILE){return null}else{return a.parentWindow||a.defaultView}},G=function(a,b){var c=Zf();return c.o.apply(c,arguments)};var u=function(a){return Zf().createElement(a)},Tq=function(a){return Zf().createTextNode(a)},wm=function(a){return Zf().EU(a)};var x=
function(a,b){a.appendChild(b)},fc=function(a){var b;while(b=a.firstChild){a.removeChild(b)}},ym=function(a,b){if(b.parentNode){b.parentNode.insertBefore(a,b)}},xm=function(a,b){if(b.parentNode){b.parentNode.insertBefore(a,b.nextSibling)}},C=function(a){return a&&a.parentNode?a.parentNode.removeChild(a):null},sm=function(a){return um(a.firstChild,true)};var vm=function(a){return um(a.nextSibling,true)},Vq=function(a){return um(a.previousSibling,false)},um=function(a,b){while(a&&a.nodeType!=1){a=b?
a.nextSibling:a.previousSibling}return a};var ww=n.SAFARI&&n.compare(n.VERSION,"521")<=0,Cc=function(a,b){if(typeof a.contains!="undefined"&&!ww&&b.nodeType==1){return a==b||a.contains(b)}if(typeof a.compareDocumentPosition!="undefined"){return a==b||Boolean(a.compareDocumentPosition(b)&16)}while(b&&a!=b){b=b.parentNode}return b==a};var bb=function(a){return a.nodeType==9?a:a.ownerDocument||a.document},tm=function(a){return n.SAFARI?a.document||a.contentWindow.document:a.contentDocument||a.contentWindow.document},
U=function(a,b){if("textContent"in a){a.textContent=b}else if(a.firstChild&&a.firstChild.nodeType==3){while(a.lastChild!=a.firstChild){a.removeChild(a.lastChild)}a.firstChild.data=b}else{while(a.hasChildNodes()){a.removeChild(a.lastChild)}var c=bb(a);a.appendChild(c.createTextNode(b))}};var qh=function(a,b){var c=[];Uq(a,b,c,true);return c.length?c[0]:undefined};var Uq=function(a,b,c,d){if(a!=null){for(var e=0,f;f=a.childNodes[e];e++){if(b(f)){c.push(f);if(d){return}}Uq(f,b,c,d)}}},xw={SCRIPT:1,STYLE:1,
HEAD:1,IFRAME:1,OBJECT:1},Rq={IMG:" ",BR:"\n"},$f=function(a){if(n.IE&&"innerText"in a){return bs(a.innerText)}var b=[];Wq(a,b,true);var c=b.join("").replace(/ +/g," ");if(c!=" "){c=c.replace(/^\s*/,"")}return c};var Wq=function(a,b,c){if(a.nodeName in xw){}else if(a.nodeType==3){if(c){b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,""))}else{b.push(a.nodeValue)}}else if(a.nodeName in Rq){b.push(Rq[a.nodeName])}else{var d=a.firstChild;while(d){Wq(d,b,c);d=d.nextSibling}}};var Uc=function(a){this.$d=
a||N.document||document};Uc.prototype.de=function(){return this.$d};Uc.prototype.S=function(a){if(wa(a)){return this.$d.getElementById(a)}else{return a}};Uc.prototype.iR=function(a,b,c){var d=a||"*",e=c||this.$d,f=e.getElementsByTagName(d);if(b){var g=[];for(var h=0,i;i=f[h];h++){var j=i.className;if(typeof j.split=="function"&&Ye(j.split(" "),b)){g.push(i)}}return g}else{return f}};Uc.prototype.o=function(a,b){if(n.IE&&b&&b.name){a="<"+a+' name="'+ca(b.name)+'">'}var c=this.createElement(a);if(b){Jj(c,
b)}if(arguments.length>2){function d(g){if(g){this.appendChild(c,wa(g)?this.createTextNode(g):g)}}for(var e=2;e<arguments.length;e++){var f=arguments[e];if((Ge(f)||n.SAFARI&&typeof f=="function"&&typeof f.length=="number")&&!(Fc(f)&&f.nodeType>0)){ab(ra(f)?f:em(f),d,this)}else{d.call(this,f)}}}return c};Uc.prototype.createElement=function(a){return this.$d.createElement(a)};Uc.prototype.createTextNode=function(a){return this.$d.createTextNode(a)};Uc.prototype.EU=function(a){var b=this.$d.createElement("div");
b.innerHTML=a;if(b.childNodes.length==1){return b.firstChild}else{var c=this.$d.createDocumentFragment();while(b.firstChild){c.appendChild(b.firstChild)}return c}};Uc.prototype.TQ=function(){if(this.$d.compatMode){return this.$d.compatMode}if(n.SAFARI){var a=this.o("div",{style:"position:absolute;width:0;height:0;width:1"}),b=a.style.width=="1px"?"BackCompat":"CSS1Compat";return this.$d.compatMode=b}return"BackCompat"};Uc.prototype.appendChild=x;Uc.prototype.az=fc;Uc.prototype.removeNode=C;Uc.prototype.contains=
Cc;var Ug=function(a,b,c,d,e){if(/;=/g.test(a)){throw new Error('Invalid cookie name "'+a+'"');}if(/;/g.test(b)){throw new Error('Invalid cookie value "'+b+'"');}if(!Ca(c)){c=-1}var f=e?";domain="+e:"",g=d?";path="+d:"",h;if(c<0){h=""}else if(c==0){var i=new Date(1970,1,1);h=";expires="+i.toUTCString()}else{var j=new Date((new Date).getTime()+c*1000);h=";expires="+j.toUTCString()}document.cookie=a+"="+b+f+g+h},Le=function(a,b){var c=a+"=",d=String(document.cookie);for(var e=-1;(e=d.indexOf(c,e+1))>=
0;){var f=e;while(--f>=0){var g=d.charAt(f);if(g==";"){f=-1;break}}if(f==-1){var h=d.indexOf(";",e);if(h<0){h=d.length}return d.substring(e+c.length,h)}}return b},un=function(a,b,c){var d=Ur(a);Ug(a,"",0,b,c);return d};var Ur=function(a){var b={};return Le(a,b)!==b};var sa={COMPLETE:"complete",SUCCESS:"success",ERROR:"error",ABORT:"abort",READY:"ready",READY_STATE_CHANGE:"readystatechange",TIMEOUT:"timeout",INCREMENTAL_DATA:"incrementaldata"};var Qr=function(){return Rr()};var Rr=null,Tr=null,sn=null,$x=function(a,b){Rr=a;Tr=b;sn=null},Yx=function(){var a=Sr();if(a){return new ActiveXObject(a)}else{return new XMLHttpRequest}},Zx=function(){var a=Sr(),b={};if(a){b[0]=true;b[1]=true}return b};$x(Yx,Zx);var tn=null,Sr=function(){if(!tn&&typeof XMLHttpRequest=="undefined"&&typeof ActiveXObject!="undefined"){var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"];for(var b=0;b<a.length;b++){var c=a[b];try{new ActiveXObject(c);
tn=c;return c}catch(d){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return tn};;var sy=function(a){if(typeof a.r=="function"){return a.r()}if(Ge(a)||wa(a)){return a.length}return cy(a)},En=function(a){if(typeof a.Ab=="function"){return a.Ab()}if(wa(a)){return a.split("")}if(Ge(a)){var b=[],c=a.length;for(var d=0;d<c;d++){b.push(a[d])}return b}return Dh(a)},rs=function(a){if(typeof a.Ic=="function"){return a.Ic()}if(typeof a.Ab=="function"){return undefined}if(Ge(a)||wa(a)){var b=[],c=a.length;for(var d=0;d<c;d++){b.push(d)}return b}return Ai(a)},ry=function(a,b){if(typeof a.contains==
"function"){return a.contains(b)}if(typeof a.dg=="function"){return a.dg(b)}if(Ge(a)||wa(a)){return Ye(a,b)}return Yr(a,b)},ty=function(a){if(typeof a.isEmpty=="function"){return a.isEmpty()}if(Ge(a)||wa(a)){return Bq(a)}return dy(a)},qs=function(a){if(typeof a.clear=="function"){a.clear()}else if(Ge(a)){dm(a)}else{Xr(a)}},Ob=function(a,b,c){if(typeof a.forEach=="function"){a.forEach(b,c)}else if(Ge(a)||wa(a)){ab(a,b,c)}else{var d=rs(a),e=En(a),f=e.length;for(var g=0;g<f;g++){b.call(c,e[g],d&&d[g],
a)}}};var Fn=function(a,b,c){if(typeof a.some=="function"){return a.some(b,c)}if(Ge(a)||wa(a)){return Cj(a,b,c)}var d=rs(a),e=En(a),f=e.length;for(var g=0;g<f;g++){if(b.call(c,e[g],d&&d[g],a)){return true}}return false};var Da=function(a){this.n={};this.Pa=[];if(a){this.Aj(a)}},Cn=":",ps=Cn.charCodeAt(0);Da.prototype.Ma=0;var kk=function(a){a=String(a);if(a in Object.prototype){return Cn+a}else if(a.charCodeAt(0)==ps){return Cn+a}else{return a}},qy=function(a){if(a.charCodeAt(0)==ps){return a.substring(1)}else{return a}};Da.prototype.r=function(){return this.Ma};Da.prototype.Ab=function(){this.Wv();var a=[];for(var b=0;b<this.Pa.length;b++){var c=this.Pa[b];a.push(this.n[c])}return a};Da.prototype.Ic=function(){this.Wv();
var a=[];for(var b=0;b<this.Pa.length;b++){var c=this.Pa[b];a.push(qy(c))}return a};Da.prototype.sc=function(a){return kk(a)in this.n};Da.prototype.dg=function(a){for(var b=0;b<this.Pa.length;b++){var c=this.Pa[b];if(c in this.n){if(this.n[c]==a){return true}}}return false};Da.prototype.isEmpty=function(){return this.Ma==0};Da.prototype.clear=function(){this.n={};this.Pa.length=0;this.Ma=0};Da.prototype.remove=function(a){var b=kk(a);if(gg(this.n,b)){this.Ma--;if(this.Pa.length>2*this.Ma){this.Wv()}return true}return false};
Da.prototype.Wv=function(){if(this.Ma!=this.Pa.length){var a=0,b=0;while(a<this.Pa.length){var c=this.Pa[a];if(c in this.n){this.Pa[b++]=c}a++}this.Pa.length=b}if(this.Ma!=this.Pa.length){var d={},a=0,b=0;while(a<this.Pa.length){var c=this.Pa[a];if(!(c in d)){this.Pa[b++]=c;d[c]=1}a++}this.Pa.length=b}};Da.prototype.get=function(a,b){var c=kk(a);if(c in this.n){return this.n[c]}return b};Da.prototype.K=function(a,b){var c=kk(a);if(!(c in this.n)){this.Ma++;this.Pa.push(c)}this.n[c]=b};Da.prototype.Aj=
function(a){var b,c;if(a instanceof Da){b=a.Ic();c=a.Ab()}else{b=Ai(a);c=Dh(a)}for(var d=0;d<b.length;d++){this.K(b[d],c[d])}};Da.prototype.ha=function(){return new Da(this)};var oe=function(a){this.n=new Da;if(a){this.Aj(a)}},Dn=function(a){var b=typeof a;if(b=="object"){return"o"+Vb(a)}else{return b.substr(0,1)+a}};oe.prototype.r=function(){return this.n.r()};oe.prototype.add=function(a){this.n.K(Dn(a),a)};oe.prototype.Aj=function(a){var b=En(a),c=b.length;for(var d=0;d<c;d++){this.add(b[d])}};oe.prototype.remove=function(a){return this.n.remove(Dn(a))};oe.prototype.clear=function(){this.n.clear()};oe.prototype.isEmpty=function(){return this.n.isEmpty()};oe.prototype.contains=
function(a){return this.n.sc(Dn(a))};oe.prototype.Ab=function(){return this.n.Ab()};oe.prototype.ha=function(){return new oe(this)};var qw=function(a){var b=[];for(var c=0;c<a.length;c++){if(ra(a[c])){b.push(qw(a[c]))}else{b.push(a[c])}}return"[ "+b.join(", ")+" ]"},rw=function(a,b){try{var c=uw(a),d="Message: "+ca(c.message)+'\nUrl: <a href="view-source:'+c.fileName+'" target="_new">'+c.fileName+"</a>\nLine: "+c.lineNumber+"\n\nBrowser stack:\n"+ca(c.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+ca(tw(b)+"-> ");return d}catch(e){return"Exception trying to expose exception! You win, we lose. "+e}},uw=function(a){var b=fk("document.location.href");
return typeof a=="string"?{message:a,name:"Unknown error",lineNumber:"Not available",fileName:b,stack:"Not available"}:(!a.lineNumber||!a.fileName||!a.stack?{message:a.message,name:a.name,lineNumber:"Not available",fileName:b,stack:"Not available"}:a)};var tw=function(a){return Pq(a||arguments.callee.caller,[])},Pq=function(a,b){var c=[];if(Ye(b,a)){c.push("[...circular reference...]")}else if(a&&b.length<50){c.push(Oq(a)+"(");var d=a.arguments;for(var e=0;e<d.length;e++){if(e>0){c.push(", ")}var f,
g=d[e];switch(typeof g){case "object":f=g?"object":"null";break;case "string":f=g;break;case "number":f=String(g);break;case "boolean":f=g?"true":"false";break;case "function":f=Oq(g);f=f?f:"[fn]";break;case "undefined":default:f=typeof g;break}if(f.length>40){f=f.substr(0,40)+"..."}c.push(f)}b.push(a);c.push(")\n");try{c.push(Pq(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else if(a){c.push("[...long stack...]")}else{c.push("[end]")}return c.join("")},Oq=function(a){if(!Hj[a]){var b=
/function ([^\(]+)/.exec(String(a));if(b){var c=b[1],d=/^\$(.+)\$$/.exec(c);if(d){c=d[1].replace(/\${1,2}/g,".")}Hj[a]=c}else{Hj[a]="[Anonymous]"}}return Hj[a]},sw=function(a,b,c,d){if(fk("document.all")){return""}var e=b||N,f=c||"",g=d||0;if(e==a){return f}for(var h in e){if(h=="Packages"||h=="sun"||h=="netscape"||h=="java"){continue}if(e[h]==a){return f+h}if((typeof e[h]=="function"||typeof e[h]=="object")&&e[h]!=N&&e[h]!=fk("document")&&e.hasOwnProperty(h)&&g<6){var i=sw(a,e[h],f+h+".",g+1);if(i)return i}}return""},
Hj={};var ae=function(a,b,c){this.Q6=mw++;this.E5=ha();this.uh=a;this.f4=b;this.Q3=c};ae.prototype.ED=null;ae.prototype.DD=null;var mw=0;ae.prototype.jx=function(){return this.Q3};ae.prototype.kR=function(){return this.ED};ae.prototype.c_=function(a){this.ED=a};ae.prototype.lR=function(){return this.DD};ae.prototype.d_=function(a){this.DD=a};ae.prototype.lo=function(){return this.uh};ae.prototype.ou=function(a){this.uh=a};ae.prototype.BE=function(){return this.f4};ae.prototype.CE=function(){return this.E5};var Kb=function(a){this.zh=a;this.C=null;this.Ta={};this.im=[]};Kb.prototype.uh=null;var Ce=function(a,b){this.name=a;this.value=b};Ce.prototype.toString=function(){return this.name};var LA=new Ce("OFF",Infinity),Jq=new Ce("SHOUT",1200),lm=new Ce("SEVERE",1000),mm=new Ce("WARNING",900),Iq=new Ce("INFO",800),nw=new Ce("CONFIG",700),Ej=new Ce("FINE",500),KA=new Ce("FINER",400),ow=new Ce("FINEST",300),JA=new Ce("ALL",0);var rc=function(a){return Gq(a)};Kb.prototype.getName=function(){return this.zh};
Kb.prototype.yB=function(a){this.im.push(a)};Kb.prototype.WH=function(a){return qc(this.im,a)};Kb.prototype.Jd=function(){return this.C};Kb.prototype.ou=function(a){this.uh=a};Kb.prototype.lo=function(){return this.uh};Kb.prototype.hR=function(){if(this.uh){return this.uh}if(this.C){return this.C.hR()}return null};Kb.prototype.Ms=function(a){if(this.uh){return a.value>=this.uh.value}if(this.C){return this.C.Ms(a)}return false};Kb.prototype.log=function(a,b,c){if(!this.Ms(a)){return}var d=new ae(a,
String(b),this.zh);if(c){d.c_(c);d.d_(rw(c,arguments.callee.caller))}this.ZV(d)};Kb.prototype.ln=function(a,b){this.log(lm,a,b)};Kb.prototype.nj=function(a,b){this.log(mm,a,b)};Kb.prototype.info=function(a,b){this.log(Iq,a,b)};Kb.prototype.Pb=function(a,b){this.log(Ej,a,b)};Kb.prototype.xe=function(a,b){this.log(ow,a,b)};Kb.prototype.ZV=function(a){if(!this.Ms(a.lo())){return}var b=this;while(b){b.CN(a);b=b.Jd()}};Kb.prototype.CN=function(a){for(var b=0;b<this.im.length;b++){this.im[b](a)}};Kb.prototype.F_=
function(a){this.C=a};Kb.prototype.vM=function(a,b){this.Ta[a]=b};var Dj={},li=null,Hq=function(){if(!li){li=new Kb("");Dj[""]=li;li.ou(nw)}};var km=function(){Hq();return li},Gq=function(a){Hq();if(a in Dj){return Dj[a]}else{return lw(a)}},lw=function(a){var b=new Kb(a),c=a.split("."),d=c[c.length-1];c.length=c.length-1;var e=c.join("."),f=Gq(e);f.vM(d,b);b.F_(f);Dj[a]=b;return b};var Fj=function(){this.BY=ha()},pw=new Fj;Fj.prototype.K=function(a){this.BY=a};Fj.prototype.reset=function(){this.K(ha())};Fj.prototype.get=function(){return this.BY};var Yf=function(a){this.Oy=a||"";this.G0=pw};Yf.prototype.Iz=true;Yf.prototype.rJ=true;Yf.prototype.oJ=true;Yf.prototype.Ul=function(a){throw Error("Must override formatRecord");};var Eq=function(a){var b=new Date(a.CE());return Gg(b.getFullYear()-2000)+Gg(b.getMonth()+1)+Gg(b.getDate())+" "+Gg(b.getHours())+":"+Gg(b.getMinutes())+":"+Gg(b.getSeconds())+"."+Gg(Math.floor(b.getMilliseconds()/10))},Gg=function(a){if(a<10){return"0"+a}return String(a)},Fq=function(a,b){var c=a.CE()-b,d=c/1000,e=d.toFixed(3),
f=0;if(d<1){f=2}else{while(d<100){f++;d*=10}}while(f-- >0){e=" "+e}return e},jm=function(a){Yf.call(this,a)};jm.k(Yf);jm.prototype.Ul=function(a){var b;switch(a.lo().value){case Jq.value:b="dbg-sh";break;case lm.value:b="dbg-sev";break;case mm.value:b="dbg-w";break;case Iq.value:b="dbg-i";break;case Ej.value:default:b="dbg-f";break}var c=[];c.push(this.Oy," ");if(this.Iz){c.push("[",Eq(a),"] ")}if(this.rJ){c.push("[",Bn(Fq(a,this.G0.get())),"s] ")}if(this.oJ){c.push("[",ca(a.jx()),"] ")}c.push('<span class="',
b,'">',yn(Bn(ca(a.BE()))));if(a.kR()){c.push("<br>",yn(Bn(a.lR())))}c.push("</span><br>");return c.join("")};var nm=function(a){Yf.call(this,a)};nm.k(Yf);nm.prototype.Ul=function(a){var b=[];b.push(this.Oy," ");if(this.Iz){b.push("[",Eq(a),"] ")}if(this.rJ){b.push("[",Fq(a,this.G0.get()),"s] ")}if(this.oJ){b.push("[",a.jx(),"] ")}b.push(a.BE(),"\n");return b.join("")};var Ff=function(){if(!n.GECKO)return;this.tl={};this.CA={};this.Qz=[]};Ff.prototype.Fa=rc("goog.net.xhrMonitor");Ff.prototype.QH=function(a){if(!n.GECKO)return;var b=this.FR(a);this.Fa.xe("Pushing context: "+a+" ("+b+")");this.Qz.push(b)};Ff.prototype.FH=function(){if(!n.GECKO)return;var a=this.Qz.pop();this.Fa.xe("Popping context: "+a);this.v1(a)};Ff.prototype.pW=function(a){if(!n.GECKO)return;var b=Vb(a);this.Fa.Pb("Opening XHR : "+b);for(var c=0;c<this.Qz.length;c++){var d=this.Qz[c];this.qq(this.tl,
d,b);this.qq(this.CA,b,d)}};Ff.prototype.oW=function(a){if(!n.GECKO)return;var b=Vb(a);this.Fa.Pb("Closing XHR : "+b);delete this.CA[b];for(var c in this.tl){qc(this.tl[c],b);if(this.tl[c].length==0){delete this.tl[c]}}};Ff.prototype.v1=function(a){var b=this.CA[a],c=this.tl[a];if(b&&c){this.Fa.xe("Updating dependent contexts");ab(b,function(d){ab(c,function(e){this.qq(this.tl,d,e);this.qq(this.CA,e,d)},this)},this)}};Ff.prototype.FR=function(a){return wa(a)?a:Vb(a)};Ff.prototype.qq=function(a,b,
c){if(!a[b]){a[b]=[]}if(!Ye(a[b],c)){a[b].push(c)}};var Ch=new Ff;var J=function(){};J.k(mb);J.prototype.wi=function(){return null};J.prototype.addEventListener=function(a,b,c,d){q(this,a,b,c,d)};J.prototype.removeEventListener=function(a,b,c,d){L(this,a,b,c,d)};J.prototype.dispatchEvent=function(a){return Lw(this,a)};J.prototype.e=function(){if(!this.da()){mb.prototype.e.call(this);gr(this)}};J.prototype.TC=true;var Jx=function(a){if(a==""){return false}a=a.replace(/"(\\.|[^"\\])*"/g,"");return a==""||!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(a)},Fr=function(a){a=String(a);if(typeof a.parseJSON=="function"){return a.parseJSON()}if(Jx(a)){try{return eval("("+a+")")}catch(b){}}throw Error("Invalid JSON string: "+a);},kn=function(a){return eval("("+a+")")},jn=null,Kx=function(a){if(!jn){jn=new Sg}return jn.JZ(a)},Sg=function(){};Sg.prototype.JZ=function(a){if(a!=null&&typeof a.toJSONString=="function"){return a.toJSONString()}var b=
[];this.sz(a,b);return b.join("")};Sg.prototype.sz=function(a,b){switch(typeof a){case "string":this.zI(a,b);break;case "number":this.LZ(a,b);break;case "boolean":b.push(a);break;case "undefined":b.push("null");break;case "object":if(a==null){b.push("null");break}if(ra(a)){this.KZ(a,b);break}this.MZ(a,b);break;default:throw Error("Unknown type: "+typeof a);}};var hn={'"':'\\"',"\\":"\\\\","/":"\\/","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u000b":"\\u000b"};Sg.prototype.zI=
function(a,b){b.push('"',a.replace(/[\\\"\x00-\x1f\x80-\uffff]/g,function(c){if(c in hn){return hn[c]}var d=c.charCodeAt(0),e="\\u";if(d<16){e+="000"}else if(d<256){e+="00"}else if(d<4096){e+="0"}return hn[c]=e+d.toString(16)}),'"')};Sg.prototype.LZ=function(a,b){b.push(isFinite(a)&&!isNaN(a)?a:"null")};Sg.prototype.KZ=function(a,b){var c=a.length;b.push("[");var d="";for(var e=0;e<c;e++){b.push(d);this.sz(a[e],b);d=","}b.push("]")};Sg.prototype.MZ=function(a,b){b.push("{");var c="";for(var d in a){b.push(c);
this.zI(d,b);b.push(":");this.sz(a[d],b);c=","}b.push("}")};var $d=function(a,b){J.call(this);this.nm=a||1;this.Pu=b||Xe;this.VB=m(this.Y0,this);this.sk=ha()};$d.k(J);$d.prototype.enabled=false;var Xe=N.window,Xv=0.8;$d.prototype.rb=null;$d.prototype.setInterval=function(a){this.nm=a;if(this.rb&&this.enabled){this.stop();this.start()}else if(this.rb){this.stop()}};$d.prototype.Y0=function(){if(this.enabled){var a=ha()-this.sk;if(a>0&&a<this.nm*Xv){this.rb=this.Pu.setTimeout(this.VB,this.nm-a);return}this.kP();if(this.enabled){this.rb=this.Pu.setTimeout(this.VB,
this.nm);this.sk=ha()}}};$d.prototype.kP=function(){this.dispatchEvent("tick")};$d.prototype.start=function(){this.enabled=true;if(!this.rb){this.rb=this.Pu.setTimeout(this.VB,this.nm);this.sk=ha()}};$d.prototype.stop=function(){this.enabled=false;this.Pu.clearTimeout(this.rb);this.rb=null};$d.prototype.e=function(){if(!this.da()){J.prototype.e.call(this);this.stop();this.Pu=null}};var pc=function(a,b,c){if(cf(a)){if(c){a=m(a,c)}}else if(a&&typeof a.ab=="function"){a=m(a.ab,a)}else{throw Error("Invalid listener argument");
}return Xe.setTimeout(a,b||0)},gi=function(a){Xe.clearTimeout(a)};var ba=function(){J.call(this);this.headers=new Da};ba.k(J);ba.prototype.Fa=rc("goog.net.XhrLite");var Pr=[],Ad=function(a,b,c,d,e,f){var g=new ba;Pr.push(g);if(b){q(g,sa.COMPLETE,b)}q(g,sa.READY,Xx.wH(g));if(f){g.zp(f)}g.send(a,c,d,e)};var Xx=function(a){a.e();qc(Pr,a)};ba.prototype.zf=false;ba.prototype.Ra=null;ba.prototype.dv=null;ba.prototype.fy="";ba.prototype.qG="";ba.prototype.Ho=0;ba.prototype.Io="";ba.prototype.Jw=false;ba.prototype.jj=0;ba.prototype.Ud=null;ba.prototype.zp=function(a){this.jj=
Math.max(0,a)};ba.prototype.send=function(a,b,c,d){if(this.zf){throw Error("[goog.net.XhrLite] Object is active with another request");}var e=b||"GET";this.fy=a;this.Io="";this.Ho=0;this.qG=e;this.zf=true;this.Ra=new Qr;this.dv=sn||(sn=Tr());Ch.pW(this.Ra);this.Ra.onreadystatechange=m(this.yt,this);try{this.fa("Opening Xhr");this.Ra.open(e,a,true)}catch(f){this.fa("Error opening Xhr: "+f.message);this.Ol(5,f);return}var g=c?String(c):"",h=this.headers.ha();if(d){Ob(d,function(i,j){h.K(j,i)})}if(e==
"POST"&&!h.sc("Content-Type")){h.K("Content-Type","application/x-www-form-urlencoded;charset=utf-8")}Ob(h,function(i,j){this.Ra.setRequestHeader(j,i)},this);try{if(this.Ud){Xe.clearTimeout(this.Ud);this.Ud=null}if(this.jj>0){this.fa("Will abort after "+this.jj+"ms if incomplete");this.Ud=Xe.setTimeout(m(this.on,this),this.jj)}this.fa("Sending request");this.Jw=false;this.Ra.send(g)}catch(f){this.fa("Send error: "+f.message);this.Ol(5,f)}};ba.prototype.dispatchEvent=function(a){if(this.Ra){Ch.QH(this.Ra);
try{ba.j.dispatchEvent.call(this,a)}finally{Ch.FH()}}else{ba.j.dispatchEvent.call(this,a)}};ba.prototype.on=function(){if(typeof $l=="undefined"){}else if(this.Ra){this.Io="Timed out after "+this.jj+"ms, aborting";this.Ho=8;this.fa(this.Io);this.dispatchEvent(sa.TIMEOUT);this.abort(8)}};ba.prototype.Ol=function(a,b){this.zf=false;if(this.Ra){this.Ra.abort()}this.Io=b;this.Ho=a;this.kD();this.Dq()};ba.prototype.kD=function(){if(!this.Jw){this.Jw=true;this.dispatchEvent(sa.COMPLETE);this.dispatchEvent(sa.ERROR)}};
ba.prototype.abort=function(a){if(this.Ra){this.fa("Aborting");this.zf=false;this.Ra.abort();this.Ho=a||7;this.dispatchEvent(sa.COMPLETE);this.dispatchEvent(sa.ABORT);this.Dq()}};ba.prototype.e=function(){if(!this.da()){if(this.Ra){this.zf=false;this.Ra.abort();this.Dq(true)}ba.j.e.call(this)}};ba.prototype.yt=function(){if(!this.zf){return}if(typeof $l=="undefined"){}else if(this.dv[1]&&this.Ur()==4&&this.Kf()==2){this.fa("Local request error detected and ignored")}else{this.dispatchEvent(sa.READY_STATE_CHANGE);
if(this.He()){this.fa("Request complete");this.zf=false;if(this.Kd()){this.dispatchEvent(sa.COMPLETE);this.dispatchEvent(sa.SUCCESS)}else{this.Ho=6;this.Io=this.XE()+" ["+this.Kf()+"]";this.kD()}this.Dq()}}};ba.prototype.Dq=function(a){if(this.Ra){this.Ra.onreadystatechange=this.dv[0]?ay:null;var b=this.Ra;this.Ra=null;this.dv=null;if(this.Ud){Xe.clearTimeout(this.Ud);this.Ud=null}if(!a){Ch.QH(b);this.dispatchEvent(sa.READY);Ch.FH()}Ch.oW(b)}};ba.prototype.he=function(){return this.zf};ba.prototype.He=
function(){return this.Ur()==4};ba.prototype.Kd=function(){switch(this.Kf()){case 0:case 200:case 304:return true;default:return false}};ba.prototype.Ur=function(){return this.Ra?this.Ra.readyState:0};ba.prototype.Kf=function(){try{return this.Ur()>2?this.Ra.status:-1}catch(a){this.Fa.nj("Can not get status: "+a.message);return-1}};ba.prototype.XE=function(){try{return this.Ur()>2?this.Ra.statusText:""}catch(a){this.Fa.Pb("Can not get status: "+a.message);return""}};ba.prototype.HR=function(){return this.fy};
ba.prototype.Qc=function(){return this.Ra?this.Ra.responseText:""};ba.prototype.QE=function(){return this.Ra?this.Ra.responseXML:null};ba.prototype.Ce=function(){return this.Ra?Fr(this.Ra.responseText):undefined};ba.prototype.getResponseHeader=function(a){return this.Ra&&this.He()?this.Ra.getResponseHeader(a):undefined};ba.prototype.fa=function(a){this.Fa.Pb(a+" ["+this.qG+" "+this.fy+" "+this.Kf()+"]")};var z=function(a){J.call(this);this.X=a||Hg()};z.k(J);var As=0,od="action",ig="change",zs,Ay,Di="Component already rendered",ys="Unable to set parent component",By=function(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close";default:}throw Error("Invalid component state");};z.prototype.Na=
null;z.prototype.X=null;z.prototype.mb=false;z.prototype.b=null;z.prototype.A=null;z.prototype.C=null;z.prototype.Ta=null;z.prototype.af=null;z.prototype.lK=null;z.prototype.wc=function(){return this.Na||(this.Na=this.SR())};z.prototype.r_=function(a){if(this.C&&this.C.af){gg(this.C.af,this.Na);Wr(this.C.af,a,this)}this.Na=a};z.prototype.sa=function(){return"goog.ui.Component"};z.prototype.S=function(){return this.b};z.prototype.hu=function(a){this.b=a};z.prototype.YI=function(a){if(this==a){throw Error(ys);
}if(a&&this.C&&this.C.WD(this.Na)){throw Error(ys);}this.C=a};z.prototype.Jd=function(){return this.C};z.prototype.wi=function(){return this.C};z.prototype.Ie=function(){return this.mb};z.prototype.o=function(){this.b=this.X.createElement("div")};z.prototype.V=function(a){this.Vf(a)};z.prototype.Vf=function(a,b){if(this.mb){throw Error(Di);}if(!this.b){this.o()}if(a){a.insertBefore(this.b,b||null)}else{this.X.de().body.appendChild(this.b)}if(!this.C||this.C.Ie()){this.I()}};z.prototype.ib=function(a){if(this.mb){throw Error(Di);
}else if(a&&this.Nb(a)){this.lK=true;if(!this.X||this.X.de()!=bb(a)){this.X=Hg(a)}this.Ob(a);this.I()}else{throw Error("Invalid element to decorate");}};z.prototype.Nb=function(a){return true};z.prototype.Ob=function(a){this.b=a};z.prototype.I=function(){this.mb=true;this.Vj(function(a){if(a.S()){a.I()}})};z.prototype.J=function(){this.Vj(function(a){if(a.Ie()){a.J()}});this.mb=false};z.prototype.e=function(){if(!this.da()){z.j.e.call(this);if(this.mb){this.J()}this.Vj(function(a){a.e()});if(!this.lK&&
this.b){C(this.b)}this.Ta=null;this.af=null;this.b=null;this.A=null;this.C=null}};z.prototype.fe=function(){return this.A};z.prototype.qa=function(a){this.A=a};z.prototype.SR=function(){return":"+As++};z.prototype.xb=function(a,b){this.mq(a,this.kg(),b)};z.prototype.mq=function(a,b,c){if(a.mb&&(c||!this.mb)){throw Error(Di);}if(b<0||b>this.kg()){throw Error("Child component index out of bounds");}a.YI(this);if(!this.af||!this.Ta){this.af={};this.Ta=[]}Wr(this.af,a.wc(),a);ki(this.Ta,a,b);if(c){if(!this.b){this.o()}var d=
this.Hd(b+1);a.Vf(this.b,d?d.b:null)}else{if(this.mb&&!a.mb&&a.b){a.I()}}};z.prototype.kU=function(){return!(!this.Ta)&&this.Ta.length!=0};z.prototype.kg=function(){return this.Ta?this.Ta.length:0};z.prototype.WD=function(a){return this.af&&a?vn(this.af,a)||null:null};z.prototype.Hd=function(a){return this.Ta?this.Ta[a]||null:null};z.prototype.Vj=function(a,b){if(this.Ta){ab(this.Ta,a,b)}};z.prototype.Eo=function(a){return this.Ta&&a?Xf(this.Ta,a):-1};z.prototype.removeChild=function(a,b){if(a){var c=
wa(a)?a:a.wc();a=this.WD(c);if(c&&a){gg(this.af,c);qc(this.Ta,a);if(b){a.J();if(a.b){C(a.b)}}a.YI(null)}}if(!a){throw Error("Child is not in parent component");}return a};z.prototype.CY=function(a,b){return this.removeChild(this.Hd(a),b)};var Ba=function(a,b){a.className=b},ph=function(a){var b=a.className;return b&&typeof b.split=="function"?b.split(" "):[]},ga=function(a,b){var c=ph(a),d=Bj(arguments,1),e=1;for(var f=0;f<d.length;f++){if(!Ye(c,d[f])){c.push(d[f]);e&=1}else{e&=0}}a.className=c.join(" ");return Boolean(e)},Oa=function(a,b){var c=ph(a),d=Bj(arguments,1),e=0;for(var f=0;f<c.length;f++){if(Ye(d,c[f])){fm(c,f--,1);e++}}a.className=c.join(" ");return e==d.length},Sq=function(a,b,c){var d=ph(a),e=false;for(var f=0;f<d.length;f++){if(d[f]==
b){fm(d,f--,1);e=true}}if(e){d.push(c);a.className=d.join(" ")}return e},yf=function(a,b){return Ye(ph(a),b)},Ze=function(a,b,c){if(c){ga(a,b)}else{Oa(a,b)}};var Vc=function(a,b){if(n.GECKO){a.setAttributeNS("http://www.w3.org/1999/xhtml","role","wairole:"+b);a.roleName=b}};var sc=function(a,b,c){if(n.GECKO){a.setAttributeNS("http://www.w3.org/2005/07/aaa",b,c)}};var ld=function(a,b,c,d){J.call(this);if(!ra(a)||!ra(b)){throw Error("Start and end parameters must be arrays");return}if(a.length!=b.length){throw Error("Start and end points must be the same length");return}this.Rk=a;this.yD=b;this.sD=c;this.oM=d;this.ul=[]};ld.k(J);var Qd="begin",bf="animate",zh=[],Rg=null,xr=function(){Xe.clearTimeout(Rg);var a=ha();ab(zh,function(b){if(b){b.UC(a)}});Rg=zh.length==0?null:Xe.setTimeout(xr,20)},Dx=function(a){if(!Ye(zh,a)){zh.push(a)}if(Rg==null){Rg=Xe.setInterval(xr,
20)}},dk=function(a){qc(zh,a);if(Bq(zh.length)&&Rg!=null){Xe.clearInterval(Rg);Rg=null}};ld.prototype.Ca=0;ld.prototype.OD=0;ld.prototype.rf=0;ld.prototype.Lg=null;ld.prototype.zD=null;ld.prototype.by=null;ld.prototype.play=function(a){if(a||this.Ca==0){this.rf=0;this.ul=this.Rk}else if(this.Ca==1){return false}dk(this);this.Lg=ha();if(this.Ca==-1){this.Lg-=this.sD*this.rf}this.zD=this.Lg+this.sD;this.by=this.Lg;if(this.rf==0){this.bh(Qd)}this.bh("play");if(this.Ca==-1){this.bh("resume")}this.Ca=
1;Dx(this);this.UC(this.Lg);return true};ld.prototype.stop=function(a){dk(this);this.Ca=0;if(a)this.rf=1;this.lA(this.rf);this.bh("stop");this.bh("end")};ld.prototype.pause=function(){if(this.Ca==1){dk(this);this.Ca=-1;this.bh("pause")}};ld.prototype.UC=function(a){this.rf=(a-this.Lg)/(this.zD-this.Lg);if(this.rf>=1)this.rf=1;this.OD=1000/(a-this.by);this.by=a;if(cf(this.oM)){this.lA(this.oM(this.rf))}else{this.lA(this.rf)}if(this.rf==1){this.Ca=0;this.bh("finish");this.bh("end");dk(this)}else if(this.Ca==
1){this.bh(bf)}};ld.prototype.lA=function(a){this.ul=new Array(this.Rk.length);for(var b=0;b<this.Rk.length;b++){this.ul[b]=(this.yD[b]-this.Rk[b])*a+this.Rk[b]}};ld.prototype.bh=function(a){this.dispatchEvent(new dn(a,this))};var dn=function(a,b){Q.call(this,a);this.coords=b.ul;this.x=b.ul[0];this.y=b.ul[1];this.z=b.ul[2];this.duration=b.sD;this.progress=b.rf;this.fps=b.OD;this.state=b.Ca;this.anim=b};dn.k(Q);dn.prototype.DC=function(){return nh(this.coords,Math.round)};var yd=function(a,b,c){this.target=a;this.handle=b||a;this.ub=true;this.cr=false;this.limits=c||new Je;this.$d=this.target.ownerDocument||this.target.document;this.screenX=0;this.screenY=0;this.deltaX=0;this.deltaY=0;q(this.handle,X,this.Cc,false,this);q(this.$d,vd,this.SG,false,this);q(this.$d,hd,this.Rj,false,this)};yd.k(J);yd.prototype.ax=function(){return this.ub};yd.prototype.Kb=function(a){this.ub=a};yd.prototype.e=function(){if(this.da())return;J.prototype.e.call(this);L(this.handle,X,this.Cc,
false,this);L(this.$d,vd,this.SG,false,this);L(this.$d,hd,this.Rj,false,this);delete this.target;delete this.handle};yd.prototype.Cc=function(a){if(this.ub&&!this.cr){var b=this.dispatchEvent(new xi("start",this,a.clientX,a.clientY,a));if(b!==false){this.screenX=a.screenX;this.screenY=a.screenY;this.deltaX=this.target.offsetLeft;this.deltaY=this.target.offsetTop;this.cr=true;a.preventDefault()}}};yd.prototype.Rj=function(a){if(this.cr){this.cr=false;var b=this.uG(this.deltaX),c=this.vG(this.deltaY);
this.dispatchEvent(new xi("end",this,a.clientX,a.clientY,a,b,c))}};yd.prototype.SG=function(a){if(this.cr&&this.ub){var b=a.screenX-this.screenX,c=a.screenY-this.screenY;this.deltaX+=b;this.deltaY+=c;var d=this.uG(this.deltaX),e=this.vG(this.deltaY);this.screenX=a.screenX;this.screenY=a.screenY;var f=this.dispatchEvent(new xi("beforedrag",this,a.clientX,a.clientY,a,d,e));if(f!==false){this.UO(d,e);this.dispatchEvent(new xi("drag",this,a.clientX,a.clientY,a,d,e));a.preventDefault()}}};yd.prototype.uG=
function(a){var b=this.limits,c=typeof b.left!="undefined"?b.left:null,d=typeof b.width!="undefined"?b.width:0,e=c!=null?c+d:Infinity,f=c!=null?c:-Infinity;return Math.min(e,Math.max(f,a))};yd.prototype.vG=function(a){var b=this.limits,c=typeof b.top!="undefined"?b.top:null,d=typeof b.height!="undefined"?b.height:0,e=c!=null?c+d:Infinity,f=c!=null?c:-Infinity;return Math.min(e,Math.max(f,a))};yd.prototype.UO=function(a,b){this.target.style.left=a+"px";this.target.style.top=b+"px"};var xi=function(a,
b,c,d,e,f,g){Q.call(this,a);this.type=a;this.clientX=c;this.clientY=d;this.browserEvent=e;this.left=Ca(f)?f:b.deltaX;this.top=Ca(g)?g:b.deltaY;this.dragger=b};xi.k(Q);var Gn,V=function(a,b,c){a.style[xy(b)]=c};var uy=function(a,b){var c=bb(a);if(c.defaultView&&c.defaultView.getComputedStyle){var d=c.defaultView.getComputedStyle(a,"");if(d){return d[b]}}return null};var Hf=function(a,b){return uy(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style[b]},ss=function(a){return Hf(a,"backgroundColor")},ef=function(a,b,c){var d,e;if(b instanceof Fa){d=b.x;e=b.y}else{d=b;e=c}a.style.left=typeof d=="number"?Math.round(d)+"px":d;a.style.top=typeof e=="number"?Math.round(e)+
"px":e};var md=function(a){var b;if(a){if(a.nodeType==9){b=a}else{b=bb(a)}}else{b=qm()}if(n.IE&&b.compatMode!="CSS1Compat"){return b.body}return b.documentElement},Ja=function(a){var b=bb(a),c=n.GECKO&&b.getBoxObjectFor&&Hf(a,"position")=="absolute"&&(a.style.top==""||a.style.left=="");if(typeof Gn=="undefined"){Gn=n.CAMINO&&!n.isVersion("1.8.0.11")}var d=new Fa(0,0),e=md(b);if(a==e){return d}var f=null,g;if(a.getBoundingClientRect){g=a.getBoundingClientRect();var h=e.scrollTop,i=e.scrollLeft;d.x=
g.left+i;d.y=g.top+h}else if(b.getBoxObjectFor&&!c&&!Gn){g=b.getBoxObjectFor(a);var j=b.getBoxObjectFor(e);d.x=g.screenX-j.screenX;d.y=g.screenY-j.screenY}else{d.x=a.offsetLeft;d.y=a.offsetTop;f=a.offsetParent;if(f!=a){while(f){d.x+=f.offsetLeft;d.y+=f.offsetTop;f=f.offsetParent}}if(n.OPERA||n.SAFARI&&Hf(a,"position")=="absolute"){d.y-=b.body.offsetTop}f=a.offsetParent;while(f&&f!=b.body){d.x-=f.scrollLeft;if(!n.OPERA||f.tagName!="TR"){d.y-=f.scrollTop}f=f.offsetParent}}return d};var Gh=function(a){return Ja(a).y},
us=function(a,b){var c=mk(a),d=mk(b);return new Fa(c.x-d.x,c.y-d.y)},mk=function(a){var b=new Fa;if(a.nodeType==1){if(a.getBoundingClientRect){var c=a.getBoundingClientRect();b.x=c.left;b.y=c.top}else{var d=bb(a),e=md(d),f=Ja(a);b.x=f.x-e.scrollLeft;b.y=f.y-e.scrollTop}}else{b.x=a.clientX;b.y=a.clientY}return b},Ci=function(a,b,c){var d=Ja(a);if(b instanceof Fa){c=b.y;b=b.x}var e=b-d.x,f=c-d.y;ef(a,a.offsetLeft+e,a.offsetTop+f)},Ic=function(a,b,c){var d;if(b instanceof cb){d=b.height;b=b.width}else{d=
c}a.style.width=typeof b=="number"?Math.round(b)+"px":b;a.style.height=typeof d=="number"?Math.round(d)+"px":d},Wa=function(a){if(Hf(a,"display")!="none"){return new cb(a.offsetWidth,a.offsetHeight)}var b=a.style,c=b.visibility,d=b.position;b.visibility="hidden";b.position="absolute";b.display="";var e=a.offsetWidth,f=a.offsetHeight;b.display="none";b.position=d;b.visibility=c;return new cb(e,f)},ts=function(a){var b=Ja(a),c=Wa(a);return new Je(b.x,b.y,c.width,c.height)},xy=function(a){return String(a).replace(/\-([a-z])/g,
function(b,c){return c.toUpperCase()})};var Ne=function(a,b){var c=a.style;if("opacity"in c){c.opacity=b}else if("MozOpacity"in c){c.MozOpacity=b}else if("KhtmlOpacity"in c){c.KhtmlOpacity=b}else if("filter"in c){c.filter="alpha(opacity="+b*100+")"}},Hn=function(a,b){var c=a.style;if("filter"in c){c.filter='progid:DXImageTransform.Microsoft.AlphaImageLoader(src="'+b+'", sizingMethod="crop")'}else{c.backgroundImage="url("+b+")";c.backgroundPosition="top left";c.backgroundRepeat="no-repeat"}},s=function(a,
b){a.style.display=b?"":"none"};var wy=function(a){a.style.position="relative";if(n.IE){a.style.zoom="1";a.style.display="inline"}else if(n.GECKO){a.style.display=n.isVersion("1.9a")?"inline-block":"-moz-inline-box"}else{a.style.display="inline-block"}},vs=function(a){return"rtl"==Hf(a,"direction")},vy=function(){if(n.GECKO){return"MozUserSelect"}else if(n.SAFARI){return"WebkitUserSelect"}return null};var nk=function(a,b){var c=a.getElementsByTagName("*");if(n.GECKO||n.SAFARI){var d=vy(),e=b?"none":
"";a.style[d]=e;for(var f=0,g;g=c[f];f++){g.style[d]=e}}else if(n.IE||n.OPERA){var e=b?"on":"";a.setAttribute("unselectable",e);for(var f=0,g;g=c[f];f++){g.setAttribute("unselectable",e)}}};var K=function(a,b,c){z.call(this,c);this.La=a||"modal-dialog";this.vA=!(!b);this.Af=Fs};K.k(z);K.prototype.La=null;K.prototype.vA=false;K.prototype.QG=true;K.prototype.pD=true;K.prototype.Ck=0.3;K.prototype.Te="";K.prototype.Oc="";K.prototype.Af=null;K.prototype.tc=null;K.prototype.ja=false;K.prototype.Fc=null;K.prototype.Gc=null;K.prototype.tf=null;K.prototype.Yf=null;K.prototype.gA=null;K.prototype.Sk=null;K.prototype.cf=null;K.prototype.se=null;K.prototype.sa=function(){return"goog.ui.Dialog"};
K.prototype.kn=function(a){this.Te=a;if(this.Yf){U(this.Yf,a)}};K.prototype.De=function(){return this.Te};K.prototype.Bc=function(a){this.Oc=a;if(this.cf){this.cf.innerHTML=a}};K.prototype.Yc=function(){return this.Oc};K.prototype.$l=function(){if(!this.Ie()){this.V()}return this.cf};K.prototype.$r=function(){if(!this.Ie()){this.V()}return this.Yf};K.prototype.rO=function(){var a=new yd(this.b,this.tf);ga(this.tf,this.La+"-title-draggable");return a};K.prototype.o=function(){this.IG();this.b=this.X.o("div",
{className:this.La,tabIndex:0},this.tf=this.X.o("div",{className:this.La+"-title",id:this.wc()},this.Yf=this.X.o("span",{className:this.La+"-title-text"},this.Te),this.Sk=this.X.o("span",{className:this.La+"-title-close"})),this.cf=this.X.o("div",{className:this.La+"-content"}),this.se=this.X.o("div",{className:this.La+"-buttons"}));this.gA=this.tf.id;Vc(this.b,"dialog");sc(this.b,"labelledby",this.gA);if(this.Oc){this.cf.innerHTML=this.Oc}s(this.b,false);if(this.Af){this.Af.Lv(this.se)}};K.prototype.IG=
function(){if(this.vA&&!this.Gc){this.Gc=this.X.o("iframe",{frameborder:0,style:"border: 0",className:this.La+"-bg"});s(this.Gc,false);Ne(this.Gc,0)}else if(!this.vA&&this.Gc){C(this.Gc);this.Gc=null}if(this.QG&&!this.Fc){this.Fc=this.X.o("div",{className:this.La+"-bg"});Ne(this.Fc,this.Ck);s(this.Fc,false)}else if(!this.QG&&this.Fc){C(this.Fc);this.Fc=null}};K.prototype.V=function(a){if(this.Ie()){throw Error(Di);}if(!this.b){this.o()}var b=a||this.X.de().body;this.ZH(b);K.j.V.call(this,b)};K.prototype.ZH=
function(a){if(this.Gc){a.appendChild(this.Gc)}if(this.Fc){a.appendChild(this.Fc)}};K.prototype.Nb=function(a){return a&&a.tagName&&a.tagName=="DIV"&&K.j.Nb.call(this,a)};K.prototype.Ob=function(a){this.b=a;ga(this.b,this.La);var b=this.La+"-content";this.cf=qh(this.b,function(g){return g.nodeType==1&&yf(g,b)});if(this.cf){this.Oc=this.cf.innerHTML}else{this.cf=this.X.o("div",{className:b});if(this.Oc){this.cf.innerHTML=this.Oc}this.b.appendChild(this.cf)}var c=this.La+"-title",d=this.La+"-title-text",
e=this.La+"-title-close";this.tf=qh(this.b,function(g){return g.nodeType==1&&yf(g,c)});if(this.tf){this.Yf=qh(this.tf,function(g){return g.nodeType==1&&yf(g,d)});this.Sk=qh(this.tf,function(g){return g.nodeType==1&&yf(g,e)})}else{this.tf=this.X.o("div",{className:c});this.b.insertBefore(this.tf,this.cf)}if(this.Yf){this.Te=$f(this.Yf)}else{this.Yf=this.X.o("span",{className:d},this.Te);this.tf.appendChild(this.Yf)}sc(this.b,"labelledby",this.gA);if(!this.Sk){this.Sk=this.X.o("span",{className:e},
this.Te);this.tf.appendChild(this.Sk)}var f=this.La+"-buttons";this.se=qh(this.b,function(g){return g.nodeType==1&&yf(g,f)});if(this.se){this.Af=new Gb(this.X);this.Af.ib(this.se)}else{this.se=this.X.o("div",{className:f});this.b.appendChild(this.se);if(this.Af){this.Af.Lv(this.se)}}this.IG();this.ZH(bb(this.b).body)};K.prototype.I=function(){K.j.I.call(this);if(this.pD&&!this.tc){this.tc=this.rO()}q(this.Sk,ta,this.mH,false,this);q(this.se,ta,this.fH,false,this);Vc(this.b,"dialog");if(this.Yf.id!==
""){sc(this.b,"labelledby",this.Yf.id)}};K.prototype.J=function(){L(this.Sk,ta,this.mH,this);L(this.se,ta,this.fH,this);if(this.Oa()){this.ma(false)}if(this.tc){this.tc.e();this.tc=null}K.j.J.call(this)};K.prototype.ma=function(a){if(a==this.ja){return}var b=this.X.de(),c=Ig(b)||window;if(!this.Ie()){this.V(b.body)}if(a){this.eI();this.pb();q(b,ce,this.Uc,true,this);q(c,ee,this.Zo,true,this)}else{L(b,ce,this.Uc,true,this);L(c,ee,this.Zo,true,this)}if(this.Gc){s(this.Gc,a)}if(this.Fc){s(this.Fc,a)}s(this.b,
a);if(a&&this.fo().fE()){var d=this.se.getElementsByTagName("button");for(var e=0,f;f=d[e];e++){if(f.name==this.fo().fE()){f.focus();break}}}this.ja=a};K.prototype.Oa=function(){return this.ja};K.prototype.eI=function(){if(this.Gc){s(this.Gc,false)}if(this.Fc){s(this.Fc,false)}var a=this.X.de(),b=Ig(a)||window,c=gd(b),d=a.body.scrollWidth,e=Math.max(a.body.scrollHeight,c.height);if(this.Gc){s(this.Gc,true);Ic(this.Gc,d,e)}if(this.Fc){s(this.Fc,true);Ic(this.Fc,d,e)}if(this.pD){var f=Wa(this.b);this.tc.limits=
new Je(0,0,d-f.width,e-f.height)}};K.prototype.pb=function(){var a=this.X.de(),b=Ig(a)||window,c=rh(b),d=c.x,e=c.y,f=Wa(this.b),g=gd(b),h=Math.max(d+g.width/2-f.width/2,0),i=Math.max(e+g.height/2-f.height/2,0);ef(this.b,h,i)};K.prototype.mH=function(a){var b=this.fo(),c=b.Hr();if(c){var d=b.get(c);if(this.dispatchEvent(new pk(c,d))){this.ma(false)}}else{this.ma(false)}};K.prototype.e=function(){if(!this.da()){K.j.e.call(this);if(this.Fc){C(this.Fc);this.Fc=null}if(this.Gc){C(this.Gc);this.Gc=null}}};
K.prototype.Lk=function(a){this.Af=a;if(this.se){this.Af.Lv(this.se)}};K.prototype.fo=function(){return this.Af};K.prototype.fH=function(a){if(a.target.tagName=="BUTTON"){var b=a.target.name,c=this.fo().get(b);if(this.dispatchEvent(new pk(b,c))){this.ma(false)}}};K.prototype.Uc=function(a){if(a.keyCode==27){var b=this.fo();if(b.Hr()){var c=b.get(b.Hr());if(this.dispatchEvent(new pk(b.Hr(),c))){this.ma(false)}}else{this.ma(false)}}};K.prototype.Zo=function(a){this.eI()};var pk=function(a,b){this.type=
qk;this.key=a;this.caption=b};pk.k(Q);var qk="dialogselect",Gb=function(a){this.X=a||Hg();Da.call(this)},Fs,Gs,Fy,Ey;Gb.k(Da);Gb.prototype.lw=null;Gb.prototype.b=null;Gb.prototype.zq=null;Gb.prototype.K=function(a,b,c,d){Da.prototype.K.call(this,a,b);if(c){this.lw=a}if(d){this.zq=a}};Gb.prototype.Lv=function(a){this.b=a;this.V()};Gb.prototype.V=function(){if(this.b){this.b.innerHTML="";var a=Hg(this.b);Ob(this,function(b,c){this.b.appendChild(a.o("button",{name:c},b))},this)}};Gb.prototype.ib=function(a){if(!a||
a.nodeType!=1){return}this.b=a;var b=this.b.getElementsByTagName("button");for(var c=0,d,e,f;d=b[c];c++){e=d.name||d.id;f=$f(d)||d.value;if(e){this.K(e,f,c==0,d.name==Hh)}}};Gb.prototype.sp=function(a){this.lw=a};Gb.prototype.fE=function(){return this.lw};Gb.prototype.Hr=function(){return this.zq};var Hh="cancel";(function(){var a=ea("OK"),b=ea("Cancel"),c=ea("Yes"),d=ea("No"),e=ea("Save"),f=ea("Continue"),g=new Gb;g.K("ok",a,true);g.K(Hh,b,false,true);Fs=g;var h=new Gb;h.K("yes",c,true);h.K("no",
d,false,true);Gs=h;var i=new Gb;i.K("yes",c);i.K("no",d,true);i.K(Hh,b,false,true);Fy=i;var j=new Gb;j.K("continue",f);j.K("save",e);j.K(Hh,b,true,true);Ey=j})();;;var jc=function(a,b,c,d,e){ld.call(this,b,c,d,e);this.element=a};jc.k(ld);var ek=function(a,b,c,d,e){jc.apply(this,arguments);if(b.length!=2||c.length!=2){throw"[goog.fxdhtml.Slide] Start and end points must be 2D";return}var f=[Qd,bf,"end"];q(this,f,this.MW,false,this)};ek.k(jc);ek.prototype.MW=function(a){this.element.style.left=Math.round(a.x)+"px";this.element.style.top=Math.round(a.y)+"px"};var fn=function(a,b,c,d){var e=[a.offsetLeft,a.offsetTop];q(this,Qd,this.T_,false,this);ek.call(this,a,
e,b,c,d)};fn.k(ek);fn.prototype.T_=function(a){this.Rk=[this.element.offsetLeft,this.element.offsetTop]};var gn=function(a,b,c,d,e){jc.apply(this,arguments);if(b.length!=2||c.length!=2){throw"[goog.fxdhtml.Slide] Start and end points must be 2D";return}var f=[Qd,bf,"end"];q(this,f,this.St,false,this);this.Ke=Math.max(this.yD[0],this.Rk[0]);this.ad=Math.max(this.yD[1],this.Rk[1])};gn.k(jc);gn.prototype.St=function(a){this.VN(Math.round(a.x),Math.round(a.y),this.Ke,this.ad);this.element.style.width=
Math.round(a.x)+"px";this.element.style.marginLeft=Math.round(a.x)-this.Ke+"px";this.element.style.marginTop=Math.round(a.y)-this.ad+"px"};gn.prototype.VN=function(a,b,c,d){this.element.style.clip="rect("+(d-b)+"px "+c+"px "+d+"px "+(c-a)+"px)"};var Er=function(a,b,c,d,e){jc.apply(this,arguments);if(b.length!=2||c.length!=2){throw"[goog.fx.dom.Scroll] Start and end points must be 2D";return}var f=[Qd,bf,"end"];q(this,f,this.nZ,false,this)};Er.k(jc);Er.prototype.nZ=function(a){this.element.scrollLeft=
Math.round(a.x);this.element.scrollTop=Math.round(a.y)};var Br=function(a,b,c,d,e){jc.apply(this,arguments);if(b.length!=2||c.length!=2){throw"[goog.fx.dom.Resize] Start and end points must be 2D";return}var f=[Qd,bf,"end"];q(this,f,this.St,false,this)};Br.k(jc);Br.prototype.St=function(a){this.element.style.width=Math.round(a.x)+"px";this.element.style.height=Math.round(a.y)+"px"};var Dr=function(a,b,c,d,e){jc.call(this,a,[b],[c],d,e);var f=[Qd,bf,"end"];q(this,f,this.VY,false,this)};Dr.k(jc);Dr.prototype.VY=
function(a){this.element.style.width=Math.round(a.x)+"px"};var Cr=function(a,b,c,d,e){jc.call(this,a,[b],[c],d,e);var f=[Qd,bf,"end"];q(this,f,this.TY,false,this)};Cr.k(jc);Cr.prototype.TY=function(a){this.element.style.height=Math.round(a.x)+"px"};var ke=function(a,b,c,d,e){if(df(b))b=[b];if(df(c))c=[c];jc.call(this,a,b,c,d,e);if(b.length!=1||c.length!=1){throw"[goog.fx.dom.Fade] Start and end points must be 1D";return}var f=[Qd,bf,"end"];q(this,f,this.SP,false,this)};ke.k(jc);ke.prototype.SP=function(a){Ne(this.element,
a.x)};ke.prototype.show=function(a){this.element.style.display=""};ke.prototype.hide=function(a){this.element.style.display="none"};var Gx=function(a,b,c){ke.call(this,a,1,0,b,c)};Gx.k(ke);var Ex=function(a,b,c){ke.call(this,a,0,1,b,c)};Ex.k(ke);var Hx=function(a,b,c){ke.call(this,a,1,0,b,c);q(this,Qd,this.show,false,this);q(this,"end",this.hide,false,this)};Hx.k(ke);var Fx=function(a,b,c){ke.call(this,a,0,1,b,c);q(this,Qd,this.show,false,this)};Fx.k(ke);var zr=function(a,b,c,d,e){jc.apply(this,arguments);
if(b.length!=3||c.length!=3){throw"[goog.fx.dom.BgColorTransform] Start and end points must be 3D";return}var f=[Qd,bf,"end"];q(this,f,this.fu,false,this)};zr.k(jc);zr.prototype.fu=function(a){var b="rgb("+a.DC().join(",")+")";this.element.style.backgroundColor=b};var Ar=function(a,b,c,d,e){jc.apply(this,arguments);if(b.length!=3||c.length!=3){throw"[goog.fx.dom.ColorTransform] Start and end points must be 3D";return}var f=[Qd,bf,"end"];q(this,f,this.fu,false,this)};Ar.k(jc);Ar.prototype.fu=function(a){var b=
"rgb("+a.DC().join(",")+")";this.element.style.color="rgb("+b+")"};var ob=function(a){if(a){this.Wf(a)}};ob.prototype.Wf=function(a,b,c,d){this.Sd=a;if(!c&&!d){if(kc(a,"?")){this.DN=true;a=a.substring(0,a.length-1)}if(kc(a,"()")){if(kc(a,"name()")||kc(a,"count()")||kc(a,"position()")){var e=a.lastIndexOf("/");if(e!=-1){this.Lw=a.substring(e+1);a=a.substring(0,e)}else{this.Lw=a;a="."}if(this.Lw=="count()"){this.z3=true}}}}this.Db=b||a.split("/");this.wb=this.Db.length;this.sk=this.Db[this.wb-1];this.pa=this.Db[0];if(this.wb==1){this.kI=this;this.Hs=Xc(a,"$")}else{this.kI=
Cm(this.pa,null,this,null);this.Hs=this.kI.Hs;this.pa=this.kI.pa}if(this.wb==1&&!this.Hs){this.mV=a=="."||a=="";this.rV=Xc(a,"@");this.jV=a=="*|text()";this.iV=a=="@*";this.kV=a=="*"}};ob.prototype.Ib=function(){return this.Sd};ob.prototype.Jd=function(){if(!this.r4){if(this.wb>1){this.sH=Cm(null,this.Db.slice(0,this.Db.length-1),this,null)}this.r4=true}return this.sH};ob.prototype.EE=function(){if(!this.g4){if(this.wb>1){this.ZG=Cm(null,this.Db.slice(1),null,this)}this.g4=true}return this.ZG};ob.prototype.H=
function(a){if(a==null){a=H()}else if(this.Hs){a=a.Lr?a.Lr():H()}if(this.z3){var b=this.Be(a);return b.r()}if(this.wb==1){return a.Y(this.pa)}else if(this.wb==0){return a.get()}var c=a.R(this.pa);if(c==null){return null}else{return this.EE().H(c)}};ob.prototype.Be=function(a,b){return this.lx(a,false,b)};ob.prototype.zb=function(a,b){return this.lx(a,true,b)};ob.prototype.lx=function(a,b,c){if(a==null){a=H()}else if(this.Hs){a=a.Lr?a.Lr():H()}if(this.wb==0&&b){return a}else if(this.wb==0&&!b){return new eb([a])}else if(this.wb==
1){if(b){return a.R(this.pa,c)}else{var d=a.R(this.pa);if(d&&d.Kc()){return d.ea()}else{return a.ea(this.pa)}}}else{var e=a.R(this.pa,c);if(e==null&&b){return null}else if(e==null&&!b){return new Kd}return this.EE().lx(e,b,c)}};ob.prototype.DN=false;ob.prototype.Db=[];ob.prototype.wb=null;ob.prototype.pa=null;ob.prototype.sk=null;ob.prototype.mV=false;ob.prototype.rV=false;ob.prototype.jV=false;ob.prototype.iV=false;ob.prototype.kV=false;ob.prototype.Lw=null;ob.prototype.sH=null;ob.prototype.ZG=null;
var D=function(a){var b=Kj[a];if(b==null){b=new ob(a);Kj[a]=b}return b},Cm=function(a,b,c,d){var e=a||b.join("/"),f=Kj[e];if(f==null){f=new ob;f.Wf(e,b,c,d);Kj[e]=f}return f},Kj={};var RA=D("."),OA=D("*|text()"),PA=D("*"),NA=D("@*"),SA=D("name()"),QA=D("count()"),TA=D("position()");var be=function(){};be.prototype.get=function(){};be.prototype.K=function(a){};be.prototype.ea=function(a){};be.prototype.R=function(a){};be.prototype.Y=function(a){};be.prototype.Ha=function(a,b){};be.prototype.ya=function(){};be.prototype.Jh=function(a){};be.prototype.Ua=function(){};be.prototype.Ea=function(){};be.prototype.Kc=function(){};var mi="NOT_LOADED",Af=function(){};Af.prototype.K=function(a){};Af.prototype.ea=function(a){return new Kd};Af.prototype.R=function(a,b){return null};Af.prototype.Y=
function(a){return null};Af.prototype.Ua=function(){var a="",b=this.ya();if(this.mo&&this.mo()){a=this.mo().Ua()+(b.indexOf("[")!=-1?"":"/")}return a+b};Af.prototype.Ea=function(){};Af.prototype.mo=null;var sh=function(){};sh.prototype.add=function(a){};sh.prototype.get=function(a){};sh.prototype.Da=function(a){};sh.prototype.r=function(){};sh.prototype.Kh=function(a,b){};sh.prototype.removeNode=function(a){};var eb=function(a){this.n={};this.Tc=[];this.ok={};if(a){for(var b=0,c;c=a[b];b++){this.add(c)}}};
eb.prototype.add=function(a){this.Tc.push(a);var b=a.ya();if(b!=null){this.n[b]=a;this.ok[b]=this.Tc.length-1}};eb.prototype.get=function(a){return this.n[a]||null};eb.prototype.Da=function(a){return this.Tc[a]||null};eb.prototype.r=function(){return this.Tc.length};eb.prototype.Kh=function(a,b){if(b==null){this.removeNode(a)}else{var c=this.ok[a];if(c!=null){this.n[a]=b;this.Tc[c]=b}else{this.add(b)}}};eb.prototype.removeNode=function(a){var b=this.ok[a];if(b!=null){this.Tc.splice(b,1);delete this.n[a];
delete this.ok[a];for(var c in this.ok){if(this.ok[c]>b){this.ok[c]--}}}return b!=null};eb.prototype.indexOf=function(a){return this.ok[a]};var Kd=function(){eb.call(this)};Kd.k(eb);Kd.prototype.add=function(a){throw Error("Can't add to EmptyNodeList");};var fb=rc("goog.ds"),ni=function(a,b){var c=function(){};c.prototype=a;var d=new c;d.ya=function(){return b};return d};var Lb=function(){this.On=new eb;this.mN=new Da;this.AG={};this.Zs={};this.Cn={};this.g3=0;this.TF={}},Bm=null;Lb.k(be);var H=function(){if(!Bm){Bm=new Lb}return Bm};Lb.prototype.gd=function(a,b,c){var d=!(!b),e=c||a.ya();if(!Xc(e,"$")){e="$"+e}a.Jh(e);this.On.add(a);this.mN.K(e,d)};Lb.prototype.UM=function(a,b){if(!this.GB){this.GB=m(this.MV,this)}if(this.Cn[a]){var c=this.Cn[a].Ib();this.XH(this.GB,c+"/...",a)}this.Cn[a]=D(b);this.addListener(this.GB,b+"/...",a);this.ra(a)};Lb.prototype.MV=function(a,
b){var c=this.Cn[b];if(c){var d=c.Ib();if(a.indexOf(d)==0){this.ra(b+a.substring(d.length))}else{this.ra(b)}}};Lb.prototype.Mr=function(a){if(this.Cn[a]){return this.Cn[a].zb()}else{return this.On.get(a)}};Lb.prototype.get=function(){return this.On};Lb.prototype.K=function(a){throw Error("Can't set on DataManager");};Lb.prototype.ea=function(a){if(a){return new eb([this.R(a)])}else{return this.On}};Lb.prototype.R=function(a){return this.Mr(a)};Lb.prototype.Y=function(a){var b=this.Mr(a);return b?
b.get():null};Lb.prototype.ya=function(){return""};Lb.prototype.Ua=function(){return""};Lb.prototype.Ea=function(){var a=this.On.r();for(var b=0;b<a;b++){var c=this.On.Da(b),d=this.mN.get(c.ya());if(d){c.Ea()}}};Lb.prototype.Kc=function(){return false};Lb.prototype.addListener=function(a,b,c){var d=0;if(kc(b,"/...")){d=1000;b=b.substring(0,b.length-4)}else if(kc(b,"/*")){d=1;b=b.substring(0,b.length-2)}c=c||"";var e=b+":"+c+":"+Vb(a),f={dataPath:b,id:c,fn:a},g=D(b),h=Vb(a);if(!this.Zs[h]){this.Zs[h]=
{}}this.Zs[h][e]={listener:f,items:[]};while(g){var i={listener:f,maxAncestors:d},j=this.AG[g.Ib()];if(j==null){j={};this.AG[g.Ib()]=j}j[e]=i;d=0;g=g.Jd();this.Zs[h][e].items.push({key:e,obj:j})}};Lb.prototype.zB=function(a,b,c){var d=b.indexOf("*");if(d==-1){this.addListener(a,b,c);return}var e=b.substring(0,d)+"...",f="$";if(kc(b,"/...")){b=b.substring(0,b.length-4);f=""}var g=jk(b),h=g.replace(/\\\*/g,"([^\\/]+)")+f,i=new RegExp(h),j=function(t,w){var y=i.exec(t);if(y){y.shift();a(t,c,y)}};this.addListener(j,
e,c);var l=Vb(a);if(!this.TF[l]){this.TF[l]={}}var p=b+":"+c;this.TF[l][p]={listener:{dataPath:e,fn:j,id:c}}};Lb.prototype.XH=function(a,b,c){if(b&&kc(b,"/...")){b=b.substring(0,b.length-4)}else if(b&&kc(b,"/*")){b=b.substring(0,b.length-2)}this.HY(this.Zs,false,a,b,c)};Lb.prototype.HY=function(a,b,c,d,e){var f=Vb(c),g=a[f];if(g!=null){for(var h in g){var i=g[h],j=i.listener;if((!d||d==j.dataPath)&&(!e||e==j.id)){if(b){this.XH(j.fn,j.dataPath,j.id)}if(i.items){for(var l=0;l<i.items.length;l++){var p=
i.items[l];delete p.obj[p.key]}}delete g[h]}}}};Lb.prototype.dZ=function(a){if(this.hD){throw Error("Can not nest calls to runWithoutFiringDataChanges");}this.hD=true;try{a()}finally{this.hD=false}};Lb.prototype.ra=function(a){if(this.hD){return}var b=D(a),c=0;while(b){var d=this.AG[b.Ib()];if(d){for(var e in d){var f=d[e],g=f.listener;if(c<=f.maxAncestors){g.fn(a,g.id)}}}c++;b=b.Jd()}this.g3++};var qa=function(a,b,c){this.C=c;this.kd=b;this.cJ(a)};qa.prototype.cJ=function(a){this.pa=a;this.qc=null};qa.prototype.get=function(){return!Fc(this.pa)?this.pa:this.ea()};qa.prototype.K=function(a){if(a&&Fc(this.pa)){throw Error("Can't set group nodes to new values yet");}if(this.C){this.C.pa[this.kd]=a}this.pa=a;this.qc=null;H().ra(this.Ua())};qa.prototype.ea=function(a){if(!this.pa){return new Kd}if(!a||a=="*"){this.df(false);return this.qc}else if(a.indexOf("*")==-1){if(this.pa[a]!=null){return new eb([this.R(a)])}else{return new Kd}}else{throw new Error("Selector not supported yet ("+
a+")");}};qa.prototype.df=function(a){if(this.qc&&!a){return}if(!Fc(this.pa)){this.qc=new Kd;return}var b=new eb;if(this.pa!=null){var c;if(ra(this.pa)){var d=this.pa.length;for(var e=0;e<d;e++){var f=this.pa[e],g=f.id,h=g!=null?String(g):"["+e+"]";c=new qa(f,h,this);b.add(c)}}else{for(var h in this.pa){var i=this.pa[h];if(i.ya){b.add(i)}else if(!cf(i)){c=new qa(i,h,this);b.add(c)}}}}this.qc=b};qa.prototype.R=function(a,b){if(!this.pa){return null}var c=this.ea().get(a);if(!c&&b){var d={};if(ra(this.pa)){d.id=
a;this.pa.push(d)}else{this.pa[a]=d}c=new qa(d,a,this);if(this.qc){this.qc.add(c)}}return c};qa.prototype.Y=function(a){if(this.qc){var b=this.ea().get(a);return b?b.get():null}else if(this.pa){return this.pa[a]}else{return null}};qa.prototype.Ha=function(a,b){var c=null,d=null,e=false;if(b!=null){if(b.ya){d=b;d.C=this}else{if(ra(b)||Fc(b)){d=new qa(b,a,this)}else{d=new th(this.pa,a,this)}}}if(ra(this.pa)){this.df();var f=this.qc.indexOf(a);if(b==null){var g=this.qc.get(a);if(g){c=g.Ua()}this.pa.splice(f,
1)}else{if(f){this.pa[f]=b}else{this.pa.push(b)}}if(f==null){e=true}this.qc.Kh(a,d)}else if(Fc(this.pa)){if(b==null){this.df();var g=this.qc.get(a);if(g){c=g.Ua()}delete this.pa[a]}else{if(!this.pa[a]){e=true}this.pa[a]=b}if(this.qc){this.qc.Kh(a,d)}}var h=H();if(d){h.ra(d.Ua());if(e&&this.Kc()){h.ra(this.Ua());h.ra(this.Ua()+"/count()")}}else if(c){h.ra(c);if(this.Kc()){h.ra(this.Ua());h.ra(this.Ua()+"/count()")}}return d};qa.prototype.ya=function(){return this.kd};qa.prototype.Jh=function(a){this.kd=
a};qa.prototype.Ua=function(){var a="";if(this.C){a=this.C.Ua()+"/"}return a+this.kd};qa.prototype.Ea=function(){};qa.prototype.Kc=function(){return this.A3!=null?this.A3:ra(this.pa)};var th=function(a,b,c){Af.call(this);this.kd=b;this.C=a;this.q4=c||this.C};th.k(Af);th.prototype.get=function(){return this.C[this.kd]};th.prototype.K=function(a){var b=this.C[this.kd];this.C[this.kd]=a;if(b!=a){H().ra(this.Ua())}};th.prototype.ya=function(){return this.kd};th.prototype.mo=function(){return this.q4};var B=function(a,b){var c;if(a instanceof B){this.Ok(b==null?a.yR():b);this.yp(a.nx());this.xu(a.bF());this.gu(a.am());this.tu(a.dk());this.wp(a.xi());this.xp(a.ek().ha());this.lu(a.cx())}else if(a&&(c=String(a).match($v()))){this.Ok(!(!b));this.yp(c[1],true);this.xu(c[2],true);this.gu(c[3],true);this.tu(c[4]);this.wp(c[5],true);this.xp(c[6]);this.lu(c[7],true)}else{this.Ok(!(!b));this.vd=new nb(null,this,this.qg)}};B.prototype.Gh="";B.prototype.lj="";B.prototype.Jl="";B.prototype.Mm=null;B.prototype.Lm=
"";B.prototype.vd=null;B.prototype.Vl="";B.prototype.uV=false;B.prototype.qg=false;B.prototype.toString=function(){if(this.Dd){return this.Dd}var a=[];if(this.Gh){a.push(bm(this.Gh,Aq),":")}if(this.Jl){a.push("//");if(this.lj){a.push(bm(this.lj,Aq),"@")}a.push(yq(this.Jl));if(this.Mm!=null){a.push(":",String(this.dk()))}}if(this.Lm){a.push(bm(this.Lm,aw))}var b=String(this.vd);if(b){a.push("?",b)}if(this.Vl){a.push("#",yq(this.Vl))}return this.Dd=a.join("")};B.prototype.WY=function(a){var b=this.ha(),
c=a.qU();if(c){b.yp(a.nx())}else{c=a.rU()}if(c){b.xu(a.bF())}else{c=a.lU()}if(c){b.gu(a.am())}else{c=a.Bo()}var d=a.xi();if(c){b.tu(a.dk())}else{c=a.oU();if(c){if(!/^\//.test(d)){d=b.xi().replace(/\/?[^\/]*$/,"/"+d)}}}if(c){b.wp(d)}else{c=a.pU()}if(c){b.xp(a.Tr())}else{c=a.mU()}if(c){b.lu(a.cx())}return b};B.prototype.ha=function(){return new xq(this.Gh,this.lj,this.Jl,this.Mm,this.Lm,this.vd.ha(),this.Vl,this.qg)};B.prototype.nx=function(){return this.Gh};B.prototype.yp=function(a,b){this.jg();delete this.Dd;
this.Gh=b?hi(a):a;if(this.Gh){this.Gh=this.Gh.replace(/:$/,"")}return this};B.prototype.qU=function(){return!(!this.Gh)};B.prototype.bF=function(){return this.lj};B.prototype.xu=function(a,b){this.jg();delete this.Dd;this.lj=b?hi(a):a;return this};B.prototype.rU=function(){return!(!this.lj)};B.prototype.am=function(){return this.Jl};B.prototype.gu=function(a,b){this.jg();delete this.Dd;this.Jl=b?hi(a):a;return this};B.prototype.lU=function(){return!(!this.Jl)};B.prototype.dk=function(){return this.Mm};
B.prototype.tu=function(a){this.jg();delete this.Dd;if(a){a=Number(a);if(isNaN(a)||a<0){throw Error("Bad port number "+a);}this.Mm=a}else{this.Mm=null}return this};B.prototype.Bo=function(){return this.Mm!=null};B.prototype.xi=function(){return this.Lm};B.prototype.wp=function(a,b){this.jg();delete this.Dd;this.Lm=b?hi(a):a;return this};B.prototype.oU=function(){return!(!this.Lm)};B.prototype.pU=function(){return this.vd!==null&&this.vd.toString()!==""};B.prototype.xp=function(a){this.jg();delete this.Dd;
if(a instanceof nb){this.vd=a;this.vd.ca=this;this.vd.Ok(this.qg)}else{this.vd=new nb(a,this,this.qg)}return this};B.prototype.Tr=function(){return this.vd.toString()};B.prototype.ek=function(){return this.vd};B.prototype.$=function(a,b){this.jg();delete this.Dd;this.vd.K(a,b);return this};B.prototype.en=function(a,b){this.jg();delete this.Dd;if(!ra(b)){b=[String(b)]}this.vd.d0(a,b);return this};B.prototype.Za=function(a){return this.vd.get(a)};B.prototype.cx=function(){return this.Vl};B.prototype.lu=
function(a,b){this.jg();delete this.Dd;this.Vl=b?hi(a):a;return this};B.prototype.mU=function(){return!(!this.Vl)};B.prototype.jW=function(){this.jg();this.$("zx",ds());return this};B.prototype.jg=function(){if(this.uV){throw Error("Tried to modify a read-only Uri");}};B.prototype.Ok=function(a){this.qg=a;if(this.vd){this.vd.Ok(a)}};B.prototype.yR=function(){return this.qg};var zq=function(a,b){return a instanceof B?a.ha():new B(a,b)},xq=function(a,b,c,d,e,f,g,h){var i=new B(null,h);i.yp(a);i.xu(b);
i.gu(c);i.tu(d);i.wp(e);i.xp(f);i.lu(g);return i};var hi=function(a){return a?Bi(a):""},yq=function(a){if(wa(a)){return encodeURIComponent(a)}return null},Zv=/^[a-zA-Z0-9\-_.!~*'():\/;?]*$/,bm=function(a,b){var c=null;if(wa(a)){c=a;if(!Zv.test(c)){c=encodeURI(a)}if(c.search(b)>=0){c=c.replace(b,Yv)}}return c},Yv=function(a){var b=a.charCodeAt(0);return"%"+(b>>4&15).toString(16)+(b&15).toString(16)},cm=null,$v=function(){if(!cm){cm=/^(?:([^:\/?#]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/}return cm},
Aq=/[#\/\?@]/g,aw=/[\#\?]/g;var nb=function(a,b,c){this.kc=new Da;this.ca=b;this.qg=!(!c);if(a){var d=a.split("&");for(var e=0;e<d.length;e++){var f=d[e].split("="),g=Bi(f[0]);g=this.vi(g);this.add(g,f.length>1?Bi(f[1]):"")}}};nb.prototype.Ma=0;nb.prototype.r=function(){return this.Ma};nb.prototype.add=function(a,b){this.om();a=this.vi(a);if(!this.sc(a)){this.kc.K(a,b)}else{var c=this.kc.get(a);if(ra(c)){c.push(b)}else{this.kc.K(a,[c,b])}}this.Ma++;return this};nb.prototype.remove=function(a){a=this.vi(a);
if(this.kc.sc(a)){this.om();var b=this.kc.get(a);if(ra(b)){this.Ma-=b.length}else{this.Ma--}return this.kc.remove(a)}return false};nb.prototype.clear=function(){this.om();this.kc.clear();this.Ma=0};nb.prototype.isEmpty=function(){return this.Ma==0};nb.prototype.sc=function(a){a=this.vi(a);return this.kc.sc(a)};nb.prototype.dg=function(a){var b=this.Ab();return Ye(b,a)};nb.prototype.Ic=function(){var a=this.kc.Ab(),b=this.kc.Ic(),c=[];for(var d=0;d<b.length;d++){var e=a[d];if(ra(e)){for(var f=0;f<
e.length;f++){c.push(b[d])}}else{c.push(b[d])}}return c};nb.prototype.Ab=function(a){var b;if(a){var c=this.vi(a);if(this.sc(c)){var d=this.kc.get(c);if(ra(d)){return d}else{b=[];b.push(d)}}else{b=[]}}else{var e=this.kc.Ab();b=[];for(var f=0;f<e.length;f++){var g=e[f];if(ra(g)){fw(b,g)}else{b.push(g)}}}return b};nb.prototype.K=function(a,b){this.om();a=this.vi(a);if(this.sc(a)){var c=this.kc.get(a);if(ra(c)){this.Ma-=c.length}else{this.Ma--}}this.kc.K(a,b);this.Ma++;return this};nb.prototype.get=
function(a,b){a=this.vi(a);if(this.sc(a)){var c=this.kc.get(a);if(ra(c)){return c[0]}else{return c}}else{return b}};nb.prototype.d0=function(a,b){this.om();a=this.vi(a);if(this.sc(a)){var c=this.kc.get(a);if(ra(c)){this.Ma-=c.length}else{this.Ma--}}if(b.length>0){this.kc.K(a,b);this.Ma+=b.length}};nb.prototype.toString=function(){if(this.Dd){return this.Dd}var a=[],b=0,c=this.kc.Ic();for(var d=0;d<c.length;d++){var e=c[d],f=qb(e),g=this.kc.get(e);if(ra(g)){for(var h=0;h<g.length;h++){if(b>0){a.push("&")}a.push(f,
"=",qb(g[h]));b++}}else{if(b>0){a.push("&")}a.push(f,"=",qb(g));b++}}return this.Dd=a.join("")};nb.prototype.om=function(){delete this.Dd;if(this.ca){delete this.ca.Dd}};nb.prototype.ha=function(){var a=new nb;a.kc=this.kc.ha();return a};nb.prototype.vi=function(a){var b=String(a);if(this.qg){b=b.toLowerCase()}return b};nb.prototype.Ok=function(a){var b=a&&!this.qg;if(b){this.om();Ob(this.kc,function(c,d,e){var f=d.toLowerCase();if(d!=f){this.remove(d);this.add(f,c)}},this)}this.qg=a};nb.prototype.extend=
function(a){for(var b=0;b<arguments.length;b++){var c=arguments[b];Ob(c,function(d,e){this.add(e,d)},this)}};var Jg=function(a,b){qa.call(this,null,b,null);if(a){this.ca=new B(a)}else{this.ca=null}};Jg.k(qa);Jg.prototype.je=mi;Jg.dataSources={};Jg.prototype.Ea=function(){if(this.ca){Jg.dataSources[this.kd]=this;fb.info("Sending JS request for DataSource "+this.ya()+" to "+this.ca);this.je="LOADING";var a=new B(this.ca);a.en("callback","JsonReceive."+this.kd);N.JsonReceive[this.kd]=m(this.wY,this);var b=u("script");b.src=a;vw("head")[0].appendChild(b)}else{this.pa={};this.je=mi}};Jg.prototype.wY=function(a){this.cJ(a);
this.je="LOADED";H().ra(this.ya())};N.JsonReceive={};var zf=function(a,b){if(!a){throw Error("Cannot create a fast data node without a data name");}this.__dataName=a;this.__parent=b};zf.prototype.ya=function(){return this.__dataName};zf.prototype.Jh=function(a){this.__dataName=a};zf.prototype.Ua=function(){var a;if(this.__parent){a=this.__parent.Ua()+"/"}else{a=""}return a+this.ya()};var vb=function(a,b,c){zf.call(this,b,c);this.FD(a)};vb.k(zf);vb.prototype.FD=function(a){for(var b in a){this[b]=a[b]}};var De=function(a,b,c){if(ra(a)){return new gc(a,
b,c)}else if(Fc(a)){return new vb(a,b,c)}else{return new $e(a,b,c)}},Ew=new Kd;vb.prototype.K=function(a){throw"Not implemented yet";};vb.prototype.ea=function(a){if(!a||a=="*"){return this}else if(a.indexOf("*")==-1){var b=this.R(a);return b?new gc([b],null):new Kd}else{throw Error("Unsupported selector: "+a);}};vb.prototype.pK=function(a){var b=this[a];if(b!=null&&!b.ya){this[a]=De(this[a],a,this)}};vb.prototype.R=function(a,b){this.pK(a);var c=this[a]||null;if(c==null&&b){c=new vb({},a,this);this[a]=
c}return c};vb.prototype.Ha=function(a,b){if(b!=null){this[a]=b}else{delete this[a]}H().ra(this.Ua()+"/"+a)};vb.prototype.Y=function(a){var b=this[a];if(b!=null){return b.ya?b.get():b}else{return null}};vb.prototype.Kc=function(){return false};vb.prototype.mg=function(){var a={};for(var b in this){if(!Xc(b,"__")&&!cf(this[b])){a[b]=this[b].__dataName?this[b].mg():this[b]}}return a};vb.prototype.ha=function(){return De(this.mg(),this.ya())};vb.prototype.add=function(a){this.Ha(a.ya(),a)};vb.prototype.get=
function(a){if(arguments.length==0){return this}else{return this.R(a)}};vb.prototype.Da=function(a){var b=0;for(var c in this){if(!Xc(c,"__")&&!cf(this[c])){if(b==a){this.pK(c);return this[c]}++b}}return null};vb.prototype.r=function(){var a=0;for(var b in this){if(!Xc(b,"__")&&!cf(this[b])){++a}}return a};vb.prototype.Kh=function(a,b){this.Ha(a,b)};vb.prototype.removeNode=function(a){delete this[a]};var $e=function(a,b,c){this.Ia=a;zf.call(this,b,c)};$e.k(zf);$e.prototype.get=function(){return this.Ia};
$e.prototype.K=function(a){if(ra(a)||Fc(a)){throw"can only set PrimitiveFastDataNode to primitive values";}this.Ia=a;H().ra(this.Ua())};$e.prototype.ea=function(){return Ew};$e.prototype.R=function(a){return null};$e.prototype.Y=function(a){return null};$e.prototype.Ha=function(a,b){throw Error("Cannot set a child node for a PrimitiveFastDataNode");};$e.prototype.Kc=function(){return false};$e.prototype.mg=function(){return this.Ia};var gc=function(a,b,c){this.Lb=[];for(var d=0;d<a.length;++d){var e=
a[d].id||"["+d+"]";this.Lb.push(De(a[d],e,this));if(a[d].id){if(!this.n){this.n={}}this.n[a[d].id]=d}}zf.call(this,b,c)};gc.k(zf);gc.prototype.K=function(a){throw Error("Cannot set a FastListNode to a new value");};gc.prototype.ea=function(){return this};gc.prototype.R=function(a,b){var c=this.Pr(a);if(c==null&&this.n){c=this.n[a]}if(c!=null&&this.Lb[c]){return this.Lb[c]}else if(b){this.Ha(a,{});return this.R(a)}else{return null}};gc.prototype.Y=function(a){var b=this.R(a);return b?b.get():null};
gc.prototype.Pr=function(a){if(a.charAt(0)=="["&&a.charAt(a.length-1)=="]"){return Number(a.substring(1,a.length-1))}else{return null}};gc.prototype.Ha=function(a,b){var c=this.Lb.length;if(b!=null){if(!b.ya){b=De(b,a,this)}var d=this.Pr(a);if(d!=null){if(d<0||d>=this.Lb.length){throw Error("List index out of bounds: "+d);}this.Lb[a]=b}else{if(!this.n){this.n={}}this.Lb.push(b);this.n[a]=this.Lb.length-1}}else{this.removeNode(a)}var e=H();e.ra(this.Ua()+"/"+a);if(this.Lb.length!=c){this.iy()}};gc.prototype.iy=
function(){var a=H();a.ra(this.Ua());a.ra(this.Ua()+"/count()")};gc.prototype.Kc=function(){return true};gc.prototype.mg=function(){var a=[];for(var b=0;b<this.Lb.length;++b){a.push(this.Lb[b].mg())}return a};gc.prototype.add=function(a){if(!a.ya){a=De(a,String(this.Lb.length),this)}this.Lb.push(a);var b=H();b.ra(this.Ua()+"/["+(this.Lb.length-1)+"]");this.iy()};gc.prototype.get=function(a){if(arguments.length==0){return this.Lb}else{return this.R(a)}};gc.prototype.Da=function(a){var b=this.Lb[a];
return b!=null?b:null};gc.prototype.r=function(){return this.Lb.length};gc.prototype.Kh=function(a,b){throw Error("Setting child nodes of a FastListNode is not implemented, yet");};gc.prototype.removeNode=function(a){var b=this.Pr(a);if(b==null&&this.n){b=this.n[a]}if(b!=null){this.Lb.splice(b,1);if(this.n){var c=null;for(var d in this.n){if(this.n[d]==b){c=d}else if(this.n[d]>b){--this.n[d]}}if(c){delete this.n[c]}}var e=H();e.ra(this.Ua()+"/["+b+"]");this.iy()}};gc.prototype.indexOf=function(a){var b=
this.Pr(a);if(b==null&&this.n){b=this.n[a]}if(b==null){throw Error("Cannot determine index for: "+a);}return b};var Bf=function(a,b,c,d,e){vb.call(this,{},b,null);if(a){this.ca=new B(a);this.Ra=new ba;this.L5=!(!e);q(this.Ra,sa.COMPLETE,this.Hq,false,this)}else{this.ca=null}this.Hu=c;this.Hw=d};Bf.k(vb);Bf.prototype.Hu=null;Bf.prototype.Hw=null;Bf.prototype.Ea=function(){fb.info("Sending JS request for DataSource "+this.ya()+" to "+this.ca);if(this.ca){if(this.L5){var a=this.ca.ek(),b=this.ca.ha();b.xp(null);this.Ra.send(b,"POST",a)}else{this.Ra.send(this.ca)}}else{this.je=mi}};Bf.prototype.Ku=function(){H().ra(this.ya())};
Bf.prototype.Hq=function(a){if(this.Ra.Kd()){fb.info("Got data for DataSource "+this.ya());var b=this.Ra.Qc();if(this.Hu){var c=b.indexOf(this.Hu);b=b.substring(c+this.Hu.length)}if(this.Hw){var d=b.lastIndexOf(this.Hw);b=b.substring(0,d)}try{var e=eval("["+b+"][0]");this.FD(e);this.je="LOADED"}catch(f){this.je="FAILED";fb.ln("Failed to parse data: "+f.message)}N.setTimeout(m(this.Ku,this),0)}else{fb.info("Data retrieve failed for DataSource "+this.ya());this.je="FAILED"}};var Cw=function(a,b){if(b&&!a){throw Error("Can't create document with namespace and no root tag");}if(document.implementation&&document.implementation.createDocument){return document.implementation.createDocument(b||"",a||"",null)}else if(typeof ActiveXObject!="undefined"){var c=new ActiveXObject("MSXML2.DOMDocument");if(c){if(a){c.appendChild(c.createNode(1,a,b||""))}return c}}throw Error("Your browser does not support creating new documents");},Dw=function(a){if(typeof DOMParser!="undefined"){return(new DOMParser).parseFromString(a,
"application/xml")}else{var b=new ActiveXObject("MSXML2.DOMDocument");b.loadXML(a);return b}};var Dc=function(a,b,c){this.C=b;this.kd=c||(a?a.nodeName:null);this.A_(a)};Dc.prototype.A_=function(a){this.yg=a;if(a!=null){switch(a.nodeType){case 2:case 3:this.Ia=a.nodeValue;break;case 1:if(a.childNodes.length==1&&a.firstChild.nodeType==3){this.Ia=a.firstChild.nodeValue}}}};Dc.prototype.df=function(){if(this.qc){return}var a=new eb;if(this.yg!=null){var b=this.yg.childNodes;for(var c=0,d;d=b[c];c++){if(d.nodeType!=3||!/^[\r\n\t ]*$/.test(d.nodeValue)){var e=new Dc(d,this,d.nodeName);a.add(e)}}}this.qc=
a};Dc.prototype.kO=function(){if(this.jN){return}var a=new eb;if(this.yg!=null&&this.yg.attributes!=null){var b=this.yg.attributes;for(var c=0,d;d=b[c];c++){var e=new Dc(d,this,d.nodeName);a.add(e)}}this.jN=a};Dc.prototype.get=function(){this.df();return this.Ia!=null?this.Ia:this.qc};Dc.prototype.K=function(a){throw Error("Can't set on XmlDataSource yet");};Dc.prototype.ea=function(a){if(a&&a=="@*"){this.kO();return this.jN}else if(a==null||a=="*"){this.df();return this.qc}else{throw new Error("Unsupported selector");
}};Dc.prototype.R=function(a){if(Xc(a,"@")){var b=this.yg.getAttributeNode(a.substring(1));return b?new Dc(b,this):null}else{return this.ea().get(a)}};Dc.prototype.Y=function(a){if(Xc(a,"@")){var b=this.yg.getAttributeNode(a.substring(1));return b?b.nodeValue:null}else{var b=this.R(a);return b?b.get():null}};Dc.prototype.ya=function(){return this.kd};Dc.prototype.Jh=function(a){this.kd=a};Dc.prototype.Ua=function(){var a="";if(this.C){a=this.C.Ua()+(this.kd.indexOf("[")!=-1?"":"/")}return a+this.kd};
Dc.prototype.Ea=function(){};var Dm=function(){return Cw("nothing")},oi=function(a,b){Dc.call(this,null,null,b);if(a){this.ca=new B(a)}else{this.ca=null}};oi.k(Dc);oi.prototype.je=mi;oi.prototype.Ea=function(){if(this.ca){fb.info("Sending XML request for DataSource "+this.ya()+" to "+this.ca);this.je="LOADING";this.L3=new Kg(this.ca,m(this.Ku,this),m(this.UP,this))}else{this.yg=Dm();this.je=mi}};oi.prototype.Ku=function(){fb.info("Got data for DataSource "+this.ya());var a=this.L3.fS(),b=a.responseXML;
if(b&&!b.hasChildNodes()&&Fc(a.responseText)){b=Dw(a.responseText)}if(!b||!b.hasChildNodes()){this.je="FAILED";this.yg=Dm()}else{this.je="LOADED";this.yg=b.documentElement}if(this.ya()){H().ra(this.ya())}};oi.prototype.UP=function(){fb.info("Data retrieve failed for DataSource "+this.ya());this.je="FAILED";this.yg=Dm();if(this.ya()){H().ra(this.ya())}};var Kg=function(a,b,c){this.Sm=null;this.m4=b;this.iX=c||this.dT;this.ca=new B(a);this.VV()};Kg.prototype.VV=function(){this.Sm=new Qr;if(this.Sm){try{this.Sm.onreadystatechange=
m(this.yt,this);this.Sm.open("GET",String(this.ca),true);this.Sm.send(null)}catch(a){this.iX.call(this)}}};Kg.prototype.yt=function(){var a=this.Sm,b=a.readyState;if(b==4){var c=a.status,d;if(c==200||c==0){d=m(this.kX,this)}else{d=m(this.wt,this)}window.setTimeout(d,10)}};Kg.prototype.kX=function(){this.m4(this)};Kg.prototype.wt=function(){this.iX(this)};Kg.prototype.dT=function(){throw Error("Error fetching data from URL: "+this.ca);};Kg.prototype.fS=function(){return this.Sm};var Cd=function(a){this.wg=a||100;this.Fj=[]};Cd.prototype.Xo=0;Cd.prototype.add=function(a){this.Fj[this.Xo]=a;this.Xo=(this.Xo+1)%this.wg};Cd.prototype.get=function(a){a=this.bH(a);return this.Fj[a]};Cd.prototype.K=function(a,b){a=this.bH(a);this.Fj[a]=b};Cd.prototype.r=function(){return this.Fj.length};Cd.prototype.isEmpty=function(){return this.Fj.length==0};Cd.prototype.clear=function(){this.Fj.length=0;this.Xo=0};Cd.prototype.Ab=function(){return this.QR(this.r())};Cd.prototype.QR=function(a){var b=
this.r(),c=this.r()-a,d=[];for(var e=c;e<b;e++){d[e]=this.get(e)}return d};Cd.prototype.Ic=function(){var a=[],b=this.r();for(var c=0;c<b;c++){a[c]=c}return a};Cd.prototype.sc=function(a){return a<this.r()};Cd.prototype.dg=function(a){var b=this.r();for(var c=0;c<b;c++){if(this.get(c)==a){return true}}return false};Cd.prototype.bH=function(a){if(a>=this.Fj.length){throw Error("Out of bounds exception");}if(this.Fj.length<this.wg){return a}return(this.Xo+Number(a))%this.wg};var Ub=function(a,b){this.Lx=a||"";this.Oy=b||"";this.pH=[];this.nI=new Cd(500);this.Mt=m(this.xt,this);this.Rw=new jm(this.Oy);this.k3={};this.eu(true);this.ub=this.aE("enabled")=="1";N.setInterval(m(this.gZ,this),7500)};Ub.prototype.T1="LOGGING";Ub.prototype.Dc=null;Ub.prototype.zA=false;Ub.prototype.Js=false;Ub.prototype.WB=null;Ub.prototype.mG=ha();Ub.prototype.sd=function(){if(this.ub){this.Gy()}};Ub.prototype.Sc=function(){return this.ub};Ub.prototype.Kb=function(a){this.ub=a;if(this.ub){this.Gy();
if(this.Dc){this.rK()}}this.HI("enabled",a?1:0)};Ub.prototype.eu=function(a){if(a==this.Js){return}this.Js=a;var b=km();if(a){b.yB(this.Mt)}else{b.WH(this.Mt)}};Ub.prototype.xt=function(a){if(this.k3[a.jx()]){return}var b=this.Rw.Ul(a);this.Y1(b)};Ub.prototype.Y1=function(a){if(this.ub){this.Gy();this.nI.add(a);this.BA(a)}else{this.nI.add(a)}};Ub.prototype.BA=function(a){this.pH.push(a);N.clearTimeout(this.WB);if(ha()-this.mG>750){this.qK()}else{this.WB=N.setTimeout(m(this.qK,this),250)}};Ub.prototype.qK=
function(){this.mG=ha();if(this.Dc){var a=this.Dc.document.body,b=a&&a.scrollHeight-(a.scrollTop+a.clientHeight)<=100;this.Dc.document.write(this.pH.join(""));this.pH.length=0;if(b){this.Dc.scrollTo(0,1000000)}}};Ub.prototype.X1=function(){var a=this.nI.Ab();for(var b=0;b<a.length;b++){this.BA(a[b])}};Ub.prototype.Gy=function(){if(this.Dc&&!this.Dc.closed||this.zA){return}var a=this.aE("dbg","0,0,800,500").split(","),b=Number(a[0]),c=Number(a[1]),d=Number(a[2]),e=Number(a[3]);this.zA=true;this.Dc=
window.open("","dbg"+this.Lx,"width="+d+",height="+e+",toolbar=no,resizable=yes,scrollbars=yes,left="+b+",top="+c+",status=no,screenx="+b+",screeny="+c);if(!this.Dc){if(!this.l5){alert("Logger popup was blocked");this.l5=true}}this.zA=false;if(this.Dc){this.rK()}};Ub.prototype.rK=function(){if(!this.Dc){return}this.Dc.document.open();var a='<style>*{font:normal 14px monospace;}.dbg-sev{color:#F00}.dbg-w{color:#E92}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#666}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}</style><hr><div class="dbg-ev" style="text-align:center">'+
this.T1+"<br><small>Logger: "+this.Lx+"</small></div><hr>";this.BA(a);this.X1()};Ub.prototype.HI=function(a,b){a+=this.Lx;document.cookie=a+"="+encodeURIComponent(b)+";expires="+(new Date(ha()+2592000000)).toUTCString()};Ub.prototype.aE=function(a,b){a+=this.Lx;var c=String(document.cookie),d=c.indexOf(a+"=");if(d!=-1){var e=c.indexOf(";",d);return decodeURIComponent(c.substring(d+a.length+1,e==-1?c.length:e))}else{return b||""}};Ub.prototype.gZ=function(){if(!this.Dc||this.Dc.closed){return}var a=
this.Dc.screenX||this.Dc.screenLeft||0,b=this.Dc.screenY||this.Dc.screenTop||0,c=this.Dc.outerWidth||800,d=this.Dc.outerHeight||500;this.HI("dbg",a+","+b+","+c+","+d)};var hm=function(){this.Mt=m(this.xt,this);this.Rw=new nm;this.Rw.Iz=false;this.Js=false;this.P3=""};hm.prototype.eu=function(a){if(a==this.Js){return}var b=km();if(a){b.yB(this.Mt)}else{b.WH(this.Mt);this.logBuffer=""}};hm.prototype.xt=function(a){var b=this.Rw.Ul(a);if(window.console&&window.console.firebug){switch(a.lo()){case Jq:window.console.info(b);break;case lm:window.console.error(b);break;case mm:window.console.warn(b);break;default:window.console.debug(b);break}}else if(window.console){window.console.log(b)}else{this.P3+=
b}};var im=null,kw=function(){if(!im){im=new hm}if(document.location.href.indexOf("Debug=true")!=-1){im.eu(true)}};var ma=function(a){this.B=a};ma.k(mb);var Xq=new Wb(0,100);ma.prototype.m=function(a,b,c,d,e){if(ra(b)){for(var f=0;f<b.length;f++){this.m(a,b[f],c,d,e)}return}var g=q(a,b,c||this,d||false,e||this.B||this);if(this.Pa){this.Pa[g]=true}else if(this.sg){this.Pa=Xq.rd();this.Pa[this.sg]=true;this.sg=null;this.Pa[g]=true}else{this.sg=g}};ma.prototype.yd=function(a,b,c,d,e){if(!this.sg&&!this.Pa){return}if(ra(b)){for(var f=0;f<b.length;f++){this.yd(a,b[f],c,d,e)}return}var g=Mw(a,b,c||this,d||false,e||
this.B||this);if(g){var h=g.key;ua(h);if(this.Pa){gg(this.Pa,h)}else if(this.sg==h){this.sg=null}}};ma.prototype.mc=function(){if(this.Pa){for(var a in this.Pa){ua(a);delete this.Pa[a]}Xq.ke(this.Pa);this.Pa=null}else if(this.sg){ua(this.sg)}};ma.prototype.e=function(){if(!this.da()){mb.prototype.e.call(this);this.mc()}};ma.prototype.ab=function(a){throw Error("EventHandler.handleEvent not implemented");};var hc=function(a){J.call(this);if(a){this.Ec(a)}};hc.k(J);hc.prototype.b=null;hc.prototype.ug=null;hc.prototype.Go=null;hc.prototype.Us=-1;hc.prototype.sG=0;var $q={"3":13,"12":144,"63232":38,"63233":40,"63234":37,"63235":39,"63236":112,"63237":113,"63238":114,"63239":115,"63240":116,"63241":117,"63242":118,"63243":119,"63244":120,"63245":121,"63246":122,"63247":123,"63248":44,"63272":46,"63273":36,"63275":35,"63276":33,"63277":34,"63289":144,"63302":45},Zq={Up:38,Down:40,Left:37,Right:39,Enter:13,
F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45};hc.prototype.ab=function(a){var b=a.eo(),c=b.keyCode,d=b.which,e=c||d,f=b.keyIdentifier;if(d){if(d>=63232&&d in $q){e=$q[d]}else{if(d==25&&a.shiftKey){e=9}else{var g=d-32;if(String.fromCharCode(d)==String.fromCharCode(g).toLowerCase()){e=g}}}}else if(f&&f in Zq){e=Zq[f]}var h=e==this.Us;this.Us=e;if(n.SAFARI&&h){if(b.timeStamp-this.sG<10){return}this.sG=
b.timeStamp}var i=new Yq(e,h,b);try{this.dispatchEvent(i)}finally{i.e()}};hc.prototype.DT=function(a){this.Us=-1};hc.prototype.Ec=function(a){if(this.Go&&this.ug){this.detach()}this.b=a;var b=n.IE?ce:Ld;this.ug=q(this.b,b,this);this.Go=q(this.b,ag,this.DT,false,this)};hc.prototype.detach=function(){if(this.Go&&this.ug){ua(this.ug);ua(this.Go);this.ug=null;this.Go=null}this.b=null;this.Us=-1};hc.prototype.e=function(){if(!this.da()){hc.j.e.call(this);this.detach()}};var Yq=function(a,b,c){La.call(this,
c);this.type="key";this.keyCode=a;this.repeat=b};Yq.k(La);var E=function(a,b,c){z.call(this,c);this.Ba=b||Bs||(Bs=new Fb);this.tz(a)};E.k(z);var Ln={},If=function(a,b){Ln[a]=b},Cy=function(a){if(a){var b=ph(a);for(var c=0,d;d=b[c];c++){if(d in Ln){return Ln[d]()}}}return null};E.prototype.Ba=null;E.prototype.Ca=0;E.prototype.Ip=39;E.prototype.lN=255;E.prototype.Iu=0;E.prototype.ja=true;E.prototype.B=null;E.prototype.db=null;E.prototype.or=null;E.prototype.tR=function(){return this.B||(this.B=new ma(this))};E.prototype.ER=function(){return this.db||(this.db=
new hc(this.Ba.ak(this)))};E.prototype.jh=function(){return this.Ba};E.prototype.nE=function(){return this.or};E.prototype.uB=function(a){if(a){if(this.or){this.or.push(a)}else{this.or=[a]}this.Ba.vD(this,a,true)}};E.prototype.sa=function(){return"goog.ui.Control"};E.prototype.o=function(){this.hu(this.Ba.o(this))};E.prototype.Nb=function(a){return this.Ba.Nb(a)};E.prototype.Ob=function(a){this.hu(this.Ba.ib(this,a))};E.prototype.I=function(){E.j.I.call(this);var a=this.S();this.ma(this.ja,true);
nk(a,true);if(this.Ip&-2){var b=this.tR();b.m(a,de,this.ms);b.m(a,X,this.js);b.m(a,hd,this.MT);b.m(a,tc,this.ks);if(this.mf(32)){this.gr(this.Sc());var c=this.Ba.ak(this);b.m(c,Cf,this.pT);b.m(c,"blur",this.XS);b.m(this.ER(),"key",this.nh)}else{this.gr(false)}}};E.prototype.J=function(){E.j.J.call(this);if(this.B){this.B.mc()}};E.prototype.e=function(){if(!this.da()){E.j.e.call(this);if(this.B){this.B.e();this.B=null}if(this.db){this.db.e();this.db=null}this.Ba=null;this.Oc=null}};E.prototype.Yc=
function(){return this.Oc};E.prototype.Bc=function(a){this.Ba.Bc(this.S(),a);this.tz(a)};E.prototype.tz=function(a){this.Oc=a};E.prototype.Ir=function(){if(!this.Oc||wa(this.Oc)){return this.Oc}var a=ra(this.Oc)?nh(this.Oc,$f).join(""):$f(this.Oc);return a&&Va(a)};E.prototype.Oa=function(){return this.ja&&!this.tV()};E.prototype.tV=function(){var a=this.Jd();return a&&typeof a.Oa=="function"&&!a.Oa()};E.prototype.ma=function(a,b){if(b||this.ja!=a&&this.dispatchEvent(a?"show":"hide")){this.ja=a;var c=
this.S();if(c){s(c,a);if(this.mf(32)){this.gr(this.Sc())}}}};E.prototype.Sc=function(){return this.Oa()&&!this.Jc(1)};E.prototype.sV=function(){var a=this.Jd();return a&&typeof a.Sc=="function"&&!a.Sc()};E.prototype.Kb=function(a){if(!this.sV()&&this.rk(1,!a)){if(this.mf(32)){if(!a){this.ku(false)}this.gr(a&&this.ja)}if(!a){this.Rd(false);this.ec(false)}this.Va(1,!a)}};E.prototype.ec=function(a){if(this.rk(2,a)){this.Va(2,a)}};E.prototype.he=function(){return this.Jc(4)};E.prototype.Rd=function(a){if(this.Sc()&&
this.rk(4,a)){this.Va(4,a)}};E.prototype.ej=function(a){if(this.rk(8,a)){this.Va(8,a)}};E.prototype.lV=function(){return this.Jc(16)};E.prototype.QZ=function(a){if(this.rk(16,a)){this.Va(16,a)}};E.prototype.ku=function(a){if(this.rk(32,a)){this.Va(32,a)}};E.prototype.isOpen=function(){return this.Jc(64)};E.prototype.B_=function(a){if(this.rk(64,a)){this.Va(64,a)}};E.prototype.fm=function(){return this.Ca};E.prototype.Jc=function(a){return!(!(this.Ca&a))};E.prototype.Va=function(a,b){if(this.mf(a)&&
b!=this.Jc(a)){this.Ba.Va(this,a,b);this.Ca=b?this.Ca|a:this.Ca&~a}};E.prototype.Gz=function(a){this.Ca=a};E.prototype.mf=function(a){return!(!(this.Ip&a))};E.prototype.Jg=function(a,b){if(b!=this.mf(a)){if(this.Ie()){throw Error(Di);}if(!b&&this.Jc(a)){this.Va(a,false)}this.Ip=b?this.Ip|a:this.Ip&~a}};E.prototype.Ge=function(a){return!(!(this.lN&a))&&this.mf(a)};E.prototype.ZZ=function(a,b){this.Iu=b?this.Iu|a:this.Iu&~a};E.prototype.rk=function(a,b){return this.mf(a)&&this.Jc(a)!=b&&(!(this.Iu&
a)||this.dispatchEvent(By(a,b)))};E.prototype.ms=function(a){if(a.relatedTarget&&!Cc(this.S(),a.relatedTarget)&&this.dispatchEvent("enter")&&this.Sc()&&this.Ge(2)){this.ec(true)}};E.prototype.ks=function(a){if(a.relatedTarget&&!Cc(this.S(),a.relatedTarget)&&this.dispatchEvent("leave")){if(this.Ge(4)){this.Rd(false)}if(this.Ge(2)){this.ec(false)}}};E.prototype.js=function(a){if(this.Sc()){if(this.Ge(2)){this.ec(true)}if(this.Ge(4)){this.Rd(true)}}if(this.yV()){if(!n.GECKO){var b=this.Ba.ak(this);if(b){b.focus()}}}else{a.preventDefault()}};
E.prototype.MT=function(a){if(this.Sc()&&this.Ge(2)){this.ec(true)}if(this.he()&&this.Jt(a)&&this.Ge(4)){this.Rd(false)}};E.prototype.Jt=function(a){if(this.Ge(16)){this.QZ(!this.lV())}if(this.Ge(8)){this.ej(true)}if(this.Ge(64)){this.B_(!this.isOpen())}return this.dispatchEvent(od)};E.prototype.pT=function(a){if(this.Ge(32)){this.ku(true)}};E.prototype.XS=function(a){if(this.Ge(4)){this.Rd(false)}if(this.Ge(32)){this.ku(false)}};E.prototype.nh=function(a){return this.Sc()&&a.keyCode==13&&this.Jt(a)};
E.prototype.yV=function(){var a=this.Ba.ak(this);return a&&a.tabIndex>=1};E.prototype.gr=function(a){var b=this.Ba.ak(this);if(b){b.tabIndex=a?Math.max(b.tabIndex,1):-1}if(!a){this.ku(false)}};var Fb=function(){},Bs=null;Fb.prototype.o=function(a){var b=this.Ww(a);return a.X.o("div",b?{"class":b.join(" ")}:null,a.Yc())};Fb.prototype.vD=function(a,b,c){var d=a.S();if(d){Ze(d,b,c)}};Fb.prototype.Nb=function(a){return true};Fb.prototype.ib=function(a,b){if(b.id){a.r_(b.id)}a.tz(this.Yc(b));a.Gz(this.pS(ph(b)));
ga(b,this.xa());var c=a.nE();if(c){ab(c,function(d){this.vD(a,d,true)},this)}return b};Fb.prototype.Va=function(a,b,c){var d=a.S();if(d){var e=this.qd(b);if(e){Ze(d,e,c)}this.t1(a,b,c)}};Fb.prototype.t1=function(a,b,c){var d;switch(b){case 1:d="disabled";break;case 4:d="pressed";break;case 8:d="selected";break;case 16:d="checked";break;case 64:d="expanded";break;case 2:case 32:default:break}if(d){var e=a.S();if(e){sc(e,d,c)}}};Fb.prototype.Yc=function(a){if(a&&a.firstChild){return a.firstChild.nextSibling?
em(a.childNodes):a.firstChild}return null};Fb.prototype.Bc=function(a,b){if(a){if(wa(b)){U(a,b)}else{fc(a);if(b){function c(d){if(d){var e=bb(a);a.appendChild(wa(d)?e.createTextNode(d):d)}}if(ra(b)){ab(b,c)}else{c(b)}}}}};Fb.prototype.ak=function(a){return a.S()};Fb.prototype.xa=function(){return"goog-control"};Fb.prototype.Ww=function(a){var b=this.RQ(a.fm()),c=a.nE();return c?b.concat(c):b};Fb.prototype.RQ=function(a){var b=[this.xa()];if(a){for(var c=1;a;c<<=1){if(a&c){b.push(this.qd(c));a&=~c}}}return b};
Fb.prototype.qd=function(a){if(a){var b=this.xa();switch(a){case 1:return b+"-disabled";case 2:return b+"-hover";case 4:return b+"-active";case 8:return b+"-selected";case 16:return b+"-checked";case 32:return b+"-focused";case 64:return b+"-open"}}return null};Fb.prototype.pS=function(a){var b=0;if(a){ab(a,function(c){b|=this.Zr(c)},this)}return b};Fb.prototype.Zr=function(a){if(a){var b=Cq(a.split("-"));switch(b){case "disabled":return 1;case "hover":return 2;case "active":return 4;case "selected":return 8;
case "checked":return 16;case "focused":return 32;case "open":return 64}}return 0};If("goog-control",function(){return new E(null)});var Kc=function(a,b,c){E.call(this,a,b||xs||(xs=new nd),c)};Kc.k(E);Kc.prototype.Ia=null;Kc.prototype.Ve=null;Kc.prototype.H=function(){return this.Ia};Kc.prototype.va=function(a){this.Ia=a;this.Ba.va(this.S(),a)};Kc.prototype.c0=function(a){this.Ia=a};Kc.prototype.fk=function(){return this.Ve};Kc.prototype.Qk=function(a){this.Ve=a;this.Ba.Qk(this.S(),a)};Kc.prototype.X_=function(a){this.Ve=a};Kc.prototype.sa=function(){return"goog.ui.Button"};Kc.prototype.e=function(){if(!this.da()){Kc.j.e.call(this);
this.Ia=null;this.Ve=null}};var nd=function(){Fb.call(this)};nd.k(Fb);var xs=null;nd.prototype.o=function(a){var b={},c=this.Ww(a);if(c){b["class"]=c.join(" ")}if(!a.Sc()){b.disabled=true}if(a.fk()){b.title=a.fk()}if(a.H()){b.value=a.H()}return a.X.o("button",b,a.Ir()||"")};nd.prototype.Nb=function(a){return a.tagName=="BUTTON"||a.tagName=="INPUT"&&(a.type=="button"||a.type=="submit"||a.type=="reset")};nd.prototype.ib=function(a,b){b=nd.j.ib.call(this,a,b);a.X_(this.fk(b));a.c0(this.H(b));if(b.disabled){a.Gz(a.fm()|
1);ga(b,this.qd(1))}return b};nd.prototype.Va=function(a,b,c){nd.j.Va.call(this,a,b,c);if(b==1){var d=a.S();if(d&&(d.tagName=="BUTTON"||d.tagName=="INPUT")){d.disabled=c}}};nd.prototype.H=function(a){return a&&a.value};nd.prototype.va=function(a,b){if(a&&(a.tagName=="BUTTON"||a.tagName=="INPUT")){a.value=b}};nd.prototype.fk=function(a){return a&&a.title};nd.prototype.Qk=function(a,b){if(a){a.title=b}};nd.prototype.xa=function(){return"goog-button"};If("goog-button",function(){return new Kc(null)});;var Qk=function(){this.im={};this.x5={};this.j3={}},Ao=null,Rh=function(){if(!Ao){Ao=new Qk}return Ao};Qk.prototype.fireEvent=function(a,b){var c=null;if(wa(a)){c=new Q(a);var d=arguments[1];if(wa(d)){var e=2,f=d;while(f){var g=arguments[e++];c[f]=g;f=arguments[e++]}}else{for(var h in d){c[h]=d[h]}}}else if(a instanceof Q){c=a}this.jY(c)};Qk.prototype.jY=function(a){var b=a.type,c=this.im[b];if(c){var d=c(a),e;if(d){e=this.x5[b]||[]}else{e=this.j3[b]||[]}for(var f=0;f<e.length;f++){e[f](a)}}};Qk.prototype.ab=
function(a,b){this.im[a]=b};var Tg=function(a,b){if(a instanceof Tg){this.Tg=a.d1()}else if(Ge(a)&&Sx(a)){this.Tg=em(a)}else if(a instanceof cb){this.Tg=Lr(a.width,a.height)}else if(df(a)&&df(b)&&a>0&&b>0){this.Tg=Lr(a,b)}else{throw Error("Invalid argument(s) for Matrix contructor");}this.wb=new cb(this.Tg.length,this.Tg[0].length)};var Lr=function(a,b){var c=[];for(var d=0;d<a;d++){c[d]=[];for(var e=0;e<b;e++){c[d][e]=0}}return c},Sx=function(a){var b=0;for(var c=0;c<a.length;c++){if(!Ge(a[c])||b>0&&a[c].length!=b){return false}for(var d=
0;d<a[c].length;d++){if(!df(a[c][d])){return false}}if(b==0){b=a[c].length}}return b!=0},Rx=function(a,b,c){for(var d=0;d<a.getSize().width;d++){for(var e=0;e<a.getSize().height;e++){b.call(c,a.BS(d,e),d,e,a)}}};Tg.prototype.Tg=null;Tg.prototype.wb=null;Tg.prototype.getSize=function(){return this.wb};Tg.prototype.BS=function(a,b){if(a<0||a>=this.wb.width||b<0||b>this.wb.height){return null}return this.Tg[a][b]};Tg.prototype.d1=function(){return this.Tg};Tg.prototype.toString=function(){var a=0;Rx(this,
function(c){var d=String(c).length;if(d>a){a=d}});var b=[];ab(this.Tg,function(c,d){b.push("[ ");ab(c,function(e,f){e=String(e);b.push(ns(" ",a-e.length)+e+" ")});b.push("]\n")});return b.join("")};var fg=function(a,b){this.x=Number(a)||0;this.y=Number(b)||0};fg.k(Fa);fg.prototype.ha=function(){return new fg(this.x,this.y)};fg.prototype.aW=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};fg.prototype.scale=function(a){this.x*=a;this.y*=a;return this};fg.prototype.normalize=function(){return this.scale(1/this.aW())};fg.prototype.add=function(a){this.x+=a.x;this.y+=a.y;return this};fg.prototype.equals=function(a){return this==a||!(!a)&&this.x==a.x&&this.y==a.y};var ve=function(a,b){var c=b||window;if(a==Et){this.GJ="ParentStub"+Number(new Date);this.Gk="ChildStub"}else{this.GJ="ChildStub";this.Gk=this.YR();this.Im=c.opener||c.parent;if(this.Gk&&!this.Im[this.Gk]){var d=0;while(this.Im&&!this.Im[this.Gk]&&d<10){this.Im=this.Im.parent;d++}}c[Co]=this}c[this.GJ]=this.J0.bind(this);this.Qa=a};ve.k(J);var Do=function(a){var b=a||window;return b[Co]};ve.prototype.RZ=function(a,b){this.Im=a;this.bc=b};var Et="Parent",Dt="Child",Co="__topLevelProxy__";ve.prototype.type=
null;ve.prototype.YR=function(){var a=new B(document.location.href);return a.Za("eventCallback")};ve.prototype.YE=function(){return this.GJ};ve.prototype.Il=function(a){return this.oY(a)};ve.prototype.oY=function(a){var b=this.bc?this.bc.contentWindow:null,c=this.Im||b;if(this.Gk&&c&&c[this.Gk]){return c[this.Gk](a)}else{return true}};ve.prototype.J0=function(a){var b=J.prototype.dispatchEvent.call(this,a);return b};var Eo=function(){};Eo.k(J);Eo.prototype.aJ=function(a){this.E4=a};Eo.prototype.dispatchEvent=function(a){if(this.E4.Il(a)){J.prototype.dispatchEvent.call(this,a)}};var Ed=function(a){ve.call(this,Et,a||window)};Ed.k(ve);var Ft=null,hA=function(a){switch(a){case "NONE":return"0";case "THIN":return"1px solid black";case "OUTSET":return"2px outset black"}},kA=function(a,b,c){var d=b||{};d.border=d.border||"OUTSET";var e=new Sh(c);e.Df(a,d,null);return e},jA=function(a,b,c,d){var e=b||{};e.border=e.border||"NONE";var f=k(c),g=new Te(d);g.Df(a,e,f);return g};Ed.prototype.Df=function(a,b,c){};Ed.prototype.show=function(){};Ed.prototype.hide=function(){};Ed.prototype.e=
function(){};var mA=function(a,b){var c=b.serverbased?"widgets":"ui",d=new B(lA()+"/"+c+"/"+a),e=new B(document.location.href);if(e.Za("js")){d.$("js",e.Za("js"))}else{d.$("js","RAW")}if(b){Ob(b,function(f,g){if(f!=null){d.$(g,f)}})}return d},lA=function(){if(Ft){return Ft}else if(N.manifest){return N.manifest.serverBase}else{return""}};var iA=0;Nd("createIframeComponent",jA);Nd("createIframeDialogComponent",kA);var Te=function(a){Ed.call(this,a)};Te.k(Ed);var gA=function(a,b,c,d){var e="hosted-"+iA++ +"-"+Number(new Date),f=Bc(e);if(!f){var g=new Uc(d?bb(d):document);f=g.o("iframe",{id:e});V(f,"display","block");V(f,"backgroundColor","#FFF");V(f,"border",hA(c));V(f,"margin","0");V(f,"padding","0");V(f,"overflow","hidden");Ic(f,a,b)}return f};Te.prototype.Df=function(a,b,c){this.ca=mA(a,b);this.o2=b.border;this.ja=!(b.hide=="true");this.GW=b.mock;this.oj=b.x||20;this.bl=b.y||20;this.uf=b.width||600;this.pg=
b.height||480;this.U3=b.maximize=="true";this.Dh=b.position||"relative";this.l2=b.background;this.cl=b.zIndex;this.xs=b.hl;this.Iy=c;var d=gA(this.uf,this.pg,this.o2,this.Iy);d.style.position=this.Dh;if(this.cl){d.style.zIndex=this.cl}if(this.l2){d.allowtransparency=true;d.style.backgroundColor="transparent"}if(this.xs){this.ca.$("hl",this.xs)}if(!this.GW){this.ca.$("eventCallback",this.YE());this.ca.$("js","RAW");this.ca.jW();d.src=this.ca.toString();d.id=ds()}this.Iw(d);if(this.GW){new ve(Dt,d.contentWindow);
d.contentWindow[Co].Gk=this.YE()}this.RZ(d.contentWindow,d)};Te.prototype.Iw=function(a){this.bc=a;if(this.Iy){this.Iy.appendChild(a);this.sA()}else{a.style.position="absolute";document.body.appendChild(a)}if(a.style.position=="absolute"){var b=this.ja?this.oj:this.oj-4000;Ci(a,b,this.bl)}else{this.sA();if(!this.ja){a.style.visibility="hidden"}}if(window.frames[a.id]){if(window.frames[a.id].location!=a.src){window.frames[a.id].location=a.src}}};Te.prototype.sA=function(){var a=this.T6||this.Iy;if(a&&
this.U3){var b=Wa(a);Ic(this.bc,b);if(this.Dh=="absolute"){var c=Ja(a);if(!this.ja){c.x-=4000}this.bc.style.left=c.x+"px";this.bc.style.top=c.y+"px"}}};Te.prototype.show=function(){this.ja=true;this.sA();this.Il("PRESHOW");var a=this;N.setTimeout(function(){a.bc.style.display="block";a.bc.style.visibility="visible";a.Il("SHOW")},5)};Te.prototype.hide=function(){this.ja=false;if(this.Dh=="absolute"){var a=Ja(this.bc);this.bc.style.left=a.x-4000+"px";this.bc.style.visibility="hidden"}else{this.bc.style.display=
"none"}};Te.prototype.e=function(){if(this.bc!=null){this.bc.parentNode.removeChild(this.bc);this.bc=null}Ed.prototype.e.call(this)};var Sh=function(a){Te.call(this,a)};Sh.k(Te);Sh.prototype.Iw=function(a){if(n.GECKO){ga(document.body,"background")}var b=new K;b.$l().appendChild(a);b.Lk(new Gb);b.ma(this.ja);this.qw=b;this.bc=a};Sh.prototype.show=function(){this.qw.ma(true)};Sh.prototype.hide=function(){this.qw.ma(false)};Sh.prototype.e=function(){this.qw.e();Oa(document.body,"background");this.qw=null;this.bc=null;Te.prototype.e.call(this)};var sd=function(){this.NC={}};sd.prototype.NC=null;var Bo=null,eA=function(){if(!Bo){Bo=new sd}return Bo};sd.prototype.cE=function(a){return this.NC[a]};sd.prototype.create=function(a,b,c){var d=this.cE(a);if(d){if(b){b=k(b)}return d(b,c,a)}};sd.prototype.FC=function(a){var b=this.cE(a);if(b){var c={},d=(new B(document.location.href)).ek();Ob(d,function(g,h){c[h]=g});var e=new ve(Dt),f=b(document.body,c,a);if(f.aJ){f.aJ(e)}}};sd.prototype.Pv=function(a){var b=a||document.body,c=b.getAttribute("g:type");
if(c){var d={},e=b.attributes;for(var f=0;f<e.length;f++){var g=e[f].name;if(Xc(g,"g:")){d[g.substring(2)]=e[f].value}}this.create(c,b,d)}var h=b.childNodes.length;for(var f=0;f<h;f++){var i=b.childNodes[f];if(i.nodeType==1){this.Pv(i)}}};sd.prototype.LD=function(a){var b=Do();if(b){if(wa(a)){a=new Q(a)}return b.Il(a)}else{return true}};var fA=function(){Nd("Xuit",eA());Ef(sd.prototype,"buildUi",sd.prototype.Pv);Ef(sd.prototype,"create",sd.prototype.create);Ef(sd.prototype,"createAsFullPage",sd.prototype.FC);Ef(sd.prototype,"fireHostedEvent",sd.prototype.LD);Ef(Ed.prototype,"hide",Ed.prototype.hide);Ef(Ed.prototype,"show",Ed.prototype.show);Ef(Ed.prototype,"dispose",Ed.prototype.e)};fA();var Rw=function(){};Rw.prototype.ib=function(a,b){if(n.SAFARI||n.OPERA)return;var c=b||{},d=new uc,e=true,f=c.enabled;if(f){var g=new jd(f),h=g.Pc();for(var i=0;i<h.length;i++){H().addListener(Sw.bind(null,d,g),h[i].Ib())}e=g.H()}var j=a.ownerDocument.createElement("div");while(a.childNodes.length>0){j.appendChild(a.firstChild)}d.D_(b);d.iW(a);d.Bc(j);d.Kb(e);d.V(a);return d};var Sw=function(a,b){a.Kb(b.H())},uc=function(){this.Ug="#FCFCFC";this.YC="#F4F4F4";this.qe="#B5B5B5";this.ph="#9CBED8";this.ah=
"#B0B0B0";this.ub=true};uc.k(J);uc.prototype.V=function(a){this.T=a;q(a,ta,this.Bi,false,this);q(a,de,this.oh,false,this);q(a,tc,this.hk,false,this);q(a,X,this.ge,false,this);q(a,hd,this.Ci,false,this)};uc.prototype.D_=function(a){this.Ft=a||{};this.Ug=this.Ft["background-color"]||this.Ug;this.YC=this.Ft["down-background-color"]||this.YC;this.qe=this.Ft["border-color"]||this.qe;this.ph=this.Ft["hover-border-color"]||this.ph;this.ah=this.Ft["down-border-color"]||this.ah};uc.prototype.iW=function(a){this.T=
a;this.$q=new Uc(a.ownerDocument);ga(a,"goog-button");a.style.border="0";a.style.background="transparent";a.style.margin="0";a.style.padding="0";a=(this.ZF=a.appendChild(this.$q.o("div")));this.Uy=this.Mo(a,"l1","background-color:"+this.qe);this.Om=this.Mo(a,"l2","border-color: "+this.qe+";background-color: "+this.Ug);this.Mo(a,"l2","border-color: "+this.qe+";background-color: "+this.Ug);this.cd=a.appendChild(this.$q.o("div",{"class":"mid",style:"border-color: "+this.qe+";background-color: "+this.Ug+
";padding: 1px 1px;"}));this.Pm=this.Mo(a,"l2","border-color: "+this.qe+";background-color: "+this.Ug);this.Vy=this.Mo(a,"l1","background-color: "+this.qe)};uc.prototype.Mo=function(a,b,c){var d=a.appendChild(this.$q.o("div",{style:c,"class":b}));if(n.IE){d.style.width="100%"}d.appendChild(this.$q.o("img",{width:"1",height:"1",src:Ec().oo()+"/static/images/Transparent.gif"}));return d};uc.prototype.Bi=function(){this.dispatchEvent(ta)};uc.prototype.iJ=function(){this.Uy.style.backgroundColor=this.qe;
this.Om.style.borderColor=this.qe;this.Om.style.backgroundColor=this.Ug;this.cd.style.borderLeft="1px solid "+this.qe;this.cd.style.borderRight="1px solid "+this.qe;this.cd.style.padding="1px 1px";this.cd.style.backgroundColor=this.Ug;this.Pm.style.borderColor=this.qe;this.Pm.style.backgroundColor=this.Ug;this.Vy.style.backgroundColor=this.qe};uc.prototype.q0=function(){this.Uy.style.backgroundColor=this.ph;this.Om.style.borderColor=this.ph;this.Om.style.backgroundColor=this.ph;this.cd.style.borderLeft=
"2px solid "+this.ph;this.cd.style.borderRight="2px solid "+this.ph;this.cd.style.padding="1px 0px";this.cd.style.backgroundColor=this.Ug;this.Pm.style.borderColor=this.ph;this.Pm.style.backgroundColor=this.ph;this.Vy.style.backgroundColor=this.ph};uc.prototype.k0=function(){this.Uy.style.backgroundColor=this.ah;this.Om.style.borderColor=this.ah;this.Om.style.backgroundColor=this.ah;this.cd.style.borderLeft="2px solid "+this.ah;this.cd.style.borderRight="2px solid "+this.ah;this.cd.style.padding=
"2px 0px";this.cd.style.backgroundColor=this.YC;this.Pm.style.borderColor=this.ah;this.Pm.style.backgroundColor=this.ah;this.Vy.style.backgroundColor=this.ah};uc.prototype.oh=function(){this.q0()};uc.prototype.hk=function(){this.iJ()};uc.prototype.ge=function(){this.k0()};uc.prototype.Ci=function(){this.iJ()};uc.prototype.Bc=function(a){a.style.cssFloat="left";while(a.childNodes.length>0){this.cd.appendChild(a.firstChild)}if(n.IE){this.T.style.visibility="hidden";N.setTimeout(this.Mz.bind(this),0)}else{this.Mz()}q(window,
ee,this.Mz.bind(this))};uc.prototype.Mz=function(){var a,b=10,c=this.$q.de().compatMode=="BackCompat",a=Wa(this.cd).width;if(a<10){return}this.T.style.visibility="";if(n.IE){this.ZF.style.width="1px";this.T.style.overflow="visible";a=Wa(this.cd).width;this.T.style.width=a+b+"px";if(!c){this.bt(this.Uy,4);this.bt(this.Om,6);this.bt(this.Pm,6);this.bt(this.Vy,4)}this.ZF.style.width=a+b+"px"}else{this.cd.style.cssFloat="left";a=Wa(this.cd).width;this.cd.style.cssFloat="";if(n.OPERA&&c){this.T.style.width=
a+2+"px"}this.ZF.style.width=a+b+"px"}};uc.prototype.bt=function(a,b){a.style.width=Wa(a).width-b+"px"};uc.prototype.Kb=function(a){if(this.ub!=a){if(a){Oa(this.T,"disabled");this.T.disabled=false}else{ga(this.T,"disabled");this.T.disabled=true}this.ub=a}};var Wc=function(a,b){var c=window._Messages||[],d=a;for(var e=0;e<c.length;e++){if(c[e][a]){d=c[e][a];break}}var f=b||{},g=function(h,i){return i in f?f[i]:h};d=d.replace(new RegExp("\\{\\$(\\w+)\\}","g"),g);return d},lx=function(a,b){document.write(Wc(a,b))};Nd("_cp_getMsg",Wc);Nd("_cp_writeMsg",lx);var Bw=function(a,b){if(Ij(a)){a.selectionStart=b}else if(n.IE){var c=zm(a),d=c[0],e=c[1];if(d.inRange(e)){var f=a.value,g=0,h=b;while(g!=-1&&g<h){g=f.indexOf("\r\n",g);if(g!=-1&&g<h){b--;g++}}d.collapse(true);d.move("character",b);d.select()}}},Am=function(a){if(Ij(a)){return a.selectionStart}if(n.IE){var b=zm(a),c=b[0],d=b[1];if(c.inRange(d)){c.setEndPoint("EndToStart",d);return c.text.length}}return 0},Aw=function(a,b){if(Ij(a)){a.selectionEnd=b}else if(n.IE){var c=zm(a),d=c[0],e=c[1];if(d.inRange(e)){e.collapse();
e.moveEnd("character",b-Am(a));e.select()}}};var zw=function(a,b){var c=a.ownerDocument||a.document;if(Ij(a)){a.selectionStart=b;a.selectionEnd=b}else if(c.selection&&a.createTextRange){var d=a.createTextRange();d.collapse(true);d.move("character",b);d.select()}};var zm=function(a){var b=a.ownerDocument||a.document,c=b.selection.createRange(),d;if(a.type=="textarea"){d=c.duplicate();d.moveToElementText(a)}else{d=a.createTextRange()}return[d,c]},Ij=function(a){try{return typeof a.selectionStart=="number"}catch(b){return false}};var xb=function(a,b,c){J.call(this);this.sW=a;this.AZ=c;this.Ba=b;q(b,["hilite","select",In,"dismiss"],this);this.Th=null;this.la=[];this.Nf=-1;this.fh=0;this.nc=null;this.Gl=null};xb.k(J);xb.prototype.uW=10;xb.prototype.kN=true;xb.prototype.WM=false;var In="canceldismiss";xb.prototype.ab=function(a){if(a.target==this.Ba){switch(a.type){case "hilite":this.rh(a.row);break;case "select":this.np();break;case In:this.Tv();break;case "dismiss":this.jD();break}}};xb.prototype.Lh=function(a,b){if(this.Th==
a){return}this.Th=a;this.sW.gz(this.Th,this.uW,m(this.rW,this),b);this.Tv()};xb.prototype.sS=function(){return this.nc};xb.prototype.jn=function(a){this.nc=a};xb.prototype.isOpen=function(){return this.Ba.Oa()};xb.prototype.EF=function(){if(this.Nf>=this.fh&&this.Nf<this.fh+this.la.length-1){this.rh(this.Nf+1);return true}else if(this.Nf==-1){this.rh(this.fh);return true}return false};xb.prototype.FF=function(){if(this.Nf>this.fh){this.rh(this.Nf-1);return true}else if(this.WM&&this.Nf==this.fh){this.rh(-1)}return false};
xb.prototype.rh=function(a){this.Nf=a;this.Ba.rh(a);return this.gx(a)!=-1};xb.prototype.np=function(){var a=this.gx(this.Nf);if(a!=-1){var b=this.la[a];this.AZ.Yt(b);this.ii();this.dispatchEvent({type:"update",row:b});return true}else{this.ii();this.dispatchEvent({type:"update",row:null});return false}};xb.prototype.ii=function(){this.Nf=-1;this.Th=null;this.fh+=this.la.length;this.la.length=0;window.clearTimeout(this.Gl);this.Gl=null;this.Ba.ii()};xb.prototype.jD=function(){if(!this.Gl){this.Gl=
window.setTimeout(m(this.ii,this),50)}};xb.prototype.Tv=function(){window.setTimeout(m(function(){if(this.Gl){window.clearTimeout(this.Gl);this.Gl=null}},this),10)};xb.prototype.e=function(){if(!this.da()){xb.j.e.call(this);this.Ba.e();this.AZ.e();this.sW=null}};xb.prototype.rW=function(a,b,c){if(this.Th!=a){return}var d=c?this.gx(this.Nf):null;this.fh+=this.la.length;this.la=b;var e=[];for(var f=0;f<b.length;++f){e.push({id:this.tE(f),data:b[f]})}this.Ba.NY(e,this.Th,this.nc);if(this.kN&&e.length!=
0){var g=d!=null?this.tE(d):this.fh;this.rh(g)}else{this.Nf=-1}};xb.prototype.gx=function(a){var b=a-this.fh;if(b<0||b>=this.la.length){return-1}return b};xb.prototype.tE=function(a){return this.fh+a};var Ea=function(a,b,c,d){mb.call(this);this.Wm=Ca(a)&&!(a===null)?a:",;";this.OV=b||"";this.Uo=c!=null?c:true;this.rb=new $d(d||150);this.U2=this.Wm.substring(0,1);this.H5=new RegExp("^[\\s"+this.Wm+"]+|[\\s"+this.Wm+"]+$","g");this.c5=new RegExp("\\s*["+this.Wm+"]$");this.ae=new ma(this);this.lq=new ma(this);this.db=new hc};Ea.k(mb);Ea.prototype.U1=true;Ea.prototype.DQ=true;Ea.prototype.fK=false;Ea.prototype.pc=null;Ea.prototype.Ko="";Ea.prototype.$k=false;Ea.prototype.MB=function(a){this.Mb=a};
Ea.prototype.gN=function(a){Vc(a,"select");sc(a,"haspopup",true);this.ae.m(a,Cf,this.Fm);this.ae.m(a,"blur",this.Ah);if(!this.pc){this.lq.m(a,ce,this.kH)}};Ea.prototype.fP=function(a){if(a==this.pc){this.Ah()}this.ae.yd(a,Cf,this.Fm);this.ae.yd(a,"blur",this.Ah);if(!this.pc){this.lq.yd(a,ce,this.kH)}};Ea.prototype.Jv=function(){for(var a=0;a<arguments.length;a++){this.gN(arguments[a])}};Ea.prototype.gP=function(){for(var a=0;a<arguments.length;a++){this.fP(arguments[a])}};Ea.prototype.Yt=function(a,
b){var c=this.Mb.sS();if(Ca(b)?b:this.Uo){var d=Am(c),e=this.$E(c.value,d),f=this.Pz(c.value),g=a.toString();if(!this.c5.test(g)){g=g.replace(/\s+$/,"")+this.U2}if(this.U1){if(e!=0&&!Me(f[e-1])){g=" "+g}if(e<f.length&&!Me(f[e+1])){g=g+" "}}if(g!=f[e]){f[e]=g;c.value=f.join("");var h=0;for(var i=0;i<=e;i++){h+=f[i].length}c.focus();Bw(c,h);Aw(c,h)}}else{c.value=a.toString()}};Ea.prototype.e=function(){if(!this.da()){Ea.j.e.call(this);this.ae.e();this.ae=null;this.lq.e();this.lq=null}};Ea.prototype.nh=
function(a){switch(a.keyCode){case 40:if(this.Mb.isOpen()){this.lt();a.preventDefault();return true}else if(!this.Uo){this.Xe(true);a.preventDefault();return true}break;case 38:if(this.Mb.isOpen()){this.nt();a.preventDefault();return true}break;case 9:this.Xe();if(this.Mb.np()&&this.Uo){a.preventDefault();return true}break;case 13:this.Xe();if(this.Mb.np()){a.preventDefault();return true}break;case 27:if(this.Mb.isOpen()){this.Mb.ii();return true}break;case 229:if(!this.$k){this.ae.m(this.pc,ag,this.Dy);
this.$k=true;return true}break}if(this.Uo&&a.charCode&&this.Wm.indexOf(String.fromCharCode(a.charCode))!=-1){this.Xe();if(this.Mb.np()){a.preventDefault();return true}}return false};Ea.prototype.GM=function(){this.db.Ec(this.pc);this.ae.m(this.db,"key",this.Ey);if(n.IE){this.ae.m(this.pc,Ld,this.iH)}};Ea.prototype.GY=function(){this.ae.yd(this.db,"key",this.Ey);this.db.detach();if(n.IE){this.ae.yd(this.pc,Ld,this.iH)}if(this.$k){this.ae.yd(this.pc,ag,this.Dy)}};Ea.prototype.Fm=function(a){this.lq.mc();
if(this.Mb){this.Mb.Tv()}this.pc=a.target;this.rb.start();this.ae.m(this.rb,"tick",this.lH);this.Ko=this.pc.value;this.GM()};Ea.prototype.Ah=function(a){if(this.pc){this.GY();this.pc=null;this.$k=false;this.rb.stop();this.ae.yd(this.rb,"tick",this.lH);if(this.Mb){this.Mb.jD()}}};Ea.prototype.lH=function(a){if(!this.$k){this.Xe()}};Ea.prototype.kH=function(a){this.Fm(a);if(n.IE){this.Ey(a)}};Ea.prototype.Ey=function(a){if(this.Mb&&!this.$k){this.nh(a)}};Ea.prototype.Dy=function(a){if(a.keyCode==13){this.$k=
false;this.ae.yd(this.pc,ag,this.Dy)}};Ea.prototype.iH=function(a){if(this.Uo&&this.Wm.indexOf(String.fromCharCode(a.charCode))!=-1){this.Xe();if(this.Mb.np()){a.preventDefault()}}};Ea.prototype.Xe=function(a){if(a||this.pc&&this.pc.value!=this.Ko){var b=this.AX();if(this.Mb){this.Mb.jn(this.pc);this.Mb.Lh(b,this.pc.value)}this.Ko=this.pc.value}};Ea.prototype.nt=function(){return this.fK?this.Mb.EF():this.Mb.FF()};Ea.prototype.lt=function(){return this.fK?this.Mb.FF():this.Mb.EF()};Ea.prototype.AX=
function(){var a=Am(this.pc),b=this.pc.value;return this.o1(this.Pz(b)[this.$E(b,a)])};Ea.prototype.o1=function(a){return String(a).replace(this.H5,"")};Ea.prototype.$E=function(a,b){var c=this.Pz(a);if(b==a.length)return c.length-1;var d=0;for(var e=0,f=0;e<c.length&&f<b;e++){f+=c[e].length;d=e}return d};Ea.prototype.Pz=function(a){if(!this.Uo){return[a]}var b=String(a).split(""),c=[],d=[];for(var e=0,f=false;e<b.length;e++){if(this.OV&&this.OV.indexOf(b[e])!=-1){if(this.DQ&&!f){c.push(d.join(""));
d.length=0}d.push(b[e]);f=!f}else if(!f&&this.Wm.indexOf(b[e])!=-1){d.push(b[e]);c.push(d.join(""));d.length=0}else{d.push(b[e])}}c.push(d.join(""));return c};var Ya=function(a,b,c,d){this.C=a||qm().body;this.X=Hg(this.C);this.Eg=!a;this.b=null;this.Th="";this.la=[];this.Hx=-1;this.E0=-1;this.ja=false;this.className="ac-renderer";this.rowClassName="ac-row";this.activeClassName="active";this.Nn=b;this.N5=d!=null?d:true;this.T4=c!=null?c:false;this.iG=null;this.hA=false};Ya.k(J);var ws=0;Ya.prototype.Dn=null;Ya.prototype.NY=function(a,b,c){this.Th=b;this.la=a;this.Hx=0;this.E0=ha();this.nc=c;this.Ut=[];this.redraw()};Ya.prototype.ii=function(){if(this.ja){this.ja=
false;s(this.b,false)}};Ya.prototype.show=function(){if(!this.ja){this.ja=true;s(this.b,true)}};Ya.prototype.Oa=function(){return this.ja};Ya.prototype.GF=function(a){this.CU();this.Hx=a;if(a>=0&&a<this.b.childNodes.length){var b=this.Ut[a];ga(b,this.activeClassName);sc(this.b,"activedescendant",b.id);U(this.Dn,$f(b))}};Ya.prototype.CU=function(){if(this.Hx>=0){Oa(this.Ut[this.Hx],this.activeClassName)}};Ya.prototype.rh=function(a){if(a==-1){this.GF(-1)}else{for(var b=0;b<this.la.length;b++){if(this.la[b].id==
a){this.GF(b);return}}}};Ya.prototype.w_=function(a){ga(a,this.className)};Ya.prototype.xW=function(){if(!this.b){this.Dn=this.X.o("div",{style:"display:none"});Vc(this.Dn,"region");sc(this.Dn,"live","rude");this.X.appendChild(this.C,this.Dn);this.b=this.X.o("div",{style:"display:none"});this.w_(this.b);Vc(this.b,"menu");var a=this.b.id="goog-acr-"+ws++;sc(this.nc,"controls",a);this.X.appendChild(this.C,this.b);q(this.b,ta,this.Bi,false,this);q(this.b,X,this.ge,false,this);q(this.X.de(),ta,this.jF,
false,this);q(this.b,de,this.oh,false,this)}};Ya.prototype.redraw=function(){this.xW();if(this.hA){this.b.style.visibility="hidden"}this.Ut.length=0;this.X.az(this.b);if(this.Nn&&this.Nn.V){this.Nn.V(this,this.b,this.la,this.Th)}else{var a=null;Ob(this.la,function(f){var f=this.MY(f,this.Th);if(this.hA){this.b.insertBefore(f,a)}else{this.X.appendChild(this.b,f)}a=f},this)}if(this.la.length==0){this.ii();return}else{this.show()}this.dY(this.b);if(this.nc&&this.Eg){var b=Ja(this.nc),c=Wa(this.nc),d=
Wa(md(this.nc)),e=Wa(this.b);b.y=this.hA?b.y-e.height:b.y+c.height;if((this.T4||b.x+e.width>d.width)&&this.iG!="LEFT"){b.x=b.x+c.width-e.width;this.iG="RIGHT"}else{this.iG="LEFT"}Ci(this.b,b);if(this.hA){this.b.style.visibility="visible"}}nk(this.b,true)};Ya.prototype.OZ=function(a){this.Eg=a};Ya.prototype.e=function(){if(!this.da()){Ya.j.e.call(this);if(this.b){L(this.b,ta,this.Bi,false,this);L(this.b,X,this.ge,false,this);L(this.X.de(),ta,this.jF,false,this);L(this.b,de,this.oh,false,this);this.X.removeNode(this.b);
this.b=null;this.ja=false}this.C=null}};Ya.prototype.dY=function(a){if(n.GECKO&&n.MAC){a.style.width="";a.style.overflow="visible";a.style.width=a.offsetWidth;a.style.overflow="auto"}};Ya.prototype.LY=function(a,b,c){c.innerHTML=ca(a.data.toString())};Ya.prototype.Gx=function(a,b){if(a.nodeType==3){var c,d=null;if(ra(b)){c=b.length>0?b[0]:"";if(b.length>1){d=Bj(b,1)}}else{c=b}if(c.length==0)return;var e=a.nodeValue;c=jk(c);var f=new RegExp("(.*?)(^|\\W+)("+c+")","gi"),g=[],h=0,i=f.exec(e);while(i){g.push(i[1]);
g.push(i[2]);g.push(i[3]);h=f.lastIndex;i=f.exec(e)}g.push(e.substring(h));if(g.length>1){a.nodeValue=g[0]+g[1];var j=this.X.createElement("b");this.X.appendChild(j,this.X.createTextNode(g[2]));j=a.parentNode.insertBefore(j,a.nextSibling);for(var l=g.length-1;l>=3;l--){a.parentNode.insertBefore(this.X.createTextNode(g[l]),j.nextSibling)}}else if(d){this.Gx(a,d)}}else{var p=a.firstChild;while(p){var t=p.nextSibling;this.Gx(p,b);p=t}}};Ya.prototype.MY=function(a,b){var c=this.X.o("div",{className:this.rowClassName});
if(this.Nn&&this.Nn.bI){this.Nn.bI(a,b,c)}else{this.LY(a,b,c)}if(b&&this.N5){this.Gx(c,b)}c.id="goog-acri-"+ws++;ga(c,this.rowClassName);Vc(c,"menuitem");this.Ut.push(c);return c};Ya.prototype.RE=function(a){while(a&&a!=this.b&&!yf(a,this.rowClassName)){a=a.parentNode}return a?Xf(this.Ut,a):-1};Ya.prototype.Bi=function(a){var b=this.RE(a.target);if(b>=0){this.dispatchEvent({type:"select",row:this.la[b].id})}a.stopPropagation()};Ya.prototype.ge=function(a){this.dispatchEvent(In);a.stopPropagation()};
Ya.prototype.jF=function(a){this.dispatchEvent("dismiss")};Ya.prototype.oh=function(a){var b=this.RE(a.target);if(b>=0){if(ha()-this.E0<300){return}this.dispatchEvent({type:"hilite",row:this.la[b].id})}};var zy=function(){};zy.prototype.V=function(a,b,c,d){};var ok=function(a,b){this.la=a;this.M5=!b};ok.prototype.gz=function(a,b,c,d){var e=this.eS(a,b);if(e.length==0&&this.M5){e=this.mS(a,b)}c(a,e)};ok.prototype.eS=function(a,b){var c=[];if(a!=""){var d=jk(a),e=new RegExp("(^|\\W+)"+d,"i");Fn(this.la,function(f){if(String(f).match(e)){c.push(f)}return c.length>=b})}return c};ok.prototype.mS=function(a,b){var c=[];Ob(this.la,function(f){var g=a.toLowerCase(),h=String(f).toLowerCase(),i=0;if(h.indexOf(g)!=-1){i=parseInt(h.indexOf(g)/4,10)}else{var j=g.split(""),
l=-1,i=0,p=10;for(var t=0,w;w=j[t];t++){var y=h.indexOf(w);if(y>l){var Z=y-l-1;if(Z>p-5){Z=p-5}i+=Z;l=y}else{i+=p;p+=5}}}if(i<g.length*6){c.push({str:f,score:i})}});c.sort(function(f,g){return f.score-g.score});var d=[];for(var e=0;e<b&&e<c.length;e++){d.push(c[e].str)}return d};var yy=function(a,b,c,d){var e=new ok(a,!d),f=new Ya,g=new Ea(null,null,!(!c));xb.call(this,e,f,g);g.MB(this);g.Jv(b)};yy.k(xb);var ic=function(){this.Rx=false;this.Kn=[];this.d6=[];this.Gi=null;this.lf=[];this.RS=[];this.PP={};this.Mb=null;this.Ba=null;this.y0=true;this.i1={};this.et=250};ic.prototype.$h=function(a,b,c){if(!a||wa(a)){var d={id:c||""};if(a){d.Name=a}if(b){d.Emails=[{Address:b}]}a=De(d,"$SomeContact")}var e=wh(a);if(this.y0&&!e){return}this.Kn.push(this.cw(a))};var wh=function(a){return D("Emails/[0]/Address").H(a)||D("Email").H(a)},dx=function(a,b){var c=new ic;if(!b.uri&&b.serverBase){b.uri=b.serverBase+
"data/contacts"}c.create(a,b);return c};N._EmailAc_create=dx;ic.prototype.create=function(a,b){var c=k(a),d=new B(b.uri);if(b.max)this.Dz(b.max);if(b.groups)d.$("groups","true");this.sd(c,d.toString(),true,b.rightAlign,b.twoLine);this.OH=b.progressive};ic.prototype.e=function(){this.Gi.e();this.Ba.e()};ic.prototype.lO=function(){return new xb(this,this.Ba,this.Gi)};ic.prototype.jh=function(){return this.Ba};ic.prototype.Dz=function(a){this.et=a<0?10100:a};ic.prototype.sd=function(a,b,c,d,e,f){if(this.Rx){fb.nj("Init already called");
return}this.Rx=true;this.ca=b;this.CG("$Contacts",m(this.JS,this),null,false);var g;if(ra(a)){g=a[0].ownerDocument.body}else{g=a.ownerDocument.body}var h=e?new Ya(g,new vr,d):new Qj(g);h.OZ(true);this.Ba=h;this.Gi=new Rj(",;",'"',f);this.Mb=this.lO();this.Gi.MB(this.Mb);this.OH=false;if(a){this.DM(a)}};ic.prototype.CG=function(a,b,c,d){var e=new B(this.ca);e.$("out","js");if(c){e.$("tok",c);e.$("cl",false);e.$("psort","Name")}if(d){e.$("cd","true")}var f=c?10:this.et;e.$("max",f);var g=new Bf(e,a,
"&&&START&&&","&&&END&&&"),h=H();h.gd(g,true);h.addListener(b,a);g.Ea()};ic.prototype.DM=function(a){if(!this.Rx){fb.nj("Init should be called first");return}if(ra(a)){this.lf=this.lf.concat(a);for(var b=0;b<a.length;b++){this.Gi.Jv.call(this.Gi,a[b])}}else{this.lf.push(a);this.Gi.Jv.call(this.Gi,a)}};ic.prototype.EY=function(a){if(!this.Rx){fb.nj("Init should be called first");return}if(ra(a)){ab(a,function(b){this.EY(b)},this)}else{qc(this.lf,a);this.Gi.gP(a)}};ic.prototype.gz=function(a,b,c){this.LO=
a;var d=[];if(a!=""){var e=jk(a),f=f=new RegExp('(^|<| |"|\\()'+e,"i"),g=this.RS;for(var h=0;h<g.length&&d.length<b;++h){var i=g[h];if(i.getName().match(f)){d.push(i)}}g=this.Kn;for(var h=0;h<g.length&&d.length<b;++h){var i=g[h];if(i.toString().match(f)){d.push(i)}}}if(this.OH&&a){if(!this.xF(a,b,true)){if(d.length<b){var j=d.concat([]);N.setTimeout(this.GQ.bind(this,j,b,a,c),500);d.push(new Mm("MORE"))}}}c(a,d)};ic.prototype.xF=function(a,b,c){var d=this.i1[a];if(d&&(c||d.count<b)){return true}else if(a.length>
1){return this.xF(a.substring(0,a.length-1),b,false)}else{return false}};var ex=0;ic.prototype.GQ=function(a,b,c,d){if(c==this.LO&&c!=""){var e="$AdditionalContacts"+ex++,f=this.IS.bind(this,a,b,c,d);this.CG(e,f,c,true)}};ic.prototype.IS=function(a,b,c,d,e){var f=[].concat(a);if(c==this.LO){var g=this.ZD(e),h={};for(var i=0;i<a.length;i++){var j=wh(a[i].contactData);h[j]=true}i=0;while(f.length<b&&i<g.r()){var l=g.Da(i),j=wh(l);if(!h[j]){var p=this.cw(l);f.push(p);this.PP[j]=true;this.Kn.push(p)}i++}d(c,
f,true);this.i1[c]={count:f.length}}};ic.prototype.ZD=function(a){var b=H().Mr(a),c=b.R("Body",true).R("Contacts",true).ea();return c};ic.prototype.JS=function(a,b){var c=this.ZD("$Contacts"),d=c.r();fb.info("Got "+d+" contacts");if(d>0){for(var e=0;e<this.lf.length;e++){this.lf[e].setAttribute("autocomplete","off")}}var f=new Da;for(var e=0;e<d;e++){var g=c.Da(e),h=wh(g);if(!h&&this.y0){continue}var i=g.Y("Name"),j=g.Y("Groups");if(j!=null){var l=j.length;for(var p=0;p<l;p++){var t=f.get(j[p].id);
if(t==null){t=[];f.K(j[p].id,t)}t.push(jr(i,j[p].value))}}var w=this.cw(g);this.Kn.push(w);this.PP[h]=true}fb.info("Created contact array");var y=H().Mr("$Contacts"),Z=y.R("Body").R("Groups");if(Z!=null){var j=Z.ea();d=j.r();fb.info("Got "+d+" groups");for(var e=0;e<d;e++){var M=j.Da(e),I=M.Y("id"),i=M.Y("Name");if(I.charAt(0)!="^"){var Ab=f.get(I);if(Ab!=null){this.RS.push(new Nj(i,Ab))}}}}var Gd=y.R("Body").R("UserData");if(Gd){var Ue=Gd.R("Features",true).ea();for(var e=0;e<Ue.r();e++){var eh=
Ue.Da(e).get();if(eh=="PROGRESSIVE_AC"){this.OH=true}}}};ic.prototype.cw=function(a){var b=a.Y("Name"),c=wh(a),d={};d.contactData=a;var e=jr(b,c);d.formattedValue=e;d.toString=function(){return this.formattedValue};return d};var Qj=function(){Ya.apply(this,arguments)};Qj.k(Ya);Qj.prototype.redraw=function(){var a=false,b=this.la.length;if(b>0&&this.la[b-1].data.gm&&this.la[b-1].data.gm()=="MORE"){a=true}Qj.j.redraw.call(this);if(a){var c=Wc("SEARCHING_FOR_MATCHES");if(b>1){var d=this.X.createElement("div"),
e=this.X.o("div",{style:"background-color: #A0B0FF; margin: 8px 0px"});if(n.IE){var f=this.X.o("img",{width:"1",height:"1"});e.appendChild(f)}else{e.style.height="1px"}d.appendChild(e);this.b.appendChild(d);c=Wc("SEARCHING_FOR_MORE_MATCHES")}var g=this.X.o("div");g.innerHTML=c;this.b.appendChild(g)}};var Mm=function(a){this.Qa=a};Mm.prototype.toString=function(){return""};Mm.prototype.gm=function(){return this.Qa};var vr=function(){};vr.prototype.bI=function(a,b,c){c.innerHTML=ii([ca(a.data.contactData.Y("Name")),
ca(wh(a.data.contactData))],function(d){return d}).join("<br/>")};var _emailAutocomplete=N._emailAutocomplete=new ic;N._initEmailAutocomplete=m(N._emailAutocomplete.sd,N._emailAutocomplete);var _initEmailAutocomplete=N._initEmailAutocomplete,jr=function(a,b){var c=a?'"'+a+'"':"",d=b?" <"+b+">":"";return c+d};var Rj=function(a,b,c){Ea.call(this,a,b,c)};Rj.k(Ea);Rj.prototype.Yt=function(a){if(a.YD){a=a.YD().join(", ")}Rj.j.Yt.call(this,a)};var Nj=function(a,b){this.zh=a;this.Kn=b};Nj.prototype.toString=
function(){return this.zh+" (Group)"};Nj.prototype.getName=function(){return this.zh};Nj.prototype.YD=function(){return this.Kn};var yx=function(a,b,c,d){var e=a.split("."),f=d||N,g=f,h=e.length;for(var i=0;i<h-1;i++){if(!g[e[i]]){g[e[i]]={}}g=g[e[i]]}g[e[h-1]]=b;if(c){f[c]=b}},zx=function(a,b){if(a.value==""||a.value==b||a.value==a.defaultText){a.defaulted=true;a.value=b;ga(a,"input-default")}a.defaultText=b;q(a,Cf,function(){if(a.defaulted){a.value="";Oa(a,"input-default");a.defaulted=false}});q(a,"blur",xx.bind(null,a));q(document,Ld,function(c){if(c.target==a&&c.keyCode==27){c.stopPropagation()}},true)},xx=function(a){if(a.value==
""&&!a.defaulted){a.defaulted=true;a.value=a.defaultText;ga(a,"input-default")}};var bk=function(a,b){b=b<0?0:b;a.style.height=b+"px";a.__lastHeight=b},wr=function(a,b){b=b<0?0:b;a.style.width=b+"px";a.__lastWidth=b},ak=function(a){return he(a,"paddingLeft")+he(a,"paddingRight")+he(a,"marginLeft")+he(a,"marginRight")+he(a,"borderLeftWidth")+he(a,"borderRightWidth")},Ym=function(a){return he(a,"paddingTop")+he(a,"paddingBottom")+he(a,"marginTop")+he(a,"marginBottom")+he(a,"borderTopWidth")+he(a,"borderBottomWidth")},
he=function(a,b){var c=bb(a),d;if(c.defaultView&&c.defaultView.getComputedStyle){var e=c.defaultView.getComputedStyle(a,"");if(e){d=e[b]}}if(!d){d=a.currentStyle?a.currentStyle[b]:a.style[b]}if(kc(d,"px")){var d=Number(d.substring(0,d.length-2));if(d<-10){d=0}return d}else{return 0}};var si=function(a,b){this.T=a;if(a==null){return}this.Gw=b?Oj(b):null;if(this.Gw){var c=m(this.IJ,this);Ob(this.Gw.Pc(),function(h){H().addListener(c,h.Sd)});this.IJ()}if(n.IE){var d=Wa(a);a.style.width=String(d.width*0.77)+"px";var e=Number(a.currentStyle.paddingTop.split("px")[0]),f=Number(a.currentStyle.paddingBottom.split("px")[0]);a.style.paddingTop=String(e+2)+"px";var g=f>=2?f-2:0;a.style.paddingBottom=String(g)+"px"}q(a,X,m(this.YX,this));q(a,hd,m(this.KH,this));q(a,tc,m(this.qW,this));q(a,
de,m(this.s1,this));q(a,ta,m(this.KH,this))};si.prototype.YX=function(a){ga(a.target,"presubmit");a.target.ZX=true};si.prototype.KH=function(a){Oa(a.target,"presubmit");a.target.ZX=false};si.prototype.qW=function(a){Oa(a.target,"presubmit")};si.prototype.s1=function(a){if(a.target.ZX){ga(a.target,"presubmit")}};si.prototype.IJ=function(){if(this.Gw){this.T.disabled=!this.Gw.H()}};var ir=function(a,b){this.T=k(a);this.Ef=D(b);H().addListener(m(this.Lj,this),b);q(this.T,ta,m(this.DP,this),false,this);var c=this.Ef.H();if(c){this.T.checked=c}};ir.prototype.Lj=function(){if(!this.mk){var a=this.Ef.H();this.lk=true;this.T.checked=a!=0;this.lk=false}};ir.prototype.DP=function(){if(!this.lk){var a=this.T.checked;this.mk=true;fe(this.Ef.Sd,a);this.mk=false}};var Tj=function(a,b,c,d,e){this.T=k(a);this.Ef=D(b);this.e6=c;this.Qn=d||this.T.getAttribute("defaultText");this.tW=e;if(this.tW){this.T.maxLength=this.tW}H().addListener(m(this.Lj,this),b);q(this.T,uh,this.Ml,false,this);q(this.T,ag,this.Ml,false,this);var f=this.Ef.H();if(f){this.T.value=f}if(this.Qn){q(this.T,"blur",this.Vv,false,this);q(this.T,Cf,this.Fm,false,this);this.Vv()}};Tj.prototype.Lj=function(){if(!this.mk){var a=this.Ef.H();this.lk=true;this.T.value=a?a:"";this.lk=false;this.Sq=false;
if(this.Qn){this.Vv()}}};Tj.prototype.Ml=function(){if(!this.lk){var a=this.T.value||null;this.mk=true;var b=this.Ef.Jd().zb(null,true);b.Ha(this.Ef.sk,a);this.mk=false}};Tj.prototype.Vv=function(){if(this.T.value==""&&!this.Sq){this.Sq=true;ga(this.T,"input-default");this.T.value=this.Qn}else{Oa(this.T,"input-default");this.Sq=false}};Tj.prototype.Fm=function(){if(this.Sq){this.T.value="";Oa(this.T,"input-default");this.Sq=false}};var kx=function(a,b,c){if(a){this.pk=a;this.LU=b||a.getAttribute("icon");if(this.LU){this.p=G("div",{className:this.pk.className});this.pk.className="inner";this.D=u("img");this.D.src=this.LU;this.D.style.verticalAlign="bottom";this.p.appendChild(this.D);if(this.D.readyState!="complete"){this.D.style.display="none";q(this.D,"load",this.jk,false,this)}if(n.IE){this.D.style.verticalAlign="top"}a.parentNode.replaceChild(this.p,a);this.p.appendChild(a);this.pk.style.border="0px";this.pk.style.padding=
"0px";this.pk.style.paddingLeft="4px";this.p.style.verticalAlign="top";this.pk.style.whiteSpace="nowrap";this.pk.style.width="80%";var d=Wa(this.p).height;if(d>5){var e=n.IE?0:Ym(this.p)-2;this.p.style.height=d-e+"px"}this.p.style.overflow="hidden"}this.Qn=c||a.getAttribute("defaultText");if(this.Qn){zx(this.pk,this.Qn)}}};kx.prototype.jk=function(){this.D.style.display="inline"};var Ng=function(a){this.T=a;this.r5=200;this.v4=1000;this.gU=this.vF.bind(this);q(a,["input","propertychange"],this.vF,false,this);q(a,Ld,this.BT,false,this);q(a,ce,this.is,false,this);var b=[Cf,ta,"blur"];q(a,b,this.WT,false,this)};Ng.FW(J.prototype);Ng.prototype.BT=function(a){N.setTimeout(this.gU,0);if(!this.dispatchEvent(a)){a.preventDefault()}};Ng.prototype.is=function(a){var b=a.keyCode,c=null;if(b==40){c="DOWN_ARROW"}else if(b==38){c="UP_ARROW"}else if(b==13){c="ENTER"}else if(b==27){c="ESCAPE"}else if(b==
9){c="TAB"}if(n.IE&&(b==8||b==46)){N.setTimeout(this.gU,0)}if(c){var d=this.dispatchEvent(c);if(!d){a.preventDefault()}}};Ng.prototype.WT=function(a){this.dispatchEvent(a)};Ng.prototype.vF=function(a){var b=this.T.defaulted?"":this.T.value;if(b!=this.Ko){this.lD("VALUE",b);if(this.C0){N.clearTimeout(this.C0)}this.C0=N.setTimeout(this.fC.bind(this,"STABLE_VALUE",b),this.r5);if(this.CX){N.clearTimeout(this.CX)}this.CX=N.setTimeout(this.fC.bind(this,"PAUSED_VALUE",b),this.v4);this.Ko=b}};Ng.prototype.fC=
function(a,b){var c=this.T.defaulted?"":this.T.value;if(c==b){this.lD(a,b)}};Ng.prototype.lD=function(a,b){var c=new Q(a);c.value=b;this.dispatchEvent(c)};var sr=function(a,b,c){this.T=k(a);this.Ef=D(b);var d=this.Ef.H();if(c){this.QO=c;Ob(c.Ab(),function(g,h){var i=u("option");i.value=h;i.text=g;this.T.options[this.T.options.length++]=i})}for(var e=0;e<this.T.options.length;e++){var f=this.T.options[e];if(d==f.value){f.selected=true}}H().addListener(m(this.Lj,this),b);q(this.T,uh,this.Ml,false,this);q(this.T,ag,this.Ml,false,this)};sr.prototype.Lj=function(){if(!this.mk){var a=this.Ef.H();this.lk=true;this.T.value=a?a:"";this.lk=false}};sr.prototype.Ml=
function(){if(!this.lk){var a=this.T.value||null;this.mk=true;fe(this.Ef.Sd,a);this.mk=false}};var sx=function(a,b,c){for(var d=a.firstChild;d;d=d.nextSibling){sx(d,b,c)}if(a.nodeType==1&&a.getAttribute("maximize")=="true"){if(a.__lastWidth){wr(a,a.__lastWidth+b)}if(a.__lastHeight){bk(a,a.__lastHeight+c)}}},rx=function(a){var b;if(a.nodeType==1&&a.getAttribute("maximize")=="true"&&a.nodeName!="TR"){var c,d;if(a.parentNode.nodeName=="BODY"){var e=gd();c=e.width;d=e.height;a.parentNode.style.overflow="hidden"}else{var f=a.parentNode;c=a.parentNode.offsetWidth-ak(f);if(n.GECKO){c-=ak(a)}var g=
a.parentNode.offsetHeight;if(n.SAFARI&&a.parentNode.nodeName=="TD"&&a.parentNode.parentNode.__lastHeight){g=a.parentNode.parentNode.__lastHeight}d=g-Ym(f)}var h=ak(a);if(a.nodeName!="TABLE"){wr(a,c)}bk(a,d);if(a.offsetHeight>d){bk(a,2*d-a.offsetHeight)}if(a.nodeName=="TABLE"){var i=null,j=0,l;for(var l=0;l<a.rows.length;l++){var p=a.rows[l];if(p.getAttribute("maximize")=="true"){i=p;i.style.height="100%"}}if(i){for(var l=0;l<a.rows.length;l++){var p=a.rows[l];if(p!=i){var t=n.SAFARI&&p.firstChild?
p.firstChild.offsetHeight:p.offsetHeight;j+=t}}bk(i,d-j-2);i.style.width=""}}}for(b=a.firstChild;b;b=b.nextSibling){rx(b)}};var Zm=function(a,b){this.CW=a;this.WC=b||"$LastMessage";this.W3=D(this.WC+"/Message");this.I5=D(this.WC+"/Level");H().addListener(m(this.hV,this),this.WC+"/...");this.Hi=false};Zm.prototype.hV=function(){if(!this.Hi){N.setTimeout(m(this.Vf,this),0)}this.Hi=true};Zm.prototype.Vf=function(){if(this.Hi){var a=Bc(this.CW);if(a){var b=this.W3.H();if(b==null){Oa(a,"error");Oa(a,"info");a.innerHTML=""}else{var c=this.I5.H();if(c=="INFO"){ga(a,"info");Oa(a,"error")}else{ga(a,"error");Oa(a,"info")}ga(a,"hilite");
if(b.length<150){a.innerHTML=ca(b)}else{var d=G("div",{style:"display:none; position:absolute; background-color:white;padding:8px; border:1px dashed #AAA;text-decoration: none"});d.innerHTML=ca(b).replace(/\n/g,"<br/>");var e=G("a",{href:"#"});q(e,ta,function(){if(d.style.display=="block"){d.style.display="none"}else{d.style.display="block"}});e.innerHTML="Details";a.innerHTML="";a.appendChild(document.createTextNode("Operation failed. Please try again in a moment. "));a.appendChild(e);a.appendChild(d);
var f=Ja(a),g=Wa(a),h=Wa(d);ef(d,f.x+g.width-h.width,f.y+g.height)}N.setTimeout(m(this.XX,this),1000)}}this.Hi=false}};Zm.prototype.XX=function(){var a=Bc(this.CW);if(a){Oa(a,"hilite")}};var xd=function(){this.pN="..";this.gI={};this.oK={};this.Wp={};this.Gs={};this.n3={};this.yA={}},Ec=function(){if(!Xm){Xm=new xd}return Xm},Xm=null;xd.prototype.Q_=function(a,b,c){a=new B(a);if(b&&c){if(!this.Wp[b]){this.Wp[b]={}}this.Wp[b][c]=a}else if(b){this.oK[b]=a}else if(c){this.gI[c]=a}else{this.pN=a}};xd.prototype.oo=function(a,b){if(this.Wp[a]&&this.Wp[a][b]){return this.Wp[a][b]}else if(this.oK[a]){return this.oK[a]}else if(this.gI[b]){return this.gI[b]}else{return this.pN}};xd.prototype.AY=
function(a){this.Gs[a.wc()]=a};xd.prototype.OB=function(a,b,c){var d=this.Gs[a];if(d&&d.Ec){d.Ec(b,c);return true}var e=this.n3[a];if(e&&e.Ec){e.Ec(b,c);return true}return false};xd.prototype.Yq=function(a,b,c){var d=this.Gs[a];if(d&&d.Yq){d.Yq(b,c);return true}return false};xd.prototype.Qj=function(a,b,c){var d=this.Gs[a];if(d&&d.Qj){d.Qj(b,c);return true}return false};var wx=0;xd.prototype.xO=function(a,b,c,d){if(n.MAC&&n.GECKO){ga(document.body,"background")}var e=this.yO(a,b),f=this.KO(a,c,d);
if(!n.IE){e.src=f}var g=new K;g.$l().appendChild(e);g.Lk(new Gb);g.ma(true);if(n.IE){e.src=f}this.yA[a]=g;return e.contentWindow};xd.prototype.yO=function(a,b){var c=a+"-iframe",d=Bc(c);if(!d){d=G("iframe",{id:c});V(d,"display","block");V(d,"backgroundColor","#FFF");V(d,"border","1px solid #555");Ic(d,b.width,b.height)}return d};xd.prototype.KO=function(a,b,c){var d=new B(this.oo()+"/ui/"+a);if(c){var e="UiWidgetCallback"+wx++;N[e]=c;d.$("done",e)}d.$("js","RAW");d.$("pop","TRUE");if(b){Ob(b,function(f,
g){if(f!=null){d.$(g,f)}})}return d};xd.prototype.HP=function(a){var b=this.yA[a];if(b){b.e();Oa(document.body,"background")}delete this.yA[a]};xd.prototype.vU=function(a){var b=this.yA[a];if(b){b.ma(false)}};xd.prototype.xI=function(a,b){var c=this.Gs[a],d=Bc(c.wc()+"-iframe");if(d&&d.contentWindow.UI_receive){d.contentWindow.UI_receive(b)}};xd.prototype.LB=function(a){var b=a||document;for(var c=b.firstChild;c;c=c.nextSibling){this.LB(c)}if(b.getAttribute){var d=b.getAttribute("gtype");if(d){var e=
{};for(var f=0;f<b.attributes.length;f++){var g=b.attributes[f];e[g.name]=g.value}var h=this.OB(d,b,e);if(!h){this.Yq(d,b,e)}}}};window.UI_setServerBase=function(a,b,c){Ec().Q_(a,b,c)};window.UI_getServerBase=function(a,b){Ec().oo(a,b)};window.UI_attachAndDisplayAllWidgets=function(a){Ec().LB(a)};window.UI_attachWidget=function(a,b,c){Ec().OB(a,b,c)};window.UI_displayInline=function(a,b,c){Ec().Yq(a,b,c)};window.UI_displayIframe=function(a,b){Ec().Qj(a,b)};var jd=function(a){this.Wf(a)},hr={},Oj=function(a){var b=hr[a];if(b==null){b=new jd(a);hr[a]=b}return b};jd.prototype.Wf=function(a){this.Sd=a;this.eg=[];if(this.RJ("||")){this.Pl=this.OP}else if(this.RJ("and")){this.Pl=this.JP}else if(this.Uu("!=")){this.Pl=this.NP}else if(this.Uu("=")){this.Pl=this.KP}else if(this.Uu("<")){this.Pl=this.MP}else if(this.Uu(">")){this.Pl=this.LP}else{this.i3=this.hy(a);this.Pl=this.yS}};jd.prototype.Uu=function(a){var b=this.Sd,c=b.indexOf(a);if(c!=-1){this.o4=a;
this.Uj=this.hy(Va(b.substring(0,c)));this.Kk=this.hy(Va(b.substring(c+a.length)));return true}else{return false}};jd.prototype.RJ=function(a){var b=this.Sd,c=b.indexOf(a);if(c!=-1){this.o4=a;this.Uj=Oj(Va(b.substring(0,c)));this.Kk=Oj(Va(b.substring(c+a.length)));this.eg=this.eg.concat(this.Uj.Pc());this.eg=this.eg.concat(this.Kk.Pc());return true}else{return false}};jd.prototype.hy=function(a){var b=a.substring(0,1),c=a.toLowerCase();if("0123456789'\"".indexOf(b)==-1&&c!="true"&&c!="false"){var d=
D(a);this.eg.push(d);return d}else{return tx(a)}};jd.prototype.yS=function(a){return this.i3.H(a)?true:false};jd.prototype.KP=function(a){return this.Uj.H(a)==this.Kk.H(a)};jd.prototype.NP=function(a){return this.Uj.H(a)!=this.Kk.H(a)};jd.prototype.MP=function(a){return this.Uj.H(a)<this.Kk.H(a)};jd.prototype.LP=function(a){return this.Uj.H(a)>this.Kk.H(a)};jd.prototype.OP=function(a){return this.Uj.H(a)||this.Kk.H(a)};jd.prototype.JP=function(a){return this.Uj.H(a)&&this.Kk.H(a)};jd.prototype.H=
function(a){return this.Pl(a)};jd.prototype.Pc=function(){return this.eg};var vi=function(a){if(a){this.Wf(a)}},tr={},tx=function(a){var b=tr[a];if(b==null){b=new vi(a);tr[a]=b}return b},Xj=function(a){var b=new vi;b.Ia=a;return b};vi.prototype.Wf=function(a){this.Sd=a;if(a=="TRUE"||a=="true"){this.Ia=true}else if(a=="FALSE"||a=="false"){this.Ia=false}else if(Xc(a,'"')&&kc(a,'"')){this.Ia=a.substring(1,a.length-1)}else if(Xc(a,"'")&&kc(a,"'")){this.Ia=a.substring(1,a.length-1)}else if(!isNaN(a)){this.Ia=Number(a)}else{throw Error("Invalid static expression: "+a);}};vi.prototype.H=
function(a){return this.Ia};vi.prototype.Pc=function(){return[]};var kd=function(a){this.clear();if(a){this.Aj(a)}};kd.prototype.r=function(){return this.Ma};kd.prototype.Ab=function(){return Dh(this.Lb)};kd.prototype.Ic=function(){return Dh(this.Pa)};kd.prototype.sc=function(a){var b=Vb(a);return b in this.Pa};kd.prototype.dg=function(a){return Yr(this.Lb,a)};kd.prototype.isEmpty=function(){return this.Ma==0};kd.prototype.clear=function(){this.Pa={};this.Lb={};this.Ma=0};kd.prototype.remove=function(a){var b=Vb(a);if(gg(this.Pa,b)){delete this.Lb[b];this.Ma--;
return true}return false};kd.prototype.get=function(a,b){var c=Vb(a);if(c in this.Lb){return this.Lb[c]}return b};kd.prototype.K=function(a,b){var c=Vb(a);if(!(c in this.Pa)){this.Pa[c]=a;this.Ma++}this.Lb[c]=b};kd.prototype.Aj=function(a){var b,c;if(a instanceof kd){b=a.Ic();c=a.Ab()}else{b=Ai(a);c=Dh(a)}for(var d=0;d<b.length;d++){this.K(b[d],c[d])}};kd.prototype.ha=function(){return new kd(this)};var Og=function(){this.Pj=new kd;this.rb=null;this.M4=m(this.Qd,this)};Og.prototype.nW=function(a,b,c,d){if(!cf(c)){throw Error("not a function: "+c);}if(!a.Zw){throw Error("Nodes for markDirty must support getDepth");}b=b||[];var e=b.join(","),f=this.Pj.get(a);if(!f){f={};this.Pj.K(a,f)}if(!f[e]){f[e]=[]}ji(f[e],c);this.lZ()};Og.prototype.MG=function(a,b){b=b||[];var c=this.Pj.get(a);if(c){if(b.length==0){this.Pj.remove(a)}else{var d=String(b);delete c[d];if(c.length==0){this.Pj.remove(a)}}}};Og.prototype.lZ=
function(){if(!this.rb){this.rb=N.setTimeout(this.M4,50)}};Og.prototype.Qd=function(){delete this.rb;var a=this.Pj.Ic();a.sort(function(d,e){return d.Zw()-e.Zw()});for(var b=0;b<a.length;b++){var c=a[b];this.yY(c);this.Pj.remove(c)}};Og.prototype.yY=function(a){while(true){var b=this.Pj.get(a),c=this.qR(b);if(c==null){return}var d=c==""?[]:c.split(","),e=b[c];for(var f=0;f<e.length;f++){var g=e[f];g.call(a,null,"",d)}delete b[c]}};Og.prototype.qR=function(a){if(a!=null){for(var b in a){return b}}return null};var na=function(a,b,c,d){this.aH=a.nodeName;this.Ti=c;this.dP=d;this.sY(a);this.WZ(b);this.df(a)},ur=rc("goog.focus.TemplateNode"),Wm=null,vx=0,Vm=function(){if(!Wm){Wm=new Og}return Wm};na.prototype.Dt=true;na.prototype.Zw=function(){return this.dP};na.prototype.e=function(){};na.prototype.sY=function(a){this.rl={};var b=a.attributes;for(var c=0,d;d=b[c];++c){var e=d.nodeName,f=d.nodeValue;if(f!=null){if(e=="if"){this.Mx=Oj(f)}else if(e=="context"){this.hO=D(f)}else if(e=="repeat"){this.fz=D(f)}else if(e==
"id"){this.Na=f;this.GU=Zj(this.Na)}else{var g=Xc(e,"on")||e=="g.oncreate";this.rl[e]=Zj(f,g?1:0)}}}};na.prototype.WZ=function(a){this.ZY=a;this.Jm=this.ZY;if(this.hO){this.Jm=this.OE(this.hO,true)}if(this.fz){this.Jm=this.OE(this.fz,true)}};na.prototype.PE=function(a,b){var c=a.Sd,d=b?this.ZY:this.Jm;if(c.indexOf("$")!=0&&d){c=d.Sd+"/"+c}return c};na.prototype.OE=function(a,b){return D(this.PE(a,b))};na.prototype.sd=function(){if(!this.Fs){this.yM();if(!this.Na){this.Na="Node"+vx++;this.GU=Zj(this.Na)}this.Fs=
true}};na.prototype.yM=function(){if(this.Mx){var a=this.dw(this.PN);this.Ys(this.Mx,a,true)}if(this.fz){var b=this.dw(this.D1);this.Ys(this.Jm.Jd(),b,true)}var c=this.dw(this.w1);for(var d=0;d<this.ag.length;d++){var e=this.ag[d];if(!e.ik()){this.Ys(e,c,false)}}for(var f in this.rl){this.Ys(this.rl[f],c,false)}};na.prototype.dw=function(a){var b=this;return function(c,d,e){Vm().nW(b,e,a,c)}};na.prototype.Ys=function(a,b,c){var d=H();if(a.Pc){var e=a.Pc();for(var f=0;f<e.length;f++){var g=this.PE(e[f],
c);d.zB(b,g)}}else{var g=a.Sd;d.zB(b,g)}};na.prototype.df=function(a){if(!this.ag){var b=this.aH=="script"?1:0;this.ag=[];var c=a.childNodes;for(var d=0,e;e=c[d];++d){if(!(e.nodeType==3&&/^[\n\r\t ]*$/.test(e.nodeValue))){var f=Ax().JO(e,this.Jm,this.Ti,this.dP+1,b);this.ag.push(f)}}}};na.prototype.Tb=function(){if(this.Mx){return this.Mx.H(this)}else{return true}};na.prototype.V=function(a,b){if(b&&b.R){b=D(b.Ua())}if(b){this.setDataContext(b);this.df()}this.ip(a)};na.prototype.nu=function(a){this.dc=
a||[];this.Kl=this.eE(this.dc)};na.prototype.co=function(a,b){var c=[];for(var d in this.rl){if(!a||d!="style"){var e=this.rl[d].H(this)||"";c.push({name:d,value:e})}}var f=b||this.Nr();c.push({name:"id",value:f});if(a){var g=this.rl.style,h=(g?g.H(this)+"; ":"")+"display: none";c.push({name:"style",value:h})}return c};na.prototype.Du=function(a,b,c){if(this.Dt){a.Fp(b,c)}};na.prototype.hr=function(a,b){if(this.Dt){a.Wn(b)}};na.prototype.ip=function(a,b,c){Vm().MG(this,this.dc);var d=this.aH,e=this.Tb();
if(this.fz&&!b){this.KY(a,c);this.O4=true}else if(e){var f=this.co();this.Du(a,d,f);this.$H(a);this.hr(a,d);this.O4=true}else if(d!="option"){var f=this.co(true);if(this.Dt){a.Fp(d,f);a.Wn(d)}}};na.prototype.KY=function(a,b){var c=D(this.bx(this.dc)).Be(),d=this.aH;for(var e=0;e<c.r();e++){var f=c.Da(e);this.dc.push(f.ya());this.Kl=this.eE(this.dc);if(this.Tb()){var g=this.co();this.Du(a,d,g);this.$H(a);this.hr(a,d);this.CM()}this.dc.pop()}if(!b&&d!="option"){this.cI=this.Nr()+"-R";var h=this.co(true,
this.cI);this.Du(a,d,h);this.hr(a,d)}};na.prototype.CM=function(){if(!this.Dw){this.Dw={}}var a=this.Dw;for(var b=0;b<this.dc.length-1;b++){if(!a[this.dc[b]]){a[this.dc[b]]={}}a=a[this.dc[b]]}a[String(this.dc[this.dc.length-1])]=this.Nr()};na.prototype.TX=function(a){var b=this.Tb(),c=a.style.display!="none";if(b!=c){if(b){this.aI(a)}a.style.display=b?"":"none";if(!b){Vm().MG(this,this.dc);while(a.lastChild){a.removeChild(a.lastChild)}}}};na.prototype.aI=function(a){var b=new ge(a,"REPLACE");this.fa("render in renderElement");
b.Fu();this.ip(b,true);b.ir()};na.prototype.$H=function(a){this.df();for(var b=0;b<this.ag.length;b++){var c=this.ag[b];if(c.Pt){c.Pt(a,this)}else{c.sd();c.nu(this.dc);c.V(a)}}};na.prototype.Nr=function(){var a=this.GU.H(this);if(this.dc){for(var b=0;b<this.dc.length;b++){a+="-"+this.dc[b]}}return a};na.prototype.ic=function(){return Bc(this.Nr())};na.prototype.eE=function(a){var b=this.bx(a),c=D(b).zb();return c};na.prototype.bx=function(a){var b=this.Jm?this.Jm.Sd:"";if(a){for(var c=0;c<a.length;c++){b=
b.replace(/\*/,a[c])}}return b};na.prototype.fa=function(a){var b=Ej;if(ur.Ms(b)){var c=[a,"View=",this.Ti.Na," Node=",this.Na];for(var d=1;d<arguments.length;d++){c.push(arguments[d])}ur.log(b,c.join(", "))}};na.prototype.w1=function(a,b,c){this.nu(c);var d=this.ic();if(d){this.aI(d)}};na.prototype.D1=function(a,b,c){var d=Bc(this.cI);if(d){c=c||[];var e=this.Dw;for(var f=0;f<c.length;f++){e=this.Dw[String(c[f])]}for(var g in e){var h=e[g],i=Bc(h);if(i){i.parentNode.removeChild(i)}}for(var g in e){delete e[g]}this.nu(c);
var j=new ge(Bc(this.cI),"INSERT_BEFORE");this.fa("render in updateRepeated");j.Fu();this.ip(j,null,true);j.ir()}};na.prototype.PN=function(a,b,c){this.nu(c);var d=this.ic();if(d){this.TX(d)}};na.prototype.ik=function(){return true};na.prototype.R=function(a){if(a=="$Context"){var b=this.bx(this.dc),c=D(b);if(c.zb()){var d=c.zb().ya()}else if(this.dc){d=this.dc[this.dc.length-1]}if(c&&c.Jd()){var e=c.Jd().zb(),f=e.ea().r()-1,g=e.ea().indexOf(d)}if(b!=""){b=b+"/"}var h=this.dc.length>0?"-"+this.dc.join("-"):
"",i=this.Ti?this.Ti.R5:"",j=new qa({"@dataName":d,"@cid":h,"@vid":i,"@dataPath":b,"@last":f,"@index":g},"Context");return j}else if(a=="$View"){return this.Ti.B5}else if(a.indexOf("$")==0){return H().R(a)}else{return this.Kl?this.Kl.R(a):null}};na.prototype.Y=function(a){if(a=="$Context"){return new qa({},"Context")}else if(a.indexOf("$")==0){return H().Y(a)}else{return this.Kl?this.Kl.Y(a):""}};na.prototype.ea=function(a){return this.Kl?this.Kl.ea(a):new Kd};na.prototype.Lr=function(){return this};
var $j=function(a,b){this.Y6=a;this.V0=Zj(a,b);this.eg=this.V0.Pc()};$j.prototype.Pt=function(a,b){a.Bq(ly(this.V0.H(b)))};$j.prototype.Pc=function(){return this.eg};$j.prototype.ik=function(){return false};var Um=function(a,b,c,d){na.call(this,a,b,this,d);this.B5=c;this.R5=ux++;this.Dt=false};Um.k(na);var ux=0,Om=function(a,b,c,d){na.call(this,a,b,c,d)};Om.k(na);Om.prototype.ip=function(a){var b="span";this.Du(a,b,this.co());var c=this.rl.text.H(this);if(c){c=c.replace("\n\r","\n");var d=c.split(/[\n\r]/);
for(var e=0;e<d.length;e++){var f=d[e];if(e>0){a.Fp("br",[]);a.Wn("br")}a.Bq(f)}}this.hr(a,b)};var aa=function(){this.Ih=Ec().oo().toString();this.O5=false;this.K5=false;this.$P=null;this.et=500;this.nD=false;this.y5=false;this.XW=0;this.Z4=50;this.R4=[];this.P5=!Xc(this.Ih.toString(),"http");this.qz=new Sm;this.N6=new Wj;this.$a=new ti;qa.call(this,this.$a,"Contacts");H().gd(this);this.g={};var a=new qa(this.g,"ContactData");H().gd(a);this.HO()};aa.k(qa);var Hm=null,Ee=function(){if(!Hm){Hm=new aa}return Hm};aa.prototype.VQ=function(a){return this.ea().get(a)};aa.prototype.Dz=function(a){this.et=
a};aa.prototype.ea=function(a){if(!a||a=="*"){return this.$a}else if(a.indexOf("*")==-1){var b=this.R(a);if(b){return new eb([b])}else{return new Kd}}else{throw new Error("Selector not supported yet ("+a+")");}};aa.prototype.Y=function(a){var b=this.$a.get(a);return b==null?null:b.get()};aa.prototype.Kc=function(){return true};aa.prototype.WQ=function(a,b,c){var d=new B(this.Ih+"/data/contacts"),e=d.ek();e.K("thumb",this.O5);e.K("groups",this.K5);if(this.$P){e.K("show",this.$P);e.K("enums","true")}e.K("psort",
"Name");e.K("max",a||this.et);e.K("out","js");e.K("rf",this.R4.join(","));if(b){e.K("tok",b);if(this.VM){e.K("cl","false")}if(this.nD){e.K("cd","true")}}if(c){e.K("ud","false")}return d};aa.prototype.g0=function(){if(!this.J3){var a=H();new af("Groups","$ContactReq/Body/Groups","$ContactReq/Body/Groups");new af("Enums","$ContactReq/Body/Enums","$ContactReq");new af("AuthToken","$ContactReq/Body/AuthToken","$ContactReq");new af("ExtraData","$ContactReq/Body/ExtraData","$ContactReq");a.UM("$UserData",
"$ContactReq/Body/UserData");this.so="$Groups";this.Su=D("$AuthToken/Value");this.gs=D(this.so);a.addListener(m(this.PO,this),"$ContactReq");a.addListener(m(this.HW,this),"$ContactAppend");a.addListener(m(this.QS,this),this.so);var b=this,c=Rh();c.ab("ADD_SELECTED_CONTACTS_TO_GROUP",function(d){b.MM(d.groupId)});c.ab("ADD_EMAIL",function(){b.zn(b.og(),"Emails","HOME")});c.ab("REMOVE_EMAIL",function(d){b.hp(b.og(),"Emails",d.dataName)});c.ab("ADD_PHONE",function(){b.zn(b.og(),"Phones","HOME")});c.ab("REMOVE_PHONE",
function(d){b.hp(b.og(),"Phones",d.dataName)});c.ab("ADD_IM",function(){b.zn(b.og(),"Ims")});c.ab("REMOVE_IM",function(d){b.hp(b.og(),"Ims",d.dataName)});c.ab("ADD_ADDRESS",function(){b.zn(b.og(),"Addresses","HOME")});c.ab("REMOVE_ADDRESS",function(d){b.hp(b.og(),"Addresses",d.dataName)});c.ab("ADD_OTHER",function(){b.zn(b.og(),"Others","HOME")});c.ab("REMOVE_OTHER",function(d){b.hp(b.og(),"Others",d.dataName)});c.ab("PICTURE_ERROR",this.XT.bind(this));this.J3=true}};aa.prototype.PQ=function(){if(!this.nN){var a=
new B(D("$UserData/PhotoUrl").H()),b=new B(window.location);a.yp(b.nx());this.nN=a.toString()}return this.nN};aa.prototype.XT=function(a){var b=D("$Contacts/"+a.contactId).zb();if(b){b.j_();var c=H();c.ra("$Contacts/"+a.contactId+"/MaybeHasPicture")}};aa.prototype.Ea=function(a,b,c){this.g0();var d=a||1,e=d==4,f=d==3,g=c&&this.nD;if((f||e)&&this.VM&&!g)return;if(!this.m3||d!=1){var h=e?"ContactAppend":"ContactReq";if(e){fe("$ContactData/PendingLongRequest",true)}else{fe("$ContactData/Loading",true)}var i=
H(),j=this.WQ(b,c,e);if(this.P5){j.$("jsx","true");this.dI=new Bf(j,h,"&&&START&&&","&&&END&&&")}else{this.dI=new Jg(j,h)}i.gd(this.dI,true);this.dI.Ea();this.m3=true}};aa.prototype.PO=function(a){H().dZ(m(this.SV,this,a));var b=Jm("$ExtraData/NavLinks",true);if(Bc("additional-nav-links")&&b){Bc("additional-nav-links").innerHTML=b.get();var c=Jm("$ExtraData/BlInfo",true);Bc("additional-nav-links").title=c.get()}this.nD=this.y5&&D("$UserData/ShowDomainContacts").H();fe("$ContactData/Loading",false);
var d=D("$ContactReq/Body").zb();if(d){d.Ha("Contacts",null)}fb.info("About to fire data change");H().ra("$Contacts");H().ra("$Groups");H().ra("$SelectedContactCount");fb.info("Done firing data change");fe("$ContactData/Loaded",true)};aa.prototype.HW=function(a){var b=D("$ContactAppend/Body/Contacts").H();fb.info("Starting adding additional contacts");if(b){this.$a=this.BW(this.$a,b)}var c=D("$ContactAppend/Body/NameSegments").H();if(c){this.ZJ(c)}fb.info("Ending adding additional contacts");H().ra("$Contacts");
fe("$ContactData/PendingLongRequest",false)};aa.prototype.SV=function(a){this.$a.clear();fb.info("Starting contact add");var b=D("$ContactReq/Body/Contacts").H()||[];fb.info("Starting contact updates");for(var c=0,d=b.length;c<d;c++){this.xM(b[c])}var e=D("$ContactReq/Body/NameSegments").H();if(e){this.ZJ(e)}fb.info("Ended contact add");this.VM=b.length==ax("$Groups/^All/Count");this.YG(a);if(this.Jq){this.Ht(this.Jq,"^Temp")}};aa.prototype.YG=function(a){var b=D(a+"/Body/Groups").zb(),c=b?b.mg():
[],d=De(c,"$Groups");H().gd(d)};aa.prototype.QS=function(){fb.info("Starting groupsChanged");this.k6=true;this.fs={};var a=this.gs.zb().ea();for(var b=0;b<a.r();b++){var c=a.Da(b);this.fs[c.Y("id")]=c}this.fN();fb.info("Ending groupsChanged")};aa.prototype.fN=function(){var a=this.$a.r();for(var b=0;b<a;b++){var c=this.$a.Da(b);this.eN(c)}};aa.prototype.eN=function(a){var b=a.R("Groups",true).ea();for(var c=0;c<b.r();c++){var d=b.Da(c);if(d.get()&&d.ea().r()>0){var e=this.fs[d.Y("id")];if(e){var f=
d.R("ref");if(f&&f.Y("Name")!=d.Y("Name")){d.ea().Kh("ref",null);f=null}if(!f||!f.get()){d.ea().add(ni(e,"ref"))}}}}};aa.prototype.xM=function(a){this.$a.ba(new Mb(a,this))};aa.prototype.Np=function(a){var b=a.mg?a.mg():(a.pa?a.pa:a),c=new Mb(b,this),d=b.id,e=false,f=false,g=null,h=this.$a.get(d);if(h){f=this.Ji(h,"^Freq");e=this.Ji(h,"^Temp");if(e){this.Xt(h,false)}g=h.Y("RosterState")}var i=this.$a.r();this.$a.ba(c);if(e){this.Xt(c,true)}if(f){this.GI(c,"^Freq",true)}if(g){a.Ha("RosterState",g)}if(h){if(d==
D("$CurrentContactId").H()){N.setTimeout(function(){H().ra("$CurrentContact")},5)}}H().ra(c.Ua());if(this.$a.r()!=i){H().ra("$Contacts/count()")}return c};aa.prototype.cH=function(a){if(a){var b=a.wc(),c=a.lE().join(","),d=a.getName();Rh().fireEvent("CONTACT_CHANGED","id",b,"emails",c,"name",d)}else{Rh().fireEvent("CONTACT_CHANGED")}};aa.prototype.dX=function(){Rh().fireEvent("GROUP_CHANGED")};aa.prototype.$h=function(a){this.XW++;var b=String(-this.XW);a.Ha("Id",b);a=this.Np(a);return a};aa.prototype.HO=
function(a){var b={},c=new qa(b,"$TempGroup");H().gd(c)};aa.prototype.eZ=function(a,b,c){var d=new ba,e=Pj({out:"js",tok:this.Su.zb().get(),cid:a,photo:b,crop:c,action:"SET"});q(d,sa.COMPLETE,this.BH,false,this);d.send(this.Ih+"/update/photos","POST",e)};aa.prototype.QN=function(a){var b=new ba,c=Pj({out:"js",tok:this.Su.zb().get(),cid:a,action:"SET_EVERGREEN"});q(b,sa.COMPLETE,this.BH,false,this);b.send(this.Ih+"/update/photos","POST",c)};aa.prototype.aP=function(a){var b=new ba,c=Pj({out:"js",tok:this.Su.zb().get(),
cid:a,action:"DELETE"});q(b,sa.COMPLETE,this.GX,false,this);b.send(this.Ih+"/update/photos","POST",c)};var Im=function(a){var b=a.indexOf("&&&START&&&")+"&&&START&&&".length,c=a.lastIndexOf("&&&END&&&");return kn(a.substring(b,c))};aa.prototype.Fq=function(){Vj()};aa.prototype.BH=function(a){var b=a.target,c=null;if(b.Kd()){c=Im(b.Qc())}if(c&&c.Success){Pd().add(Wc("PICTURE_ADD_SUCCESS"),"INFO");this.UJ(c.Body.Contact);if(c.Body.CanSuggest){Ec().xI("photopicker.PhotoPicker",{type:"SHOW_SUGGEST",imageUrl:c.Body.Contact.Picture})}else{this.Fq()}}else{Pd().add(Wc("PICTURE_ADD_ERROR"),
cg);this.Fq()}};aa.prototype.GX=function(a){var b=a.target,c=null;if(b.Kd()){c=Im(b.Qc())}if(c&&c.Success){this.UJ(c.Body.Contact);Pd().add(Wc("PICTURE_DELETE_SUCCESS"),"INFO")}else{Pd().add(Wc("PICTURE_DELETE_ERROR"),cg)}this.Fq()};aa.prototype.UJ=function(a){var b=this.$a.get(a.Id);if(b){b.Ha("Picture",a.Picture);b.UH();var c=H();c.ra("$CurrentContact/Picture");c.ra("$CurrentContact/ForcedPicture");c.ra("$CurrentContact/MaybeHasPicture")}};aa.prototype.GZ=function(a,b){var c=new ba,d=Pj({out:"js",
tok:this.Su.zb().get(),cid:a,msg:b,action:"SUGGEST"});q(c,sa.COMPLETE,this.JX,false,this);c.send(this.Ih+"/update/photos","POST",d)};aa.prototype.JX=function(a){var b=a.target,c=null;if(b.Kd()){c=Im(b.Qc())}if(c&&c.Success){Pd().add(Wc("PICTURE_SUGGEST_SUCCESS"),"INFO")}else{Pd().add(Wc("PICTURE_SUGGEST_ERROR"),cg)}this.Fq()};var Pj=function(a){var b=new nb;for(var c in a){b.add(c,a[c])}return b.toString()};aa.prototype.uC=function(a){this.$a.removeNode(a);this.qz.Ha(a,null)};aa.prototype.MM=function(a){if(a){var b=
this.sR(a),c=new Qg(this,b,"ADD");c.send()}};aa.prototype.sR=function(a){return D(this.so+"/"+a+"/Name").H()};aa.prototype.Ji=function(a,b){var c=a.R("Groups",true).R(b);return c!=null&&c.Y("id")!=null};aa.prototype.GI=function(a,b,c){var d=this.Ji(a,b);if(c&&!d){var e=a.R("Groups",true).R(b,true);e.Ha("value",a.ye());e.Ha("id",b)}else if(!c&&d){a.R("Groups",true).Ha(b,null)}};aa.prototype.Xt=function(a,b){a.Ha("SelectedCount",this.Z4++);var c=a.ya(),d=b!=null?b:!this.Ji(a,"^Temp");this.GI(a,"^Temp",
d);a.eP();var e=!(!this.qz.R(c));if(d!=e){var f=d?ni(a,c):null;this.qz.Ha(c,f);fe("$SelectedContactCount",this.qz.ea().r())}};aa.prototype.Ht=function(a,b){var c={},d=this.ea(),e=d.r();for(var f=0;f<e;f++){var g=d.Da(f);c[g.ye()]=g}var h=a.split(/[;,]/);for(var f=0;f<h.length;f++){var i=h[f],j=null,l=null,p=i.indexOf("<");if(p==-1){j=Va(i)}else{l=Va(i.substring(0,p));j=Va(i.substring(p+1,i.indexOf(">",p)))}if(j.length>0){var g=c[j];if(!g){var t={Emails:[{Address:j}]},w=De(t,j);g=this.$h(w)}this.Xt(g,
true)}}if(this.i2){this.Dr(-1,"");this.It("")}};aa.prototype.It=function(a){this.Jq=a};aa.prototype.Dr=function(a,b){var c=this.ea().r(),d=false,e="";for(var f=0;f<c;f++){var g=this.ea().Da(f);if(this.Ji(g,a)){var h=g.Y("Name"),i=g.ye(),j=h&&b=="FULL"?h+" <"+i+">":i;if(d){e=e+", "}e=e+j;d=true}}return e};aa.prototype.zn=function(a,b,c){var d=String(cx++),e=a.R(b);if(!e){e=De([],b,a);a.Ha(b,e)}var f=De({id:d},d,e);e.Ha(d,f);if(c){f.R("Type",true).Ha("Id",c)}};aa.prototype.hp=function(a,b,c){a.R(b,
true).Ha(c,null)};aa.prototype.og=function(){return D("$TempContact").zb()};aa.prototype.BW=function(a,b){var c={},d=a.Tc;for(var e=0,f=d.length;e<f;++e){var g=d[e].lE();if(g){for(var h=0;h<g.length;++h){c[g[h]]=d[e]}}}var i=[];for(var e=0,f=b.length;e<f;++e){var g=b[e].Emails,j=null;if(g){for(var h=0;h<g.length;++h){var l=g[h].Address;if(c[l]){j=c[l];break}}}if(j){if(!j.getName()&&b[e].Name){j.Ha("Name",b[e].Name)}}else{var p=new Mb(b[e],this);i.push(p);if(g){for(var h=0;h<g.length;++h){var l=g[h].Address;
c[l]=p}}}}var t=this.AW(d,i),w=new ti;for(var e=0;e<t.length;++e){w.ba(t[e])}return w};aa.prototype.AW=function(a,b){var c=[],d=0;for(var e=0;e<a.length;e++){var f=a[e];while(d<b.length&&Tw(f,b[d])>0){c.push(b[d++])}c.push(f)}while(d<b.length){c.push(b[d++])}return c};aa.prototype.ZJ=function(a){for(var b in a){var c=this.$a.get(b);c.Ha("NameSegments",a[b])}};var Sm=function(){qa.call(this,{},"$SelectedContacts");H().gd(this);var a=new qa(0,"SelectedContactCount");H().gd(a)};Sm.k(qa);Sm.prototype.Kc=
function(){return true};var Wj=function(){qa.call(this,{},"SelectedGroup");var a=H();a.gd(this);a.addListener(this.B1.bind(this),"$CurrentGroup/id");this.es=null};Wj.k(qa);Wj.prototype.Kc=function(){return true};Wj.prototype.B1=function(){var a=D("$CurrentGroup/id").H()||"^Temp";if(this.es!=a){this.qc=new eb;var b=Ee(),c=b.ea();for(var d=0;d<c.r();d++){var e=c.Da(d),f=e.Y("id");if(b.Ji(e,a)){this.Ha(f,ni(e,f))}}this.es=a;H().ra("$SelectedGroup")}};var ti=function(){eb.call(this)};ti.k(eb);ti.prototype.ba=
function(a){var b=a.Y("Id"),c=this.n[b];if(c){this.n[b]=a;for(var d=0;d<this.Tc.length;d++){if(this.Tc[d].Y("Id")==b){this.Tc[d]=a}}}else{this.add(a)}};ti.prototype.clear=function(){eb.call(this)};var Mb=function(a,b,c){var d=a.Id,e=c||d;a.id=d;if(a.Groups==null){a.Groups=[]}vb.call(this,a,e,b)};Mb.k(vb);Mb.prototype.Y=function(a){if(a=="UserGroupCount"){return this.aF().ea().r()}else{this.YF(a);return Mb.j.Y.call(this,a)}};Mb.prototype.R=function(a,b){if(a=="UserGroups"){return this.aF()}else{this.YF(a);
return Mb.j.R.call(this,a,b)}};Mb.prototype.aF=function(){var a=new qa({},"UserGroups",this),b=this.R("Groups",true).ea();for(var c=0;c<b.r();c++){var d=b.Da(c),e=d.Y("id");if(!Xc(e,"^")){a.ea().add(ni(d,e))}}return a};Mb.prototype.YF=function(a){if((a=="ForcedPicture"||a=="MaybeHasPicture")&&!this.__PictureInitialized){this.__PictureInitialized=true;this.UH()}};Mb.prototype.UH=function(){var a=this.ME();if(a){this.Ha("ForcedPicture",a);this.Ha("MaybeHasPicture",true)}else{this.Ha("MaybeHasPicture",
false)}};Mb.prototype.j_=function(){this.Ha("MaybeHasPicture",false)};Mb.prototype.ME=function(a){var b=this.ye();if(b){var c=Ee().PQ()+encodeURIComponent(b)+"?rp=1&pld=1&";if(a){c+="t=e&"}c+=Math.floor(Math.random()*2000000);return c}else{return null}};Mb.prototype.toString=function(){var a=this.getName(),b=this.ye();return a&&b?a+" <"+b+">":a||b};Mb.prototype.getName=function(){return this.Y("Name")};Mb.prototype.ye=function(){var a=this.R("Emails");if(a){var b=a.ea();if(b&&b.r()>0){return b.Da(0).Y("Address")}}return null};
Mb.prototype.wc=function(){return this.Y("Id")};Mb.prototype.lE=function(){var a=[],b=this.R("Emails");if(b){var c=b.ea();for(var d=0,e=c.r();d<e;++d){a.push(c.Da(d).Y("Address"))}}return a};Mb.prototype.eR=function(){return this.getName()||this.ye()||""};Mb.prototype.pV=function(a){return a=="^All"||this.R("Groups").R(a)!=null};Mb.prototype.eP=function(){var a=this.R("Emails");if(a){var b=D("$UserData/AspDomain").H(),c=D("$UserData/Email").H();for(var d=0;d<a.r();d++){var e=a.Da(d),f=e.Y("Address");
if(kc(f,"@gmail.com")||kc(f,"@googlemail.com")||b&&kc(f,"@"+b)){e.Ha("CanChat",true)}if(f==c){this.Ha("Me",true)}}}};var Tw=function(a,b){var c=Uw(a,b);if(c!=0){return c}var d=a.getName()||a.ye()||"zz",e=b.getName()||b.ye()||"zz",f=d.toLowerCase(),g=e.toLowerCase();if(f==g){return 0}else if(f<g){return-1}else{return 1}};var Uw=function(a,b){var c=a.Y("DomainContact")?1:0,d=b.Y("DomainContact")?-1:0;return c+d},Fe=function(a,b,c){this.Iq=a;this.Q0=b;this.Mw=c},Xw=0;Fe.prototype.Vw=function(a){var b=
new B(Ee().Ih+"/update/"+a),c=Ee().Su.zb().get();b.$("token",c);b.$("tok",c);b.$("out","js");return b};Fe.prototype.kh=function(){throw new Error("getUpdateUri not implemented in "+this);};Fe.prototype.send=function(){if(this.jK&&!this.jK()){if(this.Mw){this.Mw()}return}fe("$ContactData/PendingRequest",true);var a=Xw++;this.QY="ContactUpdate"+a;this.wd="$ContactUpdate"+a;var b=this.kh(),c=new Bf(b,this.QY,"&&&START&&&","&&&END&&&",true);this.I4=m(this.Xy,this);var d=H();d.gd(c,this.QY);d.addListener(this.I4,
this.wd);c.Ea();this.xY=false;N.setTimeout(m(this.r0,this),1000)};Fe.prototype.r0=function(){if(!this.xY){fe("$ContactData/PendingLongRequest",true)}};Fe.prototype.Xy=function(){this.xY=true;fe("$ContactData/PendingRequest",false);fe("$ContactData/PendingLongRequest",false);var a=D(this.wd+"/Success");if(a.H()){var b;if(this.Gm){b=this.Gm()}if(this.Q0){this.Q0(b)}var c=D(this.wd+"/Messages/*");if(c.Be().r()>0){var d=D(this.wd+"/Messages/[0]/Text").H();Pd().add(d,"INFO")}}else{var e=D(this.wd+"/TryLogin").H();
if(e){alert(Wc("INFO_LOGGED_OUT"));return}var f=D(this.wd+"/Errors/*");if(f.Be().r()>0){var g=D(this.wd+"/Errors/[0]/Message").H(),h=D(this.wd+"/Errors/[0]/Text").H(),i=g||h;Pd().add(Wc("SAVE_DATA_ERROR",{msg:i}),cg)}else{Pd().add(Wc("SAVE_DATA_UNKNOWN_ERROR"),cg)}if(this.Mw){this.Mw()}}};var Pg=function(a,b,c,d){this.Zv=b;Fe.call(this,a,c,d);this.y3=!b.Y("Id")};Pg.k(Fe);Pg.prototype.kh=function(){var a=this.Zv,b=this.Vw("contact"),c=a.Y("Id");if(c){b.$("id",c);b.$("action","SET")}else{b.$("action",
"ADD")}this.wM(b);return b};Pg.prototype.wM=function(a){var b=this.Zv,c=D("Addresses/*").Be(b);for(var d=0;d<c.r();d++){var e=c.Da(d),f=e.Y("Source");if(!f){f="STRUCTURED";e.Ha("Source",f)}if(f=="UNSTRUCTURED"){e.Ha("Unstructured",e.Y("Street"))}}this.xB(a,b,["Name","Title","Company","Notes"]);this.pl(a,b,"Emails",["Address","Type/Id","Type/Label"]);this.pl(a,b,"Others",["Value","Type/Id","Type/Label"]);this.pl(a,b,"Phones",["Number","Type/Id","Type/Label"]);this.pl(a,b,"Ims",["Name","Service/Id",
"Type/Id","Type/Label"]);this.pl(a,b,"Addresses",["Street","City","Region","Postal","Type/Id","Type/Label","Source","Unstructured"]);this.pl(a,b,"Groups",["id","value"]);return a};Pg.prototype.xB=function(a,b,c,d){var e=d||"";for(var f=0;f<c.length;f++){var g=c[f],h=D(g).H(b);if(!h){h=""}else if(wa(h)){h=Va(h)}a.$((e+g).replace("/","."),h)}};Pg.prototype.pl=function(a,b,c,d){var e=D(c).zb(b);if(e){for(var f=0;f<e.ea().r();f++){var g=e.ea().Da(f);this.xB(a,g,d,c+"."+String(f)+".")}}};Pg.prototype.jK=
function(){var a=true,b=this.Zv.R("Emails").ea(),c=0,d=false;for(var e=0;e<b.r();e++){var f=b.Da(e).Y("Address");if(f&&Va(f)!=""){c++;if(e==0){d=true}}if(f&&!$w.test(Va(f))){Pd().add(Wc("ASK_VALID_EMAIL"),cg);a=false}}var g=this.Zv.Y("Name");if(c==0&&(!g||Va(g)=="")){Pd().add(Wc("ASK_NAME_OR_EMAIL"),cg);a=false}else if(c>0&&!d){Pd().add(Wc("ASK_PRIMARY_EMAIL"),cg);a=false}return a};Pg.prototype.Gm=function(){var a=D(this.wd+"/Body/Groups/*").Be();if(a.r()>0){var b=new af("Groups",this.wd+"/Body/Groups",
this.wd+"/Body/Groups");b.xx()}var c=D(this.wd+"/Body/Contact").zb(),d=this.Iq.Np(c);this.Iq.cH(d);if(this.y3){H().ra("$Contacts")}return d};var Lm=function(a,b,c,d){Fe.call(this,a,c,d);this.Ei=wa(b)?[b]:b};Lm.k(Fe);Lm.prototype.kh=function(){var a=this.Vw("contact");a.en("ids",this.Ei);a.$("action","DELETE");return a};Lm.prototype.Gm=function(){var a=D(this.wd+"/Body/Contact/*").Be();for(var b=0;b<a.r();b++){var c=a.Da(b);this.Iq.uC(c.Y("Id"))}H().ra("$Contacts");var d=new af("Groups",this.wd+"/Body/Groups",
this.wd+"/Body/Groups");d.xx();Pd().add("Contact has been deleted.","INFO");this.Iq.cH()};var Qg=function(a,b,c,d,e,f){this.Iq=a;this.jl=c||"ADD";this.YW=d;this.es=b;Fe.call(this,a,e,f)};Qg.k(Fe);Qg.prototype.TE=function(a,b){var c=this.Vw("groups");c.$("action",this.jl);if(this.es!=null){c.$("id",this.es)}if(this.YW!=null){c.$("name",this.YW)}if(a.length>0){c.en("contactIds",a)}if(b.length>0){c.en("newContacts",b)}return c};Qg.prototype.kh=function(){var a=D("$Contacts/*").Be(),b=a.r(),c=[],d=[];
this.Nv={};for(var e=0;e<b;e++){var f=a.Da(e);if(Ee().Ji(f,"^Temp")){var g=parseInt(f.Y("Id")||"",10);if(!isNaN(g)&&g>=0){c.push(g)}else{var h=f.ye();if(h){var i=f.getName()||"";d.push(h+":"+i);if(!isNaN(g)){this.Nv[h]=Number(g)}}}}}return this.TE(c,d)};Qg.prototype.Gm=function(){var a=Ee(),b=D(this.wd+"/Body/Contacts/*").Be();for(var c=0;c<b.r();c++){var d=b.Da(c),e=false;if(this.Nv){var f=d.Emails||{},g=f[0]||{},h=g.Address;if(h){var i=this.Nv[h];if(i){delete this.Nv[h];var j=a.VQ(i);if(j){e=j.pV("^Temp");
a.uC(i)}}}}var l=a.Np(d);if(e){a.Xt(l,true)}}H().ra("$Contacts");a.YG(this.wd);H().ra("$Groups");a.dX()};var rr=function(a,b,c,d,e,f,g){Qg.call(this,a,c,d,e,f,g);this.G2=b};rr.k(Qg);rr.prototype.kh=function(){return this.TE(this.G2,[])};var bx=function(a,b){if(b=="^Temp"){var c=0;for(var d=0;d<a.r();d++){var e=a.Da(d);if(Ee().Ji(e,b)){c++}}return c}else{var f=D("$Groups/"+b).zb();return f?f.Y("Count"):0}},$w=/^[a-z0-9_\.\-\+=%]+\@(([a-z0-9\-])+\.)+([a-z0-9]{2,6})$/i;var ax=function(a,b){return D(a).H(b)},fe=function(a,b,c){var d=D(a);if(d.Jd()){return d.Jd().zb(c,true).Ha(d.sk,b)}else{d.zb(c).K(b)}},Jm=function(a,b){return D(a).zb(b)};var Zw=function(a,b){var c=wa(a)?Jm(a):a;b=b||0;if(b>20)return"";var d="                 ",e="";
e=e+d.substring(0,b)+c.ya()+":";var f=c.ea(),g=c.get();if(f.r()==0&&(!g||!g.r)){e=e+g}else{e=e+"{\n";for(var h=0;h<f.r();h++){e=e+Zw(f.Da(h),b+1)+"\n"}e=e+d.substring(0,b)+"}"}return e};var cx=100;var Km=function(a,b){var c=false,d=a.R("Groups");if(d){var e=d.R(b);if(e){c=e.Y("id")!=null}}return c},Yw=function(a,b){if(!Km(a,b)){var c=a.R("Groups");if(!c.get()){c.K([])}c.R(b).K({id:b})}};var Od=function(a,b,c){this.$a=new eb;qa.call(this,this.$a,"Contacts");this.iY=a;this.hY=b;this.a5=new Tm(this);
var d=H();d.gd(this);d.gd(this.a5);d.addListener(m(this.uM,this,a),b);this.b5=0;new af("AuthToken","$ContactReq/Body/AuthToken","$ContactReq");this.j6=D("$AuthToken/Value");this.so="$Groups";this.gs=D(this.so);d.addListener(m(this.KS,this),this.so);this.c7=c};Od.k(qa);Od.prototype.uM=function(a,b){if(b==this.hY){fb.info("Starting contact add");var c=D(a+"/*"),d=c.Be(),e=d.r();for(var f=0;f<e;f++){var g=d.Da(f);this.$h(g)}if(this.Jq){this.Ht(this.Jq,"^Temp")}fb.info("About to fire data change");H().ra("$Contacts");
fb.info("Ended contact add")}};Od.prototype.KS=function(){this.fs={};var a=this.gs.zb().ea();for(var b=0;b<a.r();b++){var c=a.Da(b);this.fs[c.Y("id")]=c}this.LV()};Od.prototype.ea=function(a){if(!a||a=="*"){return this.$a}else if(a.indexOf("*")==-1){var b=this.R(a);if(b){return new eb([b])}else{return new Kd}}else{throw new Error("Selector not supported yet ("+a+")");}};Od.prototype.Y=function(a){var b=this.$a.get(a);return b==null?null:b.get()};Od.prototype.$h=function(a){var b=a.ye();a.pa.id=b;
a.Jh(b);this.$a.add(a);a.C=this;H().ra(a.Ua());return a};Od.prototype.Np=function(a,b){var c=null,d=a.ye();a.R("id").K(d);a.Jh(d);var e=this.$a.Tc,f=false;for(var g=0;g<e.length;g++){if(e[g].ye()==d){a.R("SelectedCount").K(e[g].Y("SelectedCount"));if(Km(e[g],"^Temp")){Yw(a,"^Temp")}e[g]=a;c=e[g];f=true}}if(f){this.$a.n.K(d,a);this.wG(a);a.C=this;H().ra(a.Ua());return c}else if(b){return this.$h(a)}};Od.prototype.Ht=function(a,b){var c=a.split(/[;,]/);for(var d=0;d<c.length;d++){var e=c[d],f=null,
g=null,h=e.indexOf("<");if(h==-1){f=Va(e)}else{g=Va(e.substring(0,h));f=Va(e.substring(h+1,e.indexOf(">",h)))}if(f.length>0){var i;if(!this.$a.get(f)){var j={Name:g,Email:f,id:f};i=new qa(j,j.Email);this.$h(i)}else{i=this.$a.get(f)}i.R("SelectedCount").K(this.b5++);if(b){i.R("Groups");var l=i.R("Groups");if(!l.get()){l.K([])}l.R(b).K(b)}}}if(this.i2){this.Dr(-1,"");this.It("")}};Od.prototype.It=function(a){this.Jq=a};Od.prototype.Dr=function(a,b){var c=this.$a.r(),d=false,e="";for(var f=0;f<c;f++){var g=
this.$a.Da(f);if(Km(g,a)){var h=g.Y("Name"),i=g.ye(),j=h&&b=="FULL"?h+" <"+i+">":i;if(d){e=e+", "}e=e+j;d=true}}return e};Od.prototype.kS=function(){this.CZ=new eb;var a,b=this.$a.r(),c=[],d=[];for(a=0;a<b;a++){var e=this.$a.Da(a),f=e.Y("SelectedCount");if(f!=null){c[Number(f)]=e}else{d.push(e)}}b=c.length;for(a=0;a<b;a++){if(c[a]){this.CZ.add(c[a])}}return this.CZ};Od.prototype.LV=function(){var a=this.$a.r();for(var b=0;b<a;b++){var c=this.$a.Da(b);this.wG(c)}};Od.prototype.wG=function(a){if(a.R("Groups").get()==
null){a.R("Groups").K([])}var b=a.R("Groups").ea();for(var c=0;c<b.r();c++){var d=b.Da(c);if(d.get()&&d.ea().r()>0){var e=this.fs[d.Y("id")];if(e){var f=d.qc.get("ref");if(!f){d.qc.add(ni(e,"ref"))}}}}};var Tm=function(a){this.E2=a;qa.call(this,null,"SelectedContacts")};Tm.k(qa);Tm.prototype.ea=function(a){if(!a||a=="*"){return this.E2.kS()}else if(a.indexOf("*")==-1){var b=this.R(a);if(b){return new eb([b])}else{return new Kd}}else{throw new Error("Selector not supported yet ("+a+")");}};var af=
function(a,b,c){qa.call(this,null,a);this.zh=a;this.iY=b;this.hY=c;this.ag=new eb;this.pa=[];this.Md=false;var d=H();d.gd(this);d.addListener(m(this.xx,this),c)};af.k(qa);af.prototype.xx=function(){if(!this.Md){var a=this.iY,b=D(a+"/*");this.ag=b.Be();for(var c=0;c<this.ag.r();c++){this.pa.push(this.ag.Da(c))}H().ra("$"+this.zh);this.Md=true}};af.prototype.ea=function(a){if(!a||a=="*"){return this.ag}else{throw new Error("Selector not supported yet ("+a+")");}};var Nm=function(a,b,c,d,e){this.Hi=
true;this.gs=D(b+"/*");if(c){this.H2=D(c+"/*")}this.g5=d;this.k5=e;this.oz=a;this.Eu=this.oz.options.length;var f=H();f.addListener(m(this.PS,this),b+"/...")};Nm.prototype.PS=function(){this.gV()};Nm.prototype.V=function(){if(this.Hi){var a=this.gs.Be(),b=this.Eu,c=this.oz.value;for(var d=0;d<a.r();d++){var e=a.Da(d),f=e.Y("id");if(!Xc(f,"^")||this.k5){var g=e.Y("Name");if(this.g5){var h=bx(this.H2.Be(),f);g=g+" ("+h+")"}var i=u("option");i.value=f;i.text=g;this.oz.options[b++]=i}}this.oz.value=c;
this.Hi=false}};Nm.prototype.gV=function(){if(!this.Hi){N.setTimeout(m(this.V,this),5)}this.Hi=true};var wi=function(){this.So=[];this.Jo={};H().gd(new qa(this.Jo,"LastMessage"))},$m;wi.prototype.add=function(a,b){var c=a.length<150,d=new Q("NOTIFY_USER");d.message=a;d.level=b;var e=true;if(c){e=Do().Il(d)}if(e){this.nP(a,b)}};wi.prototype.nP=function(a,b){var c=b||"INFO",d={Message:a,Level:c};this.So.push(d);this.Jo.Message=a;this.Jo.Level=c;H().ra("$LastMessage")};wi.prototype.clear=function(){var a=
new Q("CLEAR_NOTIFICATIONS");if(Do().Il(a)){this.SN()}};wi.prototype.SN=function(){var a={Message:null};this.So.push(a);this.Jo.Message=null;this.Jo.Level=null;H().gd(new qa(this.Jo,"LastMessage"));H().ra("$LastMessage")};var Pd=function(){if($m==null){$m=new wi}return $m},cg="ERROR";var ck=function(){};ck.prototype.V=function(a,b){};ck.prototype.Pc=function(){};ck.prototype.ik=function(){};var xh=function(){};xh.k(ck);xh.prototype.V=function(a,b){};xh.prototype.Pc=function(){return[]};xh.prototype.ik=function(){return true};xh.prototype.Pt=function(a,b){};var yh=function(){};yh.prototype.Fp=function(a,b){};yh.prototype.Wn=function(a){};yh.prototype.Bq=function(a){};yh.prototype.Fu=function(){};yh.prototype.ir=function(){};var ge=function(a,b){this.T=a;this.Zq=a.ownerDocument;this.Bh=[];this.Bs=false;this.Oz=null;this.B0=null;this.dr=[];this.Ay=0;this.ym=b||"SET_CONTENT";this.AO=this.ym!="SET_CONTENT";this.PY=this.ym=="REPLACE";if(this.AO){var c=hx[a.nodeName]||"DIV";this.DU=u(c);this.wl=this.DU}else{this.wl=a}this.dr.push(this.wl)};ge.k(yh);var hx={TR:"TABLE",TD:"TR",OPTION:"SELECT"},mr={},lr={},kr={},ix={style:true,script:true},gx={option:true,tr:true,td:true,tbody:true,thead:true},fx={br:true,img:true};ge.prototype.Fp=
function(a,b){var c,d;if(this.Ay==0&&gx[a]){var e=this.Zq.createElement(a),f=b.length;for(var g=0;g<f;g++){var h=b[g];if(h.name=="id"){c=h.value}else if(h.name=="g.oncreate"){d=h.value;continue}e.setAttribute(h.name,h.value)}if(c&&d){this.nH.push({id:c,script:d})}this.dr.push(e);this.wl.appendChild(e);this.wl=e;this.J1=true;return}this.Ay++;if(ix[a]){return this.mY(a,b)}var i=mr[a];if(!i){i="<"+a;mr[a]=i}var j=i;if(b!=null){var f=b.length;for(var g=0;g<f;g++){var h=b[g],l=h.name,p=h.value;if(l=="id"){c=
p}else if(l=="g.oncreate"){d=p;continue}var t=kr[l];if(t==null){t=" "+l+'="';kr[l]=t}j=j+t+ca(p)+'"'}if(c&&d){this.nH.push({id:c,script:d})}}j=j+">";this.Bh.push(j)};ge.prototype.Wn=function(a){if(this.Ay>0){this.Ay--}else{if(this.wl.childNodes.length==0){this.wl.innerHTML=this.Bh.join("")}this.Bh=[];this.dr.pop();this.wl=this.dr[this.dr.length-1];return}if(this.Bs==true){this.Bs=false;return}if(!fx[a]){var b=lr[a];if(b==null){b="</"+a+">";lr[a]=b}this.Bh.push(b)}if(this.Bh.length>1000){var c=this.Bh.join("");
this.Bh=[c]}};ge.prototype.Bq=function(a){if(this.Bs==true){return this.A0(a)}this.Bh.push(ca(a))};ge.prototype.Fu=function(){this.Bh=[];this.mZ=[];this.nH=[]};ge.prototype.ir=function(){var a=this.Bh.join("");if(this.AO){var b=this.DU;if(!this.J1){b.innerHTML=a}if(b.childNodes.length==1&&this.PY){this.T.parentNode.replaceChild(b.childNodes[0],this.T)}else{if(this.T.parentNode.nodeName=="SELECT"){var c=this.T.parentNode.value}var d;while(d=b.childNodes[0]){this.T.parentNode.insertBefore(d,this.T)}if(this.PY){this.T.parentNode.removeChild(this.T)}if(c!=
null){this.T.parentNode.value=c}}}else{if(!this.J1){this.T.innerHTML=a}}Ob(this.mZ,function(e){eval(e)});Ob(this.nH,function(e){var f=k(e.id);(new Function(e.script)).call(f)})};ge.prototype.mY=function(a,b){if(a=="style"){var c;for(var d=0;d<b.length;d++){if(b[d].name=="id")c=b[d].value}this.Oz="style";this.B0=c+"_ss";this.Bs=true}else if(a=="script"){this.Oz="script";this.Bs=true}else{throw Error("No handler for "+a);}};ge.prototype.A0=function(a){if(this.Oz=="style"){this.PM(this.B0,a)}else if(this.Oz==
"script"){this.mZ.push(a)}};ge.prototype.FO=function(a){var b=null,c=Bc(a);if(c==null){c=this.Zq.createElement("style");c.setAttribute("type","text/css");c.setAttribute("id",a);this.Zq.body.appendChild(c)}for(var d=0;d<this.Zq.styleSheets.length;d++){var e=this.Zq.styleSheets[d],f=e.owningElement;if(f==null){f=e.ownerNode}if(f.id==a){b=e}}return b};ge.prototype.PM=function(a,b){if(Bc(a)){return}var c=this.FO(a),d=b.split("}");if(c.insertRule){for(var e=0;e<d.length;e++){if(d[e]!=""){c.insertRule(d[e]+
"}",0)}}}else if(c.cssText!=null){for(var e=0;e<d.length;e++){if(d[e]!=""){var f=d[e].split("{"),g=f[0],h=f[1],i=g.split(",");for(var j=0;j<i.length;j++){if(i[j]!=""){c.addRule(i[j],h)}}}}}};var Yj=function(a,b){this.Wf(a,b)},Zj=function(a,b){if(a.indexOf("{{")==-1||a.indexOf("function(")!=-1){return Xj(a)}else if(Xc(a,"{{")&&kc(a,"}}")){var c=D(a.substring(2,a.length-2));if(b==1){c=new ob(c.Ib());c.qV=true}c.Pc=function(){return[c]};return c}else{return new Yj(a,b)}};Yj.prototype.Wf=function(a,b){this.Sd=a;this.Db=[];this.eg=[];if(this.Sd.indexOf("{{")==-1){this.Db.push(Xj(this.Sd))}else{var c=this.Sd.split("{{");for(var d=0;d<c.length;d++){var e=c[d];if(e.length>0){var f=e.indexOf("}}");
if(f==-1){this.Db.push(Xj(e))}else{var g=e.substring(0,f),h;if(b==1){h=new ob(g);h.qV=true}else{h=D(g)}this.Db.push(h);this.eg.push(h);if(f<e.length-1){var i=e.substring(f+2);this.Db.push(Xj(i))}}}}}};Yj.prototype.H=function(a){var b=this.Db.length,c=[];for(var d=0;d<b;d++){var e=this.Db[d].H(a);if(this.Db[d].qV){if(e==null){e="null"}else if(wa(e)){e=ms(e)}}c.push(e==null?"":e)}return c.join("")};Yj.prototype.Pc=function(){return this.eg};var an=function(){var a={};Ob(Bx,function(b){a[b]=true});this.o3=a;this.d7={};this.P1={};this.NO={}},bn,Ax=function(){if(bn==null){bn=new an}return bn};an.prototype.JO=function(a,b,c,d,e){d=d||0;var f=a.nodeName;if(f=="#text"){return new $j(a.nodeValue,e)}else if(f=="#comment"){return new xh}else if(f=="MultilineText"){return new Om(a,b,c,d)}else if(this.o3[f]){return new na(a,b,c,d)}else if(f=="View"){return new Um(a,b,null,d)}else if(this.P1[f]){return new Um(this.P1[f],b,this.CO(a),d)}else if(this.NO[f]){return this.NO[f](a,
b,c)}else{throw Error("No view exists matching name: "+f);}};an.prototype.CO=function(a){var b={},c=a.attributes.length;for(var d=0;d<c;++d){var e=a.attributes[d];b["@"+e.nodeName]=e.nodeValue}return De(b,"$View")};var Bx=["p","div","b","i","br","ul","li","a","hr","span","img","table","tr","select","option","td","th","tbody","#text","h1","h2","h3","dl","dt","input","iframe","form","textarea","col","#comment","strike","button","script","style","thead","link","em"];var Sj="/ui/",jx=function(a){Sj=a};N.HtmlUtil_setServerBase=jx;var Vw=function(a){var b=new B(Sj+"ContactManager"),c=a||"THREE";b.$("style",c);b.$("js","RAW");b.$("pop","TRUE");return b},Ww=function(a,b){var c=b=="TWO"?502:750,d=new Je(0,0,c,500),e="toolbar=no,location=no,menubar=no,scrollbars=no,resizable=yes,status=no,width="+d.width+",height="+d.height+",top="+d.top+",left="+d.left,f=Vw(b).toString();window.open(f,"_manager",e)};yx("goog.focus.ContactManagerLauncher.popManager",Ww);var wd=function(a,b){this.T=a;this.V1=b;this.CH=b.exists=="true";this.lr=[];this.Kv(a);if(!this.CH){this.LC("Add a picture",false,true)}};wd.prototype.e=function(){for(var a=0;a<this.lr.length;a++){ua(this.lr[a])}if(this.ij&&this.ij.parentNode){this.ij.parentNode.removeChild(this.ij)}if(this.Vg&&this.ij.Vg){this.Vg.parentNode.removeChild(this.ij)}};wd.prototype.Kv=function(a){this.lr.push(q(a,de,this.Si,false,this));this.lr.push(q(a,tc,this.xc,false,this));this.lr.push(q(a,ta,this.sX,false,this))};
wd.prototype.p=null;wd.prototype.qh=null;wd.prototype.Si=function(a){if(this.Vg){this.YB();return}this.Vg=this.mO();if(this.CH){this.LC("Change picture",true)}};wd.prototype.mO=function(){var a=Wa(this.T);a.width-=ak(this.T);a.height-=Ym(this.T);if(n.IE){a.width+=4;a.height+=4}a.width+=2;a.height+=2;var b=G("div");this.Kv(b);b.style.position="absolute";b.style.zIndex=20;Ic(b,a);b.style.border="2px solid blue";var c=Ja(this.T);c.x-=3;c.y-=3;b=this.T.parentNode.insertBefore(b,this.T);Ci(b,c);return b};
wd.prototype.LC=function(a,b,c){if(!this.T.parentNode){return}var d=G("div");this.Kv(d);var e=b?"background-color: white;":"";d.innerHTML='<div style="text-align: center; '+e+'font-family: Arial; font-size: 12px; padding: 2px"><a href="javascript:void(0)">'+a+"</a></div>";d.style.position="relative";d.style.zIndex=20;xm(d,this.T);var f=(this.T.offsetHeight+d.offsetHeight)/2;d.style.top="-"+f+"px";this.ij=d;this.b6=c};wd.prototype.xc=function(a){if(this.Vg){var b=a.relatedTarget;if(!b||b!=this.T&&
!Cc(this.Vg,b)){this.Ex(true)}}};wd.prototype.WR=function(a){var b={dn:a.eR()},c=a.ME(true);if(c){b.eUrl=c}nr(b);return b};var nr=function(a){var b=D("$UserData/IsPicasaUser").H(),c=D("$UserData/Email").H(),d=b&&c&&(kc(c,"gmail.com")||kc(c,"googlemail.com"));a.userId=d?c.substring(0,c.indexOf("@")):null;a.urlEnabled=1;a.extraUploadParams="out=hjs";a.suppressHide="1"};wd.prototype.sX=function(){this.Ex(false);var a=D("$Contacts/"+this.V1.contactid).zb(),b=this.WR(a);Ec().Qj("photopicker.PhotoPicker",
b,this.ss.bind(this))};wd.prototype.Ex=function(a){this.YB();if(a){var b=m(this.Ex,this,false);this.qh=N.setTimeout(b,20);return}if(this.T&&this.Vg){this.Vg.parentNode.removeChild(this.Vg);this.Vg=null;if(this.CH){this.ij.parentNode.removeChild(this.ij);this.ij=null}}};wd.prototype.YB=function(){if(this.qh){N.clearTimeout(this.qh);this.qh=null}};wd.prototype.ss=function(a){var b=this.V1.contactid,c=a.type;if(c=="PHOTO_PICKED"){if(a.evergreen){Ee().QN(b)}else if(a.noPhoto){Ee().aP(b)}else{Ee().eZ(b,
a.imageUrl,a.cropString)}}else if(c=="SUGGEST_DONE"&&a.suggestMessage){Ee().GZ(b,a.suggestMessage)}else{Vj()}};var Uj=function(){},or,ui={};Uj.prototype.wc=function(){return"photopicker.PhotoPicker"};var mx=function(){if(!or){var a=new Uj;Ec().AY(a);or=true}},Vj=function(){Ec().vU("photopicker.PhotoPicker");Ec().xI("photopicker.PhotoPicker",{type:"CLOSE_NO_REMOVE"});Ec().HP("photopicker.PhotoPicker");Rh().fireEvent("ENABLE_WINDOW")};Uj.prototype.Ec=function(a,b){for(var c in ui){var d=ui[c];if(!d.T||!Cc(document,d.T)){d.e();delete ui[c]}}if(a&&!ui[a.id]){var e=new wd(a,b);ui[a.id]=e}};Uj.prototype.Qj=function(a,
b){var c=new cb(545,332);if(n.IE){c.height-=16}var d=Ec().xO(this.wc(),c,a,b);Rh().fireEvent("DISABLE_WINDOW")};var Pm,Qm,pr=function(a,b){var c=307,d;if(a){d=Ja(a);var e=Wa(a);d.y+=e.height}else{d=new Fa(0,0)}var f=e.width>c?e.width:c,g=554,h=313,i=600;if(b){d.x+=b.screenX-b.clientX;d.y+=b.screenY-b.clientY}if(d.x+h>screen.width){d.x=screen.width-h}if(d.y+i>screen.height){d.y=screen.height-i}var j=new Je(d.x,d.y,f,g);return j},px=function(a,b){var c=new B(Sj.replace(/ui\/?$/,""));nx(c,a,b)},nx=function(a,b,c,d){var e;if(b){b=Bc(b);var e=b.getAttribute("id")}else{e=null}var f;if(!n.SAFARI&&b){f=Ig(bb(b))||
window}else{f=window}var g=pr(b,c),h="toolbar=no,location=no,menubar=no,scrollbars=no,resizable=yes,status=no,width="+g.width+",height="+g.height+",top="+g.top+",left="+g.left,i=Rm(a,e,d);f.open(i.toString(),"_picker",h)},Rm=function(a,b,c){var d=a.WY(new B("ui/ContactPicker"));if(b){d.$("inputId",b)}if(c){if(c.serviceName){d.$("service",c.serviceName)}}return d},ox=function(a,b,c){if(Pm){qr()}var d=pr(a,null),e=Rm(a,c);window.iframeDone=qr;e.$("done","iframeDone");var f=Bc("picker-iframe-div");if(f==
null){var f=G("div",{id:"picker-iframe-div",style:"position: absolute; background-color; #FFF",zIndex:10});document.body.appendChild(f);f.innerHTML='<iframe id="picker-iframe" style="display:none; background-color; #FFF; border: 0"></iframe>'}var g=Bc("picker-iframe");g.style.display="block";Ci(f,d.left,d.top);Ic(g,d.width,d.height);g.src=e;Qm=f;Pm=g},qr=function(){C(Qm);Qm=null;Pm=null};Nd("goog.focus.PickerLauncher.popPicker",px);Nd("goog.focus.PickerLauncher.popIframe",ox);var bg=function(a,b,c,d,e,f){this.d3=b;this.y4=c;this.Ih=a;this.Yd=d;this.e5=!(!e);this.W0=f||""};bg.prototype.GV=function(){if(!D("$UserData").zb()){var a=new ba;q(a,sa.COMPLETE,this.TS,false,this);a.send(this.Ih+"/gastatus?out=js","GET")}else{this.tG()}};bg.prototype.TS=function(a){var b=a.target;if(b.Kd()){var c=this.tH(b.Qc());if(c.Body){var d=c.Body.UserData,e=new vb(d,"UserData");H().gd(e)}}this.tG()};bg.prototype.tG=function(){var a={};a.dn=this.d3;a.profileMode="1";a.eUrl=this.y4;if(this.W0){a.theme=
this.W0}nr(a);Ec().Qj("photopicker.PhotoPicker",a,this.ss.bind(this))};bg.prototype.ss=function(a){if(a.type=="PHOTO_PICKED"){this.HZ(a)}else{Vj()}};bg.prototype.HZ=function(a){var b=new nb;b.add("out","js");b.add("cid","p");b.add("tok",a.tok);if(a.evergreen){return}else if(a.noPhoto){b.add("action","DELETE")}else{b.add("action","SET");b.add("crop",a.cropString);b.add("photo",a.imageUrl)}if(this.e5){b.add("p","true")}var c=new ba;q(c,sa.COMPLETE,this.fU,false,this);c.send(this.Ih+"/update/photos",
"POST",b.toString())};bg.prototype.fU=function(a){Vj();var b=a.target,c=null;if(b.Kd()){c=this.tH(b.Qc())}var d={};if(c&&c.Success){d.success=true;if(c.Body){d.newUrl=c.Body.NewUrl;d.newUrlF=c.Body.NewUrlF}}else{d.success=false}this.Yd(d)};bg.prototype.tH=function(a){var b=a.indexOf("&&&START&&&")+"&&&START&&&".length,c=a.lastIndexOf("&&&END&&&");return kn(a.substring(b,c))};var qx=function(a,b,c,d,e){mx();var f=new bg(Ec().oo(),a,b,c,d,e);f.GV()};window.launchProfilePhotoPicker=qx;var Nn=function(a,b,c){Q.call(this,a,b);this.item=c};Nn.k(Q);var xa=function(a,b){this.B=new ma(this);this.tp(a);if(b){this.Z_(b)}};xa.k(J);var Sn="toggle_display";xa.prototype.b=null;xa.prototype.QB=true;xa.prototype.Tb=false;xa.prototype.i0=false;xa.prototype.rG=-1;xa.prototype.Ss=-1;xa.prototype.Qa=Sn;xa.prototype.gm=function(){return this.Qa};xa.prototype.Z_=function(a){this.Qa=a};xa.prototype.S=function(){return this.b};xa.prototype.tp=function(a){this.AD();this.b=a};xa.prototype.CI=function(a){this.AD();this.QB=a};xa.prototype.AD=function(){if(this.Tb){throw Error("Can not change this state of the popup while showing.");
}};xa.prototype.Oa=function(){return this.Tb};xa.prototype.cG=function(){return this.Tb||ha()-this.Ss<150};xa.prototype.ma=function(a){if(a){if(!this.b){throw Error("Caller must call setElement before trying to show thepopup");}this.Kg()}else{this.Di()}};xa.prototype.Eg=function(){};xa.prototype.Kg=function(){if(this.Tb){return}if(!this.Yo()){return}this.Eg();if(this.QB){var a=bb(this.b);this.B.m(a,X,this.vt,true);if(n.IE){var b=a.activeElement;while(b&&b.nodeName=="IFRAME"){try{var c=tm(b)}catch(d){break}a=
c;b=a.activeElement}this.B.m(a,X,this.vt,true);this.B.m(a,"deactivate",this.hH)}else{this.B.m(a,"blur",this.hH)}}if(this.Qa==Sn){this.b.style.visibility="visible";s(this.b,true)}else if(this.Qa=="move_offscreen"){this.Eg()}this.Tb=true;this.Me()};xa.prototype.Di=function(a){if(this.Tb){if(!this.gX(a)){return}if(this.B){this.B.mc()}if(this.Qa==Sn){if(this.i0){pc(this.BF,0,this)}else{this.BF()}}else if(this.Qa=="move_offscreen"){this.NW()}this.Tb=false;this.Ri(a)}};xa.prototype.BF=function(){this.b.style.visibility=
"hidden";s(this.b,false)};xa.prototype.NW=function(){this.b.style.left="-200px";this.b.style.top="-200px"};xa.prototype.Yo=function(){return this.dispatchEvent("beforeshow")};xa.prototype.Me=function(){this.rG=ha();this.Ss=-1;this.dispatchEvent("show")};xa.prototype.gX=function(a){return this.dispatchEvent({type:"beforehide",target:a})};xa.prototype.Ri=function(a){this.Ss=ha();this.dispatchEvent({type:"hide",target:a})};xa.prototype.vt=function(a){if(!Cc(this.b,a.target)){this.Di(a.target)}};xa.prototype.hH=
function(a){var b=bb(this.b);if(n.IE){var c=b.activeElement;if(c&&Cc(this.b,c)){return}}else if(a.target!=b){return}if(ha()-this.rG<150){return}this.Di()};xa.prototype.e=function(){if(!this.da()){xa.j.e.call(this);this.B.e();this.b=null;this.B=null}};var qd=function(a,b){this.IH=5;this.Dh=b;xa.call(this,a)};qd.k(xa);qd.prototype.ny=null;qd.prototype.dS=function(){return this.IH};qd.prototype.K_=function(a){this.IH=a;if(this.Tb){this.Eg()}};qd.prototype.no=function(a){return this.Dh};qd.prototype.setPosition=function(a){this.Dh=a;if(this.Tb){this.Eg()}};qd.prototype.Eg=function(){if(!this.Dh){return}if(!this.Tb){this.b.style.visibility="hidden";s(this.b,true)}this.Dh.pb(this.b,this.IH,this.ny);if(!this.Tb){s(this.b,false)}};qd.prototype.pb=function(){this.Eg()};
var Zc=function(a,b,c,d,e,f,g){var h=Ja(c),i=Ja(a),j=new Fa(i.x-h.x+c.offsetLeft,i.y-h.y+c.offsetTop),l=1,p=1,t=Wa(a),w=Ns(a,b);switch(w){case 1:break;case 2:j.x+=t.width;l=-1;break;case 3:j.y+=t.height;p=-1;break;case 4:j.x+=t.width;j.y+=t.height;l=-1;p=-1;break}if(e){j.x+=l*e.x;j.y+=p*e.y}return Os(j,c,d,f,g)},Os=function(a,b,c,d,e){var f=Ns(b,c);if(d||f!=1){var g=Wa(b);switch(f){case 1:a.x+=d.left;a.y+=d.top;break;case 2:a.x-=g.width;if(d){a.x-=d.right;a.y+=d.top}break;case 3:a.y-=g.height;if(d){a.x+=
d.left;a.y-=d.bottom}break;case 4:a.x-=g.width;a.y-=g.height;if(d){a.x-=d.right;a.y-=d.bottom}break}}var h=e||0;if(h!=0){var i=bb(b),j=Ig(i)||window,l=Wa(b),p=gd(j),t=rh(j),w=a.x-t.x,y=p.width-w,Z=a.y-t.y,M=p.height-Z;if(l.width>y){if(h&1){a.x-=l.width-y}else if(h&2){return false}}if(l.height>M){if(h&4){a.y-=l.height-M}else if(h&8){return false}}if(a.x-t.x<0){if(h&1){a.x-=a.x-t.x}else if(h&2){return false}}if(a.y-t.y<0){if(h&4){a.y-=a.y-t.y}else if(h&8){return false}}}ef(b,a);return true},Ns=function(a,
b){var c=vs(a);switch(b){case 1:case 2:case 3:case 4:return b;case 5:return c?2:1;case 6:return c?1:2;case 7:return c?4:3;case 8:return c?3:4}},Ls=function(a){switch(a){case 1:return 2;case 2:return 1;case 3:return 4;case 4:return 3;case 5:return 6;case 6:return 5;case 7:return 8;case 8:return 7}},Ms=function(a){switch(a){case 1:return 3;case 2:return 4;case 3:return 1;case 4:return 2;case 5:return 7;case 6:return 8;case 7:return 5;case 8:return 6}};var Ei=function(){};Ei.prototype.pb=function(a,
b,c){};var lg=function(a,b){this.element=a;this.corner=b};lg.k(Ei);lg.prototype.pb=function(a,b,c){Zc(this.element,this.corner,a,b,null,c)};var Qn=function(a,b,c){lg.call(this,a,b);this.g2=c||false};Qn.k(lg);Qn.prototype.pb=function(a,b,c){var d=Zc(this.element,this.corner,a,b,null,c,10);if(!d){d=Zc(this.element,b,a,this.corner,null,c,10);if(!d){if(this.g2){d=Zc(this.element,this.corner,a,b,null,c,5)}else{Zc(this.element,this.corner,a,b,null,c,0)}}}};var Ks=function(a,b){if(a instanceof Fa){this.coordinate=
a}else{this.coordinate=new Fa(a,b)}};Ks.k(Ei);Ks.prototype.pb=function(a,b,c){Os(this.coordinate,a,b,c)};var uk=function(a,b){if(a instanceof Fa){this.coordinate=a}else{this.coordinate=new Fa(a,b)}};uk.k(Ei);uk.prototype.pb=function(a,b,c){var d=md(a);Zc(d,1,a,b,this.coordinate,c)};var tk=function(a,b){if(a instanceof Fa){this.coordinate=a}else{this.coordinate=new Fa(a,b)}};tk.k(Ei);tk.prototype.pb=function(a,b,c){var d=md(a),e=new Fa(this.coordinate.x+d.scrollLeft,this.coordinate.y+d.scrollTop);
Zc(d,1,a,b,e,c)};var Rn=function(a,b){tk.call(this,a,b)};Rn.k(tk);Rn.prototype.pb=function(a,b,c){var d=md(a),e=new Fa(this.coordinate.x+d.scrollLeft,this.coordinate.y+d.scrollTop),f=10;if(Zc(d,1,a,b,e,c,f)){return}if(Zc(d,1,a,Ms(b),e,c,f)){return}if(Zc(d,1,a,Ls(b),e,c,f)){return}if(Zc(d,1,a,Ms(Ls(b)),e,c,f)){return}Zc(d,1,a,b,e,c)};var pd=function(a){qd.call(this,a);this.L=new ma(this)};pd.k(qd);var On="itemaction";pd.prototype.e=function(){pd.j.e.call(this);this.L.e()};pd.prototype.Me=function(){pd.j.Me.call(this);this.L.m(this.b,de,this.Si);this.L.m(this.b,tc,this.xc);this.L.m(this.b,X,this.Od);this.L.m(this.b,hd,this.Vb);this.L.m(this.b,n.IE?ce:Ld,this.Uc)};pd.prototype.Ri=function(a){pd.j.Ri.call(this,a);this.L.mc()};pd.prototype.ed=function(a){};pd.prototype.Si=function(a){};pd.prototype.xc=function(a){};pd.prototype.Od=
function(a){};pd.prototype.Vb=function(a){};pd.prototype.Uc=function(a){};var rb=function(a){pd.call(this,a)};rb.k(pd);rb.prototype.Vc=null;rb.prototype.fG="menu-item";rb.prototype.vI="menu-item-selected";rb.prototype.Ts=ha();rb.prototype.e=function(){rb.j.e.call(this);this.Vc=null};rb.prototype.uE=function(){return this.fG};rb.prototype.ed=function(a){if(this.Vc){Oa(this.Vc,this.vI)}this.Vc=a;if(this.Vc){ga(this.Vc,this.vI);var b=this.Vc.offsetTop,c=this.Vc.offsetHeight,d=this.b.scrollTop,e=this.b.offsetHeight;if(b<d){this.b.scrollTop=b}else if(b+c>d+e){this.b.scrollTop=
b+c-e}}};rb.prototype.Me=function(){rb.j.Me.call(this);this.b.focus()};rb.prototype.Rr=function(a){var b=this.b.getElementsByTagName("*"),c=b.length,d;if(this.Vc){for(var e=0;e<c;e++){if(b[e]==this.Vc){d=a?e-1:e+1;break}}}if(!Ca(d)){d=a?c-1:0}for(var e=0;e<c;e++){var f=a?-1:1,g=d+f*e%c;if(g<0){g+=c}else if(g>=c){g-=c}if(this.bG(b[g])){return b[g]}}return null};rb.prototype.Si=function(a){var b=this.Xl(a.target);if(b==null){return}if(ha()-this.Ts>150){this.ed(b)}};rb.prototype.xc=function(a){var b=
this.Xl(a.target);if(b==null){return}if(ha()-this.Ts>150){this.ed(null)}};rb.prototype.Od=function(a){a.preventDefault()};rb.prototype.Vb=function(a){var b=this.Xl(a.target);if(b==null){return}this.ma(false);this.jH(b)};rb.prototype.Uc=function(a){switch(a.keyCode){case 40:this.ed(this.Rr(false));this.Ts=ha();break;case 38:this.ed(this.Rr(true));this.Ts=ha();break;case 13:if(this.Vc){this.jH();this.ma(false)}break;case 27:this.ma(false);break}a.preventDefault();this.dispatchEvent(a)};rb.prototype.jH=
function(a){this.dispatchEvent(new Nn(On,this,a||this.Vc))};rb.prototype.bG=function(a){return yf(a,this.fG)};rb.prototype.Xl=function(a){var b=bb(a).body;while(a!=null&&a!=b){if(this.bG(a)){return a}a=a.parentNode}return null};var Ga=function(a,b){var c=a||"menu",d=b||qm().body;this.b=G("div",{tabIndex:0,"class":c});Vc(this.b,"menu");sc(this.b,"haspopup",true);d.appendChild(this.b);rb.call(this,this.b);this.Oe=null;this.Wa=[]};Ga.k(rb);Ga.prototype.Ql=null;Ga.prototype.fI=null;Ga.prototype.cl=10;Ga.prototype.wi=function(){return this.Oe};Ga.prototype.getZIndex=function(){return this.cl};Ga.prototype.add=function(a){var b=this.S();if(!b){throw Error("setElement() called before create()");}if(a.MR()){throw Error("Menu item already added to a menu");
}a.WI(this);this.Wa.push(a);b.appendChild(a.Df())};Ga.prototype.remove=function(a){a.remove();a.WI(null);qc(this.Wa,a)};Ga.prototype.focus=function(){this.b.focus()};Ga.prototype.E_=function(a){this.Oe=a};Ga.prototype.BI=function(a,b,c){if(this.Ql){ua(this.Ql)}if(this.rq!=a){this.oC=false;this.Ss=-1}var d=c||ta;this.Ql=q(a,d,this.Hm,false,this);this.fI=q(window,ee,this.Zo,false,this);this.setPosition(new lg(a,b||7));this.rq=a};Ga.prototype.e=function(){if(!this.da()){for(var a=0;a<this.Wa.length;a++){this.Wa[a].e()}ua(this.Ql);
ua(this.fI);C(this.b);this.b=null;this.rq=null;Ga.j.e.call(this)}};Ga.prototype.ma=function(a,b){if(this.cG()&&a){return}if(a==false){if(this.sb){this.sb.Gq();rb.prototype.ed.call(this,null)}if(this.Oe&&!b){this.Oe.focus()}}else{if(this.Oe){this.cl=this.Oe.getZIndex()+1}this.b.style.zIndex=this.cl}if(b&&this.Oe){this.Oe.ma(a,b)}if(this.Zh){window.clearTimeout(this.Zh);this.Zh=null}this.sb=null;xa.prototype.ma.call(this,a)};Ga.prototype.O_=function(a){this.ed(a==-1?null:this.b.childNodes[a])};Ga.prototype.Ps=
function(a,b){if(a||!this.sb||!this.sb.yF()){rb.prototype.ed.call(this,a)}var c=a?this.em(a):null;if(c&&c!=this.sb){if(b&&this.sb){this.sb.Gq();this.sb=null}if(this.Zh){window.clearTimeout(this.Zh);this.Zh=null}if(!b){this.Zh=window.setTimeout(this.vZ.bind(this,c),300)}if(this.Oe){this.Oe.ed(this.rq);this.b.focus()}}};Ga.prototype.ed=function(a){var b,c;if(!a){b=null;c=null}else if(typeof a.nodeType!="undefined"){b=a;c=this.em(b)}else{c=a;b=c.b}if(b||!this.sb||!this.sb.yF()){rb.prototype.ed.call(this,
b)}if(c==this.sb){return}if(this.sb&&b){this.sb.Gq()}if(b){var c=this.em(b);if(c.jm()){c.Fy();c.ro().focus()}this.sb=c}};Ga.prototype.vZ=function(a){if(this.Zh){window.clearTimeout(this.Zh);this.Zh=null}var b=this.em(this.Vc);if(b!=a){return}if(this.sb&&a){this.sb.Gq()}if(a.jm()){a.Fy();a.ro().focus()}else{this.b.focus()}this.sb=a};Ga.prototype.Av=function(a){var b=this.em(a);if(b.jm()){b.Fy();var c=b.ro();c.focus();this.sb=b}else{this.ma(false,true);this.dispatchEvent(new Nn(On,this,b))}};Ga.prototype.Hm=
function(){if(!this.oC){this.ma(true)}this.oC=false};Ga.prototype.yC=function(a){if(Cc(this.b,a)){return true}if(this.sb&&this.sb.jm()){return this.sb.ro().yC(a)}return false};Ga.prototype.vt=function(a){if(this.rq==a.target||Cc(this.rq,a.target)){this.oC=true}var b=this;while(b.Oe){b=b.Oe}if(!b.yC(a.target)){this.Di()}};Ga.prototype.Si=function(a){var b=this.Xl(a.target);if(b==null){return}this.Ps(b)};Ga.prototype.xc=function(a){var b=this.Xl(a.target);if(b==null){return}this.Ps(null)};Ga.prototype.Vb=
function(a){var b=this.Xl(a.target);if(b==null){return}this.Av(b)};Ga.prototype.Zo=function(){if(!this.da()&&this.Oa()){this.pb()}};Ga.prototype.Uc=function(a){var b=false;switch(a.keyCode){case 37:if(this.Oe){this.ma(false)}b=true;break;case 39:var c=this.em(this.Vc);if(this.Vc&&c.jm()){this.Av(this.Vc);c.ro().O_(0)}b=true;break;case 40:this.Ps(this.Rr(false),true);b=true;break;case 38:this.Ps(this.Rr(true),true);b=true;break;case 13:if(this.Vc){this.Av(this.Vc)}b=true;break;case 27:this.ma(false);
b=true;break}if(b){a.preventDefault()}};Ga.prototype.Me=function(){Ga.j.Me.call(this);this.ed(null);var a=vs(this.b);if(a){ga(this.b,"goog-rtl")}else{Oa(this.b,"goog-rtl")}if(!this.Oe){this.b.focus()}};Ga.prototype.em=function(a){var b=-1;for(var c=a;c;c=Vq(c)){b++}return b==-1?null:this.Wa[b]};var Jc=function(a,b,c){this.tb=String(a);this.Ia=b||a;this.sf=c||null;this.Aa=null;this.b=null};Jc.prototype.Ir=function(){return this.tb};Jc.prototype.H=function(){return this.Ia};Jc.prototype.va=function(a){this.Ia=
a};Jc.prototype.e=function(){this.remove();if(this.sf){this.sf.e()}};Jc.prototype.WI=function(a){this.Aa=a;if(this.sf){this.sf.E_(a)}};Jc.prototype.MR=function(){return this.Aa};Jc.prototype.Df=function(){if(!this.Aa){throw Error("MenuItem is not attached to a menu");}var a,b;if(this.sf){b=G("span",{"class":"goog-menu-arrow-right"},"\u25b6");a=G("span",{"class":"goog-menu-arrow-left"},"\u25c0")}this.b=G("div",{"class":this.Aa.uE()},this.tb,a,b);return this.b};Jc.prototype.remove=function(){C(this.b);
this.b=null};Jc.prototype.jm=function(){return this.sf!=null};Jc.prototype.yF=function(){return this.jm()?this.sf.cG():false};Jc.prototype.ro=function(){return this.sf};Jc.prototype.Fy=function(){if(this.sf){var a=this.sf,b=a.dS();switch(b){case 1:b=2;break;case 2:b=1;break;case 5:b=6;break;case 6:b=5;break}a.BI(this.b,b);a.ma(true)}};Jc.prototype.Gq=function(){if(this.sf){this.sf.ma(false)}};var Jn=function(){Jc.call(this,null)};Jn.k(Jc);Jn.prototype.Df=function(){if(!this.Aa){throw Error("MenuSeparator is not attached to a menu");
}this.b=u("hr");Vc(this.b,"separator");return this.b};var Lj=function(a){J.call(this);this.b=a;var b=n.IE?"propertychange":"input";this.ug=q(this.b,b,this)};Lj.k(J);Lj.prototype.ab=function(a){var b=a.eo();if(b.type=="propertychange"&&b.propertyName=="value"||b.type=="input"){if(n.IE){var c=b.srcElement;if(c!=bb(c).activeElement){return}}var d=new La(b);d.type="input";try{this.dispatchEvent(d)}finally{d.e()}}};Lj.prototype.e=function(){if(!this.da()){Lj.j.e.call(this);ua(this.ug);this.b=null}};var Ah,Px=function(a){Ah=a},dg=function(){if(Ah==null){Ah="en"}return Ah};var He="DateTimeConstants";var Ox=function(a,b,c){if(!eg[b]){eg[b]={}}eg[b][c]=a;if(Ah==null){Ah=c}},Hr=function(a,b){return a in eg&&b in eg[a]},eg={},nn=function(a,b){Ox(a,He,b)};var Ie=function(a,b){var c=b?b:dg();if(!(a in eg)){eg[a]={}}return eg[a][c]};var zd={ERAS:["BC","AD"],ERANAMES:["Before Christ","Anno Domini"],NARROWMONTHS:["J","F","M","A","M","J","J","A","S","O","N","D"],MONTHS:["January","February","March","April",
"May","June","July","August","September","October","November","December"],SHORTMONTHS:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKDAYS:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],SHORTWEEKDAYS:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],NARROWWEEKDAYS:["S","M","T","W","T","F","S"],SHORTQUARTERS:["Q1","Q2","Q3","Q4"],QUARTERS:["1st quarter","2nd quarter","3rd quarter","4th quarter"],AMPMS:["AM","PM"],DATEFORMATS:["EEEE, MMMM d, yyyy","MMMM d, yyyy",
"MMM d, yyyy","M/d/yy"],TIMEFORMATS:["h:mm:ss a v","h:mm:ss a z","h:mm:ss a","h:mm a"],ZONESTRINGS:null};zd.STANDALONENARROWMONTHS=zd.NARROWMONTHS;zd.STANDALONEMONTHS=zd.MONTHS;zd.STANDALONESHORTMONTHS=zd.SHORTMONTHS;zd.STANDALONEWEEKDAYS=zd.WEEKDAYS;zd.STANDALONESHORTWEEKDAYS=zd.SHORTWEEKDAYS;zd.STANDALONENARROWWEEKDAYS=zd.NARROWWEEKDAYS;var cA=nn;var pb=function(){this.aa=Ie("DateTimeConstants",dg());this.Xb=[]},Gr=[/^\'(?:[^\']|\'\')*\'/,/^(?:G+|y+|M+|k+|S+|E+|a+|h+|K+|H+|c+|L+|Q+|d+|m+|s+|v+|z+|Z+)/,/^[^\'GyMkSEahKHcLQdmsvzZ]+/];pb.prototype.$e=function(a){while(a){for(var b=0;b<Gr.length;++b){var c=a.match(Gr[b]);if(c){var d=c[0];a=a.substring(d.length);if(b==0){if(d=="''"){d="'"}else{d=d.substring(1,d.length-1);d=d.replace(/\'\'/,"'")}}this.Xb.push({text:d,type:b});break}}}};pb.prototype.ao=function(a){var b=[];for(var c=0;c<this.Xb.length;++c){var d=
this.Xb[c].text;if(1==this.Xb[c].type){b.push(this.rQ(d,a))}else{b.push(d)}}return b.join("")};pb.prototype.Cj=function(a){var b;if(a<4){b=this.aa.DATEFORMATS[a]}else if(a<8){b=this.aa.TIMEFORMATS[a-4]}else if(a<12){b=this.aa.DATEFORMATS[a-8]+" "+this.aa.TIMEFORMATS[a-8]}else{this.Cj(10)}return this.$e(b)};pb.prototype.qQ=function(a,b){var c=b.getFullYear()>0?1:0;return a>=4?this.aa.ERANAMES[c]:this.aa.ERAS[c]};pb.prototype.AQ=function(a,b){var c=b.getFullYear();if(c<0){c=-c}return a==2?Ua(c%100,
2):String(c)};pb.prototype.uQ=function(a,b){var c=b.getMonth();switch(a){case 5:return this.aa.NARROWMONTHS[c];case 4:return this.aa.MONTHS[c];case 3:return this.aa.SHORTMONTHS[c];default:return Ua(c+1,a)}};pb.prototype.mQ=function(a,b){return Ua(b.getHours()||24,a)};pb.prototype.sQ=function(a,b){var c=b.getTime()%1000/1000;return c.toFixed(Math.min(3,a)).substr(2)+(a>3?Ua(0,a-3):"")};pb.prototype.pQ=function(a,b){var c=b.getDay();return a>=4?this.aa.WEEKDAYS[c]:this.aa.SHORTWEEKDAYS[c]};pb.prototype.nQ=
function(a,b){var c=b.getHours();return this.aa.AMPMS[c>=12&&c<24?1:0]};pb.prototype.lQ=function(a,b){return Ua(b.getHours()%12||12,a)};pb.prototype.jQ=function(a,b){return Ua(b.getHours()%12,a)};pb.prototype.kQ=function(a,b){return Ua(b.getHours(),a)};pb.prototype.xQ=function(a,b){var c=b.getDay();switch(a){case 5:return this.aa.STANDALONENARROWWEEKDAYS[c];case 4:return this.aa.STANDALONEWEEKDAYS[c];case 3:return this.aa.STANDALONESHORTWEEKDAYS[c];default:return Ua(c,1)}};pb.prototype.yQ=function(a,
b){var c=b.getMonth();switch(a){case 5:return this.aa.STANDALONENARROWMONTHS[c];case 4:return this.aa.STANDALONEMONTHS[c];case 3:return this.aa.STANDALONESHORTMONTHS[c];default:return Ua(c+1,a)}};pb.prototype.vQ=function(a,b){var c=Math.floor(b.getMonth()/3);return a<4?this.aa.SHORTQUARTERS[c]:this.aa.QUARTERS[c]};pb.prototype.oQ=function(a,b){return Ua(b.getDate(),a)};pb.prototype.tQ=function(a,b){return Ua(b.getMinutes(),a)};pb.prototype.wQ=function(a,b){return Ua(b.getSeconds(),a)};pb.prototype.zQ=
function(a,b){if(a<4){var c=b.getTimezoneOffset(),d="-";if(c<0){c=-c;d="+"}c=c/3*5+c%60;return d+Ua(c,4)}return pb.Qw(a,b)};pb.prototype.Qw=function(a,b){var c=b.getTimezoneOffset(),d=[];if(c>0){d.push("GMT-")}else{c=-c;d.push("GMT+")}d.push(Ua(c/60,2));d.push(":");d.push(Ua(c%60,2));return d.join("")};pb.prototype.rQ=function(a,b){var c=a.length;switch(a.charAt(0)){case "G":return this.qQ(c,b);case "y":return this.AQ(c,b);case "M":return this.uQ(c,b);case "k":return this.mQ(c,b);case "S":return this.sQ(c,
b);case "E":return this.pQ(c,b);case "a":return this.nQ(c,b);case "h":return this.lQ(c,b);case "K":return this.jQ(c,b);case "H":return this.kQ(c,b);case "c":return this.xQ(c,b);case "L":return this.yQ(c,b);case "Q":return this.vQ(c,b);case "d":return this.oQ(c,b);case "m":return this.tQ(c,b);case "s":return this.wQ(c,b);case "v":return this.Qw(c,b);case "z":return this.Qw(c,b);case "Z":return this.zQ(c,b);default:return""}};var Gc=function(){this.aa=Ie("DateTimeConstants",dg());this.Xb=[]};Gc.prototype.$e=function(a){var b=false,c="";for(var d=0;d<a.length;d++){var e=a.charAt(d);if(e==" "){if(c.length>0){this.Xb.push({text:c,count:0,abutStart:false});c=""}this.Xb.push({text:" ",count:0,abutStart:false});while(d+1<a.length&&a.charAt(d+1)==" "){d++}}else if(b){if(e=="'"){if(d+1<a.length&&a.charAt(d+1)=="'"){c+=e;++d}else{b=false}}else{c+=e}}else if("GyMdkHmsSEDahKzZv".indexOf(e)>=0){if(c.length>0){this.Xb.push({text:c,
count:0,abutStart:false});c=""}var f=this.RR(a,d);this.Xb.push({text:e,count:f,abutStart:false});d+=f-1}else if(e=="'"){if(d+1<a.length&&a.charAt(d+1)=="'"){c+="'";d++}else{b=true}}else{c+=e}}if(c.length>0){this.Xb.push({text:c,count:0,abutStart:false})}this.mW()};Gc.prototype.Cj=function(a){var b;if(a<4){b=this.aa.DATEFORMATS[a]}else if(a<8){b=this.aa.TIMEFORMATS[a-4]}else if(a<12){b=this.aa.DATEFORMATS[a-8];b+=" ";b+=this.aa.TIMEFORMATS[a-8]}else{return this.Cj(10)}return this.$e(b)};Gc.prototype.parse=
function(a,b,c){var d=new ln,e=[b],f=-1,g=0,h=0;for(var i=0;i<this.Xb.length;++i){if(this.Xb[i].count>0){if(f<0&&this.Xb[i].abutStart){f=i;g=b;h=0}if(f>=0){var j=this.Xb[i].count;if(i==f){j-=h;h++;if(j==0){return 0}}if(!this.HJ(a,e,this.Xb[i],j,d)){i=f-1;e[0]=g;continue}}else{f=-1;if(!this.HJ(a,e,this.Xb[i],0,d)){return 0}}}else{f=-1;if(this.Xb[i].text.charAt(0)==" "){var l=e[0];this.xJ(a,e);if(e[0]>l){continue}}else if(a.indexOf(this.Xb[i].text,e[0])==e[0]){e[0]+=this.Xb[i].text.length;continue}return 0}}return d.yN(c)?
e[0]-b:0};Gc.prototype.RR=function(a,b){var c=a.charAt(b),d=b+1;while(d<a.length&&a.charAt(d)==c){++d}return d-b};Gc.prototype.Xx=function(a){if(a.count<=0){return false}var b="MydhHmsSDkK".indexOf(a.text.charAt(0));return b>0||b==0&&a.count<3};Gc.prototype.mW=function(){var a=false;for(var b=0;b<this.Xb.length;b++){if(this.Xx(this.Xb[b])){if(!a&&b+1<this.Xb.length&&this.Xx(this.Xb[b+1])){a=true;this.Xb[b].abutStart=true}}else{a=false}}};Gc.prototype.xJ=function(a,b){var c=a.substring(b[0]).match(/^\s+/);
if(c){b[0]+=c[0].length}};Gc.prototype.HJ=function(a,b,c,d,e){this.xJ(a,b);var f=b[0],g=c.text.charAt(0),h=-1;if(this.Xx(c)){if(d>0){if(f+d>a.length){return false}h=this.ap(a.substring(0,f+d),b)}else{h=this.ap(a,b)}}switch(g){case "G":e.era=this.xm(a,b,this.aa.ERAS);return true;case "M":return this.M0(a,b,e,h);case "E":return this.K0(a,b,e);case "a":e.ampm=this.xm(a,b,this.aa.AMPMS);return true;case "y":return this.N0(a,b,f,h,c,e);case "d":e.day=h;return true;case "S":return this.L0(h,b,f,e);case "h":if(h==
12){h=0}case "K":case "H":case "k":e.hours=h;return true;case "m":e.minutes=h;return true;case "s":e.seconds=h;return true;case "z":case "Z":case "v":return this.P0(a,b,e);default:return false}};Gc.prototype.N0=function(a,b,c,d,e,f){var g;if(d<0){g=a.charAt(b[0]);if(g!="+"&&g!="-"){return false}b[0]++;d=this.ap(a,b);if(d<0){return false}if(g=="-"){d=-d}}if(g==null&&b[0]-c==2&&e.count==2){f.Y_(d)}else{f.N=d}return true};Gc.prototype.M0=function(a,b,c,d){if(d<0){d=this.xm(a,b,this.aa.MONTHS);if(d<0){d=
this.xm(a,b,this.aa.SHORTMONTHS)}if(d<0){return false}c.M=d;return true}else{c.M=d-1;return true}};Gc.prototype.K0=function(a,b,c){var d=this.xm(a,b,this.aa.WEEKDAYS);if(d<0){d=this.xm(a,b,this.aa.SHORTWEEKDAYS)}if(d<0){return false}c.dayOfWeek=d;return true};Gc.prototype.L0=function(a,b,c,d){var e=b[0]-c;d.milliseconds=e<3?a*Math.pow(10,3-e):Math.round(a/Math.pow(10,e-3));return true};Gc.prototype.P0=function(a,b,c){if(a.indexOf("GMT",b[0])==b[0]){b[0]+=3;return this.uH(a,b,c)}return this.uH(a,b,
c)};Gc.prototype.uH=function(a,b,c){if(b[0]>=a.length){c.tzOffset=0;return true}var d=1;switch(a.charAt(b[0])){case "-":d=-1;case "+":b[0]++}var e=b[0],f=this.ap(a,b);if(f==0&&b[0]==e){return false}var g;if(b[0]<a.length&&a.charAt(b[0])==":"){g=f*60;b[0]++;e=b[0];f=this.ap(a,b);if(f==0&&b[0]==e){return false}g+=f}else{g=f;if(g<24&&b[0]-e<=2)g*=60;else g=g%100+g/100*60}g*=d;c.tzOffset=-g;return true};Gc.prototype.ap=function(a,b){var c=a.substring(b[0]).match(/^\d+/);if(!c){return-1}b[0]+=c[0].length;
return parseInt(c[0],10)};Gc.prototype.xm=function(a,b,c){var d=0,e=-1,f=a.substring(b[0]).toLowerCase();for(var g=0;g<c.length;++g){var h=c[g].length;if(h>d&&f.indexOf(c[g].toLowerCase())==0){e=g;d=h}}if(e>=0){b[0]+=d}return e};var ln=function(){};ln.prototype.Y_=function(a){var b=new Date,c=b.getFullYear()-80,d=c%100;this.ambiguousYear=a==d;a+=Math.floor(c/100)*100+(a<d?100:0);return this.N=a};ln.prototype.yN=function(a){if(this.era!=undefined&&this.N!=undefined&&this.era==0&&this.N>0){this.N=-(this.N-
1)}if(this.N!=undefined){a.setFullYear(this.N)}var b=a.getDate();a.setDate(1);if(this.M!=undefined){a.setMonth(this.M)}if(this.day!=undefined){a.setDate(this.day)}else{a.setDate(b)}if(this.hours==undefined){this.hours=a.getHours()}if(this.ampm!=undefined&&this.ampm>0){if(this.hours<12){this.hours+=12}}a.setHours(this.hours);if(this.minutes!=undefined){a.setMinutes(this.minutes)}if(this.seconds!=undefined){a.setSeconds(this.seconds)}if(this.milliseconds!=undefined){a.setMilliseconds(this.milliseconds)}if(this.tzOffset!=
undefined){var c=a.getTimezoneOffset();a.setTime(a.getTime()+(this.tzOffset-c)*60*1000)}if(this.ambiguousYear){var d=new Date;d.setFullYear(d.getFullYear()-80);if(a.getTime()<d.getTime()){a.setFullYear(d.getFullYear()+100)}}if(this.dayOfWeek!=undefined){if(this.day==undefined){var e=(7+this.dayOfWeek-a.getDay())%7;if(e>3){e-=7}var f=a.getMonth();a.setDate(a.getDate()+e);if(a.getMonth()!=f){a.setDate(a.getDate()+(e>0?-7:7))}}else if(this.dayOfWeek!=a.getDay()){return false}}return true};var Lx={USD:"$",ARS:"$",AWG:"\u0192",AUD:"$",BSD:"$",BBD:"$",BEF:"\u20a3",BZD:"$",BMD:"$",BOB:"$",BRL:"R$",BRC:"\u20a2",GBP:"\u00a3",BND:"$",KHR:"\u17db",CAD:"$",KYD:"$",CLP:"$",CNY:"\u5143",COP:"\u20b1",CRC:"\u20a1",CUP:"\u20b1",CYP:"\u00a3",DKK:"kr",DOP:"\u20b1",XCD:"$",EGP:"\u00a3",SVC:"\u20a1",EUR:"\u20ac",XEU:"\u20a0",FKP:"\u00a3",FJD:"$",FRF:"\u20a3",GIP:"\u00a3",GRD:"\u20af",GGP:"\u00a3",GYD:"$",NLG:"\u0192",HKD:"$",INR:"\u20a8",IRR:"\ufdfc",IEP:"\u00a3",IMP:"\u00a3",ILS:"\u20aa",ITL:"\u20a4",
JMD:"$",JPY:"\u00a5",JEP:"\u00a3",KPW:"\u20a9",KRW:"\u20a9",LAK:"\u20ad",LBP:"\u00a3",LRD:"$",LUF:"\u20a3",MTL:"\u20a4",MUR:"\u20a8",MXN:"$",MNT:"\u20ae",NAD:"$",NPR:"\u20a8",ANG:"\u0192",NZD:"$",OMR:"\ufdfc",PKR:"\u20a8",PEN:"S/.",PHP:"\u20b1",QAR:"\ufdfc",RUB:"\u0440\u0443\u0431",SHP:"\u00a3",SAR:"\ufdfc",SCR:"\u20a8",SGD:"$",SBD:"$",ZAR:"R",ESP:"\u20a7",LKR:"\u20a8",SEK:"kr",SRD:"$",SYP:"\u00a3",TWD:"\u5143",THB:"\u0e3f",TTD:"$",TRY:"\u20a4",TRL:"\u20a4",TVD:"$",UYU:"\u20b1",VAL:"\u20a4",VND:"\u20ab",
YER:"\ufdfc",ZWD:"$"};var le=function(){this.aa=Ie("NumberFormatConstants",dg())};le.prototype.Cj=function(a,b){switch(a){case 1:return this.$e(this.aa.DECIMAL_PATTERN,b);case 2:return this.$e(this.aa.SCIENTIFIC_PATTERN,b);case 3:return this.$e(this.aa.PERCENT_PATTERN,b);case 4:return this.$e(this.aa.CURRENCY_PATTERN,b)}return""};le.prototype.$e=function(a,b){this.u4=a;this.fV=b||this.aa.DEF_CURRENCY_CODE;this.M2=Lx[this.fV];this.py=40;this.xg=1;this.OG=3;this.it=0;this.qy=0;this.cp="";this.Ly="";this.Vo="-";this.xy="";
this.qt=1;this.fF=3;this.SO=false;this.Ks=false;this.uA=false;this.zX(this.u4)};le.prototype.parse=function(a,b){var c=b||[0],d=c[0],e=0,f=a.indexOf(this.cp,c[0])==c[0],g=a.indexOf(this.Vo,c[0])==c[0];if(f&&g){if(this.cp.length>this.Vo.length){g=false}else if(this.cp.length<this.Vo.length){f=false}}if(f){c[0]+=this.cp.length}else if(g){c[0]+=this.Vo.length}if(a.indexOf(this.aa.INFINITY,c[0])==c[0]){c[0]+=this.aa.INFINITY.length;e=Infinity}else{e=this.yX(a,c)}if(f){if(!(a.indexOf(this.Ly,c[0])==c[0])){c[0]=
d;return 0}c[0]+=this.Ly.length}else if(g){if(!(a.indexOf(this.xy,c[0])==c[0])){c[0]=d;return 0}c[0]+=this.xy.length}return g?-e:e};le.prototype.yX=function(a,b){var c=false,d=false,e=false,f=1,g=this.Ks?this.aa.MONETARY_SEP:this.aa.DECIMAL_SEP,h=this.Ks?this.aa.MONETARY_GROUP_SEP:this.aa.GROUP_SEP,i=this.aa.EXP_SYMBOL,j="";for(;b[0]<a.length;b[0]++){var l=a.charAt(b[0]),p=this.cR(l);if(p>=0&&p<=9){j+=p;e=true}else if(l==g.charAt(0)){if(c||d){break}j+=".";c=true}else if(l==h.charAt(0)){if(c||d){break}continue}else if(l==
i.charAt(0)){if(d){break}j+="E";d=true}else if(l=="+"||l=="-"){j+=l}else if(l==this.aa.PERCENT.charAt(0)){if(f!=1){break}f=100;if(e){b[0]++;break}}else if(l==this.aa.PERMILL.charAt(0)){if(f!=1){break}f=1000;if(e){b[0]++;break}}else{break}}return parseFloat(j)/f};le.prototype.ao=function(a){if(isNaN(a)){return this.aa.NAN}var b=[],c=a<0||a==0&&1/a<0;b.push(c?this.Vo:this.cp);if(!isFinite(a)){b.push(this.aa.INFINITY)}else{a*=c?-1:1;a*=this.qt;this.uA?this.O0(a,b):this.Xz(a,this.xg,b)}b.push(c?this.xy:
this.Ly);return b.join("")};le.prototype.Xz=function(a,b,c){var d=Math.pow(10,this.OG);a=Math.round(a*d);var e=Math.floor(a/d),f=Math.floor(a-e*d),g=this.it>0||f>0,h="",i=e;while(i>1.0E20){h="0"+h;i=Math.round(i/10)}h=i+h;var j=this.Ks?this.aa.MONETARY_SEP:this.aa.DECIMAL_SEP,l=this.Ks?this.aa.MONETARY_GROUP_SEP:this.aa.GROUP_SEP,p=this.aa.ZERO_DIGIT.charCodeAt(0),t=h.length;if(e>0||b>0){for(var w=t;w<b;w++){c.push(this.aa.ZERO_DIGIT)}for(var w=0;w<t;w++){c.push(String.fromCharCode(p+h.charAt(w)*
1));if(t-w>1&&this.fF>0&&(t-w)%this.fF==1){c.push(l)}}}else if(!g){c.push(this.aa.ZERO_DIGIT)}if(this.SO||g){c.push(j)}var y=""+(f+d),Z=y.length;while(y.charAt(Z-1)=="0"&&Z>this.it+1){Z--}for(var w=1;w<Z;w++){c.push(String.fromCharCode(p+y.charAt(w)*1))}};le.prototype.wB=function(a,b){b.push(this.aa.EXP_SYMBOL);if(a<0){a=-a;b.push(this.aa.MINUS_SIGN)}var c=""+a;for(var d=c.length;d<this.qy;d++){b.push(this.aa.ZERO_DIGIT)}b.push(c)};le.prototype.O0=function(a,b){if(a==0){this.Xz(a,this.xg,b);this.wB(0,
b);return}var c=Math.floor(Math.log(a)/Math.log(10));a/=Math.pow(10,c);var d=this.xg;if(this.py>1&&this.py>this.xg){while(c%this.py!=0){a*=10;c--}d=1}else{if(this.xg<1){c++;a/=10}else{c-=this.xg-1;a*=Math.pow(10,this.xg-1)}}this.Xz(a,d,b);this.wB(c,b)};le.prototype.cR=function(a){var b=a.charCodeAt(0);if(48<=b&&b<58){return b-48}else{var c=this.aa.ZERO_DIGIT.charCodeAt(0);return c<=b&&b<c+10?b-c:-1}};le.prototype.Gt=function(a,b){var c="",d=false,e=a.length;for(;b[0]<e;b[0]++){var f=a.charAt(b[0]);
if(f=="'"){if(b[0]+1<e&&a.charAt(b[0]+1)=="'"){b[0]++;c+="'"}else{d=!d}continue}if(d){c+=f}else{switch(f){case "#":case "0":case ",":case ".":case ";":return c;case "\u00a4":this.Ks=true;if(b[0]+1<e&&a.charAt(b[0]+1)=="\u00a4"){b[0]++;c+=this.fV}else{c+=this.M2}break;case "%":if(this.qt!=1){throw Error("Too many percent/permill");}this.qt=100;c+=this.aa.PERCENT;break;case "\u2030":if(this.qt!=1){throw Error("Too many percent/permill");}this.qt=1000;c+=this.aa.PERMILL;break;default:c+=f}}}return c};
le.prototype.BX=function(a,b){var c=-1,d=0,e=0,f=0,g=-1,h=a.length;for(var i=true;b[0]<h&&i;b[0]++){var j=a.charAt(b[0]);switch(j){case "#":if(e>0){f++}else{d++}if(g>=0&&c<0){g++}break;case "0":if(f>0){throw Error('Unexpected "0" in pattern "'+a+'"');}e++;if(g>=0&&c<0){g++}break;case ",":g=0;break;case ".":if(c>=0){throw Error('Multiple decimal separators in pattern "'+a+'"');}c=d+e+f;break;case "E":if(this.uA){throw Error('Multiple exponential symbols in pattern "'+a+'"');}this.uA=true;this.qy=0;
while(b[0]+1<h&&a.charAt(b[0]+1)==this.aa.ZERO_DIGIT.charAt(0)){b[0]++;this.qy++}if(d+e<1||this.qy<1){throw Error('Malformed exponential pattern "'+a+'"');}i=false;break;default:b[0]--;i=false;break}}if(e==0&&d>0&&c>=0){var l=c;if(l==0){l++}f=d-l;d=l-1;e=1}if(c<0&&f>0||c>=0&&(c<d||c>d+e)||g==0){throw Error('Malformed pattern "'+a+'"');}var p=d+e+f;this.OG=c>=0?p-c:0;if(c>=0){this.it=d+e-c;if(this.it<0){this.it=0}}var t=c>=0?c:p;this.xg=t-d;if(this.uA){this.py=d+this.xg;if(this.OG==0&&this.xg==0){this.xg=
1}}this.fF=Math.max(0,g);this.SO=c==0||c==p};le.prototype.zX=function(a){var b=[0];this.cp=this.Gt(a,b);var c=b[0];this.BX(a,b);var d=b[0]-c;this.Ly=this.Gt(a,b);if(b[0]<a.length&&a.charAt(b[0])==";"){b[0]++;this.Vo=this.Gt(a,b);b[0]+=d;this.xy=this.Gt(a,b)}};var Mx=function(a,b){var c=new pb;c.$e(a);return c.ao(b)};var Nx=function(a){var b=new pb;b.Cj(a);return b},mn=function(a,b,c,d){var e=new Gc;e.$e(a);return e.parse(b,c,d)};var rn=function(a,b){this.ca=new B(a);this.u2=b?b:"callback";this.on=5000},Bh="_callbacks_",Wx=0;rn.prototype.N_=function(a){this.on=a};rn.prototype.send=function(a,b,c){if(!document.documentElement.firstChild){if(c){c(a)}return null}var d="_"+(Wx++).toString(36)+ha().toString(36);if(!N[Bh]){N[Bh]={}}var e=u("script"),f=null;if(this.on>0){var g=Ux(d,e,a,c);f=N.setTimeout(g,this.on)}var h=this.ca.ha();Tx(a,h);if(b){var i=Vx(d,e,b,f);N[Bh][d]=i;h.en(this.u2,Bh+"."+d)}Jj(e,{type:"text/javascript",id:d,
charset:"UTF-8",src:h.toString()});x(document.documentElement.firstChild,e);return{Na:d,on:f}};var Ux=function(a,b,c,d){return function(){Or(a,b);if(d){d(c)}}},Vx=function(a,b,c,d){return function(e){N.clearTimeout(d);Or(a,b);c(e)}},Or=function(a,b){N.setTimeout(function(){C(b);if(N[Bh][a]){delete N[Bh][a]}},0)},Tx=function(a,b){for(var c in a){if(!a.hasOwnProperty||a.hasOwnProperty(c)){b.en(c,a[c])}}return b};var Eb=function(a,b,c){this.BG=a;this.nm=b||0;this.B=c;this.Yd=m(this.rP,this)};Eb.k(mb);Eb.prototype.Na=0;Eb.prototype.e=function(){if(!this.da()){Eb.j.e.call(this);this.stop();this.BG=null;this.B=null}};Eb.prototype.start=function(a){this.stop();this.Na=pc(this.Yd,Ca(a)?a:this.nm)};Eb.prototype.stop=function(){if(this.he()){gi(this.Na)}this.Na=0};Eb.prototype.he=function(){return this.Na!=0};Eb.prototype.rP=function(){this.Na=0;if(this.BG){this.BG.call(this.B)}};function Dg(a,b,c){this.x=a;this.y=b;this.coordinateFrame=c||null}Dg.prototype.toString=function(){return"[P "+this.x+","+this.y+"]"};Dg.prototype.ha=function(){return new Dg(this.x,this.y,this.coordinateFrame)};function ch(a,b){this.dx=a;this.dy=b}ch.prototype.toString=function(){return"[D "+this.dx+","+this.dy+"]"};function vf(a,b,c,d,e){this.x=a;this.y=b;this.w=c;this.h=d;this.coordinateFrame=e||null}vf.prototype.contains=function(a){return this.x<=a.x&&a.x<this.x+this.w&&this.y<=a.y&&a.y<this.y+
this.h};vf.prototype.intersects=function(a){var b=function(c,d){return new Dg(c,d,null)};return this.contains(b(a.x,a.y))||this.contains(b(a.x+a.w,a.y))||this.contains(b(a.x+a.w,a.y+a.h))||this.contains(b(a.x,a.y+a.h))||a.contains(b(this.x,this.y))||a.contains(b(this.x+this.w,this.y))||a.contains(b(this.x+this.w,this.y+this.h))||a.contains(b(this.x,this.y+this.h))};vf.prototype.toString=function(){return"[R "+this.w+"x"+this.h+"+"+this.x+"+"+this.y+"]"};vf.prototype.ha=function(){return new vf(this.x,
this.y,this.w,this.h,this.coordinateFrame)};function Wd(a){function b(j){for(var l=a.offsetParent;l&&l.offsetParent;l=l.offsetParent){if(l.scrollLeft){j.x-=l.scrollLeft}if(l.scrollTop){j.y-=l.scrollTop}}}var c;if(a.ownerDocument&&a.ownerDocument.parentWindow){c=a.ownerDocument.parentWindow}else{c=window}if(a.ownerDocument&&a.ownerDocument.getBoxObjectFor){var d=a.ownerDocument.getBoxObjectFor(a),e=new vf(d.x,d.y,d.width,d.height,c);b(e);return e}if(a.getBoundingClientRect){var f=a.getBoundingClientRect();return new vf(f.left+Xo(c),f.top+Yo(c),
f.right-f.left,f.bottom-f.top,c)}var g=0,h=0;for(var i=a;i.offsetParent;i=i.offsetParent){g+=i.offsetLeft;h+=i.offsetTop}var e=new vf(g,h,a.offsetWidth,a.offsetHeight,c);b(e);return e}function xo(a){var b=Wd(a);return new Dg(b.x,b.y,b.coordinateFrame)}function cu(a,b){bc(a,"p1 passed to Distance is undefined");bc(b,"p2 passed to Distance is undefined");bc(a.coordinateFrame==b.coordinateFrame);var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}function of(a){var b=0,c=0;if(a.pageX||a.pageY){b=a.pageX;
c=a.pageY}else if(a.clientX||a.clientY){var d=a.target?a.target:a.srcElement,e;if(d.ownerDocument&&d.ownerDocument.parentWindow){e=d.ownerDocument.parentWindow}else{e=window}b=a.clientX+Xo(e);c=a.clientY+Yo(e)}return new Dg(b,c,window)};function dh(a){return a<0?-1:1}function gj(a){return a|0}function cp(a){Zk(a);throw a;}function $a(a,b){var c=a.toString();while(c.length<b){c="0"+c}return c}var el=[undefined,31,undefined,31,30,31,30,31,31,30,31,30,31];function Uf(a,b){if(2!==b){return el[b]}var c=a<<4,d=el[c];if(!d){d=Math.round((Date.UTC(a,2,1)-Date.UTC(a,1,1))/86400000);el[c]=d}return d}var dp={};function lu(a,b){var c=a<<4|b,d=dp[c];if(!d){d=(new Date(a,b-1,1,0,0,0,0)).getDay();dp[c]=d}return d}function fl(a){return(a.date-1+
lu(a.N,a.M))%7}function ap(a,b,c,d,e,f){var g;if(a===d){if((g=b-e)===0){return c-f}else if(g<0){g=c-f;do{g-=Uf(a,b++)}while(b<e);return g}else{g=c-f;do{g+=Uf(d,e++)}while(e<b);return g}}else{return Math.round((Date.UTC(a,b-1,c)-Date.UTC(d,e-1,f))/86400000)}}function bp(a,b){return ap(a.N,a.M,a.date,b.N,b.M,b.date)}function yc(a,b,c,d,e,f){if(!isNaN(a)){this.N=a}if(!isNaN(b)){this.M=b}if(!isNaN(c)){this.date=c}if(!isNaN(d)){this.ga=d}if(!isNaN(e)){this.ka=e}if(!isNaN(f)){this.na=f}}yc.prototype.N=
NaN;yc.prototype.M=NaN;yc.prototype.date=NaN;yc.prototype.ga=NaN;yc.prototype.ka=NaN;yc.prototype.na=NaN;yc.prototype.$Q=function(){return fl(this)};yc.prototype.toString=function(){if(this.Oh!==undefined)return this.Oh;this.Oh=this.Ue();return this.Oh};function vg(){}vg.prototype=new yc;vg.prototype.constructor=vg;function dd(a,b,c){bc(b&&c,"invalid date params: "+b+" "+c);yc.call(this,a,b,c,NaN,NaN,NaN)}dd.prototype=new vg;dd.prototype.constructor=dd;var ku=function(){var a=new Date;return ed(a.getFullYear(),
a.getMonth()+1,a.getDate())};dd.prototype.type="Date";dd.prototype.xd=function(){return this};dd.prototype.Sh=function(){return new Tb(this.N,this.M,this.date,0,0,0)};dd.prototype.ua=function(){if(undefined===this.Zd){this.Zd=bl(this.N,this.M,this.date)}return this.Zd};function bl(a,b,c){return(((a-1970)*12+b<<5)+c)*86400}dd.prototype.He=function(){return true};dd.prototype.Ue=function(){return $a(this.N,4)+$a(this.M,2)+$a(this.date,2)};dd.prototype.equals=function(a){return this.constructor===a.constructor&&
this.date===a.date&&this.M===a.M&&this.N===a.N};var cl={},ju=0,ed=function(a,b,c){var d=bl(a,b,c);if(d in cl){return cl[d]}else{var e=new dd(a,b,c);e.Zd=d;if(ju<200){cl[d]=e}return e}};function Tb(a,b,c,d,e,f){yc.call(this,a,b,c,d,e,f)}Tb.prototype=new vg;Tb.prototype.constructor=Tb;Tb.prototype.type="DateTime";Tb.prototype.xd=function(){return ed(this.N,this.M,this.date)};Tb.prototype.Sh=function(){return this};Tb.prototype.ua=function(){if(undefined===this.Zd){this.Zd=(((((this.N-1970)*12+this.M<<
5)+this.date)*24+this.ga)*60+this.ka)*60+this.na}return this.Zd};Tb.prototype.He=function(){return true};Tb.prototype.Ue=function(){return $a(this.N,4)+$a(this.M,2)+$a(this.date,2)+"T"+$a(this.ga,2)+$a(this.ka,2)+$a(this.na,2)};Tb.prototype.equals=function(a){return this.constructor===a.constructor&&this.date===a.date&&this.M===a.M&&this.N===a.N&&this.ga===a.ga&&this.ka===a.ka&&this.na===a.na};Tb.prototype.ha=function(){var a=new Tb(this.N,this.M,this.date,this.ga,this.ka,this.na);if(this.Oh!==undefined)a.Oh=
this.Oh;return a};function wg(a,b,c){yc.call(this,NaN,NaN,NaN,a,b,c)}wg.prototype=new yc;wg.prototype.constructor=wg;wg.prototype.type="Time";wg.prototype.Ue=function(){return"T"+$a(this.ga,2)+$a(this.ka,2)+$a(this.na,2)};wg.prototype.equals=function(a){return this.constructor===a.constructor&&this.ga===a.ga&&this.ka===a.ka&&this.na===a.na};wg.prototype.ua=function(){return(this.ga*60+this.ka)*60+this.na};function qf(a,b,c,d){var e=d+60*(c+60*(b+24*a)),f=gj(e/86400);e-=f*86400;var g=gj(e/3600);e-=
g*3600;var h=gj(e/60);e-=h*60;var i=gj(e);yc.call(this,NaN,NaN,f,g,h,i)}qf.prototype=new yc;qf.prototype.constructor=qf;qf.prototype.type="Duration";qf.prototype.ua=function(){if(undefined===this.Zd){this.Zd=((this.date*24+this.ga)*60+this.ka)*60+this.na}return this.Zd};qf.prototype.Ue=function(){var a=this.N?dh(this.N):(this.M?dh(this.M):(this.date?dh(this.date):(this.ga?dh(this.ga):(this.ka?dh(this.ka):(this.na?dh(this.na):0))))),b=a<0?"-P":"P";if(this.N){b+=a*this.N+"Y"}if(this.M){b+=a*this.M+
"N"}if(this.date){b+=this.date%7?a*this.date+"D":a*this.date/7+"W"}if(this.ga||this.ka||this.na){b+="T"}if(this.ga){b+=a*this.ga+"H"}if(this.ka){b+=a*this.ka+"M"}if(this.na){b+=a*this.na+"S"}if(!a){b+="0D"}return b};qf.prototype.equals=function(a){return this.constructor===a.constructor&&this.date===a.date&&this.ga===a.ga&&this.ka===a.ka&&this.na===a.na};function Si(a){Rf(a,yc);var b=new Db;b.N=a.N||0;b.M=a.M||0;b.date=a.date||0;b.ga=a.ga||0;b.ka=a.ka||0;b.na=a.na||0;return b}function Ok(a,b,c){bc(!(isNaN(a)|
isNaN(b)|isNaN(c)));var d=new Db;d.N=a||0;d.M=b||0;d.date=c||0;return d}function Db(){}Db.prototype=new yc;Db.prototype.constructor=Db;Db.prototype.type="DTBuilder";Db.prototype.N=(Db.prototype.M=(Db.prototype.date=(Db.prototype.ga=(Db.prototype.ka=(Db.prototype.na=0)))));Db.prototype.ua=function(){this.normalize();var a;if(isNaN(this.ga)){a=bl(this.N,this.M,this.date)}else{a=(((((this.N-1970)*12+this.M<<5)+this.date)*24+this.ga)*60+this.ka)*60+this.na}return a};Db.prototype.RM=function(a){if(a.date){this.date+=
a.date}if(a.ga){this.ga+=a.ga}if(a.ka){this.ka+=a.ka}if(a.na){this.na+=a.na}};Db.prototype.normalize=function(){this.cX();this.By();var a=Uf(this.N,this.M);while(this.date<1){this.M-=1;this.By();a=Uf(this.N,this.M);this.date+=a}while(this.date>a){this.date-=a;this.M+=1;this.By();a=Uf(this.N,this.M)}};Db.prototype.cX=function(){var a;if(this.na<0){a=Math.ceil(this.na/-60);this.na+=60*a;this.ka-=a}else if(this.na>=60){a=Math.floor(this.na/60);this.na-=60*a;this.ka+=a}if(this.ka<0){a=Math.ceil(this.ka/
-60);this.ka+=60*a;this.ga-=a}else if(this.ka>=60){a=Math.floor(this.ka/60);this.ka-=60*a;this.ga+=a}if(this.ga<0){a=Math.ceil(this.ga/-24);this.ga+=24*a;this.date-=a}else if(this.ga>=24){a=Math.floor(this.ga/24);this.ga-=24*a;this.date+=a}};Db.prototype.By=function(){var a;if(this.M<1){a=Math.ceil((this.M-1)/-12);this.M+=12*a;this.N-=a}else if(this.M>12){a=Math.floor((this.M-1)/12);this.M-=12*a;this.N+=a}};Db.prototype.xd=function(){this.normalize();return ed(this.N,this.M,this.date)};Db.prototype.Sh=
function(){this.normalize();return new Tb(this.N,this.M,this.date,this.ga,this.ka,this.na)};Db.prototype.e1=function(){if(this.N||this.M){cp("Can't convert months or years to ICAL_Duration");return undefined}else{return new qf(this.date,this.ga,this.ka,this.na)}};Db.prototype.toString=function(){return"["+(undefined!==this.N?$a(this.N,4):"????")+"/"+(undefined!==this.M?$a(this.M,2):"??")+"/"+(undefined!==this.date?$a(this.date,2):"??")+" "+(undefined!==this.ga?$a(this.ga,2):"??")+" "+(undefined!==
this.ka?$a(this.ka,2):"??")+" "+(undefined!==this.na?$a(this.na,2):"??")+"]"};Db.prototype.equals=function(a){return this.constructor===a.constructor&&this.date===a.date&&this.M===a.M&&this.N===a.N&&this.ga===a.ga&&this.ka===a.ka&&this.na===a.na};function ej(a,b){bc(a instanceof Tb||a instanceof dd);this.start=a;if(b.constructor==qf){var c=Si(a);c.RM(b);this.end=this.start instanceof Tb?c.Sh():c.xd()}else{Ko(b.constructor,a.constructor);this.end=b}this.duration=$o(this.end,this.start)}ej.prototype.type=
"PeriodOfTime";ej.prototype.toString=function(){if(this.Oh!==undefined)return this.Oh;this.Oh=this.start+"/"+this.end;return this.Oh};ej.prototype.equals=function(a){return this.constructor===a.constructor&&this.start.equals(a.start)&&this.end.equals(a.end)};ej.prototype.contains=function(a){return this.start.ua()<=a.start.ua()&&this.end.ua()>=a.end.ua()};function dl(a,b){bc(a instanceof xe||a instanceof we);this.start=a;Ko(b.constructor,a.constructor);this.end=b;try{this.duration=$o(this.end,this.start)}catch(c){this.duration=
null}}dl.prototype.type="PartialPeriodOfTime";dl.prototype.Ue=function(){return this.start+"/"+this.end};dl.prototype.equals=function(a){return this.constructor===a.constructor&&this.start.equals(a.start)&&this.end.equals(a.end)};function $o(a,b){if(isNaN(a.N)!=isNaN(b.N)||isNaN(a.ga)!=isNaN(b.ga)){cp("diff("+a+", "+b+")");return undefined}var c=Si(a);if(isNaN(a.N)){c.ga-=b.ga;c.ka-=b.ka;c.na-=b.na}else{c.N=NaN;c.M=NaN;c.date=ap(a.N,a.M,a.date,b.N,b.M,b.date);if(!isNaN(a.ga)){c.ga-=b.ga;c.ka-=b.ka;
c.na-=b.na}}return c.e1()}function we(a,b,c){this.N=a;this.M=b;this.date=c}we.prototype=new vg;we.prototype.constructor=we;we.prototype.type="PartialDate";we.prototype.xd=function(){return ed(this.N||0,this.M||1,this.date||1)};we.prototype.Sh=function(){return new Tb(this.N||0,this.M||1,this.date||1,0,0,0)};we.prototype.He=function(){return!isNaN(this.ua())};we.prototype.ua=function(){if(undefined===this.Zd){this.Zd=(((this.N-1970)*12+this.M<<5)+this.date)*86400}return this.Zd};we.prototype.equals=
function(a){return this.constructor===a.constructor&&(this.date===a.date||isNaN(this.date)&&isNaN(a.date))&&(this.M===a.M||isNaN(this.M)&&isNaN(a.M))&&(this.N===a.N||isNaN(this.N)&&isNaN(a.N))};we.prototype.Ue=function(){return(undefined!==this.N?$a(this.N,4):"????")+(undefined!==this.M?$a(this.M,2):"??")+(undefined!==this.date?$a(this.date,2):"??")};function xe(a,b,c,d,e,f){this.N=a;this.M=b;this.date=c;this.ga=d;this.ka=e;this.na=f}xe.prototype=new vg;xe.prototype.constructor=xe;xe.prototype.type=
"PartialDateTime";xe.prototype.xd=function(){return ed(this.N||0,this.M||1,this.date||1)};xe.prototype.Sh=function(){return new Tb(this.N||0,this.M||1,this.date||1,this.ga||0,this.ka||0,this.na||0)};xe.prototype.He=function(){return!isNaN(this.ua())};xe.prototype.ua=function(){if(undefined===this.Zd){this.Zd=(((((this.N-1970)*12+this.M<<5)+this.date)*24+this.ga)*60+this.ka)*60+this.na}return this.Zd};xe.prototype.equals=function(a){return this.constructor===a.constructor&&(this.date===a.date||isNaN(this.date)&&
isNaN(a.date))&&(this.M===a.M||isNaN(this.M)&&isNaN(a.M))&&(this.N===a.N||isNaN(this.N)&&isNaN(a.N))&&(this.ga===a.ga||isNaN(this.ga)&&isNaN(a.ga))&&(this.ka===a.ka||isNaN(this.ka)&&isNaN(a.ka))&&(this.na===a.na||isNaN(this.na)&&isNaN(a.na))};xe.prototype.Ue=function(){return(undefined!==this.N?$a(this.N,4):"????")+(undefined!==this.M?$a(this.M,2):"??")+(undefined!==this.date?$a(this.date,2):"??")+"T"+(undefined!==this.ga?$a(this.ga,2):"??")+(undefined!==this.ka?$a(this.ka,2):"??")+(undefined!==this.na?
$a(this.na,2):"??")};var fj=undefined,ep=[];function Ht(){var a=new Date,b=fj;fj=ed(a.getFullYear(),a.getMonth()+1,a.getDate());if(b&&!b.equals(fj)){for(var c=0;c<ep.length;++c){var d=ep[c];try{d(fj)}catch(e){}}}var f=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0);f.setDate(f.getDate()+1);var g=f.getTime()-a.getTime();if(g<0||g>=1800000){g=1800000}window.setTimeout(Ht,g)}Ht();Function.prototype.bind=function(a,b){if(typeof this!="function"){throw new Error("Bind must be called as a method of a function object.");}var c=this,d=Array.prototype.splice.call(arguments,1,arguments.length);return function(){var e=d.concat();for(var f=0;f<arguments.length;f++){e.push(arguments[f])}return c.apply(a,e)}};var te,ah,Gt;(function(){var a={},b=0;function c(f){if(f.NV==null){f.NV=++b}return f.NV}function d(f,g,h,i){var j=c(f),l=c(h);i=!(!i);var p=j+"_"+g+"_"+l+"_"+i;return p}te=function(f,g,h,i){var j=d(f,g,h,i);if(j in a){return j}var l=e.bind(null,j);a[j]={listener:h,proxy:l,event:g,node:f,useCapture:i};if(f.addEventListener){f.addEventListener(g,l,i)}else if(f.attachEvent){f.attachEvent("on"+g,l)}else{throw new Error("Node {"+f+"} does not support event listeners.");}return j};ah=function(f,g,h,i){var j=
d(f,g,h,i);return Gt(j)};Gt=function(f){if(!(f in a)){return false}var g=a[f],h=g.proxy,i=g.event,j=g.node,l=g.useCapture;if(j.removeEventListener){j.removeEventListener(i,h,l)}else if(j.detachEvent){j.detachEvent("on"+i,h)}delete a[f];return true};function e(f){var g=Array.prototype.splice.call(arguments,1,arguments.length);return a[f].listener.apply(null,g)}})();function Ut(a){return function(b,c,d,e){var f=Wd(c),g=xo(c.offsetParent),h;switch(d){case 1:if(undefined!==e){if(Xa&1){f.x+=e.dx}if(Xa&2){f.y+=e.dy}}h=a(f);if(!h){return false}if(Xa&1){if(undefined!==e){e.dx+=h.x-f.x+g.x}else{c.style.left=h.x+"px"}}if(Xa&2){if(undefined!==e){e.dy+=h.y-f.y+g.y}else{c.style.top=h.y+"px"}}break;case 2:if(undefined!==e){if(Xa&1){f.w+=e.dx}if(Xa&2){f.h+=e.dy}}if(undefined===e){var i=new Dg(f.x+f.w,f.y+f.h,window);h=a(i);if(!h){return false}if(Xa&1){var j=h.x-c.offsetLeft;
if(j<=0){return false}c.style.width=j+"px"}if(Xa&2){var l=h.y-c.offsetTop;if(l<=0){return false}c.style.height=l+"px"}}break;case 5:if(e){var h=a(Jb);if(!h){return false}if(Xa&1){if(Jb.x-h.x<h.w/2){e.dx-=h.x-Jb.x}else{e.dx-=h.x+h.w-Jb.x}}if(Xa&2){if(Jb.y-h.y<h.h/2){e.dy-=h.y-Jb.y}else{e.dy-=h.y+h.h-Jb.y}}}break}return true}}var Wt=2*Math.PI/16,A=undefined,lb=0,Be=undefined,Jb=undefined,ei=undefined,lh=undefined,Wf=undefined,Xa=undefined,Zd=undefined,Vf=undefined,pq=false,yj=undefined,ud=undefined;
function _DD_Install(a){if(!a){a=document}ud=a;te(ud.body,"mousedown",Xt)}var Wl=[];function Zt(a){Wl.push(a)}function To(a,b){for(var c=Wl.length-1;c>=0;--c){var d=Wl[c](a,b);if(d){return d}}return undefined}var kh;function Xt(a){kh=Mo(a||window.event);te(ud.body,"mousemove",Xk);te(ud.body,"mouseup",Yk);return false}function Yt(a){var b=undefined;for(var c=a.srcElement||a.target;c;c=c.parentNode){b=To(c,a);if(!b)continue;Jb=of(a);if(b.Cc(a,c)){if(!(A&&lb>=0&&lb<6&&1===1+lb%1&&Xa&&0===(Xa&-4))){var d=
"Bogus drag: el="+A+", type="+lb+", axis mask="+Xa;$i();yo(d)}a.cancelBubble=true;Be=b;ei=Jb;lh={x:A.offsetLeft,y:A.offsetTop,w:A.offsetWidth,h:A.offsetHeight};if(lb===4){Wf=[Jb]}Zd=new ch(0,0);Vf=new ch(0,0);if(lb===1||lb===2||lb===5){if(lb!==2&&Be.useUserDefinedAlpha&&!Be.useUserDefinedAlpha()){Ro(A,true)}yj=A.style.zIndex;A.style.zIndex=2000}if(bh()){te(ud.body,"mouseleave",aj)}else{te(ud.body,"mouseout",aj)}}else{$i()}return false}return true}function Yk(a){if(kh){kh=null;ah(ud.body,"mousemove",
Xk);ah(ud.body,"mouseup",Yk);var b=undefined;for(var c=a.srcElement||a.target;c;c=c.parentNode){b=To(c,a);if(b&&b.handleClick){b.handleClick(c,a);return false}}return}var d=a||ud.parentWindow.event;if(!Be.$n(d,A,lb)){Zi()}else{$i()}}function Xk(a){if(kh){var b=Yt(kh);kh=null;if(b){Zi();return true}}if(!A){return true}if(!Be){return true}var c=a||ud.parentWindow.event;c.cancelBubble=true;var d=of(c),e=new ch(d.x-Jb.x+Zd.dx,d.y-Jb.y+Zd.dy);if(!(e.dx|e.dy)){return false}var f=new ch(e.dx,e.dy);Jb=d;
pq=true;var g=xo(A);if(Xa&1){Vf.dx+=f.dx}if(Xa&2){Vf.dy+=f.dy}if(Be.Lf(c,A,lb,f,Vf)){var h=xo(A);Vf.dx-=h.x-g.x;Vf.dy-=h.y-g.y;switch(lb){case 1:case 2:case 5:Zd.dx=e.dx-f.dx;Zd.dy=e.dy-f.dy;break}switch(lb){case 1:if(!(Xa&1)){f.dx=0}if(!(Xa&2)){f.dy=0}var i=A.currentStyle?A.currentStyle:A.ownerDocument.defaultView.getComputedStyle(A,"");if(i&&i.position=="relative"){A.style.left=Vf.dx+"px";A.style.top=Vf.dy+"px"}else{var j=A.offsetLeft+f.dx,l=A.offsetTop+f.dy;if(f.dx){A.style.left=j+"px"}if(f.dy){A.style.top=
l+"px"}if(f.dx&&j!==A.offsetLeft){A.style.left=j+j-A.offsetLeft+"px"}if(f.dy&&l!==A.offsetTop){A.style.top=l+l-A.offsetTop+"px"}}break;case 5:var p=Wd(A);if(Xa&1){var t=Jb.x+Zd.dx,w=Math.min(t,ei.x),y=Math.abs(t-ei.x);if(w!==p.x){var j=w;A.style.left=j+"px";if(j!==A.offsetLeft){A.style.left=j+j-A.offsetLeft+"px"}}if(y!==p.w){A.style.width=y+"px";if(y!=A.offsetWidth){y=Math.max(0,y+y-A.offsetWidth);A.style.width=y+"px"}}}if(Xa&2){var Z=Jb.y+Zd.dy,M=Math.min(Z,ei.y),I=Math.abs(Z-ei.y);if(M!==p.y){var l=
M;A.style.top=l+"px";if(l!==A.offsetTop){A.style.top=l+l-A.offsetTop+"px"}}if(I!==p.h){A.style.height=I+"px";if(I!=A.offsetHeight){I=Math.max(0,I+I-A.offsetHeight);A.style.height=I+"px"}}}break;case 2:if(f.dx&&Xa&1){var Ab=A.offsetWidth,y=Ab+f.dx;if(y<0){Zd.dx+=y;y=0}if(y<1){Zd.dx+=y-1;y=1}A.style.width=y+"px";if(y!=A.offsetWidth){y+=y-A.offsetWidth;if(y<1){y=1}A.style.width=y+"px"}}if(f.dy&&Xa&2){var Gd=A.offsetHeight,I=Gd+f.dy;if(I<0){Zd.dy+=I;I=0}if(I<1){Zd.dy+=I-1;I=1}A.style.height=I+"px";if(I!=
A.offsetHeight){I+=I-A.offsetHeight;if(I<1){I=1}A.style.height=I+"px"}}break;case 3:if(!(Xa&1)){f.dx=0}if(!(Xa&2)){f.dy=0}if(A.scrollBy){A.scrollBy(f.dx,f.dy)}else{f.dx*=-1;f.dy*=-1;var Ue=A.scrollLeft,eh=A.scrollLeft+A.scrollWidth-A.offsetWidth,hl=A.scrollTop,fd=A.scrollTop+A.scrollHeight-A.offsetHeight;f.dx=Math.max(Math.min(f.dx,eh),-Ue);f.dy=Math.max(Math.min(f.dy,fd),-hl);if(f.dx){A.scrollLeft=A.scrollLeft+f.dx}if(f.dy){A.scrollTop=A.scrollTop+f.dy}}break;case 4:if(f.dx|f.dy){if(Wf.length>=1){var fh=
f,Rc=Wf[Wf.length-1],rf=new ch(fh.dx+Rc.dx,fh.dy+Rc.dy),gh=false;if(rf.dx*rf.dx+rf.dy*rf.dy<=25){gh=true}else{var hj=Math.atan2(fh.dx,fh.dy),xg=Math.atan2(Rc.dx,Rc.dy),Yh=Math.abs((hj-xg+2*Math.PI)%(2*Math.PI));gh=Yh<Wt}if(gh){Rc.dx=rf.dx;Rc.dy=rf.dy}else{Wf.push(f)}}else{Wf.push(f)}Uo(Wf)}break}}else{Zi()}return false}function aj(a){a=a||window.event;var b=a.relatedTarget||a.toElement;if(!b){Zi()}}function $i(){if(lb!==0){if(A){if(lb===4){Uo([])}Be.uP(A,lb)}if(lb===1||lb===2||lb===5){if(lb!==2&&
Be.useUserDefinedAlpha&&!Be.useUserDefinedAlpha()){Ro(A,false)}if(undefined!==yj){A.style.zIndex=yj;yj=undefined}else{delete A.style.zIndex}}}A=undefined;lb=0;Jb=undefined;lh=undefined;Xa=0;Zd=undefined;pq=false;if(Be){if(bh()){ah(ud.body,"mouseleave",aj)}else{ah(ud.body,"mouseout",aj)}}Be=undefined;ah(ud.body,"mousemove",Xk);ah(ud.body,"mouseup",Yk)}function Zi(){switch(lb){case 1:var a=A.currentStyle?A.currentStyle:window.getComputedStyle(A,"");if(a&&a.position=="relative"){A.style.left="0px";A.style.top=
"0px"}else{A.style.left=lh.x+"px";A.style.top=lh.y+"px"}break;case 2:A.style.width=lh.w+"px";A.style.height=lh.h+"px";break;case 3:break;case 4:Wf=[];break;case 0:break;case 5:break;default:yo("failed to cancel drag with dd_dragType="+lb)}$i()}function Ro(a,b){if(bh()){a.style.filter=b?"alpha(opacity=50)":"alpha(opacity=100)"}else{a.style.MozOpacity=b?0.5:1}}var Xl=false,Yl=undefined;function Uo(a){Yl=a;if(!Xl){Xl=true;window.setTimeout(Vt,100)}}function Vt(){var a=Yl;Yl=undefined;Xl=false;if(!a){return}var b=
"";if(a.length){var c=a[0].x,d=a[0].y,e=0,f=0;for(var g=1;g<a.length;g++){var h=a[g];if(!(h.dx|h.dy)){continue}if(g!=0){b+="<img class=gestimg src=images/joiner.png width=5 height=5 style=left:"+(c-2)+"px;top:"+(d-2)+"px>"}var i=Math.atan2(h.dx,h.dy),j,l=Math.floor(i/(Math.PI/6));switch(l){case 0:case 6:case -6:j="vert.png";break;case 1:case -4:j="negslope.png";break;case 2:case -2:case 3:case -3:j="horz.png";break;case 4:case -1:j="posslope.png";break;case 5:case -5:j="vert.png";break}var p=Math.max(1,
Math.abs(h.dx)),t=Math.max(1,Math.abs(h.dy));b+="<img class=gestimg src=images/"+j+" width="+p+" height="+t+" style=left:"+(c+Math.min(h.dx,0))+"px;top:"+(d+Math.min(h.dy,0))+"px>";c+=h.dx;d+=h.dy;e=Math.max(c,e);f=Math.max(d,f)}}var w=Tc("gesture");w.style.display="none";w.innerHTML=b;w.style.display="inline"}function Ev(){}Ev.prototype.Lf=function(a,b,c,d,e){throw new Error("Unimplemented");};function cd(a){this.zZ=a;this.DZ=a?So(a):undefined;this.eQ=false;this.D3=null;this.SB=3}var So=function(a,b){b=b||[];if(a.className&&a.className.match(/\bddSelected\b/)){b.push(a)}else{for(var c=a.firstChild;c;c=c.nextSibling){So(c,b)}}return b};cd.prototype.UU=function(a,b){a.style.left=b.x+"px";a.style.top=b.y+"px";if(this.SB&1){a.style.width="0px"}if(this.SB&2){a.style.height="0px"}};cd.prototype.VU=function(a){a.style.display="block"};cd.prototype.Cc=function(a,b){var c=Tc("ddLasso");if(!c){c=
document.createElement("div");c.id="ddLasso";c.style.position="absolute";c.style.display="none";document.body.appendChild(c)}var d=of(a);this.UU(c,d);this.VU(c);lb=5;Xa=this.SB;A=c;this.D3=c;var e=this;window.setTimeout(function(){if(!e.finished){e.Yv(c)}},200);return true};cd.prototype.$n=function(a,b,c){return true};cd.prototype.vV=function(a){return a.className&&a.className.match(/\bddSelectable\b/)};cd.prototype.sC=function(a,b,c){if(this.vV(a)){var d=Wd(a);if(!(b.x+b.w<d.x||d.x+d.w<b.x||b.y+
b.h<d.y||d.y+d.h<b.y)){c.push(a)}return}else{for(var e=a.firstChild;e;e=e.nextSibling){this.sC(e,b,c)}}};cd.prototype.Yv=function(a){if(!this.zZ)return;var b=[];this.sC(this.zZ,Wd(a),b);this.Ig(b);if(!this.eQ){var c=this;window.setTimeout(function(){if(!c.finished){c.Yv(a)}},200)}};cd.prototype.Ig=function(a){var b=this.DZ;for(var c=a.length;--c>=0;){a[c].dd_newSelection=true}for(var c=b.length;--c>=0;){var d=b[c];d.dd_oldSelection=true;if(!d.dd_newSelection){d.className=d.className.replace(/\s*\bddSelected\b/g,
"")}}for(var c=a.length;--c>=0;){var d=a[c];if(!d.dd_oldSelection){d.className=(d.className||" ")+" ddSelected"}d.dd_newSelection=false}for(var c=b.length;--c>=0;){b[c].dd_oldSelection=false}this.DZ=a};cd.prototype.Lf=function(a,b,c,d){return true};cd.prototype.uP=function(a,b){this.eQ=true;this.Yv(a);a.style.display="none"};function Uh(a,b){cd.call(this,a);this.n5=Ut(b);this.gridFn=b}Uh.prototype=new cd(undefined);Uh.prototype.constructor=Uh;Uh.prototype.Lf=function(a,b,c,d){return cd.prototype.Lf(a,
b,c,d)&&this.n5(a,b,c,d)};Uh.prototype.Cc=function(a,b){if(cd.prototype.Cc.call(this,a,b)){var c=this.gridFn(Jb,true);if(Xa&1){Jb.x=Jb.x-c.x<c.w>>1?c.x:c.x+c.w}if(Xa&2){Jb.y=Jb.y-c.y<c.h>>1?c.y:c.y+c.h}return true}else{return false}};function zv(){this.kl=[]}function _PC_Install(a){if(rq)return false;rq=true;var b=a?a:document;te(b.body,"mousedown",mv);return true}function mv(a){if(Fg.kl.length==0)return false;var a=a||window.event;for(var b=Fg.kl.length-1;b>=0;--b){var c=Fg.kl[b];$p(c);if(c.Pn(a)){Fg.kl.splice(b,1)}}return true}function lv(a){$p(a);for(var b=0;b<Fg.kl.length;++b){if(a===Fg.kl[b])return false}Fg.kl.push(a);return true}function $p(a){Rf(a.Pn,Function,"popup missing deactivate function")}var Fg=new zv,rq=false;var Gj=function(){this.nr=[];this.qH=new Da;this.Lg=0;this.n1=0;this.m1=0;this.l1=0;this.Ju=new Da;this.k1=0;this.ZN=0;this.Wo=1;this.CD=new Wb(0,4000);this.CD.Cf=function(){return new om};this.I0=new Wb(0,50);this.I0.Cf=function(){return new Kq};var a=this;this.MF=new Wb(0,2000);this.MF.Cf=function(){return String(a.Wo++)};this.MF.Gf=function(){};this.V2=3};Gj.prototype.Fa=rc("goog.debug.Trace");var Kq=function(){this.count=0;this.time=0;this.varAlloc=0};Kq.prototype.toString=function(){var a=[];
a.push(this.type);a.push(" ");a.push(this.count);a.push(" (");a.push(Math.round(this.time*10)/10);a.push(" ms)");if(this.varAlloc){a.push(" [VarAlloc = ");a.push(this.varAlloc);a.push("]")}return a.join("")};var om=function(){};om.prototype.f1=function(a,b,c){var d=[];if(b==-1){d.push("    ")}else{d.push(Mq(this.eventTime-b))}d.push(" ");d.push(Lq(this.eventTime-a));if(this.eventType==0){d.push(" Start        ")}else if(this.eventType==1){d.push(" Done ");var e=this.stopTime-this.startTime;d.push(Mq(e));
d.push(" ms ")}else{d.push(" Comment      ")}d.push(c);d.push(this.toString());if(this.totalVarAlloc>0){d.push("[VarAlloc ");d.push(this.totalVarAlloc);d.push("] ")}return d.join("")};om.prototype.toString=function(){if(this.type==null){return this.comment}else{return"["+this.type+"] "+this.comment}};Gj.prototype.reset=function(a){this.V2=a;for(var b=0;b<this.nr.length;b++){var c=this.CD.id;if(c){this.MF.ke(c)}this.CD.ke(this.nr[b])}this.nr.length=0;this.qH.clear();this.Lg=Nq();this.n1=0;this.m1=
0;this.l1=0;this.k1=0;this.ZN=0;var d=this.Ju.Ic();for(var b=0;b<d.length;b++){var e=d[b],f=this.Ju.get(e);f.count=0;f.time=0;f.varAlloc=0;this.I0.ke(f)}this.Ju.clear()};Gj.prototype.toString=function(){var a=[],b=-1,c=[];for(var d=0;d<this.nr.length;d++){var e=this.nr[d];if(e.eventType==1){c.pop()}a.push(" ");a.push(e.f1(this.Lg,b,c.join("")));b=e.eventTime;a.push("\n");if(e.eventType==0){c.push("|  ")}}if(this.qH.r()!=0){var f=Nq();a.push(" Unstopped timers:\n");Ob(this.qH,function(i){a.push("  ");
a.push(i.toString());a.push(" (");a.push(f-i.startTime);a.push(" ms, started at ");a.push(Lq(i.startTime));a.push(")\n")})}var g=this.Ju.Ic();for(var d=0;d<g.length;d++){var h=this.Ju.get(g[d]);if(h.count>1){a.push(" TOTAL ");a.push(h.toString());a.push("\n")}}a.push("Total tracers created "+this.k1+"\n");a.push("Total comments created "+this.ZN+"\n");a.push("Overhead start: "+this.n1+" ms\n");a.push("Overhead end: "+this.m1+" ms\n");a.push("Overhead comment: "+this.l1+" ms\n");return a.join("")};
var Mq=function(a){a=Math.round(a);var b="";if(a<1000)b=" ";if(a<100)b="  ";if(a<10)b="   ";return b+a},Lq=function(a){a=Math.round(a);var b=a/1000%60,c=a%1000;return String(100+b).substring(1,3)+"."+String(1000+c).substring(1,4)},Nq=function(){return ha()},MA=new Gj;var yw=function(a,b){if(a.tagName=="FORM"){var c=a.elements;for(var a,d=0;a=c[d];d++){yw(a,b)}}else{if(b==true){a.blur()}a.disabled=b}};var pi=function(a){J.call(this);this.b=a;var b=n.GECKO?"DOMMouseScroll":"mousewheel";this.ug=q(this.b,b,this)};pi.k(J);var Mj="mousewheel";pi.prototype.ug=null;pi.prototype.ab=function(a){var b=0,c=a.eo();if(c.type=="mousewheel"){b=-c.wheelDelta/40;if(n.SAFARI){b/=3}else if(n.OPERA){b=-b}}else{b=c.detail}if(b>100){b=3}else if(b<-100){b=-3}var d=new ar(b,c);try{this.dispatchEvent(d)}finally{d.e()}};var ar=function(a,b){La.call(this,b);this.type=Mj;this.detail=a};ar.k(La);var wb=function(){this.xV=false;this.zV=false;this.Wa=[];this.Td=[];this.zw=null;this.Nz=null;this.T0=null;this.mz=[];this.Hp=null;this.tB=null};wb.k(J);var Cx=5;wb.prototype.Bd=function(a){throw Error("Call to pure virtual method");};wb.prototype.EB=function(a){this.Td.push(a);a.zV=true;this.xV=true};wb.prototype.sd=function(){if(this.xV){for(var a,b=0;a=this.Wa[b];b++){q(a.element,X,a.To,false,a);if(this.Nz){ga(a.element,this.Nz)}}}if(this.zV&&this.T0){for(var a,b=0;a=this.Wa[b];b++){ga(a.element,
this.T0)}}};wb.prototype.Cc=function(a,b){if(this.ef){return}this.ef=b;var c=new ie("dragstart",this,this.ef);if(this.dispatchEvent(c)==false){c.e();return}c.e();var d=b.Kr();this.Ed=this.pO(d);bb(d).body.appendChild(this.Ed);var e=this.fR(d,a);this.Ed.style.position="absolute";this.Ed.style.left=e.x+"px";this.Ed.style.top=e.y+"px";this.tc=new yd(this.Ed);q(this.tc,"drag",this.vy,false,this);q(this.tc,"end",this.Rj,false,this);this.Kp=[];for(var f,g=0;f=this.Td[g];g++){for(var h,i=0;h=f.Wa[i];i++){this.vB(f,
h)}}if(!this.Qh){this.Qh=new gb(0,0,0,0)}this.ml=null;this.WU();this.tc.Cc(a);a.preventDefault()};wb.prototype.Rj=function(a){var b=this.ml;if(b&&b.nc){var c=a.clientX,d=a.clientY,e=this.JE(),f=c+e.x,g=d+e.y,h;if(this.Hp){h=this.Hp(b.Ki,b.Sa,f,g)}var i=new ie("drag",this,this.ef,b.nc,b.Ki,b.b,c,d,f,g);this.dispatchEvent(i);i.e();var j=new ie("drop",this,this.ef,b.nc,b.Ki,b.b,c,d,f,g,h);b.nc.dispatchEvent(j);j.e()}var l=new ie("dragend",this,this.ef);this.dispatchEvent(l);l.e();this.qP();L(this.tc,
"drag",this.vy,false,this);L(this.tc,"end",this.Rj,false,this);this.tc.e();C(this.Ed);delete this.ef;delete this.Ed;delete this.tc;delete this.Kp;delete this.ml};wb.prototype.vy=function(a){var b=a.clientX,c=a.clientY,d=this.JE();b+=d.x;c+=d.y;var e=this.ml,f;if(e){if(this.Hp){f=this.Hp(e.Ki,e.Sa,b,c)}if(this.Ls(b,c,e.Sa)&&f==this.tB){return}if(e.nc){var g=new ie("dragout",this,this.ef,e.nc,e.Ki,e.b);this.dispatchEvent(g);g.e();var h=new ie(this,this.ef,e.nc,e.Ki,e.b,this.tB);e.nc.dispatchEvent(h);
h.e()}this.tB=f;this.ml=null}if(!this.Ls(b,c,this.Qh)){return}e=(this.ml=this.uS(b,c));if(e&&e.nc){if(this.Hp){f=this.Hp(e.Ki,e.Sa,b,c)}var i=new ie("dragover",this,this.ef,e.nc,e.Ki,e.b);i.subtarget=f;this.dispatchEvent(i);i.e();var j=new ie("dragover",this,this.ef,e.nc,e.Ki,e.b,a.clientX,a.clientY,undefined,undefined,f);e.nc.dispatchEvent(j);j.e()}if(!e){this.sO(b,c)}};wb.prototype.WU=function(){var a,b,c,d;for(b=0;a=this.mz[b];b++){q(a.b,"scroll",this.xC,false,this);a.wC=[];a.hZ=a.b.scrollLeft;
a.iZ=a.b.scrollTop;var e=Ja(a.b),f=Wa(a.b);a.Sa=new gb(e.y,e.x+f.width,e.y+f.height,e.x)}for(b=0;d=this.Kp[b];b++){for(c=0;a=this.mz[c];c++){if(Cc(a.b,d.b)){a.wC.push(d);d.lz=a}}}};wb.prototype.qP=function(){for(var a=0,b;b=this.mz[a];a++){L(b.b,"scroll",this.xC,false,this);b.wC=[]}};wb.prototype.xC=function(a){for(var b=0,c;c=this.mz[b];b++){if(a.target==c.b){var d=c.iZ-c.b.scrollTop,e=c.hZ-c.b.scrollLeft;c.iZ=c.b.scrollTop;c.hZ=c.b.scrollLeft;for(var f=0,g;g=c.wC[f];f++){g.Sa.top+=d;g.Sa.left+=
e;g.Sa.bottom+=d;g.Sa.right+=e}}}};wb.prototype.pO=function(a){var b=this.pC(a);if(this.zw){ga(b,this.zw)}return b};wb.prototype.fR=function(a,b){var c=Ja(a);c.x+=(parseInt(Hf(a,"marginLeft"),10)||0)*2;c.y+=(parseInt(Hf(a,"marginTop"),10)||0)*2;return c};wb.prototype.pC=function(a){switch(a.tagName.toLowerCase()){case "tr":return G("table",null,G("tbody",null,a.cloneNode(true)));case "td":case "th":return G("table",null,G("tbody",null,G("tr",null,a.cloneNode(true))));default:return a.cloneNode(true)}};
wb.prototype.vB=function(a,b){var c=b.gR(),d=this.Kp;for(var e=0;e<c.length;e++){var f=c[e],g=Ja(f),h=Wa(f),i=new gb(g.y,g.x+h.width,g.y+h.height,g.x);d.push(new cn(i,a,b,f));if(d.length==1){this.Qh=new gb(i.top,i.right,i.bottom,i.left)}else{var j=this.Qh;j.left=Math.min(i.left,j.left);j.right=Math.max(i.right,j.right);j.top=Math.min(i.top,j.top);j.bottom=Math.max(i.bottom,j.bottom)}}};wb.prototype.sO=function(a,b){var c=new gb(this.Qh.top,this.Qh.right,this.Qh.bottom,this.Qh.left);for(var d,e=0;d=
this.Kp[e];e++){if(d.Sa.right<=a&&d.Sa.right>c.left){c.left=d.Sa.right}if(d.Sa.left>=a&&d.Sa.left<c.right){c.right=d.Sa.left}if(d.Sa.bottom<=b&&d.Sa.bottom>c.top){c.top=d.Sa.bottom}if(d.Sa.top>=b&&d.Sa.top<c.bottom){c.bottom=d.Sa.top}}this.ml=new cn(c)};wb.prototype.uS=function(a,b){for(var c,d=0;c=this.Kp[d];d++){if(this.Ls(a,b,c.Sa)){if(c.lz){var e=c.lz.Sa;if(this.Ls(a,b,e)){return c}}else{return c}}}return null};wb.prototype.Ls=function(a,b,c){return a>c.left&&a<c.right&&b>c.top&&b<c.bottom};wb.prototype.JE=
function(){var a=bb(this.Ed),b=Ig(a);return rh(b)};var ie=function(a,b,c,d,e,f,g,h,i,j,l){Q.call(this,a);this.dragSource=b;this.dragSourceItem=c;this.dropTarget=d;this.dropTargetItem=e;this.dropTargetElement=f;this.clientX=g;this.clientY=h;this.viewportX=i;this.viewportY=j;this.subtarget=l};ie.k(Q);ie.prototype.e=function(){if(!this.da()){ie.j.e.call(this);this.dragSource=undefined;this.dragSourceItem=undefined;this.dropTarget=undefined;this.dropTargetItem=undefined;this.dropTargetElement=undefined}};
var je=function(a,b){this.element=k(a);this.data=b;this.C=null;if(!this.element){throw Error("Invalid argument");}};je.k(J);je.prototype.xl=null;je.prototype.$w=function(a){return a};je.prototype.Kr=function(){return this.xl};je.prototype.gR=function(){return[this.element]};je.prototype.To=function(a){var b=this.$w(a.target);if(b){q(b,vd,this.zm,false,this);q(b,tc,this.zm,false,this);q(b,hd,this.uy,false,this);this.xl=b;this.Tz=new Fa(a.clientX,a.clientY)}};je.prototype.zm=function(a){var b=Math.abs(a.clientX-
this.Tz.x)+Math.abs(a.clientY-this.Tz.y);if(b>Cx){var c=this.xl;L(c,vd,this.zm,false,this);L(c,tc,this.zm,false,this);L(c,hd,this.uy,false,this);delete this.Tz;this.C.Cc(a,this)}};je.prototype.uy=function(a){var b=this.xl;L(b,vd,this.zm,false,this);L(b,tc,this.zm,false,this);L(b,hd,this.uy,false,this);delete this.Tz;this.xl=null};var cn=function(a,b,c,d){this.Sa=a;this.nc=b;this.Ki=c;this.b=d};cn.prototype.lz=null;var yr=function(a,b){wb.call(this);var c=new je(a,b);if(c){c.C=this;this.Wa.push(c)}};yr.k(wb);var en=function(){wb.call(this)};en.k(wb);en.prototype.Bd=function(a,b){var c=new je(a,b);c.C=this;this.Wa.push(c)};en.prototype.Ig=function(a){};var o={};o.TransportTypes={NATIVE_MESSAGING:1,FRAME_ELEMENT_METHOD:2,IFRAME_RELAY:3,IFRAME_POLLING:4,FLASH:5};o.TransportNames={"1":"NativeMessagingTransport","2":"FrameElementMethodTransport","3":"IframeRelayTransport","4":"IframePollingTransport","5":"FlashTransport"};o.PropertyNames={CHANNEL_NAME:"cn",PEER_URI:"pu",IFRAME_ID:"ifrid",TRANSPORT:"tp",LOCAL_RELAY_URI:"lru",PEER_RELAY_URI:"pru",LOCAL_POLL_URI:"lpu",PEER_POLL_URI:"ppu"};o.ChannelStates={NOT_CONNECTED:1,CONNECTED:2,CLOSED:3};o.wn="tp";
o.tn="SETUP";o.vj="SETUP_ACK";o.Hn={};o.getRandomString=function(a,b){var c=b||o.G4,d=c.length,e="";while(a-- >0){e+=c.charAt(Math.floor(Math.random()*d))}return e};o.G4="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";o.logger=rc("goog.net.xpc");o.Transport=function(){};o.Transport.k(mb);o.Transport.prototype.Ng=0;o.Transport.prototype.gm=function(){return this.Ng};o.Transport.prototype.getName=function(){return o.TransportNames[this.Ng]||""};o.Transport.prototype.Vk=function(a){throw Error("Not implemented");};o.Transport.prototype.Bf=function(){throw Error("Not implemented");};o.Transport.prototype.send=function(a,b){throw Error("Not implemented");};o.NativeMessagingTransport=function(a){this.Ka=a};o.NativeMessagingTransport.k(o.Transport);o.NativeMessagingTransport.prototype.Ng=o.TransportTypes.NATIVE_MESSAGING;o.NativeMessagingTransport.Fs=false;o.NativeMessagingTransport.Es=function(){if(!this.Fs){q(document,"message",this.X3,false,this);this.Fs=true}};o.NativeMessagingTransport.X3=function(a){var b=a.eo().data,c=b.indexOf("|"),d=b.indexOf(":");if(c==-1||d==-1){return}var e=b.substring(0,c),f=b.substring(c+1,d),g=b.substring(d+1),h=o.Hn[e];
if(h){h.Cl(f,g)}else{o.logger.ln('error delivering msg: no channel named "'+e+'"')}};o.NativeMessagingTransport.prototype.Vk=function(a){switch(a){case o.tn:this.send(o.wn,o.vj);case o.vj:this.Ka.Bm();break}};o.NativeMessagingTransport.prototype.Bf=function(){o.NativeMessagingTransport.Es();this.send(o.wn,o.tn)};o.NativeMessagingTransport.prototype.send=function(a,b){this.Ka.Cg.document.postMessage(this.Ka.name+"|"+a+":"+b)};o.NativeMessagingTransport.prototype.e=function(){if(this.da())return;mb.prototype.e.call(this);
L(document,"message",this.v6,false,this)};o.FrameElementMethodTransport=function(a){this.Ka=a;this.Nt=[];this.Y2=m(this.cP,this)};o.FrameElementMethodTransport.k(o.Transport);o.FrameElementMethodTransport.prototype.Ng=o.TransportTypes.FRAME_ELEMENT_METHOD;o.FrameElementMethodTransport.prototype.mv=0;o.FrameElementMethodTransport.prototype.hL=1;o.FrameElementMethodTransport.prototype.Yy=false;o.FrameElementMethodTransport.prototype.rb=0;o.FrameElementMethodTransport.Hy=null;o.FrameElementMethodTransport.prototype.Bf=function(){this.YY=window.parent==
this.Ka.Cg?this.hL:this.mv;if(this.YY==this.mv){this.Fi=this.Ka.Co;this.Fi.XPC_toOuter=m(this.RF,this)}else{this.PB()}};o.FrameElementMethodTransport.prototype.PB=function(){var a=true;try{if(!this.Fi){this.Fi=window.frameElement}if(this.Fi&&this.Fi.XPC_toOuter){this.Hy=this.Fi.XPC_toOuter;this.Fi.XPC_toOuter.XPC_toInner=m(this.RF,this);a=false;this.send(o.wn,o.vj);this.Ka.Bm()}}catch(b){o.logger.ln("exception caught while attempting setup: "+b)}if(a){if(!this.iN){this.iN=m(this.PB,this)}window.setTimeout(this.iN,
100)}};o.FrameElementMethodTransport.prototype.Vk=function(a){if(this.YY==this.mv&&!this.Ka.Ii()&&a==o.vj){this.Hy=this.Fi.XPC_toOuter.XPC_toInner;this.Ka.Bm()}else{throw Error("Got unexpected transport message.");}};o.FrameElementMethodTransport.prototype.RF=function(a,b){if(!this.Yy&&this.Nt.length==0){this.Ka.Cl(a,b)}else{this.Nt.push({serviceName:a,payload:b});if(this.Nt.length==1){this.rb=window.setTimeout(this.Y2,1)}}};o.FrameElementMethodTransport.prototype.cP=function(){while(this.Nt.length){var a=
this.Nt.shift();this.Ka.Cl(a.serviceName,a.payload)}};o.FrameElementMethodTransport.prototype.send=function(a,b){this.Yy=true;this.Hy(a,b);this.Yy=false};o.FrameElementMethodTransport.prototype.e=function(){if(this.da())return;mb.prototype.e.call(this);this.Hy=null;this.Fi=null};o.IframeRelayTransport=function(a){this.Ka=a;var b=o.PropertyNames;this.w4=this.Ka.Xc[b.PEER_RELAY_URI];this.DX=this.Ka.Xc[b.IFRAME_ID];if(n.SAFARI){o.IframeRelayTransport.s5()}};o.IframeRelayTransport.k(o.Transport);if(n.SAFARI){o.IframeRelayTransport.Nx=[];o.IframeRelayTransport.EK=1000;o.IframeRelayTransport.a2=3000;o.IframeRelayTransport.hC=0;o.IframeRelayTransport.s5=function(){if(!this.hC){this.hC=window.setTimeout(function(){o.IframeRelayTransport.iC()},this.EK)}};o.IframeRelayTransport.iC=
function(a){var b=ha(),c=a||this.a2;while(this.Nx.length&&b-this.Nx[0].timestamp>=c){var d=this.Nx.shift().iframeElement;C(d);o.logger.xe("iframe removed")}this.hC=window.setTimeout(this.A2,this.EK)};o.IframeRelayTransport.A2=function(){o.IframeRelayTransport.iC()}}o.IframeRelayTransport.prototype.Ng=o.TransportTypes.IFRAME_RELAY;o.IframeRelayTransport.prototype.Bf=function(){this.send(o.wn,o.tn)};o.IframeRelayTransport.prototype.Vk=function(a){if(a==o.tn){this.send(o.wn,o.vj);this.Ka.Bm()}else if(a==
o.vj){this.Ka.Bm()}};o.IframeRelayTransport.prototype.send=function(a,b){if(n.IE){var c=document.createElement("div");c.innerHTML='<iframe onload="this.xpcOnload()"></iframe>';var d=c.childNodes[0];c=null;d.xpcOnload=o.IframeRelayTransport.KU}else{var d=document.createElement("iframe");if(n.SAFARI){o.IframeRelayTransport.Nx.push({timestamp:ha(),iframeElement:d})}else{q(d,"load",o.IframeRelayTransport.KU)}}var e=d.style;e.visibility="hidden";e.width=(d.style.height="0px");e.position="absolute";var f=
this.w4;f+="#"+this.Ka.name;if(this.DX){f+=","+this.DX}f+="|"+a+":"+encodeURIComponent(b);d.src=f;document.body.appendChild(d);o.logger.xe("msg sent: "+f)};o.IframeRelayTransport.KU=function(){o.logger.xe("iframe-load");C(this);this.xpcOnload=null};window.xpcRelay=function(a,b){var c=b.indexOf(":"),d=b.substring(0,c),e=b.substring(c+1);o.Hn[a].Cl(d,decodeURIComponent(e))};o.IframeRelayTransport.prototype.e=function(){if(this.da())return;mb.prototype.e.call(this);if(n.SAFARI){o.IframeRelayTransport.iC(0)}};o.IframePollingTransport=function(a){this.Ka=a;this.cu=this.Ka.Xc[o.PropertyNames.PEER_POLL_URI];this.H4=this.Ka.Xc[o.PropertyNames.LOCAL_POLL_URI];this.rz=[]};o.IframePollingTransport.k(o.Transport);o.IframePollingTransport.prototype.Ng=o.TransportTypes.IFRAME_POLLING;o.IframePollingTransport.prototype.du=0;o.IframePollingTransport.prototype.qn=false;o.IframePollingTransport.prototype.Bf=function(){this.cO()};o.IframePollingTransport.prototype.cO=function(){o.logger.Pb("constructing sender frames.");
var a=this.Ka.name+"_msg";this.QW=this.tC(a);this.TW=window.frames[a];a=this.Ka.name+"_ack";this.pM=this.tC(a);this.rM=window.frames[a];this.cC()};o.IframePollingTransport.prototype.tC=function(a){var b=u("iframe"),c=b.style;c.position="absolute";c.top="-10px";c.left="10px";c.width="1px";c.height="1px";b.id=(b.name=a);b.src=this.cu+"#INITIAL";document.body.appendChild(b);return b};o.IframePollingTransport.prototype.cC=function(){if(this.NN){window.clearTimeout(this.NN)}if(!(this.dG("msg")&&this.dG("ack"))){o.logger.xe("foreign frames not (yet) present");
if(!this.MN){this.MN=m(this.cC,this)}this.NN=window.setTimeout(this.MN,100)}else{o.logger.Pb("foreign frames present");this.RW=new o.IframePollingTransport.Receiver(this,this.Ka.Cg.frames[this.Ka.name+"_msg"],m(this.lY,this));this.qM=new o.IframePollingTransport.Receiver(this,this.Ka.Cg.frames[this.Ka.name+"_ack"],m(this.kY,this));this.eC()}};o.IframePollingTransport.prototype.dG=function(a){try{var b=this.Ka.Cg.frames[this.Ka.name+"_"+a];if(!b||b.location.href.indexOf(this.H4)!=0){return false}}catch(c){return false}return true};
o.IframePollingTransport.prototype.eC=function(){var a=this.Ka.Cg.frames;if(!(a[this.Ka.name+"_ack"]&&a[this.Ka.name+"_msg"])){if(!this.ON){this.ON=m(this.eC,this)}window.setTimeout(this.ON,100);o.logger.Pb("local frames not (yet) present")}else{this.SW=new o.IframePollingTransport.Sender(this.cu,this.TW);this.zv=new o.IframePollingTransport.Sender(this.cu,this.rM);o.logger.Pb("local frames ready");window.setTimeout(m(function(){this.SW.send(o.tn);this.P6=true;this.qn=true;o.logger.Pb("SETUP sent")},
this),100)}};o.IframePollingTransport.prototype.dC=function(){if(this.yI&&this.rY){this.Ka.Bm();if(this.Sn){o.logger.Pb("delivering queued messages ("+this.Sn.length+")");for(var a=0,b;a<this.Sn.length;a++){b=this.Sn[a];this.Ka.Cl(b.service,b.payload)}delete this.Sn}}else{o.logger.xe("checking if connected: ack sent:"+this.yI+", ack rcvd: "+this.rY)}};o.IframePollingTransport.prototype.lY=function(a){o.logger.xe("msg received: "+a);if(a==o.tn){if(!this.zv){return}this.zv.send(o.vj);o.logger.xe("SETUP_ACK sent");
this.yI=true;this.dC()}else if(this.Ka.Ii()||this.yI){var b=a.indexOf("|"),c=a.substring(0,b),d=a.substring(b+1);b=c.indexOf(",");if(b==-1){var e=c;this.zv.send("ACK:"+e);this.eD(d)}else{var e=c.substring(0,b);this.zv.send("ACK:"+e);var f=c.substring(b+1).split("/");f[0]=parseInt(f[0],10);f[1]=parseInt(f[1],10);if(f[0]==1){this.Db=[]}this.Db.push(d);if(f[0]==f[1]){this.eD(this.Db.join(""));delete this.Db}}}else{o.logger.nj("received msg, but channel is not connected")}};o.IframePollingTransport.prototype.kY=
function(a){o.logger.xe("ack received: "+a);if(a==o.vj){this.qn=false;this.rY=true;this.dC()}else if(this.Ka.Ii()){if(!this.qn){o.nj("got unexpected ack");return}var b=parseInt(a.split(":")[1],10);if(b==this.du){this.qn=false;this.wI()}else{o.logger.nj("got ack with wrong sequence")}}else{o.logger.nj("received ack, but channel not connected")}};o.IframePollingTransport.prototype.wI=function(){if(this.qn||!this.rz.length){return}var a=this.rz.shift();++this.du;this.SW.send(this.du+a);o.logger.xe("msg sent: "+
this.du+a);this.qn=true};o.IframePollingTransport.prototype.eD=function(a){var b=a.indexOf(":"),c=a.substr(0,b),d=a.substring(b+1);if(!this.Ka.Ii()){(this.Sn||(this.Sn=[])).push({service:c,payload:d});o.logger.xe("queued delivery")}else{this.Ka.Cl(c,d)}};o.IframePollingTransport.prototype.cq=3800;o.IframePollingTransport.prototype.send=function(a,b){var c=a+":"+b;if(!n.IE||b.length<=this.cq){this.rz.push("|"+c)}else{var d=b.length,e=Math.ceil(d/this.cq),f=0,g=1;while(f<d){this.rz.push(","+g+"/"+e+
"|"+c.substr(f,this.cq));g++;f+=this.cq}}this.wI()};o.IframePollingTransport.prototype.e=function(){if(this.da())return;mb.prototype.e.call(this);var a=o.IframePollingTransport.gp;qc(a,this.RW);qc(a,this.qM);this.RW=(this.qM=null);C(this.QW);C(this.pM);this.QW=(this.pM=null);this.TW=(this.rM=null)};o.IframePollingTransport.gp=[];o.IframePollingTransport.bM=10;o.IframePollingTransport.b2=100;o.IframePollingTransport.c2=1000;o.IframePollingTransport.Xy=function(){var a=false;try{for(var b=0,c=this.gp.length;b<
c;b++){a=a||this.gp[b].tY()}}catch(d){o.logger.info("receive_() failed: "+d);this.gp[b].Wd.Ka.eX();if(!this.gp.length){return}}var e=ha();if(a){o.IframePollingTransport.BV=e}var f=e-o.IframePollingTransport.BV<this.c2?this.bM:this.b2;this.RH=window.setTimeout(this.uY,f)};o.IframePollingTransport.uY=m(o.IframePollingTransport.Xy,o.IframePollingTransport);o.IframePollingTransport.t5=function(){o.logger.Pb("starting receive-timer");o.IframePollingTransport.BV=ha();if(this.RH){window.clearTimeout(this.RH)}this.RH=
window.setTimeout(this.uY,this.bM)};o.IframePollingTransport.Sender=function(a,b){this.cu=a;this.FZ=b;this.VC=0};o.IframePollingTransport.Sender.prototype.send=function(a){this.VC=++this.VC%2;var b=this.cu+"#"+this.VC+encodeURIComponent(a);try{if(n.SAFARI){this.FZ.location.href=b}else{this.FZ.location.replace(b)}}catch(c){o.logger.ln("sending failed",c)}o.IframePollingTransport.lastActivity=ha()};o.IframePollingTransport.Receiver=function(a,b,c){this.Wd=a;this.qY=b;this.z2=c;this.MO=this.qY.location.href.split("#")[0]+
"#INITIAL";o.IframePollingTransport.gp.push(this);o.IframePollingTransport.t5()};o.IframePollingTransport.Receiver.prototype.tY=function(){var a=this.qY.location.href;if(a!=this.MO){this.MO=a;var b=a.split("#")[1];if(b){b=b.substr(1);this.z2(decodeURIComponent(b))}return true}else{return false}};o.CrossPageChannel=function(a){this.Xc=a;var b=o.PropertyNames;this.name=this.Xc[b.CHANNEL_NAME]||o.getRandomString(10);this.NZ={};o.Hn[this.name]=this;q(window,"unload",o.CrossPageChannel.a3);o.logger.info("CrossPageChannel created: "+this.name)};o.CrossPageChannel.k(mb);o.CrossPageChannel.prototype.Wd=null;o.CrossPageChannel.prototype.Ca=o.ChannelStates.NOT_CONNECTED;o.CrossPageChannel.prototype.Ii=function(){return this.Ca==o.ChannelStates.CONNECTED};o.CrossPageChannel.prototype.Cg=null;o.CrossPageChannel.prototype.Co=
null;o.CrossPageChannel.prototype.ZI=function(a){this.Cg=a};o.CrossPageChannel.prototype.IO=function(){if(this.Wd){return}var a=o.PropertyNames;if(!this.Xc[a.TRANSPORT]){var b=o.TransportTypes;if(typeof document.postMessage=="function"){this.Xc[a.TRANSPORT]=b.NATIVE_MESSAGING}else if(n.GECKO){this.Xc[a.TRANSPORT]=b.FRAME_ELEMENT_METHOD}else if(n.IE&&this.Xc[a.PEER_RELAY_URI]){this.Xc[a.TRANSPORT]=b.IFRAME_RELAY}else if(this.Xc[a.LOCAL_POLL_URI]&&this.Xc[a.PEER_POLL_URI]){this.Xc[a.TRANSPORT]=b.IFRAME_POLLING}}if(this.Xc[a.TRANSPORT]){var c=
o[o.TransportNames[this.Xc[a.TRANSPORT]]];if(c){this.Wd=new c(this);o.logger.info("Transport created: "+this.Wd.getName())}}if(!this.Wd){throw Error("CrossPageChannel: No suitable transport found!");}};o.CrossPageChannel.prototype.VO=false;o.CrossPageChannel.prototype.bO=false;o.CrossPageChannel.prototype.Bf=function(a){this.D2=a;if(this.VO){this.bO=true;return}var b=o.PropertyNames;if(this.Xc[b.IFRAME_ID]){this.Co=k(this.Xc[b.IFRAME_ID])}if(this.Co){var c=this.Co.contentWindow;if(!c){c=window.frames[this.Xc[b.IFRAME_ID]]}this.ZI(c)}if(!this.Cg){if(window==
top){throw Error("CrossPageChannel: Can't connect, peer window-object not set.");}else{this.ZI(window.parent)}}this.IO();this.Wd.Bf()};o.CrossPageChannel.prototype.close=function(){if(!this.Ii())return;this.Ca=o.ChannelStates.CLOSED;this.Wd.e();this.Wd=null;o.logger.info('Channel "'+this.name+'" closed')};o.CrossPageChannel.prototype.Bm=function(){if(this.Ii()){return}this.Ca=o.ChannelStates.CONNECTED;o.logger.info('Channel "'+this.name+'" connected');this.D2()};o.CrossPageChannel.prototype.eX=function(){o.logger.info("Transport Error");
this.close()};o.CrossPageChannel.prototype.send=function(a,b){if(!this.Ii()){o.logger.ln("Can't send. Channel not connected.");return}if(this.Cg.closed){o.logger.ln("Peer has disappeared.");this.close();return}if(Fc(b)){b=Kx(b)}this.Wd.send(a,b)};o.CrossPageChannel.prototype.Cl=function(a,b){if(!a||a==o.wn){this.Wd.Vk(b)}else{if(this.Ii()){var c=this.NZ[a];if(c){if(c.jsonEncoded){try{b=Fr(b)}catch(d){o.logger.info("Error parsing JSON-encoded payload.");return}}c.callback(b)}else{o.logger.info('CrossPageChannel::deliver_(): No such service: "'+
a+'" (payload: '+b+")")}}else{o.logger.info("CrossPageChannel::deliver_(): Not connected.")}}};o.CrossPageChannel.prototype.e=function(){if(this.da())return;mb.prototype.e.call(this);this.close();this.Cg=null;this.Co=null;this.NZ=null;o.Hn[this.name]=null};o.CrossPageChannel.a3=function(){for(var a in o.Hn){var b=o.Hn[a];if(b){b.e()}}};var Fh=function(a,b){this.sg=a;this.Ia=b};Fh.prototype.ti=function(){return this.sg};Fh.prototype.H=function(){return this.Ia};Fh.prototype.ha=function(){return new Fh(this.sg,this.Ia)};var ne=function(){this.be=[]};ne.prototype.Mf=0;ne.prototype.hj=0;ne.prototype.Xn=function(a){this.be[this.hj++]=a};ne.prototype.Oj=function(){if(this.Mf==this.hj){return undefined}var a=this.be[this.Mf];delete this.be[this.Mf];this.Mf++;return a};ne.prototype.peek=function(){if(this.Mf==this.hj){return undefined}return this.be[this.Mf]};ne.prototype.r=function(){return this.hj-this.Mf};ne.prototype.isEmpty=function(){return this.hj-this.Mf==0};ne.prototype.clear=function(){this.be=[];this.Mf=0;this.hj=
0};ne.prototype.contains=function(a){return ry(this.be)};ne.prototype.remove=function(a){var b=Xf(this.be,a);if(b<0){return false}if(b==this.Mf){this.Oj()}else{Aj(this.be,b);this.hj--}return true};ne.prototype.Ab=function(){var a=[];for(var b=this.Mf;b<this.hj;b++){a.push(this.be[b])}return a};var vc=function(a,b){mb.call(this);this.EW=a||0;this.Oo=b||10;if(this.EW>this.Oo){throw Error("[goog.structs.Pool] Min can not be greater than max");}this.Fd=new ne;this.sh=new oe;this.An()};vc.k(mb);vc.prototype.rd=function(){var a=this.DY();if(a){this.sh.add(a)}return a};vc.prototype.ke=function(a){if(this.sh.remove(a)){this.nq(a);return true}return false};vc.prototype.DY=function(){var a;while(this.qE()>0){a=this.Fd.Oj();if(!this.tt(a)){this.An()}else{break}}if(!a&&this.r()<this.Oo){a=this.Cf()}return a};
vc.prototype.nq=function(a){this.sh.remove(a);if(this.tt(a)&&this.r()<this.Oo){this.Fd.Xn(a)}else{this.Gf(a)}};vc.prototype.An=function(){var a=this.Fd;while(this.r()<this.EW){a.Xn(this.Cf())}while(this.r()>this.Oo&&this.qE()>0){this.Gf(a.Oj())}};vc.prototype.Cf=function(){return{}};vc.prototype.Gf=function(a){if(typeof a.e=="function"){a.e()}else{for(var b in a){a[b]=null}}};vc.prototype.tt=function(a){if(typeof a.canBeReused=="function"){return a.canBeReused()}return true};vc.prototype.contains=
function(a){return this.Fd.contains(a)||this.sh.contains(a)};vc.prototype.r=function(){return this.Fd.r()+this.sh.r()};vc.prototype.zR=function(){return this.sh.r()};vc.prototype.qE=function(){return this.Fd.r()};vc.prototype.isEmpty=function(){return this.Fd.isEmpty()&&this.sh.isEmpty()};vc.prototype.e=function(){if(!this.da()){vc.j.e.call(this);if(this.zR()>0){throw Error("[goog.structs.Pool] Objects not released");}Ob(this.sh,this.Gf,this);this.sh.clear();this.sh=null;var a=this.Fd;while(!a.isEmpty()){this.Gf(a.Oj())}this.Fd=
null}};var Nb=function(a){this.pf=[];if(a){this.dV(a)}};Nb.prototype.rg=function(a,b){var c=new Fh(a,b),d=this.pf;d.push(c);this.nt(d.length-1)};Nb.prototype.dV=function(a){var b,c;if(a instanceof Nb){b=a.Ic();c=a.Ab();if(a.r()<=0){var d=this.pf;for(var e=0;e<b.length;e++){d.push(new Fh(b[e],c[e]))}return}}else{b=Ai(a);c=Dh(a)}for(var e=0;e<b.length;e++){this.rg(b[e],c[e])}};Nb.prototype.remove=function(){var a=this.pf,b=a.length,c=a[0];if(b<=0){return undefined}else if(b==1){qs(a)}else{a[0]=a.pop();this.lt(0)}return c.H()};
Nb.prototype.peek=function(){var a=this.pf;if(a.length==0){return undefined}return a[0].H()};Nb.prototype.lt=function(a){var b=this.pf,c=b.length,d=b[a];while(a<Math.floor(c/2)){var e=this.IR(a),f=this.gS(a),g=f<c&&b[f].ti()<b[e].ti()?f:e;if(b[g].ti()>d.ti()){break}b[a]=b[g];a=g}b[a]=d};Nb.prototype.nt=function(a){var b=this.pf,c=b[a];while(a>0){var d=this.XR(a);if(b[d].ti()>c.ti()){b[a]=b[d];a=d}else{break}}b[a]=c};Nb.prototype.IR=function(a){return a*2+1};Nb.prototype.gS=function(a){return a*2+
2};Nb.prototype.XR=function(a){return Math.floor((a-1)/2)};Nb.prototype.Ab=function(a){var b=this.pf,c=[],d=b.length;for(var e=0;e<d;e++){c.push(b[e].H())}return c};Nb.prototype.Ic=function(a){var b=this.pf,c=[],d=b.length;for(var e=0;e<d;e++){c.push(b[e].ti())}return c};Nb.prototype.dg=function(a){return Fn(this.pf,function(b){return b.H()==a})};Nb.prototype.sc=function(a){return Fn(this.pf,function(b){return b.ti()==a})};Nb.prototype.ha=function(a){return new Nb(this)};Nb.prototype.r=function(){return sy(this.pf)};
Nb.prototype.isEmpty=function(){return ty(this.pf)};Nb.prototype.clear=function(){qs(this.pf)};var lk=function(){Nb.call(this)};lk.k(Nb);lk.prototype.Xn=function(a,b){this.rg(a,b)};lk.prototype.Oj=function(){return this.remove()};var me=function(a,b){this.hz=new lk;vc.call(this,a,b)};me.k(vc);me.prototype.rd=function(a,b){if(!a){return me.j.rd.call(this)}var c=b||100;this.hz.Xn(c,a);this.zx();return undefined};me.prototype.zx=function(){var a=this.hz;while(a.r()>0){var b=this.rd();if(!b){return}else{var c=a.Oj();c.apply(this,[b])}}};me.prototype.nq=function(a){me.j.nq.call(this,a);this.zx()};me.prototype.An=function(){me.j.An.call(this);this.zx()};me.prototype.e=function(){if(!this.da()){me.j.e.call(this);this.hz.clear();
this.hz=null}};var yi=function(a,b,c){me.call(this,b,c);this.zF=a};yi.k(me);yi.prototype.Cf=function(){var a=new ba,b=this.zF;if(b){Ob(b,function(c,d){a.headers.K(d,c)})}return a};yi.prototype.Gf=function(a){a.e()};yi.prototype.tt=function(a){return!a.da()&&!a.he()};var Ke=function(a,b,c,d,e){this.vW=Ca(a)?a:1;this.jj=Ca(e)?Math.max(0,e):0;this.tK=new yi(b,c,d);this.Ik=new Da};Ke.k(J);Ke.prototype.zp=function(a){this.jj=Math.max(0,a)};Ke.prototype.send=function(a,b,c,d,e,f,g){var h=this.Ik;if(h.get(a)){throw Error("[goog.net.XhrManager] ID in use");}var i=new Bd(b,c,d,e,g);this.Ik.K(a,i);var j=m(this.US,this,a);this.tK.rd(j,f)};Ke.prototype.US=function(a,b){var c=this.Ik.get(a),d=sa,e=m(this.uo,this,a);q(b,[d.READY,d.COMPLETE,d.SUCCESS,d.ERROR,d.ABORT],e);c.e0(e);
b.zp(this.jj);this.dispatchEvent(new hk(d.READY,this,a,b));this.iI(a,b)};Ke.prototype.uo=function(a,b){switch(b.type){case sa.READY:this.iI(a,b.target);break;case sa.COMPLETE:break;case sa.SUCCESS:this.eU(a,b.target);break;case sa.TIMEOUT:case sa.ERROR:this.hm(a,b.target);break;case sa.ABORT:break}};Ke.prototype.iI=function(a,b){var c=this.Ik,d=c.get(a);if(!d.UQ()&&d.UD()<=this.vW){d.QU();b.send(d.zS(),d.NR(),d.Yc(),d.uR())}else{L(b,[sa.READY,sa.COMPLETE,sa.SUCCESS,sa.ERROR,sa.ABORT],d.GS());c.remove(a);
this.tK.ke(b)}};Ke.prototype.eU=function(a,b){this.dispatchEvent(new hk(sa.SUCCESS,this,a,b));this.Ik.get(a).TZ(true)};Ke.prototype.hm=function(a,b){var c=this.Ik,d=c.get(a);if(d.UD()>this.vW){this.dispatchEvent(new hk(sa.ERROR,this,a,b))}};Ke.prototype.e=function(){if(!this.da()){Ke.j.e.call(this);this.tK.e();var a=this.Ik;Ob(a,function(b,c){b.e()});a.clear();this.Ik=null}};var hk=function(a,b,c,d){Q.call(this,a,b);this.id=c;this.xhrLite=d};hk.k(Q);var Bd=function(a,b,c,d,e){this.Yk=a;this.Z3=b||
"GET";this.Oc=c;this.zF=d;this.hN=0;this.Hq=false;this.sK=e};Bd.k(mb);Bd.prototype.zS=function(){return this.Yk};Bd.prototype.NR=function(){return this.Z3};Bd.prototype.Yc=function(){return this.Oc};Bd.prototype.uR=function(){return this.zF};Bd.prototype.UD=function(){return this.hN};Bd.prototype.QU=function(){this.hN++};Bd.prototype.TZ=function(a){this.Hq=a};Bd.prototype.UQ=function(){return this.Hq};Bd.prototype.GS=function(){return this.sK};Bd.prototype.e0=function(a){this.sK=a};Bd.prototype.e=
function(){if(!this.da()){Bd.j.e.call(this);this.sK=null}};var jg=function(a,b,c){Kc.call(this,a,b||Ds(),c)};jg.k(Kc);var Yc=function(){nd.call(this)};Yc.k(nd);var Es=null,Ds=function(){return Es||(Es=new Yc)},Cs="goog-custom-button";Yc.prototype.o=function(a){var b=this.Ww(a),c={"class":"goog-inline-block "+b.join(" "),title:a.fk()||""};return a.X.o("div",c,this.GC(a.Yc(),a.X))};Yc.prototype.GC=function(a,b){var c="goog-inline-block "+this.xa();return b.o("div",{"class":c+"-outer-box"},b.o("div",{"class":c+"-inner-box"},a))};Yc.prototype.Nb=function(a){return a.tagName==
"DIV"};Yc.prototype.ib=function(a,b){b.appendChild(this.GC(b.childNodes,a.X));ga(b,"goog-inline-block",this.xa());return Yc.j.ib.call(this,a,b)};Yc.prototype.Yc=function(a){return a&&a.firstChild&&Yc.j.Yc.call(this,a.firstChild.firstChild)};Yc.prototype.Bc=function(a,b){if(a&&a.firstChild){Yc.j.Bc.call(this,a.firstChild.firstChild,b)}};Yc.prototype.xa=function(){return Cs};If(Cs,function(){return new jg(null)});var HA=ea("am"),IA=ea("pm");var fv=ea("Mon"),jv=ea("Tue"),kv=ea("Wed"),iv=ea("Thu"),ev=ea("Fri"),gv=ea("Sat"),hv=ea("Sun"),jw={0:fv,1:jv,2:kv,3:iv,4:ev,5:gv,6:hv};var zA=ea("Jan"),yA=ea("Feb"),CA=ea("Mar"),vA=ea("Apr"),DA=ea("May"),BA=ea("Jun"),AA=ea("Jul"),wA=ea("Aug"),GA=ea("Sep"),FA=ea("Oct"),EA=ea("Nov"),xA=ea("Dec");var Wu=ea("January"),Vu=ea("February"),Zu=ea("March"),Su=ea("April"),$u=ea("May"),Yu=ea("June"),Xu=ea("July"),Tu=ea("August"),cv=ea("September"),bv=ea("October"),av=ea("November"),
Uu=ea("December"),gm={0:Wu,1:Vu,2:Zu,3:Su,4:$u,5:Yu,6:Xu,7:Tu,8:cv,9:bv,10:av,11:Uu};var oh=function(a,b){switch(b){case 1:return a%4==0&&(a%100!=0||a%400==0)?29:28;case 5:case 8:case 10:case 3:return 30}return 31},Dq=function(a,b,c,d){var e=new Date(a,b,c),f=d||3,g=e.getDate();for(var h=b;h>0;h--){g+=oh(a,h)}var i=((new Date(a,0,1)).getDay()+6)%7,j=((new Date(a,11,31)).getDay()+6)%7,l=7-i,p=Math.ceil((g-l)/7);if(l>f){p+=1}if(p>52&&(i!=f||j!=f)){p=1}if(p==0){return Dq(a-1,11,31,f)}return p};var xf=
function(a,b,c,d,e,f){if(wa(a)){var g=a,h=b;this.years=g=="y"?h:0;this.months=g=="m"?h:0;this.days=g=="d"?h:0;this.hours=g=="h"?h:0;this.minutes=g=="n"?h:0;this.seconds=g=="s"?h:0}else{this.years=a||0;this.months=b||0;this.days=c||0;this.hours=d||0;this.minutes=e||0;this.seconds=f||0}};xf.prototype.equals=function(a){return a.years==this.years&&a.months==this.months&&a.days==this.days&&a.hours==this.hours&&a.minutes==this.minutes&&a.seconds==this.seconds};var la=function(a,b,c){if(df(a)){this.O=new Date(a,
b||0,c||1)}else if(Fc(a)){this.O=new Date(a.getFullYear(),a.getMonth(),a.getDate())}else{this.O=new Date;this.O.setHours(0);this.O.setMinutes(0);this.O.setSeconds(0);this.O.setMilliseconds(0)}this.Sl=0;this.Ar=3};la.prototype.ha=function(){var a=new la(this.getFullYear(),this.getMonth(),this.getDate());a.Sl=this.Sl;a.Ar=this.Ar;return a};la.prototype.getFullYear=function(){return this.O.getFullYear()};la.prototype.cs=function(){return this.getFullYear()};la.prototype.getMonth=function(){return this.O.getMonth()};
la.prototype.getDate=function(){return this.O.getDate()};la.prototype.getTime=function(){return this.O.getTime()};la.prototype.getDay=function(){return this.O.getDay()};la.prototype.CR=function(){return(this.O.getDay()+6)%7};la.prototype.dF=function(){return(this.CR()-this.Sl+7)%7};la.prototype.getUTCFullYear=function(){return this.O.getUTCFullYear()};la.prototype.getUTCMonth=function(){return this.O.getUTCMonth()};la.prototype.getUTCDate=function(){return this.O.getUTCDate()};la.prototype.getUTCDay=
function(){return this.O.getDay()};la.prototype.bm=function(){return this.Sl};la.prototype.FE=function(){return oh(this.getFullYear(),this.getMonth())};la.prototype.FS=function(){return Dq(this.getFullYear(),this.getMonth(),this.getDate(),this.Ar)};la.prototype.getTimezoneOffset=function(){return this.O.getTimezoneOffset()};la.prototype.vx=function(){var a,b=this.O.getTimezoneOffset();if(b==0){a="Z"}else{var c=Math.abs(b)/60,d=Math.floor(c),e=(c-d)*60;a=(b>0?"-":"+")+Ua(d,2)+":"+Ua(e,2)}return a};
la.prototype.K=function(a){this.O=new Date(a.getFullYear(),a.getMonth(),a.getDate())};la.prototype.setFullYear=function(a){this.O.setFullYear(a)};la.prototype.Hz=function(a){this.setFullYear(a)};la.prototype.setMonth=function(a){this.O.setMonth(a)};la.prototype.setDate=function(a){this.O.setDate(a)};la.prototype.setTime=function(a){return this.O.setTime(a)};la.prototype.setUTCFullYear=function(a){this.O.setUTCFullYear(a)};la.prototype.setUTCMonth=function(a){this.O.setUTCMonth(a)};la.prototype.setUTCDate=
function(a){this.O.setUTCDate(a)};la.prototype.ju=function(a){this.Sl=a};la.prototype.add=function(a){if(a.years||a.months){var b=a.years*12,c=a.months+b,d=this.cs();while(c<-11){--d;c+=12}while(c>11){++d;c-=12}var e=this.getMonth()+c;if(e>11){e=12-e;++d}else if(e<0){e=12+e;--d}var f=this.getDate(),g=oh(d,e);f=Math.min(g,f);this.setDate(1);this.Hz(d);this.setMonth(e);this.setDate(f)}if(a.days){if(n&&!n.SAFARI){this.setDate(this.getDate()+a.days)}else{if(!g){d=this.cs();e=this.getMonth();g=oh(d,e)}var h=
a.days;while(h!=0){var f=this.getDate();if(h>0){--h;if(f+1<=g){this.setDate(++f)}else{f=1;++e;if(e>11){++d;e=0}this.Hz(d);this.setDate(f);this.setMonth(e);g=oh(d,e)}}else{++h;if(f-1>0){this.setDate(--f)}else{--e;if(e<0){--d;e=11}this.Hz(d);this.setMonth(e);g=oh(d,e);f=g;this.setDate(f)}}}}}};la.prototype.Ru=function(a,b){var c=[this.O.getFullYear(),Ua(this.O.getMonth()+1,2),Ua(this.O.getDate(),2)];return c.join(a?"-":"")+(b?this.vx():"")};la.prototype.equals=function(a){return this.cs()==a.cs()&&
this.getMonth()==a.getMonth()&&this.getDate()==a.getDate()};la.prototype.toString=function(){return this.Ru()};var Bb=function(a,b,c,d,e,f){if(Ca(a)){la.call(this,a,b,c);if(Ca(d)){this.setHours(d)}if(Ca(e)){this.setMinutes(e)}if(Ca(f)){this.setSeconds(f)}}else{la.call(this);this.O=new Date}};Bb.k(la);Bb.prototype.getHours=function(){return this.O.getHours()};Bb.prototype.getMinutes=function(){return this.O.getMinutes()};Bb.prototype.getSeconds=function(){return this.O.getSeconds()};Bb.prototype.getMilliseconds=
function(){return this.O.getMilliseconds()};Bb.prototype.getUTCHours=function(){return this.O.getUTCHours()};Bb.prototype.getUTCMinutes=function(){return this.O.getUTCMinutes()};Bb.prototype.getUTCSeconds=function(){return this.O.getUTCSeconds()};Bb.prototype.getUTCMilliseconds=function(){return this.O.getUTCMilliseconds()};Bb.prototype.setHours=function(a){this.O.setHours(a)};Bb.prototype.setMinutes=function(a){this.O.setMinutes(a)};Bb.prototype.setSeconds=function(a){this.O.setSeconds(a)};Bb.prototype.setMilliseconds=
function(a){this.O.setMilliseconds(a)};Bb.prototype.setUTCHours=function(a){this.O.setUTCHours(a)};Bb.prototype.setUTCMinutes=function(a){this.O.setUTCMinutes(a)};Bb.prototype.setUTCSeconds=function(a){this.O.setUTCSeconds(a)};Bb.prototype.setUTCMilliseconds=function(a){this.O.setUTCMilliseconds(a)};Bb.prototype.add=function(a){la.prototype.add.call(this,a);if(a.hours){this.setHours(this.O.getHours()+a.hours)}if(a.minutes){this.setMinutes(this.O.getMinutes()+a.minutes)}if(a.seconds){this.setSeconds(this.O.getSeconds()+
a.seconds)}};Bb.prototype.Ru=function(a,b){if(a){return this.O.getFullYear()+"-"+Ua(this.O.getMonth()+1,2)+"-"+Ua(this.O.getDate(),2)+" "+Ua(this.O.getHours(),2)+":"+Ua(this.O.getMinutes(),2)+":"+Ua(this.O.getSeconds(),2)+(b?this.vx():"")}return this.O.getFullYear()+Ua(this.O.getMonth()+1,2)+Ua(this.O.getDate(),2)+"T"+Ua(this.O.getHours(),2)+Ua(this.O.getMinutes(),2)+Ua(this.O.getSeconds(),2)+(b?this.vx():"")};Bb.prototype.equals=function(a){return this.getTime()==a.getTime()};Bb.prototype.toString=
function(){return this.Ru()};Bb.prototype.ha=function(){var a=new Bb(this.getFullYear(),this.getMonth(),this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds());a.Sl=this.Sl;a.Ar=this.Ar;return a};var pa=function(a){J.call(this);var b;if(Fc(a)){b=new la(a)}else{b=new la}if(!Hr(He,dg())){nn(zd,dg())}this.O=b;this.Mc=this.O.ha();this.Mc.setDate(1);this.nK=["","","","","","",""];this.Xs=[];this.S2=Nx(0)};pa.k(J);pa.prototype.Kz=true;pa.prototype.u0=true;pa.prototype.GD=true;pa.prototype.uJ=true;pa.prototype.vJ=true;pa.prototype.IB=true;pa.prototype.v0=true;pa.prototype.Nq=false;pa.prototype.$C=null;var Dy=0;pa.prototype.pR=function(){return this.Mc.pR()};pa.prototype.i_=function(a){this.Mc.ju(a);
this.$f();this.TH()};pa.prototype.fJ=function(a,b){this.nK[a]=b;this.$y()};pa.prototype.R_=function(a){this.Kz=a;this.$f()};pa.prototype.f_=function(a){this.GD=a;this.$f()};pa.prototype.S_=function(a){this.uJ=a;this.$y()};pa.prototype.eY=function(){this.Mc.add(new xf("m",-1));this.$f()};pa.prototype.ZW=function(){this.Mc.add(new xf("m",1));this.$f()};pa.prototype.gY=function(){this.Mc.add(new xf("y",-1));this.$f()};pa.prototype.bX=function(){this.Mc.add(new xf("y",1));this.$f()};pa.prototype.uI=function(){this.setDate(new la)};
pa.prototype.sI=function(){if(this.IB){this.setDate(null)}};pa.prototype.getDate=function(){return this.O};pa.prototype.setDate=function(a){var b=false;if(a==null&&this.O!=null||a!=null&&this.O==null){b=true}else if(a==null){b=false}else if(a.getDate()!=this.O.getDate()||a.getMonth()!=this.O.getMonth()||a.getFullYear()!=this.O.getFullYear()){b=true}if(Fc(a)){this.O=new la(a)}else{this.O=null}if(a){this.Mc.K(this.O);this.Mc.setDate(1)}this.$f();var c=new Mn("select",this,this.O?this.O:null);this.dispatchEvent(c);
if(b){var d=new Mn("change",this,this.O?this.O:null);this.dispatchEvent(d)}};pa.prototype.create=function(a){this.T=a;var b=bb(a);a.className="goog-date-picker";var c=b.createElement("table"),d=b.createElement("thead"),e=b.createElement("tbody"),f=b.createElement("tfoot");Vc(e,"grid");e.tabIndex="0";this.R0=e;var g=G("tr",{className:"goog-date-picker-head"}),h=b.createElement("td");h.colSpan=5;this.di(h,"<",this.eY);this.Un=this.di(h,"",this.s0,"goog-date-picker-month");this.di(h,">",this.ZW);g.appendChild(h);
h=b.createElement("td");h.colSpan=3;this.di(h,"<",this.gY);this.Cw=this.di(h,"",this.w0,"goog-date-picker-year");this.di(h,">",this.bX);g.appendChild(h);d.appendChild(g);this.hg=[];for(var i=0;i<7;i++){g=b.createElement("tr");this.hg[i]=[];for(var j=0;j<8;j++){h=b.createElement(j==0||i==0?"th":"td");if((j==0||i==0)&&j!=i){h.className=j==0?"goog-date-picker-week":"goog-date-picker-wday";Vc(h,j==0?"rowheader":"columnheader")}g.appendChild(h);this.hg[i][j]=h}e.appendChild(g)}g=G("tr",{className:"goog-date-picker-foot"});
h=G("td",{colSpan:4,className:"goog-date-picker-today-cont"});var l=ea("Today");this.CP=this.di(h,l,this.uI);s(this.CP,this.v0);g.appendChild(h);h=b.createElement("td");h.colSpan=4;h.className="goog-date-picker-none-cont";var p=ea("None");this.uD=this.di(h,p,this.sI);s(this.uD,this.IB);g.appendChild(h);f.appendChild(g);c.cellSpacing="0";c.cellPadding="0";c.appendChild(d);c.appendChild(e);c.appendChild(f);a.appendChild(c);this.Nq=true;this.TH();this.$f();this.Xs.push(q(e,ta,this.sT,false,this));this.Xs.push(q(a,
Ld,this.tT,false,this));a.tabIndex=0};pa.prototype.e=function(){if(!this.da()){J.prototype.e.call(this);this.Dl();var a=this.Xs.length;for(var b=0;b<a;b++){ua(this.Xs[b])}this.T.innerHTML="";this.T=null;this.hg=null;this.Un=null;this.Cw=null;this.CP=null;this.uD=null}};pa.prototype.sT=function(a){if(a.target.tagName=="TD"){var b,c=-2,d=-2;for(b=a.target;b;b=b.previousSibling,c++){}for(b=a.target.parentNode;b;b=b.previousSibling,d++){}var e=this.Qb[d][c];this.setDate(e.ha())}};pa.prototype.tT=function(a){var b,
c;switch(a.keyCode){case 33:a.preventDefault();b=-1;break;case 34:a.preventDefault();b=1;break;case 37:a.preventDefault();c=-1;break;case 39:a.preventDefault();c=1;break;case 38:a.preventDefault();c=-7;break;case 40:a.preventDefault();c=7;break;case 36:a.preventDefault();return this.uI();case 46:a.preventDefault();return this.sI();default:return}var d;if(this.O){d=this.O.ha();d.add(new xf(0,b,c))}else{d=this.Mc.ha();d.setDate(1)}this.setDate(d)};pa.prototype.s0=function(a){a.stopPropagation();var b=
[];for(var c=0;c<12;c++){b.push(gm[c])}this.JC(this.Un,b,this.LT,gm[this.Mc.getMonth()])};pa.prototype.w0=function(a){a.stopPropagation();var b=[],c=this.Mc.getFullYear()-5;for(var d=0;d<11;d++){b.push(String(c+d))}this.JC(this.Cw,b,this.iU,this.Mc.getFullYear())};pa.prototype.LT=function(a){var b=a;for(var c=-1;b;b=Vq(b),c++){}this.Mc.setMonth(c);this.$f();if(this.Un.focus){this.Un.focus()}};pa.prototype.iU=function(a){if(a.firstChild.nodeType==3){this.Mc.setFullYear(a.firstChild.nodeValue);this.$f()}this.Cw.focus()};
pa.prototype.JC=function(a,b,c,d){this.Dl();var e=bb(a),f=G("div",{className:"goog-date-picker-menu"});this.Qo=null;var g=u("ul");for(var h=0;h<b.length;h++){var i=G("li",null,b[h]);if(b[h]==d){this.Qo=i}g.appendChild(i)}f.appendChild(g);f.style.left=a.offsetLeft+a.parentNode.offsetLeft+"px";f.style.top=a.offsetTop+"px";f.style.width=a.clientWidth+"px";this.Un.parentNode.appendChild(f);this.Aa=f;if(!this.Qo){this.Qo=g.firstChild}this.Qo.className="goog-date-picker-menu-selected";this.PG=c;q(this.Aa,
ta,this.pF,false,this);q(this.Aa,Ld,this.qF,false,this);q(e,ta,this.Dl,false,this);f.tabIndex=0;f.focus()};pa.prototype.pF=function(a){a.stopPropagation();this.Dl();if(this.PG){this.PG(a.target)}};pa.prototype.qF=function(a){a.stopPropagation();var b,c=this.Qo;switch(a.keyCode){case 35:a.preventDefault();b=c.parentNode.lastChild;break;case 36:a.preventDefault();b=c.parentNode.firstChild;break;case 38:a.preventDefault();b=c.previousSibling;break;case 40:a.preventDefault();b=c.nextSibling;break;case 13:case 9:case 0:a.preventDefault();
this.Dl();this.PG(c);break}if(b&&b!=c){c.className="";b.className="goog-date-picker-menu-selected";this.Qo=b}};pa.prototype.Dl=function(){if(this.Aa){var a=bb(this.Aa);L(this.Aa,ta,this.pF,false,this);L(this.Aa,Ld,this.qF,false,this);L(a,ta,this.Dl,false,this);C(this.Aa);delete this.Aa}};pa.prototype.di=function(a,b,c,d){var e=bb(a),f=e.createElement("button");f.className=d||"goog-date-picker-btn";f.appendChild(e.createTextNode(b));a.appendChild(f);this.Xs.push(q(f,ta,c,false,this));return f};pa.prototype.$f=
function(){if(!this.Nq){return}var a=this.Mc.ha();a.setDate(1);U(this.Un,gm[a.getMonth()]);U(this.Cw,a.getFullYear());var b=a.dF(),c=a.FE();a.add(new xf("m",-1));a.setDate(a.FE()-(b-1));if(this.Kz&&!this.GD&&c+b<33){a.add(new xf("d",-7))}b=a.dF();var d=new xf("d",1);this.Qb=[];for(var e=0;e<6;e++){this.Qb[e]=[];for(var f=0;f<7;f++){this.Qb[e][f]=a.ha();a.add(d)}b=0}this.$y()};pa.prototype.$y=function(){if(!this.Nq){return}var a=this.Mc.getMonth(),b=new la,c=b.getFullYear(),d=b.getMonth(),e=b.getDate();
for(var f=0;f<6;f++){if(this.uJ){U(this.hg[f+1][0],this.Qb[f][0].FS());Ba(this.hg[f+1][0],"goog-date-picker-week")}else{U(this.hg[f+1][0],"");Ba(this.hg[f+1][0],"")}this.R0.title=this.O?this.S2.ao(this.O):"";for(var g=0;g<7;g++){var h=this.Qb[f][g],i=this.hg[f+1][g+1];if(!i.id){i.id="goog-dp-"+Dy++}Vc(i,"gridcell");if(this.u0||h.getMonth()==a){var j=[];if(h.getMonth()!=a){j.push("goog-date-picker-other-month")}var l=(g+this.Mc.bm()+7)%7;if(this.nK[l]){j.push(this.nK[l])}if(h.getDate()==e&&h.getMonth()==
d&&h.getFullYear()==c){j.push(i,"goog-date-picker-today");var p=ea("Today");i.title=p}if(this.O&&h.getDate()==this.O.getDate()&&h.getMonth()==this.O.getMonth()&&h.getFullYear()==this.O.getFullYear()){j.push(i,"goog-date-picker-selected");sc(this.R0,"activedescendant",i.id)}if(this.$C){var t=this.$C(h);if(t){j.push(t)}}Ba(i,j.join(" "));U(i,h.getDate())}else{Ba(i,"");U(i,"")}}if(f>=4){s(this.hg[f+1][0].parentNode,this.Qb[f][0].getMonth()==a||this.Kz)}}};pa.prototype.TH=function(){if(!this.Nq){return}if(this.vJ){for(var a=
0;a<7;a++){var b=this.hg[0][a+1],c=(a+this.Mc.bm()+7)%7;U(b,jw[c])}}s(this.hg[0][0].parentNode,this.vJ)};var Mn=function(a,b,c){Q.call(this,a);this.target=b;this.date=c};Mn.k(Q);var hb=function(a,b){z.call(this,b);this.Qs=a||""};hb.k(z);hb.prototype.ni=null;hb.prototype.sa=function(){return"goog.ui.LabelInput"};hb.prototype.o=function(){this.b=this.X.o("input",{type:"text"})};hb.prototype.Ob=function(a){this.b=a;if(!this.Qs){this.Qs=a.getAttribute("label")||""}};hb.prototype.I=function(){hb.j.I.call(this);this.tq();this.Cq();this.b.C3=this};hb.prototype.J=function(){hb.j.J.call(this);this.El();this.b.C3=null};hb.prototype.tq=function(){var a=new ma(this);a.m(this.b,"focus",
this.vo);a.m(this.b,"blur",this.YS);if(n.GECKO){a.m(this.b,["keypress","keydown","keyup"],this.oT)}var b=window;a.m(b,"load",this.hU);this.L=a;this.NB()};hb.prototype.NB=function(){if(!this.l3&&this.L&&this.b.form){this.L.m(this.b.form,"submit",this.qT);this.l3=true}};hb.prototype.El=function(){if(this.L){this.L.e();this.L=null}};hb.prototype.e=function(){if(!this.da()){hb.j.e.call(this);this.El();this.b=null}};hb.prototype.jv="label-input-label";hb.prototype.vo=function(a){if(!this.Ao()&&!this.r3){this.b.value=
""}Oa(this.b,this.jv)};hb.prototype.YS=function(a){this.Cq()};hb.prototype.oT=function(a){if(a.keyCode==27){if(a.type=="keydown"){this.ni=this.b.value}else if(a.type=="keypress"){this.b.value=this.ni}else if(a.type=="keyup"){this.ni=null}a.preventDefault()}};hb.prototype.qT=function(a){if(!this.Ao()){this.b.value="";pc(this.SS,10,this)}};hb.prototype.SS=function(a){if(!this.Ao()){this.b.value=this.Qs}};hb.prototype.hU=function(a){this.Cq()};hb.prototype.Ao=function(){return this.b.value!=""&&this.b.value!=
this.Qs};hb.prototype.clear=function(){this.b.value="";this.ni=""};hb.prototype.va=function(a){if(this.ni!=null){this.ni=a}this.b.value=a;this.Cq()};hb.prototype.H=function(){if(this.ni!=null){return this.ni}return this.Ao()?this.b.value:""};hb.prototype.Cq=function(){this.NB();if(!this.Ao()){if(!this.r3){ga(this.b,this.jv)}this.b.value=this.Qs}else{Oa(this.b,this.jv)}};var Lc=function(a,b,c,d){E.call(this,a,d||Hs||(Hs=new pe),c);this.va(b)};Lc.k(E);Lc.prototype.sa=function(){return"goog.ui.MenuItem"};Lc.prototype.H=function(){var a=this.fe();return a!=null?a:this.Ir()};Lc.prototype.va=function(a){this.qa(a)};Lc.prototype.hn=function(a){this.Jg(8,a);var b=this.S();if(b){this.Ba.hn(this,b,a)}};Lc.prototype.FI=function(a){this.Jg(16,a);var b=this.S();if(b){this.Ba.hn(this,b,a)}};var pe=function(){Fb.call(this)};pe.k(Fb);var Hs=null;pe.prototype.o=function(a){var b=
pe.j.o.call(this,a);this.hn(a,b,a.mf(8)||a.mf(16));return b};pe.prototype.ib=function(a,b){a.FI(yf(b,"goog-option"));return pe.j.ib.call(this,a,b)};pe.prototype.hn=function(a,b,c){Ze(b,"goog-option",c)};pe.prototype.qd=function(a){switch(a){case 2:return this.xa()+"-highlight";case 16:case 8:return"goog-option-selected";default:return pe.j.qd.call(this,a)}};pe.prototype.Zr=function(a){return a=="goog-option-selected"?16:pe.j.Zr.call(this,a)};pe.prototype.xa=function(){return"goog-menuitem"};If("goog-menuitem",
function(){return new Lc(null)});var Kn=function(a,b,c){Lc.call(this,a,b,c);this.FI(true)};Kn.k(Lc);Kn.prototype.sa=function(){return"goog.ui.CheckBoxMenuItem"};If("goog-checkbox-menuitem",function(){return new Kn(null)});var sk=function(a,b,c){Lc.call(this,a,b,c);this.hn(true)};sk.k(Lc);sk.prototype.sa=function(){return"goog.ui.Option"};sk.prototype.Jt=function(a){return this.dispatchEvent(od)};If("goog-option",function(){return new sk(null)});var mg=function(a,b){E.call(this,null,a||Pn(),b);this.Jg(1,false);this.Jg(2,false);this.Jg(4,false);this.Jg(32,false);this.Gz(1)};mg.k(E);mg.prototype.sa=function(){return"goog.ui.Separator"};mg.prototype.I=function(){mg.j.I.call(this);Vc(this.S(),"separator")};var kg=function(){return Fb.call(this)};kg.k(Fb);var Js=null,Pn=function(){return Js||(Js=new kg)},Is="goog-menuseparator";kg.prototype.o=function(a){return a.X.o("div",{"class":this.xa()})};kg.prototype.ib=function(a,b){if(b.tagName=="HR"){var c=
b;b=this.o(a);ym(b,c);C(c)}else{ga(b,this.xa())}return b};kg.prototype.Bc=function(a,b){};kg.prototype.xa=function(){return Is};If(Is,function(){return new mg(Pn())});var Ih=function(){return kg.call(this)};Ih.k(kg);var Qs=null;var Ps="goog-toolbarseparator";Ih.prototype.o=function(a){var b=a.X.o("span",{"class":this.xa()+" goog-inline-block"});b.innerHTML="&nbsp;";return b};Ih.prototype.ib=function(a,b){b=Ih.j.ib.call(this,a,b);ga(b,"goog-inline-block");return b};Ih.prototype.xa=function(){return Ps};
If(Ps,function(){return new mg(Qs||(Qs=new Ih))});var rk=function(a){mg.call(this,Pn(),a)};rk.k(mg);rk.prototype.sa=function(){return"goog.ui.MenuSeparator"};var R=function(a){z.call(this,a);this.B=new ma(this)};R.k(z);R.prototype.ja=true;R.prototype.HB=true;R.prototype.XM=true;R.prototype.nf=null;R.prototype.Ee=-1;R.prototype.ty=false;R.prototype.ZC=0;R.prototype.sa=function(){return"goog.ui.Menu"};R.prototype.xa=function(){return"goog-menu"};R.prototype.o=function(){if(!this.b){R.j.o.call(this);this.nf=this.nf||this.b;this.b.className=this.xa();s(this.b,this.ja)}};R.prototype.I=function(){R.j.I.call(this);if(!this.nf.tabIndex>=0){this.nf.tabIndex="0"}nk(this.S(),
true);this.B.m(this,"enter",this.hX);this.B.m(this,"highlight",this.jX);this.B.m(this,"unhighlight",this.pX);this.B.m(this.nf,this.DR(),this.Uc);this.B.m(this.nf,"blur",this.Ah);this.B.m(this.b,X,this.Od);this.B.m(this.b,tc,this.xc);this.B.m(this.b,ta,this.lX);this.B.m(bb(this.b),hd,this.Vb);Vc(this.b,"menu");sc(this.b,"haspopup","true")};R.prototype.J=function(){R.j.J.call(this);if(this.B){this.B.mc()}};R.prototype.e=function(){if(!this.da()){R.j.e.call(this);this.B.e();this.b=null;this.B=null}};
R.prototype.$v=function(a){return Cc(this.S(),a)||this.kU()&&Cj(this.Ta,function(b){return typeof b.$v=="function"&&b.$v(a)})};R.prototype.Ob=function(a){this.b=a;this.nf=this.nf||a;var b=sm(this.b);while(b){var c=vm(b),d=this.aR(b);if(d){this.xb(d);d.ib(b)}b=c}};R.prototype.aR=function(a){return a.tagName=="HR"?new rk(this.X):Cy(a)};R.prototype.mq=function(a,b,c){a.ZZ(2,true);a.Jg(32,false);R.j.mq.call(this,a,b,c);if(b<=this.Ee){this.Ee++}};R.prototype.Bd=function(a){this.xb(a,true)};R.prototype.removeChild=
function(a,b){var c=this.Eo(a);if(c!=-1){if(c==this.Ee){a.ec(false)}else if(c<this.Ee){this.Ee--}}return R.j.removeChild.call(this,a,b)};R.prototype.FY=function(a){var b=this.CY(a,true);if(b){b.e()}};R.prototype.ma=function(a){var b=a?"show":"hide";if(this.ja!=a&&this.dispatchEvent(b)){this.ja=a;if(this.b){s(this.b,a)}if(a&&this.mb&&this.HB){this.nf.focus()}return true}else{return false}};R.prototype.Oa=function(){return this.mb&&this.ja};R.prototype.setPosition=function(a,b){if(!this.ja){s(this.b,
true)}Ci(this.b,a,b);if(!this.ja){s(this.b,false)}};R.prototype.no=function(){return this.Oa()?Ja(this.b):null};R.prototype.ak=function(){return this.nf};R.prototype.Ym=function(a){var b=this.Hd(a);if(b){b.ec(true)}else if(this.Ee>-1){this.cm().ec(false)}};R.prototype.ec=function(a){this.Ym(this.Eo(a))};R.prototype.cm=function(){return this.Hd(this.Ee)};R.prototype.yU=function(){this.ws(function(a,b){return(a+1)%b},this.kg()-1)};R.prototype.zU=function(){this.ws(function(a,b){a--;return a<0?b-1:a},
0)};R.prototype.AU=function(){this.ws(function(a,b){return(a+1)%b},this.Ee)};R.prototype.BU=function(){this.ws(function(a,b){a--;return a<0?b-1:a},this.Ee)};R.prototype.ws=function(a,b){var c=b,d=this.kg();c=a(c,d);var e=0;while(e<=d){if(this.XB(this.Hd(c))){this.Ym(c);return}e++;c=a(c,d)}};R.prototype.XB=function(a){return a.Oa()&&a.mf(2)&&(this.XM||a.Sc())};R.prototype.hX=function(a){var b=a.target;if(b&&this.XB(b)&&ha()-this.ZC>50){b.ec(true);if(this.ty&&b.Sc()){b.Rd(true)}}if(this.HB){this.nf.focus()}return false};
R.prototype.jX=function(a){var b=this.Eo(a.target);if(b>-1&&b!=this.Ee){if(this.Ee>-1){this.cm().ec(false)}this.Ee=b;sc(this.S(),"activedescendent",a.target.S().id)}};R.prototype.pX=function(a){if(a.target==this.cm()){this.Ee=-1;sc(this.S(),"activedescendent",null)}};R.prototype.Uc=function(a){if(this.Oa()){this.nh(a)}};R.prototype.nh=function(a){var b=this.cm();if(b&&typeof b.nh=="function"&&b.nh(a)){return true}switch(a.keyCode){case 27:this.Ym(-1);this.dispatchEvent("blur");break;case 13:if(b&&
b.Sc()){b.dispatchEvent(od)}break;case 35:this.zU();break;case 36:this.yU();break;case 38:this.BU();break;case 40:this.AU();break;default:return false}a.preventDefault();return true};R.prototype.Ah=function(a){this.Ym(-1)};R.prototype.Od=function(a){this.ty=true;a.stopPropagation();a.preventDefault()};R.prototype.Vb=function(a){this.ty=false};R.prototype.xc=function(a){if((!a.relatedTarget||!Cc(this.S(),a.relatedTarget))&&ha()-this.ZC>50){this.Ym(-1)}};R.prototype.lX=function(a){a.stopPropagation()};
R.prototype.DR=function(){return n.IE||this.nf.tagName=="INPUT"?ce:Ld};var Pa=function(a){R.call(this,a);this.Td=new Da};Pa.k(R);Pa.prototype.ja=false;Pa.prototype.PJ=false;Pa.prototype.nG=0;Pa.prototype.QC=null;Pa.prototype.Ob=function(a){Pa.j.Ob.call(this,a);var b=a.getAttribute("for")||a.htmlFor;if(b){this.Ec(this.X.S(b),3)}};Pa.prototype.I=function(){Pa.j.I.call(this);Ob(this.Td,this.sq,this);this.B.m(this,od,this.eH);this.B.m(this.X.de(),X,this.gH,true)};Pa.prototype.J=function(){Pa.j.J.call(this);Ob(this.Td,this.Uq,this);this.B.yd(this,od,this.eH);this.B.yd(this.X.de(),
X,this.gH,true)};Pa.prototype.Ec=function(a,b,c,d,e){var f=Vb(a);if(this.Td.sc(f)){throw Error("Can not attach menu to the same element more than once.");}var g={b:a,U0:b,V3:c,Kw:d?"contextmenu":X,ny:e};this.Td.K(f,g);if(this.Ie()){this.sq(g)}};Pa.prototype.sq=function(a){this.B.m(a.b,a.Kw,this.zt)};Pa.prototype.detach=function(a){var b=Vb(a);if(!this.Td.sc(b)){throw Error("Menu not attached to provided element, unable to detach.");}if(this.Ie()){this.Uq(this.Td.get(b))}this.Td.remove(b)};Pa.prototype.Uq=
function(a){this.B.yd(a.b,a.Kw,this.zt)};Pa.prototype.W_=function(a){this.PJ=a};Pa.prototype.Au=function(a,b,c){var d=this.Oa();if((d||this.mK())&&this.PJ){this.hide();return}var e=a.U0?new Qn(a.b,a.U0):new Rn(b,c),f=a.V3||1;if(!d){this.b.style.visibility="hidden"}s(this.b,true);e.pb(this.b,f,a.ny);if(!d){this.b.style.visibility="visible"}this.QC=a.b;this.Ym(-1);this.ma(true)};Pa.prototype.hide=function(){this.nG=ha();this.ma(false);this.QC=null};Pa.prototype.mK=function(){return ha()-this.nG<50};
Pa.prototype.eH=function(a){this.hide()};Pa.prototype.zt=function(a){var b=this.Td.Ic();for(var c=0;c<b.length;c++){var d=this.Td.get(b[c]);if(d.b==a.currentTarget){this.Au(d,a.clientX,a.clientY);a.preventDefault();a.stopPropagation();return}}};Pa.prototype.gH=function(a){if(this.Oa()&&!this.$v(a.target)){this.hide()}};Pa.prototype.Uc=function(a){Pa.j.Uc.call(this,a);if(this.Oa()&&a.keyCode==27){this.hide()}};Pa.prototype.Ah=function(a){Pa.j.Ah.call(this,a);this.hide()};Pa.prototype.e=function(){if(!this.da()){Pa.j.e.call(this);
if(this.Td){this.Td.clear();this.Td=null}}};var Xb=function(){J.call(this)};Xb.k(J);Xb.prototype.Ia=0;Xb.prototype.Sf=0;Xb.prototype.Le=100;Xb.prototype.pd=0;Xb.prototype.Nh=1;Xb.prototype.ie=false;Xb.prototype.va=function(a){a=this.Vm(a);if(this.Ia!=a){if(a+this.pd>this.Le){this.Ia=this.Le-this.pd}else if(a<this.Sf){this.Ia=this.Sf}else{this.Ia=a}if(!this.ie)this.dispatchEvent(ig)}};Xb.prototype.H=function(){return this.Vm(this.Ia)};Xb.prototype.e_=function(a){a=this.Vm(a);if(this.pd!=a){if(a<0){this.pd=0}else if(this.Ia+a>this.Le){this.pd=
this.Le-this.Ia}else{this.pd=a}if(!this.ie){this.dispatchEvent(ig)}}};Xb.prototype.mR=function(){return this.$Y(this.pd)};Xb.prototype.up=function(a){if(this.Sf!=a){var b=this.ie;this.ie=true;this.Sf=a;if(a+this.pd>this.Le){this.pd=this.Le-this.Sf}if(a>this.Ia){this.va(a)}if(a>this.Le){this.pd=0;this.an(a);this.va(a)}this.ie=b;if(!this.ie){this.dispatchEvent(ig)}}};Xb.prototype.ee=function(){return this.Vm(this.Sf)};Xb.prototype.an=function(a){a=this.Vm(a);if(this.Le!=a){var b=this.ie;this.ie=true;
this.Le=a;if(a<this.Ia){this.va(a-this.pd)}if(a<this.Sf){this.pd=0;this.up(a);this.va(this.Le)}if(a<this.Sf+this.pd){this.pd=this.Le-this.Sf}if(a<this.Ia+this.pd){this.pd=this.Le-this.Ia}this.ie=b;if(!this.ie){this.dispatchEvent(ig)}}};Xb.prototype.Ae=function(){return this.Vm(this.Le)};Xb.prototype.rx=function(){return this.Nh};Xb.prototype.wu=function(a){if(this.Nh!=a){this.Nh=a;var b=this.ie;this.ie=true;this.an(this.Ae());this.e_(this.mR());this.va(this.H());this.ie=b;if(!this.ie){this.dispatchEvent(ig)}}};
Xb.prototype.Vm=function(a){if(this.Nh==null)return a;return this.Sf+Math.round((a-this.Sf)/this.Nh)*this.Nh};Xb.prototype.$Y=function(a){if(this.Nh==null)return a;return Math.round(a/this.Nh)*this.Nh};var da=function(a){z.call(this,a);this.Eh=new Xb;q(this.Eh,ig,this.$S,false,this)};da.k(z);da.prototype.db=null;da.prototype.sa=function(){return"goog.ui.Slider"};var ng="vertical";da.prototype.o=function(){this.qb=this.MC();var a="goog-slider-"+this.Ne;this.b=this.X.o("div",{className:a},this.qb);Vc(this.b,"slider")};da.prototype.I=function(){da.j.I.call(this);this.tq();this.tA();var a=this.S();Vc(a,"slider");sc(a,"valuemin",this.ee());sc(a,"valuemax",this.Ae())};da.prototype.J=function(){da.j.J.call(this);
this.El()};da.prototype.MC=function(){var a=this.X.o("div",{"class":"goog-slider-thumb"});Vc(a,"button");return a};da.prototype.Ob=function(a){this.b=a;ga(this.b,"goog-slider-"+this.Ne);sc(a,"valuemin",this.ee());sc(a,"valuemax",this.Ae());var b=qh(this.b,function(c){return c.nodeType==1&&yf(c,"goog-slider-thumb")});if(!b){b=this.MC();this.b.appendChild(b)}this.qb=b};da.prototype.tq=function(){this.tc=new yd(this.qb);this.db=new hc(this.b);this.xk=new pi(this.b);var a=new ma(this);a.m(this.tc,"beforedrag",
this.VS);a.m(this.db,"key",this.is);a.m(this.b,"mousedown",this.ge);a.m(this.xk,Mj,this.xo);this.b.tabIndex=0;this.L=a};da.prototype.El=function(){if(this.L){this.L.e();this.L=null}};da.prototype.VS=function(a){var b;if(this.Ne==ng){var c=this.b.clientHeight-this.qb.offsetHeight;b=(c-a.top)/c*(this.Ae()-this.ee())+this.ee()}else{var d=this.b.clientWidth-this.qb.offsetWidth;b=a.left/d*(this.Ae()-this.ee())+this.ee()}this.va(b);a.preventDefault()};da.prototype.is=function(a){var b=true;switch(a.keyCode){case 36:this.Gv(this.ee());
break;case 35:this.Gv(this.Ae());break;case 33:this.va(this.H()+this.Zl());break;case 34:this.va(this.H()-this.Zl());break;case 37:case 40:this.va(this.H()-this.wx());break;case 39:case 38:this.va(this.H()+this.wx());break;default:b=false}if(b){a.preventDefault()}};da.prototype.ge=function(a){if(this.b.focus){this.b.focus()}if(Cc(this.qb,a.target)){return}if(this.PW){this.Gv(this.CS(a))}else{this.D0(a)}};da.prototype.xo=function(a){this.va(this.H()-this.wx()*a.detail);a.preventDefault()};da.prototype.D0=
function(a){this.Wz(a);if(this.Ne==ng){this.SF=this.cy<this.qb.offsetTop}else{this.SF=this.cy>this.qb.offsetLeft+this.qb.offsetWidth}var b=bb(this.b);q(b,"mouseup",this.Ci,true,this);q(this.b,"mousemove",this.Wz,false,this);if(!this.nk){this.nk=new $d(200);q(this.nk,"tick",this.sF,false,this)}this.sF();this.nk.start()};da.prototype.sF=function(){var a;if(this.Ne==ng){var b=this.cy,c=this.qb.offsetTop;if(this.SF){if(b<c){a=this.H()+this.Zl()}}else{var d=this.qb.offsetHeight;if(b>c+d){a=this.H()-this.Zl()}}}else{var e=
this.cy,f=this.qb.offsetLeft;if(this.SF){var g=this.qb.offsetWidth;if(e>f+g){a=this.H()+this.Zl()}}else{if(e<f){a=this.H()-this.Zl()}}}if(a!=undefined){this.va(a)}};da.prototype.Ci=function(a){if(this.nk){this.nk.stop()}var b=bb(this.b);L(b,"mouseup",this.Ci,true,this);L(this.b,"mousemove",this.Wz,false,this)};da.prototype.mx=function(a){var b=us(a,this.b);if(this.Ne==ng){return b.y}else{return b.x}};da.prototype.Wz=function(a){this.cy=this.mx(a)};da.prototype.CS=function(a){if(this.Ne==ng){var b=
this.qb.offsetHeight,c=this.b.clientHeight-b,d=this.mx(a)-b/2,e=this.ee(),f=this.Ae();return(f-e)*(c-d)/c+e}else{var g=this.qb.offsetWidth,h=this.b.clientWidth-g,i=this.mx(a)-g/2,e=this.ee(),f=this.Ae();return(f-e)*i/h+e}};da.prototype.H=function(){return this.Eh.H()};da.prototype.va=function(a){this.Eh.va(a)};da.prototype.ee=function(){return this.Eh.ee()};da.prototype.up=function(a){this.Eh.up(a)};da.prototype.Ae=function(){return this.Eh.Ae()};da.prototype.an=function(a){this.Eh.an(a)};da.prototype.Ne=
"horizontal";da.prototype.$S=function(a){this.tA();this.dispatchEvent(ig)};da.prototype.tA=function(){if(this.qb&&!this.Ux){var a=this.ZE(this.H());if(this.Ne==ng){this.qb.style.top=a.y+"px"}else{this.qb.style.left=a.x+"px"}}};da.prototype.ZE=function(a){var b=new Fa;if(this.qb){var c=this.ee(),d=this.Ae(),e=(a-c)/(d-c);if(this.Ne==ng){var f=this.qb.offsetHeight,g=this.b.clientHeight-f,h=Math.round(e*g);b.y=g-h}else{var i=this.b.clientWidth-this.qb.offsetWidth,j=Math.round(e*i);b.x=j}}return b};da.prototype.Ux=
false;da.prototype.Gv=function(a){a=Math.min(this.Ae(),Math.max(a,this.ee()));if(this.Oq){this.Oq.stop(true)}var b,c=this.ZE(a);if(this.Ne==ng){b=[this.qb.offsetLeft,c.y]}else{b=[c.x,this.qb.offsetTop]}var d=new fn(this.qb,b,100);this.Oq=d;q(d,"end",this.FP,false,this);this.Ux=true;this.va(a);sc(this.S(),"valuenow",this.H());d.play(false)};da.prototype.FP=function(a){this.Ux=false};da.prototype.C_=function(a){if(this.Ne!=a){var b="goog-slider-"+this.Ne,c="goog-slider-"+a;this.Ne=a;if(this.b){Sq(this.b,
b,c);this.qb.style.left=(this.qb.style.top="");this.tA()}}};da.prototype.e=function(){if(!this.da()){da.j.e.call(this);if(this.nk){this.nk.e()}this.nk=null;if(this.Oq){this.Oq.e()}this.El();this.Oq=null;this.b=null;this.qb=null;this.Eh.e();if(this.db){this.db.e();this.db=null}if(this.xk){this.xk.e();this.xk=null}}};da.prototype.vN=10;da.prototype.Zl=function(){return this.vN};da.prototype.r1=1;da.prototype.wx=function(){return this.r1};da.prototype.rx=function(){return this.Eh.rx()};da.prototype.wu=
function(a){this.Eh.wu(a)};da.prototype.PW=false;var Fi=function(a,b,c){Kc.call(this,a,b||Ds(),c);this.Jg(16,true)};Fi.k(Kc);Fi.prototype.sa=function(){return"goog.ui.ToggleButton"};If("goog-toggle-button",function(){return new Fi(null)});var Za=function(a,b,c){this.X=c||Hg(a?k(a):null);qd.call(this,this.X.o("div",{style:"position:absolute;display:none;"}));this.hw=new Fa(0,0);this.Ad=null;this.be=new oe;if(a){this.Ec(a)}if(b!=null){this.V_(b)}};Za.k(qd);var vk=[];Za.prototype.className="goog-tooltip";Za.prototype.m0=500;Za.prototype.tU=0;Za.prototype.oe=null;Za.prototype.Ec=function(a){a=k(a);this.be.add(a);q(a,de,this.oh,false,this);q(a,tc,this.ls,false,this);q(a,vd,this.wo,false,this);q(a,Cf,this.vo,false,this);q(a,"blur",this.ls,
false,this)};Za.prototype.detach=function(a){if(a){var b=k(a);this.fD(b);this.be.remove(b)}else{var c=this.be.Ab();for(var b,d=0;b=c[d];d++){this.fD(b)}this.be.clear()}};Za.prototype.fD=function(a){L(a,de,this.oh,false,this);L(a,tc,this.ls,false,this);L(a,vd,this.wo,false,this);L(a,Cf,this.vo,false,this);L(a,"blur",this.ls,false,this)};Za.prototype.V_=function(a){U(this.b,a)};Za.prototype.m_=function(a){this.b.innerHTML=a};Za.prototype.tp=function(a){if(this.b){C(this.b);this.b=null}xa.prototype.tp.call(this,
a);if(a){x(this.X.de().body,a)}};Za.prototype.Yo=function(){xa.prototype.Yo.call(this);for(var a,b=0;a=vk[b];b++){if(!Cc(a.b,this.Ad)){a.ma(false)}}ji(vk,this);this.b.className=this.className;this.In();q(this.b,de,this.uF,false,this);q(this.b,tc,this.tF,false,this);return true};Za.prototype.Ri=function(){qc(vk,this);for(var a,b=0;a=vk[b];b++){if(Cc(this.b,a.oe)){a.ma(false)}else{a.Ad=null;a.Sz()}}L(this.b,de,this.uF,false,this);L(this.b,tc,this.tF,false,this);this.oe=null;xa.prototype.Ri.call(this)};
Za.prototype.zW=function(a,b){if(this.Ad==a){this.SX(a,b)}};Za.prototype.SX=function(a,b){var c;if(b){c=b}else{var d=new Fa(this.hw.x,this.hw.y);c=new Tn(d)}this.oe=a;this.setPosition(c);this.ma(true)};Za.prototype.yW=function(){if(this.Ad==null||this.Ad!=this.b&&!this.be.contains(this.Ad)){this.ma(false)}this.In()};Za.prototype.oh=function(a){this.Ad=a.target;this.In();if(!this.Oa()){this.CJ(a.target)}};Za.prototype.wo=function(a){var b=Ig(this.X.de())||window,c=rh(b);this.hw.x=a.clientX+c.x;this.hw.y=
a.clientY+c.y};Za.prototype.vo=function(a){this.Ad=a.target;if(!this.Oa()){var b=new Un(this.Ad);this.CJ(a.target,b);this.In()}};Za.prototype.ls=function(a){if(a.target==this.Ad){this.Ad=null}this.Sz();this.TN()};Za.prototype.uF=function(a){if(this.Ad!=this.b){this.In();this.Ad=this.b}};Za.prototype.tF=function(a){if(this.Ad==this.b){this.Ad=null;this.Sz()}};Za.prototype.CJ=function(a,b){this.tJ=pc(this.zW.bind(this,a,b),this.m0)};Za.prototype.TN=function(){if(this.tJ){gi(this.tJ);this.tJ=null}};
Za.prototype.Sz=function(){if(!this.qh){this.qh=pc(this.yW,this.tU,this)}};Za.prototype.In=function(){if(this.qh){gi(this.qh);this.qh=null}};Za.prototype.e=function(){if(!this.da()){J.prototype.e.call(this);this.detach();if(this.b){C(this.b)}this.Ad=null;this.X=null;this.b=null}};var Tn=function(a,b){uk.call(this,a,b)};Tn.k(uk);Tn.prototype.pb=function(a,b,c){var d=md(a),e=c?new gb(c.top+10,c.right,c.bottom,c.left+10):new gb(10,0,0,10),f=Zc(d,1,a,1,this.coordinate,e,9);if(!f){Zc(d,1,a,3,this.coordinate,
e,5)}};var Un=function(a){lg.call(this,a,4)};Un.k(lg);Un.prototype.pb=function(a,b,c){var d=new Fa(0,0),e=c?new gb(c.top,c.right,c.bottom,c.left-10):new gb(0,0,0,-10),f=Zc(this.element,this.corner,a,b,d,e,9);if(!f){Zc(this.element,2,a,3,d,e,5)}};;var ub=function(a,b){J.call(this);if(a&&!b){throw Error("Can't use invisible history without providing a blank page.");}var c="history_state"+am;document.write(Eh('<input type="text" name="%s" id="%s" style="display:none" />',c,c));this.us=k(c);this.NF=b;this.rb=new $d(150);this.Vp=!a;this.L=new ma(this);if(a||n.IE){var d="history_iframe"+am,e=this.NF?'src="'+ca(this.NF)+'"':"";document.write(Eh('<iframe id="%s" style="display:none" %s></iframe>',d,e));this.bc=k(d)}if(n.IE){this.L.m(window,"load",
this.ki);this.ki=false;this.h0=false}if(this.Vp){this.cj(this.as())}else{this.$m(this.us.value)}am++};ub.k(J);ub.prototype.ub=false;ub.prototype.at=false;ub.prototype.Vs=null;ub.prototype.um=null;ub.prototype.wX=null;ub.prototype.e=function(){if(!this.da()){ub.j.e.call(this);this.L.e();this.Kb(false)}};ub.prototype.wi=function(){return this.wX};ub.prototype.Kb=function(a){if(a==this.ub){return}if(n.IE&&!this.ki){this.h0=a;return}if(a){if(n.OPERA){this.L.m(document,Vv,this.rX)}else if(n.GECKO){this.L.m(window,
"pageshow",this.Me)}if(!n.IE||this.ki){this.L.m(this.rb,"tick",this.EH);this.ub=true;this.rb.start();this.dispatchEvent(new zj(this.as()))}}else{this.ub=false;this.L.mc();this.rb.stop()}};ub.prototype.ki=function(){this.ki=true;if(this.us.value){this.$m(this.us.value,true)}this.Kb(this.h0)};ub.prototype.Me=function(a){if(a.eo().persisted){this.Kb(false);this.Kb(true)}};ub.prototype.as=function(){if(this.um!==null){return this.um}else if(this.Vp){return this.hx(window)}else{return this.ex()}};ub.prototype.Lh=
function(a,b){this.k_(a,false,b)};ub.prototype.hx=function(a){var b=a.location.href,c=b.indexOf("#");return c<0?"":b.substring(c+1)};ub.prototype.k_=function(a,b,c){if(this.as()!=a){if(this.Vp){this.cj(a,b);if(n.IE){this.$m(a,b,c)}if(this.enabled){this.EH()}}else{this.$m(a,b);this.um=(this.Vs=(this.us.value=a));this.dispatchEvent(new zj(a))}}};ub.prototype.cj=function(a,b){var c=Wv;if(a||n.IE){c+="#"+a}if(c!=window.location.href){if(b){window.location.replace(c)}else{window.location.href=c}}};ub.prototype.$m=
function(a,b,c){if(!wq&&a!=this.ex()){a=qb(a);if(n.IE){var d=tm(this.bc);d.open("text/html",b?"replace":undefined);d.write(Eh("<title>%s</title><body>%s</body>",c||document.title,a));d.close()}else{var e=this.NF+"#"+a,f=this.bc.contentWindow;if(f){if(b){f.location.replace(e)}else{f.location.href=e}}}}};ub.prototype.ex=function(){if(n.IE){var a=tm(this.bc);return a.body?Bi(a.body.innerHTML):null}else if(wq){return null}else{var b=this.bc.contentWindow;if(b){var c;try{c=Bi(this.hx(b))}catch(d){if(!this.at){this.TI(true)}return null}if(this.at){this.TI(false)}return c||
null}else{return null}}};ub.prototype.EH=function(){if(this.Vp){var a=this.hx(window);if(a!=this.Vs){this.Xe(a)}}if(!this.Vp||n.IE){var b=this.ex();if(this.um==null||b==this.um){this.um=null;if(b!=this.Vs){this.Xe(b)}}}};ub.prototype.Xe=function(a){this.Vs=(this.us.value=a);if(this.Vp){if(n.IE){this.$m(a)}this.cj(a)}else{this.$m(a)}this.dispatchEvent(new zj(this.as()))};ub.prototype.TI=function(a){if(this.at!=a){this.rb.setInterval(a?10000:150)}this.at=a};ub.prototype.rX=function(){this.rb.stop();
this.rb.start()};var wq=n.SAFARI&&n.compare(n.VERSION,"419")<=0,Wv=window.location.href.split("#")[0],Vv=[X,ce,vd],am=0,zj=function(a){Q.call(this,"navigate");this.token=a};zj.k(Q);n.flash={};(function(){function a(h){var i=h.match(/[\d]+/g);i.length=3;return i.join(".")}var b=false,c="";if(navigator.plugins&&navigator.plugins.length){var d=navigator.plugins["Shockwave Flash"];if(d){b=true;if(d.description){c=a(d.description)}}if(navigator.plugins["Shockwave Flash 2.0"]){b=true;c="2.0.0.11"}}else if(navigator.mimeTypes&&navigator.mimeTypes.length){var e=navigator.mimeTypes["application/x-shockwave-flash"];b=e&&e.enabledPlugin;if(b){c=a(e.enabledPlugin.description)}}else{try{var f=
new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");b=true;c=a(f.GetVariable("$version"))}catch(g){try{var f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");b=true;c="6.0.21"}catch(g){try{var f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");b=true;c=a(f.GetVariable("$version"))}catch(g){}}}}n.flash.HAS_FLASH=b;n.flash.VERSION=c})();n.flash.isVersion=function(a){return cs(n.flash.VERSION,a)>=0};n.picasa={};n.picasa.iv="hasPicasa";(function(){var a=false;if(n.IE){N[n.picasa.iv]=a;document.write('<!--[if gte Picasa 2]><script type="text/javascript">this.'+n.picasa.iv+"=true;<\/script><![endif]--\>");a=N[n.picasa.iv];N[n.picasa.iv]=undefined}else if(navigator.mimeTypes&&navigator.mimeTypes["application/x-picasa-detect"]){a=true}n.picasa.HAS_PICASA=a;n.picasa.VERSION=a?"2":""})();n.picasa.isVersion=function(a){return n.compare(n.picasa.VERSION,a)>=0};var Yi={},Jt=[],Ot=true,ug=[];function Mt(a,b,c,d){d.className="transnote";if(Yi[a]){Yi[a].push(d)}else{Yi[a]=[d]}Jt.push(d);if(!Ot){d.style.display="none"}d.onclick=function(e){if(!e){e=window.event}e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation()}Lt(a,b,c);return false}}function Lt(a,b,c){var d=Yi[a],e;for(e=0;e<d.length;e++){d[e].className="transnoteviewed"}window.open("http://www.google.com/transconsole/context?project="+c+"&msg_id="+a+"&lang="+b,"","width=800, height=600, resizable=1, scrollbars=1")}
function Kt(a,b,c){var d=document.createElement("span");d.innerHTML="[TC]";Mt(a,b,c,d);return d}function Xi(a,b,c){this.docId=a;this.lang=b;this.proj=c}function Nt(a){for(var b=0;b<ug.length;b++){var c=ug[b],d=Kt(c.docId,c.lang,c.proj);if(a.nextSibling){a.parentNode.insertBefore(d,a.nextSibling)}else{a.parentNode.appendChild(d)}}ug=[]}function Vk(a,b){var c,d=[];for(c=a.firstChild;c;c=c.nextSibling){d.push(c)}for(var e=0;e<d.length;e++){c=d[e];if(c.nodeType==3){var f=/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/.exec(c.data);
while(f){c.data=c.data.replace(/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/,"");ug.push(new Xi(f[1],f[2],f[3]));f=/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/.exec(c.data)}}else if(c.nodeType==1){var g=c.tagName.toLowerCase();switch(g){case "input":var h=c.type.toLowerCase();if(h=="button"||h=="submit"||h=="reset"){f=/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/.exec(c.value);while(f){c.value=c.value.replace(/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/,
"");ug.push(new Xi(f[1],f[2],f[3]));f=/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/.exec(c.value)}}break;case "script":var f=/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/.exec(c.text);while(f){c.text=c.text.replace(/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/,"");ug.push(new Xi(f[1],f[2],f[3]));f=/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/.exec(c.text)}break;case "img":var f=/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/.exec(c.alt);
while(f){c.alt=c.alt.replace(/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/,"");c.title=c.title.replace(/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/,"");ug.push(new Xi(f[1],f[2],f[3]));f=/\[transmessage:id=([0-9]+):lang=([^\]:]+):project=([^\]]+)\]/.exec(c.alt)}break;case "a":Vk(c,b+1);break;default:Vk(c,b);break}}if(!b){Nt(c)}}}function Lo(){Vk(document.body,0);window.setTimeout(Lo,500)};var Ss={};var po={name:""},nt=function(a){return a},yz="http://schemas.google.com/g/2005#feed",lo="deletefailed";var Hk=function(a,b){this.D4=wa(a)?Gf(wz,a):a;this.PH=new Da;this.Qe(b)},wz=function(a,b){return vn(b,a)};Hk.prototype.Qe=function(a){if(this.Q&&this.Q!=a){this.Q.wz(null)}this.Q=a;if(!this.Q){return}this.Q.wz(m(this.BD,this));if(this.Q.isLoaded()){ab(this.Q.NQ(),this.BD,this)}};Hk.prototype.BD=function(a,b){var c=this.D4(a);if(c){var d=this.PH.get(c);if(!d){d=[];this.PH.K(c,d)}d.push(b)}};Hk.prototype.Pw=function(a,b,c,d){var e=this.PH.get(a);if(c||e&&!d){b(e||[])}else{if(this.Q.isLoaded()||d){this.Q.PV(m(this.Pw,
this,a,b,true,false))}else{this.Q.Ea(0,this.Q.Jf(),m(this.Pw,this,a,b,c,d))}}};var $=function(a){J.call(this);this.hb=a};S($,J);var uz=yz,sz="alternate",vz="self",tz="edit";$.prototype.dp=0;$.prototype.id="-1";$.prototype.HD="";$.prototype.Q=null;$.prototype.KF="";$.prototype.mi="";$.prototype.Qx=true;$.prototype.fd=null;$.prototype.gb=null;$.prototype.isOwner=function(a){if(!a){return false}var b;if(this.gb&&this.gb.user){if(typeof a=="string"){b=a}else if(a.name){b=a.name}return this.gb.user==b}return false};$.prototype.Wk=function(a){};$.prototype.We=function(a){this.Ro(a)};
$.prototype.kj=function(a){this.Ro(a)};$.prototype.Ro=function(a){if(!this.gb){this.gb=a}else{Vg(this.gb,a)}this.Qx=true};$.prototype.mm=function(){if(this.Qx&&this.gb){this.Qx=false;var a=this.gb.link;if(a){for(var b=0;b<a.length;++b){var c=a[b],d=c.href||"";switch(c.rel){case uz:this.HD=d;break;case sz:this.KF=d;break;case vz:this.mi=d;break;case tz:this.c3=d;break}}}}};$.prototype.Ib=function(){return this.fd};$.prototype.De=function(){return this.gb?this.gb.title:""+this};$.prototype.oE=function(){this.mm();
return this.HD};$.prototype.$j=function(){this.mm();return this.mi};$.prototype.wR=function(){this.mm();return this.KF};$.prototype.kE=function(){this.mm();return this.c3};$.prototype.yb=function(a){if(!this.Q){this.ZU(a)}return this.Q};$.prototype.ZU=function(a){this.Q=this.hb.nR(this,a)};$.prototype.yi=function(){return this.Q?this.Q.yi():this.hb.gE()};$.prototype.wc=function(){return this.id||"-1"};$.prototype.Vx=function(){return false};$.prototype.thumbnail=function(a){var b=this.gb.media;if(b){var c=
b.thumbnail;if(c&&c.length){if(a&&a<c.length){return c[a]}var d=c[0];if(d){return d}}}return{url:"img/picasalogo.gif",height:"27",width:"25"}};$.prototype.y1=function(a){if(!this.Q){this.Q=a}};$.prototype.Ea=function(a){if(this.isLoaded()){a(this)}else{this.WV(a)}};$.prototype.WV=function(a){var b=this.yi();b.send(this.$j(),m(function(c){if(c.status==404){if(typeof this.Xm!="undefined"){this.Xm()}a(this);return}var d=c.Ce();this.kj(d.entry);a(this)},this))};$.prototype.r=function(){if(this.gb){return Number(this.gb.numPhotos)}return 0};
$.prototype.isLoaded=function(){return!(!this.gb)};$.prototype.Xw=function(){if(this.gb){var a=this.gb.media,b=a.content[0];return b.url}return null};$.prototype.Yl=function(){var a,b=this.thumbnail();if(b){a=b.width/b.height}return a||0};$.prototype.Tq=function(){this.hb.Tq(this)};$.prototype.ZO=function(a,b,c){this.WX(a,b,c)};$.prototype.UX=function(a,b,c,d){this.My(this.kE(),pt,a,"POST",b,c,d)};$.prototype.WX=function(a,b,c){this.My(this.kE(),Az,"","POST",a,b,c)};$.prototype.My=function(a,b,c,
d,e,f,g){if(this.dp){++this.dp;if(this.dp>10){if(g){g("Timed out attempting to post")}return}pc(m(function(){this.My(a,b,c,d,e,f,g)},this),50);return}this.dp=1;var h=m(function(i){this.VX(i,e,f)},this);this.yi().send(a,h,f?m(function(){f(this)},this):null,g,d,c,b)};$.prototype.VX=function(a,b,c){this.dp=0;if(a.Kf()>=400){if(c){c(this)}}else{var d=a.Ce();if(d&&"entry"in d){this.kj(d.entry)}if(b){b(this)}}};var Oi=function(a,b,c,d){$.call(this,a);this.We(b);this.user=c;this.album=d};S(Oi,$);Oi.prototype.type="Tag";Oi.prototype.toString=function(){var a="Tag "+this.t;if(this.user){a+=", user: "+this.user}if(this.album){a+=", album: "+this.album}return a};var zz=function(a){var b=hw(a,function(d,e,f,g){d.push(ms(ca(e.t)));return d},[]).join(","),c='<entry xmlns="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/"><category scheme="http://schemas.google.com/g/2005#kind" term="http://schemas.google.com/photos/2007#photo" /><media:group><media:keywords>'+
b+"</media:keywords></media:group></entry>";return c};Oi.prototype.We=function(a){this.t=Hc(a.title);this.w=a.weight?a.weight:1};var ot=function(a){a=ik(a);var b=a.match(/[^,'" ][^, ]*|\"[^"]*(?:\"|$)|\'[^']*(?:\'|$)/g),c={},d=[];if(b){for(var e=0;e<b.length;e++){var f=os(os(ik(b[e]),"'"),'"');if(f.length&&f!="'"&&f!='"'&&!c[f]){d.push(f);c[f]=1}}}return d};var Aa=function(a,b,c,d){$.call(this,a);this.deleted=false;this.src="../img/picasaweblogo-en_US.gif";this.user=c;this.album=d;if(b){var e=b,f=e.media,g=f.content[0];this.s=g.url;this.id=e.gphoto$id;this.w=Number(g.width);this.h=Number(g.height);this.c=ca(f.description);this.t=ca(f.title);this.snippet=e.snippet||"";this.snippetType=e.snippettype||"";this.truncated=e.truncated=="1";var h=e.author;if(!this.user&&h){var i=h[0],j=i.email,l=i.name||j;this.user=this.hb.zi(j,l)}if(!this.album&&this.user){this.album=
this.hb.Gd(this.user.name,e.albumId,e.albumTitle,e.albumCTitle)}this.Md=true}};S(Aa,$);Aa.prototype.iz=false;Aa.prototype.Sw=false;Aa.prototype.type="Photo";var xz=rc("gphoto.api.Photo");Aa.prototype.fa=function(a){xz.Pb(a)};Aa.prototype.fw=false;Aa.prototype.dD=false;var Nh="photoDataReady";Aa.prototype.g=null;Aa.prototype.Hf=null;Aa.prototype.lat=null;Aa.prototype.lon=null;Aa.prototype.bb=null;Aa.prototype.isOwner=function(a){if(!a){return false}var b;if(typeof a=="string"){b=a}else if(a.name){b=
a.name}return this.user&&this.user.name==a};Aa.prototype.Gd=function(){return this.album};Aa.prototype.toString=function(){return"Photo "+this.t+", in album: "+this.album+", user: "+this.user};Aa.prototype.yb=function(){return null};Aa.prototype.Li=function(a){if(this.g&&this.Hf){a(this)}else{ri(this,Nh,function(b){a(this)},false,this);this.uk()}};Aa.prototype.$j=function(){this.mm();if(!this.mi){this.mi=Eh("/data/entry/api/user/%s/albumid/%s/photoid/%s?alt=jsonm&pp=1",this.user.name,this.album.id,
this.id)}return this.mi};Aa.prototype.uk=function(){if(this.iz||this.Sw){return}if(this.g&&this.Hf){this.dispatchEvent(Nh)}else{if(!this.user.name){this.Md=true;this.g=null;this.Xm();return}var a="/lh/rssPhoto?uname="+this.user.name+"&iid="+this.id+"&v="+ha()+"&js=1";this.iz=true;this.Sw=true;var b=this.yi();b.send(a,m(this.cZ,this));b.send(this.$j(),m(this.GP,this))}};Aa.prototype.cZ=function(a){if(this.g){return}try{this.iz=false;var b=a.Kf();if(b>=400){this.Xm();return}this.g=a.Ce();this.lat=this.g.lat;
this.lon=this.g.lon;this.bb=this.g.bb;if(this.g.allowprints){this.Gd().prints=this.g.allowprints=="1"}if(this.g.video){this.vsurl=this.g.video.streamer_url;this.vdurl=this.g.video.download_url}this.dl=po.name==this.g.uname||this.g.allowdownload=="1"}catch(a){alert(a);return}if(this.Hf&&this.g){this.dispatchEvent(Nh)}};Aa.prototype.nb=function(){return!(!this.vsurl)};Aa.prototype.GP=function(a){try{this.Sw=false;var b=a.Kf();if(b>=400){this.Xm();return}this.Hf=a.Ce().entry;this.kj(this.Hf)}catch(a){alert(a);
return}if(this.Hf&&this.g){this.dispatchEvent(Nh)}};Aa.prototype.kj=function(a){$.prototype.kj.call(this,a);var b=a.media,c=b.content[0];this.s=c.url;this.id=a.gphoto$id;this.w=Number(c.width);this.h=Number(c.height);this.c=ca(b.description);this.t=ca(b.title);if(this.gb){this.gb.media.keywords=b.keywords}this.snippet=a.snippet||"";this.snippetType=a.snippettype||"";this.truncated=a.truncated=="1";this.Md=true};Aa.prototype.We=function(a){if(!a){return}if(!this.gb){this.gb=a}if(!this.user){var b=
a.author[0],c=b.email,d=b.name||c;this.user=this.hb.zi(c,d)}var e=a.media,f=e.content[0];this.s=f.url;this.id=a.gphoto$id;this.w=Number(f.width);this.h=Number(f.height);this.c=ca(e.description);this.t=ca(e.title);this.snippet=a.snippet||"";this.snippetType=a.snippettype||"";this.truncated=a.truncated=="1";this.lat=this.lat||a.lat;this.lon=this.lon||a.lon;this.bb=this.bb||a.bb;if(!this.album){this.album=this.hb.Gd(this.user.name,a.albumId,a.albumTitle,a.albumCTitle)}this.Md=true;Aa.j.We.call(this,
a);this.snippet=a.snippet||this.snippet;this.snippetType=a.snippettype||this.snippetType;if(!this.truncated&&a.truncated=="1"){this.truncated=true}if("author"in a){var g=a.author;if(!this.user.name){this.user.name=g[0].email}if(!this.user.nickname){this.user.nickname=g.name}}if(!this.user.name){this.Xm()}};Aa.prototype.eG=function(a){return this.truncated&&a.Ib().pm()};Aa.prototype.Vx=function(){return this.dD};Aa.prototype.Xm=function(){this.dD=true;this.dispatchEvent("deleted")};Aa.prototype.Yl=
function(){if(df(this.w)&&df(this.h)){return this.w/this.h}return 0};Aa.prototype.Xw=function(){return this.s};Aa.prototype.ux=function(){if(!this.za){var a;if(this.gb||this.Hf){var b=this.gb.media;if(typeof b!="undefined"&&typeof b.keywords!="undefined"){a=b.keywords}else if(typeof this.Hf.media!="undefined"&&typeof this.Hf.media.keywords!="undefined"){a=this.Hf.media.keywords}}this.za=[];if(a){var c=ot(a);for(var d=0;d<c.length;++d){var e=c[d];if(!e){continue}var f=this.hb.tx({title:e},this.user,
this.album);this.za.push(f)}}}return this.za};Aa.prototype.IY=function(a,b){if(this.za){qc(this.za,a)}if(b){this.Ny()}};Aa.prototype.JM=function(a,b,c){if(!this.za){this.ux()}var d=this.hb.tx({title:a},b);this.za.push(d);if(c){this.Ny()}return d};Aa.prototype.Ny=function(a,b,c){var d=zz(this.ux());this.UX(d,a,b,c)};var rd=function(a,b,c){$.call(this,a);this.name=b;this.nickname=c;this.icon="img/noportrait.jpg";this.galleryName=nt(this.nickname);this.loaded=false;this.gD=false};S(rd,$);rd.prototype.type="User";var Kk="userDataReady";rd.prototype.Ib=function(){if(!this.fd){this.fd=new Lk(this.oE(),this.name)}return this.fd};rd.prototype.Wk=function(a){rd.j.Wk.call(this,a);this.icon=a.icon;this.galleryName=a.title};rd.prototype.isOwner=function(a){var b;if(typeof a=="string"){b=a}else if(a.name){b=a.name}return this.name==
b};rd.prototype.toString=function(){return"User "+this.nickname+", username: "+this.name};rd.prototype.Ea=function(a){this.Li(a)};rd.prototype.Li=function(a){if(this.gD){a(this)}else{q(this,Kk,function(b){a(this)},true,this);this.uk()}};rd.prototype.uk=function(){if(this.gD){this.loaded=true;this.dispatchEvent({type:Kk});return}var a=this.$j()||"/data/entry/api/user/"+this.name+"?alt=jsonm&pp=1",b=this.yi();b.send(a,rd.prototype.uo.bind(this))};rd.prototype.We=function(a){rd.j.We.call(this,a);this.icon=
a.thumbnail||this.icon;this.galleryName=a.title;this.name=a.user;this.nickname=a.nickname};rd.prototype.uo=function(a){var b=a.Ce();if(b){this.gD=true;this.loaded=true;this.We(b.entry);this.dispatchEvent({type:Kk})}};var Jk=function(){};var Oh=function(a,b,c){this.u5=a;this.Y3=b;this.B3=c};Oh.prototype.Kf=function(){return this.u5};Oh.prototype.Qc=function(){return this.Y3};Oh.prototype.Ce=function(){return this.B3};var oo=function(){Jk.call(this)};S(oo,Jk);oo.prototype.send=function(a,b,c,d,e,f,g){if(e&&e!="GET"){throw Error("Only GET supported in JSONP transport");}var h=new rn(a);h.N_(30000);var i=this.yo.bind(this,b);h.send(null,i,d||c)};oo.prototype.yo=function(a,b){a(new Oh(0,"",b))};var Mk=function(){Jk.call(this)};S(Mk,Jk);var pt={"Content-Type":"application/atom+xml","X-HTTP-Method-Override":"PUT"},Az={"Content-Type":"application/atom+xml","X-HTTP-Method-Override":"DELETE"};Mk.prototype.send=function(a,b,c,d,e,f,g){var h=new ba;q(h,sa.COMPLETE,this.yo.bind(this,b,c));h.zp(30000);if(d){q(h,sa.TIMEOUT,d)}if(c){q(h,sa.ERROR,c)}if(!g&&e=="POST"){g=pt}q(h,sa.READY,h.e,false,h);h.send(a,e,f,g)};Mk.prototype.yo=function(a,b,c){var d=c.target;L(d,this.yo.bind(this));var e,f=d.Kf();
if(f<0){return}if(f>=400){if(b){b(c);return}else{e=new Oh(f,d.Qc(),"")}}else{try{var g=d.Qc(),h=g?kn(g):null;e=new Oh(0,"",h)}catch(i){if(b){b(i);return}}}a(e)};var xc=function(a){if(wa(a)){this.ca=new B(a)}else if(a instanceof B){this.ca=a}else{throw Error("Undefined object: "+a);}this.ca.$("kind","photo");this.ca.$("alt","jsonm");this.ca.$("pp","1");this.dh=null};xc.prototype.od=null;xc.prototype.b_=function(a){this.od=a};xc.prototype.url=function(){return this.ca.toString()};xc.prototype.n_=function(a){this.ca.$("hl",a)};xc.prototype.pm=function(){return false};xc.prototype.DI=function(a,b){this.ca.$("start-index",a);this.ca.$("max-results",b)};xc.prototype.a0=
function(a){this.ca.wp(this.ca.xi().replace(/(\/user\/).*(\/|$)/,"$1"+a+"$2"))};xc.prototype.lg=function(a,b){return new this.od(a,b)};xc.prototype.ix=function(){return{}};xc.prototype.io=function(){return this.dh};var Pf=function(a){xc.call(this,a);this.od=Zg};S(Pf,xc);Pf.prototype.mj=null;Pf.prototype.Ja=null;Pf.prototype.od=Zg;Pf.prototype.JQ=function(a,b){var c=a.Gd(b.user,b.gphoto$id,b.title,"");c.Wk(b);return c};Pf.prototype.lg=function(a,b){if(!this.dh){this.dh=this.JQ(a,b)}else{this.dh.kj(b)}if(this.od==Zg){var c=a.zi(b.user,b.nickname);return new this.od(a,b,c,this.dh)}else{return Pf.j.lg.call(this,a,b)}};var Qe=function(a,b,c,d,e){$.call(this,a);this.username=b;this.id=c;this.title=d;this.name=d;this.ctitle=e;this.link="/lh/sredir?uname="+this.username+"&target=ALBUM&id="+this.id;this.prints=false};S(Qe,$);Qe.prototype.type="Album";Qe.prototype.isOwner=function(a){var b;if(typeof a=="string"){b=a}else if(a.name){b=a.name}return this.username==a};Qe.prototype.toString=function(){return"[Album: "+this.title+", user: "+this.username+"]"};Qe.prototype.$j=function(){this.mm();if(!this.mi){this.mi=Eh("/data/entry/api/user/%s/albumid/%s?alt=jsonm&pp=1",
this.username,this.id)}return this.mi};Qe.prototype.Wk=function(a){if(!this.gb){this.We(a)}};Qe.prototype.Ro=function(a){Qe.j.Ro.call(this,a);this.link=this.wR()||this.link;this.title=this.title||this.gb.title;this.ctitle=this.ctitle||this.gb.gphoto$name;this.name=this.name||this.ctitle};Qe.prototype.Ib=function(){if(!this.fd){this.fd=new Pf(this.oE())}return this.fd};Qe.prototype.r=function(){if(this.gb){return Number(this.gb.totalResults||this.gb.numPhotos)}return 0};var Qf=function(a,b){this.hb=a;this.g=b;this.hG=0;this.Wy=b.entry};Qf.prototype.next=function(){if(this.hG>=this.Wy.length){return null}var a=this.Wy[this.hG];++this.hG;return this.Ij(a)};Qf.prototype.Ij=function(a){return null};Qf.prototype.JR=function(){return this.Wy?this.Wy.length:0};var Pi=function(a,b,c,d){Qf.call(this,a,b);this.mj=c;this.Ja=d};S(Pi,Qf);Pi.prototype.Ij=function(a){return this.hb.tx(a,this.mj,this.Ja)};var Gk=function(a,b,c,d){Qf.call(this,a,b);this.mj=c};S(Gk,Qf);Gk.prototype.Ij=function(a){var b=this.hb.Gd(this.mj.name,a.gphoto$id,a.title,a.gphoto$name);b.We(a);return b};var Zg=function(a,b,c,d){Qf.call(this,a,b);this.mj=c;if(!this.mj){if(b.user){this.mj=a.zi(b.user,b.nickname)}}this.Ja=d};S(Zg,Qf);Zg.prototype.Ij=function(a){var b=this.hb.ZR(a,this.mj,this.Ja);b.We(a);return b};var Qi=function(a){if(wa(a)){this.ca=new B(a)}else if(a instanceof B){this.ca=a}this.ca.$("alt","jsonm");this.ca.$("pp","1");this.od=Pi};S(Qi,xc);Qi.prototype.toString=function(){return"TagSource: "+this.ca.xi()};Qi.prototype.od=Pi;Qi.prototype.lg=function(a,b){if(this.od==Pi){var c=a.zi(b.user,b.nickname),d=null;return new this.od(a,b,c,d)}else{return Qi.j.lg.call(this,a,b)}};var mf=function(a){xc.call(this,a);this.od=Zg};S(mf,xc);mf.prototype.bJ=function(a,b){this.ca.$("q",a);this.rp(b)};mf.prototype.Tr=function(){return this.ca.Za("q")};mf.prototype.II=function(a){var b=this.bE();if(b!=a){b=a||"G";this.ca.$("psc",b);if(b=="G"){this.ca.$("access","public")}}};mf.prototype.JI=function(a){if(!a){this.ca.ek().remove("uname")}else{this.ca.$("uname",a)}};mf.prototype.bE=function(){return this.ca.Za("psc")||"G"};mf.prototype.rp=function(a){var b=this.pm();if(b!=a){b=a;if(b){this.ca.$("filter",
"1")}else{this.ca.ek().remove("filter")}}};mf.prototype.pm=function(){return this.ca.Za("filter")=="1"};mf.prototype.ix=function(){var a={psc:this.bE(),q:this.Tr()};return a};var Lk=function(a,b){xc.call(this,a);this.Tp=b;this.ca.$("kind","album");var c=this.ca.xi().match(/\/user\/(.*)$/);if(c&&c.length>1){var d=c[1];if(d!=this.Tp){this.a0(this.Tp);var e=this.ca.ek();if(e.sc("authkey")){e.remove("authkey");e.remove("access")}}}this.od=Gk};S(Lk,xc);Lk.prototype.lg=function(a,b){if(this.od===Gk){if(!this.dh){var c=a.zi(b.user,b.nickname);c.Wk(b);this.dh=c}return new this.od(a,b,this.dh)}else{return Lk.j.lg.call(this,a,b)}};var ia=function(a,b,c){this.hb=a;this.fd=b;this.Wd=c||a.gE();this.L=new ma(this);this.L.m(this.hb,"deleteinitiated",this.fT);this.L.m(this.hb,"deletesucceeded",this.gT);this.L.m(this.hb,lo,this.eT);this.Wa=[];this.vk=[];this.Ui=new Da;this.RY()};ia.k(J);var Mh="PENDING";ia.prototype.Wb=24;ia.prototype.Vd=null;ia.prototype.Jj=0;ia.prototype.xH=false;var Kh="itemsadded",Lh="totalchanged",no="too_many_results_requested",mo="query_string_too_long";ia.prototype.kr=null;ia.prototype.toString=function(){return"Feed: "+
this.fd};ia.prototype.wz=function(a){ia.prototype.kr=a};ia.prototype.RY=function(){this.reset()};ia.prototype.Ib=function(){return this.fd};ia.prototype.reset=function(){this.Vd=null;this.Jj=0;this.Wa=[];this.vk=[]};ia.prototype.e=function(){ia.j.e.call(this);this.reset()};ia.prototype.H_=function(a){this.xH=a};ia.prototype.cn=function(a){this.E6=true;this.Wb=a};ia.prototype.Jf=function(){return this.Wb};ia.prototype.yi=function(){return this.Wd};ia.prototype.$X=function(a,b,c){if(!b){return}this.NH(a,
b);var d=this.uq(a);this.vk[d]=c};ia.prototype.cQ=function(a){return Xf(this.Wa,a)};ia.prototype.si=function(a){if(a<this.Wa.length){return this.Wa[a]}return null};ia.prototype.NQ=function(){return this.Wa};ia.prototype.uq=function(a){return Math.floor(a/this.Wb)};ia.prototype.lh=function(a){var b=this.uq(a),c=true;if(!this.vk[b]){this.ky(b);c=false}var d=a/this.Wb,e=d-b;if(e<0.1){b=Math.max(0,b-1)}if(e>0.9){b=Math.min(this.vk.length-1,b+1)}if(!this.vk[b]){pc(m(this.ky,this,b))}return c};ia.prototype.ky=
function(a){this.vk[a]=true;var b=a*this.Wb,c=b+1;if(c>1000){return}var d=Math.min(this.Wb,1000-c+1);if(d<=0){return}if(this.xH){for(var e=b;e<b+d;++e){this.Wa[e]=Mh}}this.fd.DI(c,d);this.Wd.send(this.fd.url(),m(ia.prototype.Ry,this,a*this.Wb,this.Wb),m(this.hm,this),m(this.Ax,this))};ia.prototype.Ax=function(a){if(a){var b=a.target;if(b){L(b,sa.TIMEOUT,m(this.Ax,this))}}var c={type:"error",status:"timeout",value:a?a.currentTarget.XE():""};this.dispatchEvent(c)};ia.prototype.hm=function(a){var b;
if(a){b=a.target;L(b,sa.ERROR,m(this.hm,this))}var c,d;if(!b){c="unknown"}else{c=b.Qc();var e=new B(b.HR());if(no==c){d=e.Za("start-index")}else if(mo==c){var f=e.Za("q");if(f){d=f.length}else{d=-1}}}var g={type:"error",status:c,value:""+d};this.dispatchEvent(g)};ia.prototype.Ry=function(a,b,c){if(c.Kf()==500){var d=c.Qc(),e="";if(no==d){e=""+a}else if(mo==d){e=""+this.Nm.length}this.dispatchEvent({type:"error",status:d,value:e});return}this.NH(a,c.Ce())};ia.prototype.NH=function(a,b){if(b){var c=
this.Vd,d=b.feed;this.Vd=Number(d.totalResults);this.Jj=Math.max(this.Jj,Number(d.crowdedLength||this.Vd));if(0==this.Vd){this.dispatchEvent("noitems")}this.FM(a,d);if(c!=this.Vd){this.dispatchEvent(Lh)}}};ia.prototype.FM=function(a,b){if(!b){return}var c=this.fd.lg(this.hb,b),d=Math.min(a+c.JR(),this.Vd),e=d-a;this.Wa.length=Math.max(this.Wa.length,d);for(var f=0;f<e;++f){var g=a+f,h=c.next();this.EM(g,h)}var i=Math.max(this.Jj,this.Wa.length),j=this.fd.io();if(j){j.y1(this)}this.dispatchEvent({type:Kh,
offset:a,count:e,crowdedCount:this.$b()})};ia.prototype.EM=function(a,b){if(this.Wa[a]&&this.Wa[a]!=Mh){return}if(this.kr){this.kr(b,a)}this.Wa[a]=b};ia.prototype.Ea=function(a,b,c){var d=this.uq(a),e=this.uq(a+b),f=[];for(var g=d;g<=e;++g){if(!this.vk[g]){f.push(g)}}if(f.length==0){c(this,a,b);return true}else{var h=new Ik(this,f,a,b,c);return h.He()}return false};ia.prototype.PV=function(a){var b=1000;if(this.isLoaded()){b=Math.min(this.Vd,b);if(this.Wa.length==b){a(this,0,b);return}}this.fd.DI(1,
b);var c=m(function(d){this.Ry(0,b,d);a(this,0,this.Vd)},this);this.Wd.send(this.fd.url(),c,m(this.hm,this),m(this.Ax,this))};ia.prototype.isLoaded=function(){return null!=this.Vd};ia.prototype.$b=function(){return this.fd.pm()?this.Jj||0:this.Vd||0};ia.prototype.Wu=function(){return this.Vd||0};ia.prototype.fT=function(a){var b=a.target,c=this.cQ(b);if(c>=0){if(Aj(this.Wa,c)){this.Ui.K(b.id,[b,c]);--this.Jj}--this.Vd;this.dispatchEvent(Lh)}};ia.prototype.gT=function(a){var b=a.target;this.Ui.remove(b.id)};
ia.prototype.eT=function(a){var b=a.target,c=this.Ui.get(b.id);if(c){ki(this.Wa,c[0],c[1]);this.Ui.remove(b.id);++this.Jj}++this.Vd;this.dispatchEvent(Lh)};var Ik=function(a,b,c,d,e){this.Q=a;this.Fn=b;this.Z=c;this.Ma=d;this.gh=e;this.b7=this.Fn.length;this.Q.addEventListener(Kh,m(this.Ea,this));for(var f=0;f<this.Fn.length;++f){this.Q.ky(this.Fn[f])}};Ik.prototype.Xv=false;Ik.prototype.He=function(){return this.Xv};Ik.prototype.Ea=function(){if(this.Xv){return true}var a=[];for(var b=0;b<this.Fn.length;++b){var c=this.Fn[b];if(!this.Q.vk[c]){a.push(c)}}if(a.length==0){this.Xv=true;this.Q.removeEventListener(Kh,this.Ea.bind,false,this);this.gh(this.Q,
this.Z,this.Ma);return true}else{this.Fn=a}return false};var Zb=function(a){this.qf=new Da;this.bi=new Da;this.iK=new Da;this.za=new Da;this.qC={};this.qC.Album=this.bi;this.qC.Photo=this.qf;this.W2=a||new Mk;this.Ui=new Da};S(Zb,J);Zb.prototype.reset=function(){this.qf.clear();this.bi.clear();this.iK.clear()};Zb.prototype.gE=function(){return this.W2};Zb.prototype.LQ=function(a,b,c){var d=this.Gd(a,b,"",""),e=new Pf(Eh("%s/user/%s/albumid/%s",c||"/data/feed/api",a,b));if(!e.dh){e.dh=d}return e};Zb.prototype.iS=function(a,b,c,d,e){var f=new mf(e||"/data/feed/api/all");
f.bJ(b,d);return f};Zb.prototype.UE=function(a,b){var c=this.iS(null,a),d=new ia(this,c,b);return d};Zb.prototype.aS=function(a,b){var c=new xc(a);c.b_(Zg);return new ia(this,c,b)};Zb.prototype.IQ=function(a,b,c,d){var e=this.LQ(a,b,c);return new ia(this,e,d)};Zb.prototype.nR=function(a,b){return new ia(this,a.Ib(),b||a.yi())};Zb.prototype.Gd=function(a,b,c,d){var e=a+b,f=this.bi.get(e);if(!f){f=new Qe(this,a,b,c,d);this.bi.K(e,f)}return f};Zb.prototype.zi=function(a,b){var c=this.iK.get(a);if(!c){c=
new rd(this,a,b);this.iK.K(a,c)}return c};Zb.prototype.ZR=function(a,b,c){if(!a){return null}var d=a.gphoto$id,e=this.qf.get(d);if(!e){e=new Aa(this,a,b,c);this.qf.K(d,e)}return e};Zb.prototype.$R=function(a,b,c){var d=this.qf.get(a);if(!d){d=new Aa(this);d.user=this.zi(b,"");d.album=this.Gd(b,c,"","");d.id=a;this.qf.K(a,d)}return d};Zb.prototype.tx=function(a,b,c){if(!a){return null}var d=a.title,e=this.za.get(d);if(!e){e=new Oi(this,a,b,c);this.za.K(d,e)}return e};Zb.prototype.Tq=function(a){if(!a||
!a.id){throw Error("Invalid Entity: "+a);}var b=this.qC[a.type];if(!b){throw Error("Can't delete entities of type: "+a?a.type:"null");}var c=a.id;if(this.Ui.get(c)){return}var d=new Q("deleterequested",a);if(this.dispatchEvent(d)){this.dispatchEvent(new Q("deleteinitiated",a));this.Ui.K(c,a);b.remove(c);a.ZO(m(this.iT,this),m(this.hT,this));this.dispatchEvent(new Q("deleteposted",a))}else{var e=new Q("deletecancelled",a);this.dispatchEvent(e)}};Zb.prototype.iT=function(a){this.Ui.remove(a.id);var b=
new Q("deletesucceeded",a);this.dispatchEvent(b)};Zb.prototype.hT=function(a){this.Ui.remove(a.id);var b=new Q(lo,a);this.dispatchEvent(b)};Zb.prototype.fa=function(a){if(!this.Fa){this.Fa=rc("gphoto.api.DataManager")}this.Fa.Pb(a)};function va(a,b,c,d){this.Xg=this.dW();this.d5=a;this.Tp=b;this.Sx=c;this.Bt=d;this.Rq={};this.hd=[];this.q5=[];this.Ac=0;this.Yi=null;this.V5=false;this.pY=false;this.WO=false;this.dd=null;this.pp=null;this.f0();this.$g=null;this.O2=null;this.fO=parseInt(this.XD("contentWidth"),10);this.J2=parseInt(this.XD("contentHeight"),10);this.UV();if(this.$g!=null){this.Ac=this.$g.selectMode}this.QJ=new ye(this);this.Qb=new tb(this);this.ql=new Hd(this);this.Z6={};this.IV();if(this.$g!=null){this.vE()}document.body.appendChild(this.Xg)}
var yu,kp;va.prototype.$D=function(a){var b={};b.width=this.fO;b.height=this.J2;return b};va.prototype.IV=function(){var a=document.createElement("table"),b=document.createElement("tbody"),c=document.createElement("tr"),d=document.createElement("td");a.appendChild(b);a.setAttribute("cellpadding","0");a.setAttribute("cellspacing","0");a.style.borderCollapse="collapse";b.appendChild(c);c.appendChild(d);d.appendChild(this.QJ.getContainer());c=document.createElement("tr");this.zC=document.createElement("td");
this.zC.height=n.IE?266:270;b.appendChild(c);c.appendChild(this.zC);this.HV();c=document.createElement("tr");d=document.createElement("td");b.appendChild(c);c.appendChild(d);var e=document.createElement("center");e.style.padding="20px";this.Yi=document.createElement("input");this.Yi.type="button";this.Yi.disabled="1";this.Yi.value="Select Album";q(this.Yi,ta,m(this.nz,this));e.appendChild(this.Yi);var f=document.createElement("input");f.type="button";f.value="Cancel";Xd(f,"position:relative; left:6px");
q(f,ta,m(this.EN,this));e.appendChild(f);d.appendChild(e);this.Xg.appendChild(a)};va.prototype.HV=function(){var a=document.createElement("table");a.setAttribute("cellspacing","8");a.setAttribute("cellpadding","0");Xd(a,"position:relative; left:4px");var b=document.createElement("tbody"),c=document.createElement("tr"),d=document.createElement("td");a.appendChild(b);b.appendChild(c);c.appendChild(d);d.width=this.fO;d.appendChild(this.ql.getContainer());d.appendChild(this.Qb.getContainer());this.zC.appendChild(a)};
va.prototype.hE=function(){return this.Xg};va.prototype.show=function(a){this.Xg.style.display="block";this.Ak=a;this.Qb.reset()};va.prototype.hide=function(){this.Xg.style.display="none";if(this.Ak)this.Ak();this.Ak=null};va.prototype.vu=function(a,b){if(this.Yi){this.Yi.disabled=a?"":"1";if(b!=null){this.Yi.value=b}}};va.prototype.HE=function(){return this.Bt};va.prototype.Ez=function(a,b){if(this.Bt!=a){this.Bt=a;var c=this.Qb.Gd();if(a=="BANNER"&&this.Ac!=1||c&&c.id!=this.Sx){this.Ac=0;this.vE()}this.QJ.qA()}this.WO=
b};va.prototype.SD=function(){return this.hd};va.prototype.ZQ=function(){return this.$g};va.prototype.jU=function(){return this.$g!=null&&this.$g.selectMode==0};va.prototype.HQ=function(a){for(var b=0;b<this.hd.length;b++){var c=this.hd[b];if(a==c.id){return c}}return null};va.prototype.Hg=function(a){if(this.Ac!=a){this.ql.getContainer().style.display=a==0?"block":"none";this.Qb.getContainer().style.display=a==1?"block":"none";this.Ac=a}var b=this.Yr();if(b){this.vu(b.Bx(),b.ox())}this.QJ.Hg(a)};
va.prototype.Yr=function(){if(this.Ac==0){return this.ql}else if(this.Ac==1){return this.Qb}return null};va.prototype.nz=function(){if(this.Ac==0){this.Qb.AI(this.ql.VE());this.Hg(1)}else if(this.Ac==1){this.hide();this.dd=this.Qb.Gd();this.pp=this.Qb.jS();if(this.pp){this.aK(this.pp);if(!this.WO){this.dH(null)}}}else{this.hide()}};va.prototype.fZ=function(a){if(this.dd&&this.pp){this.dH(a);return false}return true};va.prototype.EN=function(){this.hide()};va.prototype.dW=function(){var a=document.createElement("div"),
b="position: absolute; top: 20px; left:20px; z-index:1001; display:block; padding:0px; width:408px; height:380px; ";if(n.IE&&!n.isVersion("8")){var c=document.getElementsByTagName("base")[0],d=c.href+"img/dialogframe.png",e=document.createElement("div"),f='position:absolute; width:408px; height:380px; display:block; z-index:-1; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled="true", src="'+d+'", sizingMethod="scale");';Xd(e,f);a.appendChild(e)}else{b+='background-image: url("img/dialogframe.png")'}Xd(a,
b);return a};va.prototype.XD=function(a){return this.Rq[a]};va.prototype.f0=function(){this.Rq.commandLabel="Choose Photo";this.Rq.logoURL="img/googlephotos_sm.gif";this.Rq.contentWidth=364;this.Rq.contentHeight=248};va.prototype.Mh=function(){if(this.Ac==0&&this.ql){this.ql.Mh()}else if(this.Ac==1&&this.Qb){this.Qb.Mh()}};va.prototype.aK=function(a){var b="lhcl_portrait_id",c="48",d=false;if(this.Bt=="BANNER"){b="lhcl_cover_id";c="160";d=_album.blogger}var e=document.getElementById(b);if(e){var f=
a.thumbnailURL,g=f.split("?"),h=g[0]+"?crop=1&imgmax="+c;if(d){e.style.background="url('"+h+"') no-repeat left"}else{e.src=h}}};va.prototype.vH=function(a){var b;if(n.IE){b=new ActiveXObject("Microsoft.XMLDOM");b.async=false;b.loadXML(a)}else{var c=new DOMParser;b=c.parseFromString(a,"text/xml")}return b};va.prototype.dH=function(a){var b=this.dd.id,c=this.d5+"&uname="+this.Tp+"&aid="+b,d=(new Date).getTime();c+="&v="+d;var e="selectedphotos="+this.pp.id+"&noredir=true&optgt="+this.Bt;Ad(c,m(this.vY,
this,this.pp,a),"POST",e)};va.prototype.vY=function(a,b,c){var d=c.target;if(d.Kd()){this.aK(a);if(b){b.submit()}}};va.prototype.vE=function(){var a=this.$g.url;this.uu(true);Ad(a,m(this.Ot,this))};va.prototype.Ot=function(a){var b=this.Yr(),c=a.target;this.uu(false);if(!c.Kd()){if(b.ji){b.ji("Sorry, we couldn't load the feed. Try again in a little while.")}return}var d=c.Qc();if(d.substring(0,5)!="<?xml"){if(b.ji){b.ji("Sorry, we can't find the requested feed.")}return}var e=null,f=this.Ac==0,g;
if(n.IE){g=this.vH(d)}else{g=c.QE()}e=new Ve(this,g,f);if(e!=null){this.hd=e.wE()}this.uZ();var h=this.Yr();if(h){h.Mh()}};va.prototype.uZ=function(){if(this.Sx&&this.Sx.length>0){var a=this.HQ(this.Sx);if(a!=null){this.Qb.AI(a);this.Hg(1)}}};va.prototype.Yx=function(){return this.pY};va.prototype.uu=function(a){this.pY=a};va.prototype.PU=function(){return this.$g&&this.$g.extraParams=="q=*"};va.prototype.UV=function(){var a="http://"+document.domain+":"+document.location.port+"/data/feed/api/user/"+
this.Tp+"?kind=album&thumbsize=64",b=new lp("My Google Photos","lh",this.Tp,"Lighthouse",a,0,null,null);this.q5.push(b);this.$g=b;this.O2="lh"};function jj(a,b,c){this.title=a;this.id=b;this.thumbnail=c;this.IX=[];this.description=null;this.FX=0;this.Q=null;this.XP=false;this.J6=null}jj.prototype.KM=function(a){this.IX.push(a)};jj.prototype.r=function(){return this.FX};jj.prototype.bS=function(){return this.IX};function kj(a,b,c,d,e){this.title=a;this.id=c;this.thumbnailURL=d;this.fullsizeURL=e;this.mediaType=
b;this.uf=-1;this.pg=-1}kj.prototype.YZ=function(a,b){this.uf=a;this.pg=b};kj.prototype.Yl=function(){return 1};kj.prototype.dR=function(){if(this.uf==-1||this.pg==-1){return null}return this.uf.toString()+"x"+this.pg.toString()};function Hd(a){this.Ya=a;this.contentSize=this.Ya.$D(true);this.Xg=this.cW();this.$i=-1;this.lp=[]}Hd.prototype.VE=function(){if(this.$i<0){return null}var a=this.Ya.SD();return a[this.$i]};Hd.prototype.getContainer=function(){return this.Xg};Hd.prototype.Bx=function(){return this.$i>=0};Hd.prototype.ox=function(){return"Select Album"};Hd.prototype.Mh=function(){this.PX()};Hd.prototype.cW=function(){var a=document.createElement("div"),b=this.contentSize.height+8,c="position:relative; top:16px; left:6px;  font-family:sans-serif; height:"+
b+"px; width:"+this.contentSize.width;c+="px; background: white; overflow:auto; overflow-x:hidden";Xd(a,c);var d=document.createElement("table");d.width="100%";d.setAttribute("cellspacing","0");d.setAttribute("cellpadding","0");d.style.borderCollapse="collapse";var e=document.createElement("tbody");d.appendChild(e);this.Sg=e;this.Fv=d;this.ol(e,true);a.appendChild(d);q(a,X,m(this.kt,this));a.ondblclick=m(this.ar,this);return a};Hd.prototype.PX=function(){var a=this.Ya.SD();this.lp=[];this.$i=-1;this.Fv.removeChild(this.Sg);
this.Sg=document.createElement("tbody");this.Fv.appendChild(this.Sg);if(a.length<1){this.ol(this.Sg,false);return}for(var b=0;b<a.length;b++){var c=a[b],d=document.createElement("tr");this.Sg.appendChild(d);if(b%2){d.style.background="#ffffff"}else{d.style.background="#eeeeee"}var e=document.createElement("td");e.height=32;e.width=42;var f=document.createElement("img");if(c.thumbnail!=null){f.src=c.thumbnail}else{f.src="img/transparent.gif"}f.width=32;f.height=28;f.hspace=4;f.style.border="1px solid #808080";
e.appendChild(f);d.appendChild(e);var e=document.createElement("td");e.height=32;var g=c.r(),h=c.title.replace(/_/g," "),i=document.createElement("font");i.color="#4D4D4D";i.size="4";i.style.cursor="default";i.innerHTML=al(h);e.appendChild(i);var j=document.createElement("font");j.innerHTML="&nbsp;("+g+")";j.style.position="relative";j.style.top="-2px";e.appendChild(j);d.appendChild(e);d.kG=i;d.jO=j;d.ta=f;this.lp.push(d)}};Hd.prototype.ol=function(a,b){var c=document.createElement("tr"),d=document.createElement("td"),
e="<br><br><br><center><font size=4 font color=#4D4D4D>";if(this.Ya.Yx()||b){e+='Loading Album List...<img src="img/spin.gif" hspace=8></font></center>'}else{e+="No Albums Found."}d.innerHTML=e;c.appendChild(d);a.appendChild(c)};Hd.prototype.ji=function(a){this.Fv.removeChild(this.Sg);this.Sg=document.createElement("tbody");this.Fv.appendChild(this.Sg);var b=document.createElement("tr"),c=document.createElement("td");c.innerHTML="<br><br><br><center><font size=4 font color=#cc0000>"+a+"</font></center>";
b.appendChild(c);this.Sg.appendChild(b)};Hd.prototype.wZ=function(a){if(this.$i!=a){var b;if(this.$i>=0){b=this.lp[this.$i];if(this.$i%2){b.style.background="#ffffff"}else{b.style.background="#eeeeee"}b.kG.color="#4D4D4D";b.jO.color="#4D4D4D";b.ta.style.border="1px solid #808080"}b=this.lp[a];if(b){b.style.background="#112ABB";b.kG.color="#ffffff";b.jO.color="#ffffff";b.ta.style.border="1px solid white";this.$i=a;this.Ya.vu(true,yu)}}};Hd.prototype.kt=function(a){var b=hh(a),c=Ja(this.Sg),d=Wa(this.Xg),
e=b.y-c.y;if(n.SAFARI&&b.x-c.x>=d.width-16){return}var f=0;for(var g=0;g<this.lp.length;g++){var h=this.lp[g],i=Wa(h).height;if(n.SAFARI){i=Math.max(32,Wa(h.kG).height)}f+=i;if(e<=f){this.wZ(g);return}}};Hd.prototype.ar=function(a){if(this.VE()){this.Ya.nz()}};function tb(a){this.Ya=a;this.Kq=this.Ya.$D(true);this.Xg=this.eW();this.Hh=-1;this.kk=[];this.AH=[];this.dd=null;this.DA=5;this.$M=this.Ya.$M}tb.prototype.AI=function(a){if(a!=this.dd){this.dd=a;if(a!=null){this.TV()}this.Hh=-1;this.GH()}};tb.prototype.Gd=function(){return this.dd};tb.prototype.getContainer=function(){return this.Xg};tb.prototype.Bx=function(){return this.Hh>=0};tb.prototype.uK=function(){return true};tb.prototype.ox=function(){return"Choose Photo"};tb.prototype.eW=function(){var a=
document.createElement("div"),b=4,c=this.Kq.height;if(this.uK()){c-=20}else{b=16}var d="display:none; position:relative; top:"+b+"px; left:6px; height:"+c+"px; width:"+this.Kq.width+"px";Xd(a,d);this.Ai=document.createElement("div");d="height:"+c+"px; width:"+this.Kq.width+"px; padding-left: 6px; padding-top: 4px; font-family:sans-serif; background: white; overflow:auto";Xd(this.Ai,d);this.Rh=document.createElement("div");this.Ai.appendChild(this.Rh);this.ol();q(this.Ai,X,m(this.kt,this));this.Ai.ondblclick=
m(this.ar,this);a.appendChild(this.Ai);if(this.uK()){this.ne=document.createElement("div");Xd(this.ne,"position:absolute; top:238px; left:69px; display: none");this.yJ=new Sc("zoom","img/slidertrack.png","img/sliderknob.png",215,0,100,50,17,24,m(this.I1,this),null);var e=this.yJ.oS();this.yJ.kq();this.ne.appendChild(e);a.appendChild(this.ne)}else{this.ne=null}return a};tb.prototype.I1=function(a){this.setZoom(Math.round((100-a)/10))};tb.prototype.GH=function(){this.Ai.removeChild(this.Rh);this.Rh=
document.createElement("div");this.Ai.appendChild(this.Rh);this.kk=[];this.AH=[];var a;if(this.dd==null){a=this.Ya.hd}else{a=this.dd.bS()}if(a.length<1){if(this.Ya.Yx()){this.ol()}else{this.ji("No Images Found.")}if(this.ne)this.ne.style.display="none";return}for(var b=0;b<a.length;b++){var c=a[b],d=document.createElement("img"),e=Math.round((this.Kq.width-60)/this.DA),f=c.Yl();if(f==0){var g=Math.round(e*3/4)}else{if(f>1){var g=Math.round(e/f)}else{e=Math.round(e*f);var g=Math.round(e/f)}}d.src=
c.thumbnailURL;d.width=e;d.height=g;if(c.title!=null){d.title=this.xS(c)}if(b==this.Hh){d.style.border="2px solid #112ABB";d.hspace=0;d.vspace=0}else{d.style.border="1px solid #808080";d.hspace=1;d.vspace=1}this.Rh.appendChild(d);this.kk.push(d);this.AH.push(c)}if(this.ne)this.ne.style.display=a.length>0?"inline":"none"};tb.prototype.ol=function(){if(this.Ya.PU()&&!this.Ya.Yx()){return}var a=document.createElement("div");a.innerHTML="<br><br><br><center><font size=4 font color=#4D4D4D>"+Np+'<img src="img/spin.gif" hspace=8></font></center>';
this.Rh.appendChild(a)};tb.prototype.ji=function(a){this.Ai.removeChild(this.Rh);this.Rh=document.createElement("div");this.Ai.appendChild(this.Rh);var b=document.createElement("div");b.innerHTML="<br><br><br><center><font size=4 font color=#cc0000>"+a+"</font></center>";this.Rh.appendChild(b)};tb.prototype.xS=function(a){var b=a.title,c=a.dR();if(c!=null){b+=", "+c}return b};tb.prototype.jS=function(){if(this.Hh<0){return null}return this.AH[this.Hh]};tb.prototype.ej=function(a){if(a!=this.Hh){if(this.Hh>=
0){var b=this.kk[this.Hh];b.style.border="1px solid #808080";b.hspace=1;b.vspace=1}var c=this.kk[a];c.style.border="2px solid #112ABB";c.hspace=0;c.vspace=0;this.Hh=a;this.Ya.vu(true,kp)}};tb.prototype.H1=function(){var a=Math.round((this.Kq.width-40)/this.DA);for(var b=0;b<this.kk.length;b++){var c=this.kk[b];c.width=a;c.height=a}};tb.prototype.zN=function(a){for(var b=0;b<this.kk.length;b++){var c=this.kk[b],d=Ja(c),e=Wa(c);if(a.x>=d.x&&a.y>=d.y&&a.x<d.x+e.width&&a.y<d.y+e.height){return b}}return null};
tb.prototype.TV=function(){var a;if(this.dd!=null){if(this.dd.Q==null||this.dd.XP){return}a=this.dd.Q}else{var b=this.Ya.ZQ();a=b.url}if(!this.$M){var c=(new Date).getTime();a+="&v="+c}this.Ya.uu(true);Ad(a,m(this.Ot,this))};tb.prototype.Ot=function(a){var b=null,c=a.target,d=document.location.hash;if(d.length>0&&d.charAt(0)=="#"){d=d.substring(1)}this.Ya.uu(false);if(!c.Kd()){var e=this.Ya.Yr();e.ji("Sorry, we couldn't load the feed.  Try again in a little while.");return}var f;if(n.IE){f=this.Ya.vH(c.Qc())}else{f=
c.QE()}b=new Ve(this.Ya,f,false);var g=null;if(b!=null){if(this.dd==null){this.Ya.hd=[]}g=b.wE();for(var h=0;h<g.length;h++){var i=g[h];if(this.dd!=null){this.dd.KM(i)}else{this.Ya.hd.push(i)}if(i.id==d){this.Hh=h;this.Ya.vu(true,kp)}}}if(this.dd){this.dd.XP=true}this.Mh()};tb.prototype.kt=function(a){var b=hh(a),c=this.zN(b);if(c!=null){this.ej(c)}};tb.prototype.ar=function(a){this.Ya.nz()};tb.prototype.setZoom=function(a){if(a<1){a=1}if(this.DA!=a){this.DA=a;this.H1()}};tb.prototype.Mh=function(){this.GH()};
tb.prototype.reset=function(){this.yJ.va(50)};function Ve(a,b,c){this.Ya=a;this.Z1=b;this.Je=[];this.QP(c)}Ve.prototype.wE=function(){return this.Je};Ve.prototype.QP=function(a){var b=this.Z1.getElementsByTagName("entry");for(var c=0;c<b.length;c++){var d=b[c];if(a){this.tM(d)}else{this.LM(d)}}};Ve.prototype.ri=function(a,b){var c=this.qo(a,b);for(var d=0;d<c.length;d++){var e=$f(c[d]);if(e){return e}}return null};Ve.prototype.qo=function(a,b){var c=b,d=b.split(":");if(d.length>1){if(!n.IE){c=d[1]}}else if(n.SAFARI&&!n.isVersion("420")){c="*"}var e=
a.getElementsByTagName(c),f=[];for(var g=0,h=e.length;g<h;g++){if(e[g].nodeName==b){f.push(e[g])}}return f};Ve.prototype.yE=function(a,b){var c=this.qo(a,"link");for(var d=0;d<c.length;d++){var e=c[d].getAttribute("rel");if(e!=b)continue;return c[d].getAttribute("href")}return null};Ve.prototype.tM=function(a){var b=this.ri(a,"title"),c=this.qo(a,"media:thumbnail"),d=c[0].getAttribute("url"),e=this.ri(a,"gphoto:numphotos"),f=this.yE(a,"http://schemas.google.com/g/2005#feed"),g=zq(f);g.$("thumbsize",
64);f=g.toString();var h=this.ri(a,"gphoto:id"),i=this.ri(a,"summary");d=this.Ev(d,f);var j=new jj(b,h,d);j.FX=parseInt(e,10);j.Q=f;j.description=i;this.Je.push(j)};Ve.prototype.LM=function(a){var b=this.ri(a,"title"),c=this.yE(a,"alternate"),d=this.qo(a,"media:thumbnail"),e=d[0].getAttribute("url"),f=this.qo(a,"media:content"),g=f[0].getAttribute("url"),h=this.ri(a,"gphoto:id");e=this.Ev(e,c);g=this.Ev(g,c);var i=parseInt(this.ri(a,"gphoto:width"),10),j=parseInt(this.ri(a,"gphoto:height"),10),l=
new kj(b,"image/jpeg",h,e,g);l.YZ(i,j);this.Je.push(l)};Ve.prototype.Ev=function(a,b){if(a==null){return null}var c=a;if(a.length<7||a.substring(0,7)!="http://"){var d=b.split("/");c="http://"+d[2]+a}return c};function lp(a,b,c,d,e,f,g,h){this.title=a;this.id=b;this.user=c;this.ao=d;this.url=e;this.selectMode=f;this.description=g;this.extraParams=h;this.hasTags=false;this.canDelete=false;this.K2=[];this.B6=false};lp.prototype.push=function(a){this.K2.push(a)};function ye(a){this.Ya=a;this.j1=this.JV();this.Ac=0;this.qA();this.t6=false;this.s6=0}ye.prototype.JV=function(){var a=document.createElement("div"),b=n.IE?"4":"8";Xd(a,"position:relative; top:4px; left:12px; background: transparent; font-family:sans-serif; width:380px; padding:0px; height:42px");var c=document.createElement("div");Xd(c,"position:absolute; top:"+b+"px; left:4px; color: white; font-weight: bold; cursor:default");c.unselectable="on";c.innerHTML="Photo Chooser";a.appendChild(c);this.Lo=
document.createElement("div");Xd(this.Lo,"position:absolute; top:32px; left:4px; color: #777777; cursor: pointer");a.appendChild(this.Lo);q(this.Lo,ta,this.b1.bind(this),true);q(a,X,this.gk.bind(this),true);return a};ye.prototype.getContainer=function(){return this.j1};ye.prototype.v_=function(a){this.Lo.innerHTML="<font size=2><b>"+a+"</b></font>"};ye.prototype.b1=function(a){if(this.Ac==1){if(this.Ya.jU()&&this.Ya.HE()=="PORTRAIT"){this.Ya.Hg(0);this.Ya.ql.Mh()}}};ye.prototype.qA=function(){var a=
this.Ya.HE()=="BANNER",b="Select an Album to browse:",c="#777777",d="none";if(a){b="Select a Cover Photo:"}else if(this.Ac==1){b="&laquo;&nbsp;Back to Albums List";c="#112ABB";d="underline"}this.v_(b);this.Lo.style.color=c;this.Lo.style.textDecoration=d};ye.prototype.Hg=function(a){this.Ac=a;this.qA()};ye.prototype.gk=function(a){this.WF=hh(a);var b=this.Ya.hE(),c=Ja(this.j1),d=this.WF.y-c.y;this.v3=parseInt(b.style.left,10);this.w3=parseInt(b.style.top,10);if(d>28){return false}this.mt=this.to.bind(this);
this.Xu=this.mh.bind(this);this.Ct=this.hk.bind(this);q(document.body,vd,this.mt);q(document.body,hd,this.Xu);q(document.body,tc,this.Ct);return false};ye.prototype.to=function(a){var b=hh(a),c=this.Ya.hE(),d=b.y-this.WF.y+this.w3,e=b.x-this.WF.x+this.v3,f=gd(),g=f.width-40,h=f.height-40;d=Math.max(Math.min(d,h),0);e=Math.max(Math.min(e,g),0);c.style.top=d+"px";c.style.left=e+"px";Zh(a);return false};ye.prototype.mh=function(a){L(document.body,vd,this.mt);L(document.body,hd,this.Xu);L(document.body,
tc,this.Ct);Zh(a);return false};ye.prototype.hk=function(a){if(!(a.relatedTarget||a.toElement)){this.mh(a)}};var Xd=function(a,b){if(n.IE){a.style.setAttribute("cssText",b)}else{a.setAttribute("style",b)}},Zh=function(a){if(a.stopPropagation){a.preventDefault();a.stopPropagation()}else{a.cancelBubble=true;a.returnValue=false}},zu=function(){var a=0,b=0;if(n.SAFARI){a=-1*window.pageXOffset;b=-1*window.pageYOffset}else{var c=md();a=c.scrollLeft;b=c.scrollTop}return{x:a,y:b}},hh=function(a){var b={x:a.clientX,y:a.clientY},c=zu();b.x+=c.x;b.y+=c.y;return b};function Sc(a,b,c,d,e,f,g,h,i,j,l){this.m5=a;this.n2=b;this.u3=c;this.xN=d;this.KV=h;this.jI=i;this.Yd=j;this.tP=l;this.ne=null;this.ht=e;this.Ni=f;this.Cv=this.xN-this.KV-this.jI;this.hi=g;this.H0=g;this.x3=0;this.Vf()}Sc.prototype.oS=function(){return this.ne};Sc.prototype.Vf=function(){this.ne=document.createElement("div");this.vq=document.createElement("img");this.vq.setAttribute("src",this.n2);this.vq.setAttribute("width",this.xN);this.t3=document.createElement("div");this.t3.setAttribute("id",
this.m5+"-knob");this.Qf=document.createElement("img");this.Qf.setAttribute("src",this.u3);this.Qf.setAttribute("border","0");Xd(this.Qf,"position:relative; top:0px; left:0px; cursor:move");this.Qf.style.top="2px";this.ne.appendChild(this.vq);this.ne.appendChild(this.Qf);this.yz()};Sc.prototype.kq=function(){this.AV=m(this.gk,this);this.wN=m(this.ZS,this);q(this.Qf,X,this.AV);q(this.vq,ta,this.wN)};Sc.prototype.Pn=function(){L(this.Qf,X,this.AV);L(this.vq,ta,this.wN)};Sc.prototype.gk=function(a){var b=
hh(a);this.x3=b.x-this.jI;this.o6=parseInt(this.Qf.style.left,10);this.H0=this.hi;this.oN=Ja(this.ne);this.mt=m(this.to,this);this.Xu=m(this.mh,this);this.Ct=m(this.hk,this);q(document.body,vd,this.mt);q(document.body,hd,this.Xu);q(document.body,tc,this.Ct);Zh(a);return false};Sc.prototype.to=function(a){var b=hh(a),c=Math.round(this.Qf.width/2),d=b.x-this.oN.x;if(d<this.Cv/2){c=0}this.hi=this.BN(d-c);this.yz();if(this.Yd){this.Yd(this.hi)}Zh(a);return false};Sc.prototype.mh=function(a){L(document.body,
vd,this.mt);L(document.body,hd,this.Xu);L(document.body,tc,this.Ct);if(this.tP){this.tP(this.H0,this.hi)}Zh(a);return false};Sc.prototype.hk=function(a){if(!(a.relatedTarget||a.toElement)){this.mh(a)}};Sc.prototype.ZS=function(a){this.oN=Ja(this.ne);return this.to(a)};Sc.prototype.AR=function(a){var b=this.AN(a),c=Math.round(this.Qf.width/2);return b-c-this.jI-this.Cv};Sc.prototype.yz=function(){this.Qf.style.left=this.AR(this.hi)+"px"};Sc.prototype.H=function(){return this.hi};Sc.prototype.va=function(a){if(a!=
this.hi){this.hi=a;this.yz();if(this.Yd){this.Yd(this.hi)}}};Sc.prototype.AN=function(a){return(a-this.ht)*this.Cv/(this.Ni-this.ht)};Sc.prototype.BN=function(a){var b=Math.round(this.Qf.width/2),c=this.Ni-this.ht,d=this.ht+Math.round(c*(a-this.KV)/(this.Cv-b));return Math.max(Math.min(d,this.Ni),this.ht)};var Cg="Cancel";var ih=function(a){return"Error: "+a};var tf="Loading&#8230;";var rj=function(a){return"Photos: "+a};var Pl="Upload Photos";var Lp=function(a){return"We are unable to find "+a+"."};var Ep="Click the map or drag the marker to adjust location.";var Jp=function(a){return a+"&deg; N"};var Up=function(a){return a+"&deg; S"};var Bp=function(a){return a+"&deg; E"};var Xp=function(a){return a+"&deg; W"};var Bl="Find location";var Wp="View in Google Earth";var tj="Remove from map";var Kp=function(a){return"Please enter a location in the '"+
a+"' field."};var wl="Album dates must be set to 1970 or later. Please try again.";var xl=function(a){return"Album dates cannot be later than "+a+". Please try again."};var Il="(optional)";var Kl="Place Taken";var uj="Unlisted";var Tp="Create a portable slideshow for your website, blog, Myspace, etc.";var Rp="Slideshow preview";var Ol="There was an error communicating with the server. Please check your connection and try again.";var Sp="Are you sure you want to remove this from your favorites?";var Cp=
"Report inappropriate content";var qj="Sorry, we encountered an error while loading this album.";var sj=function(a,b,c){return a+" - "+b+" of "+c};var wp="I'm afraid your caption is a bit too long. Please, try to be more brief!";var xp=function(a){return"Your caption currently exceeds "+a+" characters and will not be saved. Please shorten your caption."};var ul="Add a comment";var Al="Download Photo";var Jl=function(a,b){return"Photo "+a+" of "+b};var Dp="You need Flash 7 or higher to watch videos.";
var zl="Download Flash";var Ql="View Album";var Ml="Share Photo";var Fp="Magnified view, click on image and drag to move.";var Ap="We're sorry, this photo is not currently available. It may have been deleted by its owner, or there may have been an error on the server. Click OK to continue.";var Cl="The server denied permission for this action. Please make sure you are still logged in to your account and try again.";var Hl="It seems the item you requested has been misplaced. Please check your internet connection, cross your fingers, and try again.";
var Nl="Something unusual has happened. Hopefully, it is so unusual that you will never see this dialog again.";var di="The server may be a little bit broken temporarily. Please try again in a few moments while it sorts itself out.";var yl="Delete this photo";var yp="Are you sure you want to delete this photo?";var zp="Are you sure you want to delete this video?";var uf=function(a){return a+"px"};var Ll="There was an error communicating with the server. Please try again.";var Np="Loading Photos...";
var Gp=function(a,b){return"Too many tags (max is "+a+", but "+b+" entered)"};var Ip=function(a,b){return"Text too long (max is "+a+"letters, but "+b+" were entered)"};var Fl=function(a,b){return"The maximum length for all tags has been exceeded. Each photo may use up to "+a+" characters for all tags, but "+b+" have been entered."};var Hp=function(a,b){return"Tags can only be "+a+" letters long. You entered one that was "+b+" letters long."};var Qp="You can enter a space separated list of tags.";
var Pp='For example: beach "pacific ocean"';var Op=function(a){return"By "+a};var Mp=function(a,b){return"There were no items that matched "+a+" found in "+b+"."};var bi="Community Photos";var vl="My Favorites";var Dl=function(a){return a+"'s Gallery"};var Vp=function(a){return"Sorry, Google does not serve more than 1000 items for any query. (You asked for items starting from "+a+".)"};var El="Map your photos";var dv=function(a){return"photos tagged "+a};var ci=function(a){return a+"'s Public Gallery"},
Gl="My Public Gallery";function Fo(a,b){var c=k(b);if(c)c.style.visibility=a?"":"hidden"}function Jd(a,b){return function(c){if(!c)c=window.event;if(c&&!c.target)c.target=c.srcElement;b.call(a,c)}}function Yd(a,b,c){if(a.addEventListener)a.addEventListener(b,c,false);else if(a.attachEvent)a.attachEvent("on"+b,c)}function ue(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,false);else if(a.detachEvent)a.detachEvent("on"+b,c)}function Qh(a){if(window.event){a.cancelBubble=true;a.returnValue=false}else if(a){a.cancelBubble=
true;if(a.preventDefault){a.preventDefault();a.stopPropagation()}}}var Ti=[],Ui=0;function wj(a){ji(Ti,a);if(!Ui){Ui=window.setInterval(uA,10)}}function zo(a){qc(Ti,a);if(Ti.length==0){tA()}}function tA(){if(Ui){window.clearInterval(Ui)}Ui=0}function uA(){var a=ha();for(var b=0;b<Ti.length;b++){Ti[b](a)}}function Sb(a,b){if(!(a&&b)){return}fc(a);x(a,b)}function jh(){return self.innerHeight||document.documentElement.clientHeight}function At(a){a=a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,
"&gt;");a=a.replace(/"/g,"&quot;").replace(/'/g,"&#39;");return a}function Ae(a,b){var c=[],d=0,e=0,f=b||20,g=/[-.,?!\/\\#]/,h=-1;for(var i=0;i<a.length;i++){var j=a.charAt(i);if(j.search(/\s/)==0){d=0;continue}else if(j=="<"){while(j&&j!=">")j=a.charAt(++i);continue}if(d>=f){var l=a.substring(e,i);if(h>=e&&h<i){c.push(l.substring(0,h-e+1));d=i-h-1;e=h+1}else{c.push(a.substring(e,i));d=0;e=i}}if(j=="&"){while(j&&j!=";")j=a.charAt(++i)}else if(j.search(g)==0){h=i}d++}if(c.length){var p=n.GECKO?"<wbr />":
"&shy;";c.push(a.substring(e));return c.join(p)}else{return a}}function sq(a){return a.split("?")[0]}var Nv,Pk,Ho;(function(){var a="(?:(?:(?:\\d{1,3}\\.){3}\\d{1,3})|(?:(?:[a-z0-9\\-]+\\.)+(?:aero|biz|cat|com|coop|edu|gov|info|int|jobs|mil|mobi|museum|name|net|org|pro|travel|[a-z]{2})\\b))",b="a-z0-9/~?&;=%@+$#_\\-",c="/(?:["+b+",:\\.]*["+b+"])?",d="\\b(?:https?://)?"+a+"(?::\\d+)?(?:"+c+")?",e="\\b[a-z0-9_.+\\-]+@"+a;Nv=new RegExp("("+a+")","gi");Pk=new RegExp("("+e+")","gi");Ho=new RegExp("("+
d+")","gi")})();function Xz(a){var b=a.match(Pk);return!(!b)&&b==a}function qq(a){var b=a.split(/\s/);for(var c=0;c<b.length;c++){var d=b[c];if(d.search(Pk)>=0){d=d.replace(Pk,'<a href="mailto:$1">$1</a>');b[c]=d}else if(d.search(Ho)>=0){d=d.replace(Ho,'<a href="http://$1" rel="nofollow">$1</a>');d=d.replace(/http:\/\/(https?:\/\/)/,"$1");b[c]=d}}return b.join(" ")}function dj(){this.k4=0;this.Cy={};this.XN=m(this.LK,this);Yd(window,"unload",this.XN)}dj.prototype.fc=function(a){a.__d=this.k4++;this.Cy[a.__d]=
a};dj.prototype.gc=function(a){delete this.Cy[a.__d]};dj.prototype.LK=function(){for(var a in this.Cy){var b=this.Cy[a];if(b&&b.P)b.P()}ue(window,"unload",this.XN);if(_features.geotagging){if(typeof GUnload!="undefined"){GUnload()}}};function Lv(a){gr()}q(N,"unload",Lv);function Se(a,b,c){return Math.min(Math.max(a,b),c)}function sA(a,b){return(a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y)}function Go(a,b,c){if(!c){c=function(f,g){if(f<g)return-1;if(f>g)return 1;return 0}}for(var d=0;d<a.length;++d){var e=
c(b,a[d]);if(e==-1){a.splice(d,0,b);return null}else if(e==0){return a[d]}}a.push(b);return null}function pA(a,b){for(var c=0;c<a.length;++c){if(b>a[c])return null;if(b==a[c])return a.splice(c,1)}return null}function xj(a,b){var c={},d=a.length;if(b){for(var e=0;e<d;e++)c[a[e][b]]=e}else{for(var e=0;e<d;e++)c[a[e]]=e}return c}function ja(a,b){var c=a.match(/(\{\w*\})/g);if(!c)return a;for(var d=0;d<c.length;d++){var e=c[d],f=new RegExp(e,"g"),g=e.substring(1,e.length-1);a=a.replace(f,b[g]!=undefined?
b[g]:"")}return a}if("a".replace(/(a)/g,function(a,b){return"b"})=="b"){ja=function(a,b){return a.replace(/\{(\w*)\}/g,function(c,d){return b[d]!=undefined?b[d]:""})}}var Rk=u("div");function P(a,b){Rk.innerHTML=ja(a,b);var c=Rk.firstChild;if(c){Rk.removeChild(Rk.firstChild)}return c}var Sk={},Vi={};function r(a){a=a||"_";var b=Sk[a]||0,c=a;if(b)c+="_"+b;Sk[a]=b+1;return c}function v(a,b){Vi[a]=b}function F(a){if(Vi[a])delete Vi[a];if(Sk[a]==1)Sk[a]=0}function Ac(a){var b=[];for(var c=1;c<arguments.length;c++)b.push(arguments[c]);
b.push(a);if(Vi[a])Vi[a].apply(this,b)}function Ct(a){var b=a.split(/\,/);if(b.length!=3)return null;var c=parseInt(b[0],10),d=parseInt(b[1],10),e=parseInt(b[2],10);if(c<1)return null;if(d<1||d>12)return null;var f=new Date(e,d-1,c);return f}function Zl(a,b){var c=Ie(He);return Mx(c.DATEFORMATS[b],a)}function Rv(a,b){if(b<0||b>3)return a;var c=Ct(a);if(c==null){return a}return Zl(c,b)}function aA(a,b,c,d){if(d<0||d>3)return;if(typeof a!="number")return;if(typeof b!="number")return;if(typeof c!="number")return;
if(a<1)return;if(b<1||b>12)return;var e=new Date(c,b-1,a);document.write(Zl(e,d))}function Tk(){var a=document.getElementsByTagName("div");for(var b=0;b<a.length;b++){if(a[b].className=="lhcl_wrap"){Oa(a[b],"lhcl_wrap");Ul(a[b])}}a=document.getElementsByTagName("span");for(var b=0;b<a.length;b++){var c=a[b].className;if(c!=null&&c.substring(0,11)=="lhcl_trunc_"){var d=parseInt(c.substring(11),10);a[b].className="";Iv(a[b],d)}}}function Iv(a,b){if(a&&a.hasChildNodes()){var c=a.firstChild;if(c.nodeValue.length>
b){var d=c.splitText(b);a.removeChild(d);a.appendChild(P("&#8230;",{}))}}}function Ul(a){Vl(a,0,"",0)}function Vl(a,b,c,d){if(!a)return;if(b<1&&n.IE){a.style.wordWrap="break-word";return}var e=-1;if(b>0){a.innerHTML="g";for(var f=1;f<b;f++){a.innerHTML=a.innerHTML+"<br />g"}e=a.offsetHeight;a.innerHTML=c;if(a.offsetWidth<=d&&a.offsetHeight<=e){return}}if(!a.hasChildNodes())return;var g=a.firstChild;if(g.nodeValue.length<1)return;var h=0,i=0,j=g.nodeValue.length,l=5,p=a.style.width;if(p&&p.length>
0){var t=parseInt(p,10);l=Math.max(5,Math.floor(t/15))}while(h<j){var w=Math.min(g.nodeValue.length,i+l),y=g.nodeValue.substring(i,w).search(/\s/);if(y>-1||w<j){var Z=y>-1?y+1:w,M=y>-1?y+1:l,I=g.splitText(Z);if(e>0){a.removeChild(I);if(a.offsetHeight>e){a.innerHTML=a.innerHTML+"&#8230;";h=j}else{var Ab=u("wbr");a.appendChild(Ab);a.appendChild(I);g=I;i=0;h+=M}}else{var Ab=u("wbr");a.insertBefore(Ab,I);g=I;i=0;h+=M}}else{h=j}}if(e>0){while(a.offsetHeight>e&&a.childNodes.length>2){a.removeChild(a.lastChild);
a.removeChild(a.lastChild);a.innerHTML=a.innerHTML+"&#8230;"}}}var on=function(a,b){return Math.max(a.top,b.top)<Math.min(a.bottom,b.bottom)&&Math.max(a.left,b.left)<Math.min(a.right,b.right)},Jr=function(a,b){if(!on(a,b)){return[new Je(a.top,a.left,a.width,a.height)]}var c=[],d=a.top,e=a.bottom;if(b.top>a.top){c.push(new gb(a.top,a.right,b.top,a.left));d=b.top}if(b.bottom<a.bottom){c.push(new gb(b.bottom,a.right,a.bottom,a.left));e=b.bottom}if(b.left>a.left){c.push(new gb(d,b.left,e,a.left))}if(b.right<
a.right){c.push(new gb(d,a.right,e,b.right))}return c};Ir=function(a,b){return new gb(Math.min(a.top,b.top),Math.max(a.right,b.right),Math.max(a.bottom,b.bottom),Math.min(a.left,b.left))};function oA(){Ug("_lh_backLink",location.pathname+location.search+location.hash)}function Zz(a,b){if(_features.newStrings){return b}else{return a}}function lj(a,b){var c=b?"PUBLIC_ALBUM_INDEX_ON":"PUBLIC_ALBUM_INDEX_OFF";oa.Fb(_setPrefUrl,Gf(Hu,a,b),"pref="+c)}function Hu(a,b,c){if(c.status>=400||c.text.indexOf("success")<
0){alert(Ll);return}a(b)}function xu(a,b){var c=k(a);if(typeof c=="undefined")return;if(c.value.length>b){c.value=c.value.substring(0,b)}}function Iu(){var a=k("lhid_flash_inter_frame");if(!a){a=P('<iframe src="javascript:void 0" style="position:absolute; display: none; z-index:5;" id="lhid_flash_inter_frame" frameborder="0" scrolling="no"></iframe>',{});if(document.body.firstChild){document.body.insertBefore(a,document.body.firstChild)}else{document.body.bN(a)}}}function Au(a){var b=k("lhid_flash_inter_frame");
if(b){ef(b,Ja(a));Ic(b,Wa(a));s(b,true)}}function qu(){var a=k("lhid_flash_inter_frame");if(a){s(a,false)}};;;function We(a){ka.fc(this);var b=a||2;this.Pd=[];for(var c=0;c<b;c++){this.Pd[c]=null}this.yc=[];this.Tm=1;if(typeof XMLHttpRequest!="undefined"){this.ho=this.nM}else if(typeof window.ActiveXObject!="undefined"){for(var c=0;c<oq.length;c++){var d=oq[c];try{var e=new ActiveXObject(d);if(!e)continue;this.ho=function(){return new ActiveXObject(d)};break}catch(f){}}}}var oq=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","MICROSOFT.XMLHTTP"];We.prototype.P=function(){ka.gc(this);this.ho=null;
while(this.Pd.length){var a=this.Pd.pop();if(a&&a.readyState<4)a.abort()}for(var b in this)this[b]=null};We.prototype.il=function(){return!(!this.ho)};We.prototype.Fb=function(a,b,c,d){if(!this.ho){if(b)b(null);return 0}var e={id:this.Tm++,url:a,cb:b,data:c};if(c||d)this.yc.push(e);else this.yc.unshift(e);this.uv();return e.id};We.prototype.GA=function(a){for(var b=0;b<this.Pd.length;b++){if(this.Pd[b]&&this.Pd[b].id==a){if(this.Pd.xhr)this.Pd.xhr.abort();this.Pd.splice(b,1,null);this.uv();return}}this.FK(a)};
We.prototype.FK=function(a){for(var b=0;b<this.yc.length;b++){if(this.yc[b].id==a){this.yc.splice(b,1);return}}};We.prototype.KA=function(a){if(a.status>=400)return null;try{return eval("("+a.text+")")}catch(b){return null}};We.prototype.nM=function(){return new XMLHttpRequest};We.prototype.uv=function(){if(!(this.yc.length&&this.ho))return;var a=Xf(this.Pd,null);if(a<0)return;var b=this.yc.pop(),c=this.ho();c.onreadystatechange=m(this.BL,this,a,b.cb);this.Pd[a]={id:b.id,xhr:c};c.open(b.data?"post":
"get",b.url,true);if(b.data){c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");c.setRequestHeader("Content-Length",b.data.length)}c.send(b.data)};We.prototype.BL=function(a,b){if(this.Pd.length<=a||!this.Pd[a])return;var c=this.Pd[a].xhr;if(!c||c.readyState!=4)return;if(b){var d={status:c.status,xml:c.responseXML,text:c.responseText};b(d)}delete this.Pd[a];this.Pd[a]=null;this.uv()};function pf(a){ka.fc(this);this.Te=document.title;this.oe=location.hash;this.Ff=[];this.T2=a;this.lb=null;this.Et=null;if(document.frames){this.q3=document.frames.lhid_secrethistory.document}if(n.IE){this.sP=false;this.WW=false;this.W1=q(window,"load",this.ki,false,this)}}pf.prototype.P=function(){ka.gc(this);if(this.$0)window.clearInterval(this.$0);if(this.W1){ua(this.W1)}};pf.prototype.tv=function(){if(n.IE&&!this.sP){this.WW=true;return}this.oe=location.hash;this.SA();this.$0=window.setInterval(m(this.mL,
this),16)};pf.prototype.mL=function(){if(location.hash==this.oe)return;this.oe=location.hash;this.SA()};pf.prototype.fl=function(a,b,c){this.Ff.push({re:b,vpage:a,sticky:!(!c),instance:null})};pf.prototype.ki=function(){this.sP=true;if(this.WW){this.tv()}};pf.prototype.SA=function(){if(this.q3){this.kL()}var a,b,c=-1;for(var d=0;d<this.Ff.length;++d){a=this.Ff[d].re.exec(this.oe);if(a){b=this.Ff[d].vpage;c=d;break}}if(!b){a={index:-1,input:this.oe,length:0};b=this.T2}if(this.Et==b&&this.lb.wa){this.lb.wa(a)}else{if(this.lb)this.lb.kb();
if(c>=0&&this.Ff[c].sticky){var e=this.Ff[c].instance;if(!e){e=new b(a);this.Ff[c].instance=e}else{e.wa(a)}this.lb=e}else{this.lb=new b(a)}}if(this.lb.title)document.title=this.Te+this.lb.title;this.Et=b};pf.prototype.kL=function(){var a=document.frames.lhid_secrethistory.document,b={title:document.title},c=Tl(this.oe),d=ca(this.oe);if(a.body.innerHTML!=d){b.test="window.parent.location.hash!="+c;b.dest=c;b.state=d}else if(a.body.innerHTML==""){b.test="window.parent.location.hash.length>1";b.dest=
'""';b.state="#"}else{return}var e=ja('<html lang="en-us"><title>{title}</title><script type="text/javascript">function loadparent(){if({test})window.parent.location.hash={dest};}<\/script><body onload="loadparent()">{state}</body></html>',b);a.open();a.write(e);a.close()};function Qc(a){this.p=a;this.Yd=m(this.TP,this)}Qc.prototype.pr=false;Qc.prototype.Ck=1;Qc.prototype.rB=0;Qc.prototype.yv=0;Qc.prototype.jw=0;Qc.prototype.$z=0;Qc.prototype.Lu=0;Qc.prototype.rD=0;Qc.prototype.stop=function(){if(this.pr){zo(this.Yd)}this.pr=false};Qc.prototype.bn=function(a){this.Ck=Se(a,0,1);Ne(this.p,n.GECKO?Math.min(this.Ck,0.99):this.opacity);V(this.p,"visibility",this.Ck?"":"hidden")};Qc.prototype.eh=function(a,b){a=Se(a,0,1);var c=this.Ck;this.rB=c;this.yv=a;this.jw=a-c;var d=
ha();this.$z=d;this.Lu=d+Math.abs(this.jw)*b;this.rD=this.Lu-d;if(this.Lu<=this.$z){this.stop();this.bn(this.yv)}else{if(!this.pr){wj(this.Yd)}this.pr=true}};Qc.prototype.TP=function(a){var b=this.yv;if(a<this.Lu){var c=(a-this.$z)/this.rD;b=c*this.jw+this.rB}else{this.stop()}this.bn(b)};var it=function(){},fo=null,Bk=function(){if(!fo){fo=new it}return fo};it.prototype.log=function(a,b){var c=["page="+a];for(var d in b){c.push(d+"="+b[d])}Ad("/lh/ajaxlog?"+c.join("&"))};var Bz=function(){if(n.OPERA||n.KONQUEROR){return false}if(n.SAFARI){return n.isVersion("412")}if(n.IE){return n.isVersion("6")}if(n.GECKO){return n.isVersion("1.8")}return true};var Pe=function(a,b,c,d,e){ka.fc(this);this.p=u("span");a.appendChild(this.p);this.vc=null;var f=this.Ei={lhui_startflag:r("Flag"),lhui_form:r("form"),lhui_cancel:r("cancel")};v(f.lhui_startflag,m(this.mJ,this));v(f.lhui_form,m(this.IZ,this));v(f.lhui_cancel,m(this.kJ,this));if(b)this.jn(b,c,d);this.Zy=e};Pe.prototype.e=function(){ka.gc(this);F(this.Ei.lhui_startflag);F(this.Ei.lhui_form);F(this.Ei.lhui_cancel)};Pe.prototype.close=function(){if(this.p)C(this.p);if(this.vc)C(this.vc);Ac("restoreVideo");
this.e()};Pe.prototype.jn=function(a,b,c,d){this.Uh=a;this.Cd=b;this.jc=c;this.p6=d;this.kJ()};Pe.prototype.mJ=function(){if(this.vc){C(this.vc)}this.vc=P(dz,this.Ei);this.vc.style.visibility="hidden";document.body.insertBefore(this.vc,document.body.firstChild);Ac("hideVideo");var a=this.vc.offsetWidth,b=this.vc.offsetHeight,c=Ja(this.p);this.vc.style.top=Math.max(c.y-b/2,0)+"px";if(this.vc.style.top[0]=="-"){this.vc.style.top="0px"}this.vc.style.left=Math.max(c.x+this.p.offsetWidth-a,0)+"px";var d=
Ja(this.vc);if(d.x<50)this.vc.style.left=Math.max(c.x-20,0)+"px";d=Ja(this.vc);this.p.innerHTML="&nbsp;";this.vc.style.visibility="";var e=jh(),f=document.body.scrollTop;if(d.y<f){f=d.y}else if(d.y+b-f>e){f=d.y;var g=10;if(b+g<e)f+=b+g-e}window.scrollTo(d.x,f)};Pe.prototype.kJ=function(){if(this.vc)C(this.vc);Ac("restoreVideo");this.p.innerHTML="";this.p.innerHTML=ja(hu,this.Ei);if(this.Zy){window.location=this.Zy}};Pe.prototype.o0=function(){if(this.vc)C(this.vc);Ac("restoreVideo");this.p.innerHTML=
"";this.p.innerHTML=ja("<b>Thank you for reporting this content. Your vigilance helps us improve Web Albums.</b>",this.Ei)};Pe.prototype.IZ=function(){var a=k(this.Ei.lhui_form);if(!(a&&a.reason&&a.msg&&this.Uh))return;var b=0;for(var c=0;c<a.reason.length;c++){if(a.reason[c].checked){b=a.reason[c].value}}var d=Va(a.msg.value),e;if(!b){e="You must select one of the provided categories."}else if(d.length>200){e="We're sorry, the maximum length for flagging messages is 200 characters. You are currently using "+
d.length+" characters. Please modify your message and try again."}if(e){alert(e);return}if(!confirm("Are you sure you want to flag this content for review?")){return}var f=["uname="+this.Uh];if(this.Cd){f.push("aid="+this.Cd)}if(this.jc){f.push("iid="+this.jc)}var g=["reason="+b,"msg="+qb(d)],h="/lh/flagInappropriate?"+f.join("&");oa.Fb(h,null,g.join("&"));this.o0();if(this.Zy){window.location=this.Zy}};var ez=function(a,b,c,d){var e=k("lhid_flagger");if(e){var f=new Pe(e,a,b,c,d);f.mJ()}},fz=function(a,
b,c){var d=k("lhid_flagger");if(d){new Pe(d,a,b,c)}},hu="<a href=\"javascript:_d('{lhui_startflag}')\">"+Cp+"</a>",dz='<form id="{lhui_form}" class="lhcl_flagger" action="javascript:_d(\'{lhui_form}\')"><h1>'+Cp+'</h1><p>By submitting this form, you\'re alerting the Picasa team to inappropriate content on this page. <a href="http://picasa.google.com/support/bin/answer.py?answer=44321" target="_blank">What does this mean?</a></p><h2>Why are you reporting this as inappropriate?</h2><p><input type="radio" name="reason" value="1" /> This content promotes violence or is hateful.<br /><input type="radio" name="reason" value="2" /> This content is offensive.<br /><input type="radio" name="reason" value="3" /> This content contains nudity.<br /><input type="radio" name="reason" value="4" /> This content is otherwise inappropriate.</p><p>If you own the copyright for this work and would like it removed, please see our <a href="http://www.google.com/picasa_web_dmca.html" target="_blank">instructions for notification of copyright infringement</a>.</p><h2>Briefly tell us why you are reporting this content for review:</h2><p><textarea name="msg"></textarea></p><div class="lhcl_buttons"><input type="submit" value="Submit" /><input type="button" value="'+
Cg+'" onclick="_d(\'{lhui_cancel}\')" /></div></form>';function Ka(a,b,c){ka.fc(this);this.C=a;this.vX=b;this.fj=c||72;this.p=u("div");var d=this.p.style;d.position="relative";d.overflow="hidden";d.minWidth=this.fj+"px";this.D=u("img");this.D.style.position="absolute";if(typeof this.D.complete=="undefined")this.D.complete=true;this.Qi=new Image;this.Qi.onload=(this.Qi.onerror=Jd(this,this.Md));this.D.onerror=Jd(this,this.wt);this.e4=Jd(this,this.mX);this.Pi=Jd(this,this.Od);this.xh=Jd(this,this.zg);this.Am=Jd(this,this.xc);this.yh=Jd(this,this.Vb);this.f5=
m(this.nJ,this);this.eA=new Eb(this.X0,1000,this);this.IW=false;this.JW=false};Ka.prototype.P=function(){ka.gc(this);if(this.eA){this.eA.e()}var a=this.D;if(a){a.onload=(a.onerror=(a.ondragstart=null))}a=this.Qi;if(a){a.onload=(a.onerror=null)}this.qu(false);this.pu(false);this.km=true;this.un(false);for(var b in this)this[b]=null};Ka.prototype.ze=function(){return this.D};Ka.prototype.dB=function(a,b,c,d,e){b=b||this.fj;c=c||this.fj;var f=b/c;if(this.Yk!=a){this.Do=false;this.eA.stop();this.$c=false}this.Yk=
a;this.uf=b;this.pg=c;this.Dj=f;this.wg=Math.max(this.uf,this.pg);this.O1=d||null;this.N1=e||"embedded";this.sj();this.un(false);this.kZ=1;this.oj=0.5;this.bl=0.5};Ka.prototype.sj=function(){if(this.km)return;if(this.ig)C(this.ig);if(this.D)C(this.D);if(this.p)C(this.p);this.ig=null;this.km=true;this.DJ=false};Ka.prototype.yf=function(a){if(!this.km)return;var b=this.Ap(),c=a==1?b:_thumbSize;if(!a){var d=this.OA(this.Yk);for(var e=0;e<d.length;e++){c=Math.max(c,d[e]);if(c>=b)break}}var f=this.LA(c);
this.DJ=true;this.D.onload=this.f5;this.MU=c;if(this.Tf)this.Tf();if(this.D.src==f&&this.D.complete){this.nJ()}else if(this.Qi.src!=f||this.Qi.complete){this.Do=false;this.D.src=f}};Ka.prototype.wa=function(){if(this.nb()&&!this.km){if(!this.ig){var a={url:this.O1,hl:_LH.locale,mode:this.N1};this.ig=P('<embed style="position:absolute" type="application/x-shockwave-flash" src="http://video.google.com/googleplayer.swf?videoUrl={url}&hl={hl}&autoplay=yes" allowScriptAccess="always" swLiveConnect="true" quality="best" bgcolor="#eeeeee" scale="noScale" salign="TL" width="240" height="240" FlashVars="playerMode={mode}"></embed>',
a);this.p.appendChild(this.ig);Iu()}this.Ap();return}var b=this.Ap(),c=this.LA(b);if(!this.$c&&this.Qi.src!=c&&!this.Do){this.$c=true;this.l4=b;if(this.Tf)this.Tf();this.Qi.src=c}};Ka.prototype.nb=function(){return Vh&&this.O1};Ka.prototype.nJ=function(){var a=this.D;this.FA(a,this.MU);if(!this.DJ)return;this.km=(this.DJ=false);a.onload=null;this.pB();var b=this.Ap();this.vX.appendChild(this.p);this.p.appendChild(a);this.Ap();if(this.Ag)this.Ag();if(this.onload&&this.MU==b&&!this.nb())this.onload()};
Ka.prototype.Md=function(a){this.FA(this.Qi,this.l4);if(!this.$c)return;this.Do=false;this.D.src=this.Qi.src;this.pB();if(!this.hidden&&this.onload)this.onload();this.eA.start()};Ka.prototype.wt=function(a){this.Do=true;if(this.Dm)this.Dm(a);if(this.D.onload)this.D.onload()};Ka.prototype.Ag=null;Ka.prototype.Dm=null;Ka.prototype.onload=null;Ka.prototype.Tf=null;Ka.prototype.pB=function(){if(this.Do)return;var a=this.D;this.Yk=sq(a.src);var b=this.uf,c=this.pg;if((b-c)*(a.width-a.height)<0){this.uf=
c;this.pg=b;this.Dj=c/b}};Ka.prototype.X0=function(){if(!this.D)return;this.$c=false;this.wa()};Ka.prototype.OA=function(a){if(!Sl[a])Sl[a]=[];return Sl[a]};Ka.prototype.FA=function(a,b){var c=sq(a.src),d=this.OA(c);Go(d,b)};Ka.prototype.LA=function(a){if(a<this.wg){a=hq(a);return this.Yk+"?imgmax="+a}else if(this.wg>1600){return this.Yk+"?imgmax=0"}else{return this.Yk}};Ka.prototype.un=function(a){if(this.el==a)return;this.el=a;this.pu(a);this.qu(false);this.D.ondragstart=a?this.e4:null;if(!this.km)this.wa()};
Ka.prototype.getZoom=function(){return this.el};Ka.prototype.DE=function(){return this.Oi/this.wg};Ka.prototype.Od=function(a){this.UW=a.clientX;this.VW=a.clientY;this.pu(false);this.qu(true);Qh(a)};Ka.prototype.Vb=function(a){this.pu(true);this.qu(false)};Ka.prototype.zg=function(a){var b=this.UW-a.clientX,c=this.VW-a.clientY;this.UW=a.clientX;this.VW=a.clientY;this.oj+=b/this.pP;this.bl+=c/this.lP;this.mD()};Ka.prototype.xc=function(a){if(!(a.relatedTarget||a.toElement))this.Vb(a)};Ka.prototype.qu=
function(a){if(a==this.JW)return;this.JW=a;var b=a?Yd:ue;b(document,"mouseup",this.yh);b(document,"mousemove",this.xh);b(document,"mouseout",this.Am)};Ka.prototype.pu=function(a){if(a==this.IW)return;this.IW=a;var b=a?Yd:ue;b(this.D,"mousedown",this.Pi)};Ka.prototype.mX=function(a){Qh(a)};Ka.prototype.Ap=function(){var a=this.C.CK(this),b=a.w,c=a.h,d=a.f;if(this.nb()){c-=27}var e=b/c,f=this.uf,g=this.pg;if(this.nb()){f*=10000;g*=10000}if(f>b||g>c){var h=Math.min(this.fj,this.wg);if(this.nb()&&this.N1!=
"embedded"){h=240}if(this.Dj>=e){if(f<g)h*=this.Dj;f=Se(b,h,f);g=f/this.Dj}else{if(g<f)h/=this.Dj;g=Se(c,h,g);f=g*this.Dj}if(this.nb()){f=Math.floor(f);g=Math.floor(g)}else{var i=Math.min(hq(Math.max(f,g)),this.wg);if(f>g){f=i;g=Math.floor(f/this.Dj)}else{g=i;f=Math.floor(g*this.Dj)}}}this.Oi=Math.max(f,g);this.w6=this.Oi/this.wg;if(this.el){f=this.kZ*this.uf;g=this.kZ*this.pg}if(!d){if(this.el){c=Se(c,this.fj,g)}else{c=g}}this.pP=f;this.lP=g;this.t4=b;this.s4=c;if(!this.km)this.mD();return this.el?
this.wg:this.Oi};Ka.prototype.mD=function(){var a=this.pP,b=this.lP,c=this.t4,d=this.s4,e=this.D.style,f=0,g=0;if(this.Do){e.border="2px solid red";f=4;g=4}else{e.border=""}e.width=Math.max(a-f,0)+"px";e.height=Math.max(b-g,0)+"px";var h=c/2,i=d/2;this.oj=Se(this.oj,h/a,1-h/a);this.bl=Se(this.bl,i/b,1-i/b);e.cursor="";if(a<=c){e.left=Math.floor(h-a/2)+"px"}else{e.left=Math.floor(h-a*this.oj)+"px";e.cursor="move"}if(b<=d){e.top=Math.floor(i-b/2)+"px"}else{e.top=Math.floor(i-b*this.bl)+"px";e.cursor=
"move"}if(this.ig){var j=this.ig.style;j.width=Math.max(a,0)+"px";j.height=Math.max(b+27,0)+"px";j.top=Math.floor(i-b/2)+"px";j.left=Math.floor(h-a/2)+"px"}if(this.nb()){d+=27}this.p.style.width=c<=this.fj?this.fj+"px":"";this.p.style.height=Math.max(d,0)+"px"};var hq=function(a){var b=[72,144,160,200,288,320,400,512,576,640,720,800,912,1024,1152,1280,1440,1600];for(var c=b.length-1;c>0;c--){if(a>=b[c])return b[c]}return b[0]},Sl={};var Ta=function(a){z.call(this);this.D=[null,null];this.Oi=a||Mi[0];this.ut=new Image};S(Ta,z);Ta.prototype.Ol=false;Ta.prototype.Ow=false;Ta.prototype.Md=false;Ta.prototype.ja=false;Ta.prototype.sa=function(){return"gphoto.ScaledImage"};Ta.prototype.Nb=function(a){return false};Ta.prototype.o=function(){this.b=u("div");V(this.b,"position","relative");V(this.b,"overflow","hidden");ab(this.D,function(a,b,c){var d=u("img");V(d,"position","absolute");s(d,false);x(this.b,d);c[b]=d},this)};Ta.prototype.e=
function(){if(!this.da()){Ta.j.e.call(this)}};Ta.prototype.I=function(){Ta.j.I.call(this);this.Ol=false;this.Md=false;this.ja=false;this.ba()};Ta.prototype.J=function(){Ta.j.J.call(this);if(this.b){C(this.b)}this.ut.onload=null;this.b=null;ab(this.D,function(a,b,c){c[b]=null})};Ta.prototype.qa=function(a){if(this.fe()!=a){Ta.j.qa.call(this,a);if(this.Ie()){this.Ol=false;this.Md=false;this.ba()}}};Ta.prototype.VI=function(a,b){b=a>0&&!(!b);if(a!=this.ad||b!=this.Ow){this.ad=a;this.Ow=b;if(this.Ie()){this.ba()}}};
Ta.prototype.VD=function(a){return new cb(Math.max(this.b.offsetWidth,this.Oi),this.ad?this.ad:a.height)};Ta.prototype.ze=function(){return this.D&&this.D[0]};Ta.prototype.rC=function(a,b){var c=a.ha();if(!c.hQ(b)){c.jZ(b);mz(c,this.Oi)}return c};Ta.prototype.ba=function(){var a;if(this.ja){a=this.S1.ha()}else{a=this.A?new cb(this.A.w,this.A.h):new cb(this.Oi,0)}var b=this.VD(a),c=this.rC(a,b);if(!this.Ow){b.height=c.height}Ic(this.b,b.width<this.Oi?this.Oi:"",b.height);if(this.A){if(this.ja){this.UY(c,
b)}if(this.Md){var d=Mr(a,c)?0:c;this.Zu(d)}else{this.RV(144)}}else{this.wU()}};Ta.prototype.wU=function(){ab(this.D,function(a){s(a,false)});this.S1=null;this.ja=false};Ta.prototype.qx=function(a){var b=this.A.Xw();if(this.A.w<=a&&this.A.h<=a){a=0}return lz(b,a)};Ta.prototype.RV=function(a){var b=this.qx(a);this.ut.onload=m(this.OT,this);this.ut.src=this.qx(a)};Ta.prototype.OT=function(){this.ut.onload=null;this.D[1].onload=m(this.PT,this);this.D[1].src=this.ut.src;var a=new cb(this.A.w,this.A.h),
b=this.VD(a),c=this.rC(a,b),d=new Fa((b.width-c.width)/2,(b.height-c.height)/2);Ic(this.D[1],c);ef(this.D[1],d);this.S1=a;this.Md=true;this.ja=true};Ta.prototype.PT=function(){this.D[0].onload=m(this.ba,this);this.D[0].src=this.D[1].src;s(this.D[0],true);s(this.D[1],false)};Ta.prototype.Zu=function(a){var b=this.qx(a);s(this.D[0],true);if(b==this.D[0].src){s(this.D[1],false)}else if(b!=this.D[1].src){this.D[1].src=this.D[0].src;this.D[1].src=b}};Ta.prototype.UY=function(a,b){var c=new Fa((b.width-
a.width)/2,(b.height-a.height)/2);ab(this.D,function(d){Ic(d,a);ef(d,c)})};var lz=function(a,b){var c=b instanceof cb?Math.max(b.width,b.height):b;if(c){var d=a.lastIndexOf("/"),e=a.substr(0,d),f=a.substr(d);return e+"/s"+c+f}else{return a}},mz=function(a,b){var c=Math.max(a.width,a.height),d=Math.min(c,b||Mi[0]);for(var e=Mi.length-1;e>=0;e--){if(c>=Mi[e]){d=Math.max(Mi[e],d);break}}return a.scale(d/c).floor()},Mi=[32,48,64,72,104,144,150,160,200,288,320,400,512,576,640,720,800,912,1024,1152,1280,
1440,1600];var Qb=function(a,b,c,d,e,f){ka.fc(this);this.C=a;this.p=b;this.F=c;this.aQ=!(!d);this.CQ=!(!e);this.le=m(this.oc,this);Yd(window,"resize",this.le);this.M3=m(this.dq,this);this.K3=m(this.sn,this);this.H6=m(this.nv,this);this.e3=m(this.sL,this);this.z5=m(this.aM,this);this.Uz=new Eb(this.iB,200,this);this.Z=-1;this.Q5=-1;this.z6=null;this.yc=[];this.D=null;this.Ub=null;this.$c=false;this.QF=false;this.Vz=false;this.BQ=1;this.fj=f||0;v("movieDone",m(this.sn,this))};S(Qb,J);Qb.prototype.P=function(){ka.gc(this);
if(this.Uz)this.Uz.e();if(this.D)this.D.P();if(this.Ub)this.Ub.P();if(this.le)ue(window,"resize",this.le);F("movieDone");for(var a in this)this[a]=null};Qb.prototype.Wh=function(){return this.Z};Qb.prototype.ze=function(){return this.D};Qb.prototype.$p=function(a,b){if(a<0||a>=this.F.length)return false;if(b)this.ZB();this.Q5=a;this.yc.push(a);this.TA();return true};Qb.prototype.ZB=function(){this.yc.length=0;if(this.Ub)this.Ub.Ag=null;this.$c=false};Qb.prototype.$A=function(){this.$p(this.Z,true)};
Qb.prototype.RL=function(a){this.CQ=!(!a)};Qb.prototype.TA=function(){this.Vz=false;this.Uz.stop();if(this.$c||this.yc.length==0)return;this.$c=true;this.QF=false;this.bY=false;var a=this.yc.shift();this.BQ=a>this.Z?1:-1;if(this.D)this.D.onload=null;if(this.ZA(a)){this.Z=a;this.Ub.Ag=this.z5;this.Ub.onload=this.K3;this.Ub.Dm=this.e3;this.Ub.Tf=this.M3;var b=0;if(this.yc.length){b=2}else if(this.CQ){b=1}this.Ub.yf(b)}};Qb.prototype.ZA=function(a){if(!this.F){return false}var b=this.F[a];if(!b){return false}if(!this.Ub){this.Ub=
new Ka(this,this.p,this.fj)}this.Ub.dB(b.s,b.w,b.h,b.vsurl||null,this.aQ?"mini":"normal");if(n.IE&&Vh&&b.vsurl){this.hasVideo=true}return true};Qb.prototype.aM=function(){var a=this.D;this.D=this.Ub;this.Ub=a;if(this.Ag)this.Ag();if(this.Ub){this.Ub.sj();this.Ub.Tf=null;this.Ub.Ag=null;this.Ub.onload=null;this.Ub.Dm=null}this.$c=false;if(this.yc.length){this.TA()}else{this.Uz.start()}};Qb.prototype.dq=function(){if(this.Tf)this.Tf()};Qb.prototype.sn=function(){if(this.onload)this.onload();this.QF=
true;if(this.bY)this.nv();else if(this.Vz)this.iB()};Qb.prototype.iB=function(){if(!this.Vz&&this.onstopped)this.onstopped();this.Vz=true;if(!this.D||this.yc.length)return;if(this.QF){this.bY=true;this.nv()}else{this.D.wa()}};Qb.prototype.sL=function(a){if(this.Dm){this.Dm()}if(this.Ub&&this.Ub.onload){this.Ub.onload()}};Qb.prototype.nv=function(){var a=this.F.length;if(a<2)return;var b=this.Z+this.BQ;if(b<0)b=1;if(b>a-1)b=a-2;if(this.ZA(b)){this.Ub.wa()}};Qb.prototype.oc=function(){var a=self.outerWidth||
self.innerHeight||document.documentElement.clientHeight,b=self.outerHeight||jh();if(a!=this.G3||b!=this.E3){this.G3=a;this.E3=b;if(this.D)this.D.wa();if(this.onresize)this.onresize();this.dispatchEvent(ee)}};Qb.prototype.CK=function(a){return{f:this.aQ,w:this.p.offsetWidth,h:this.C.rj(a)}};var wc=function(a){ka.fc(this);this.C=a;var b={lhf_prev:r("Previous"),lhf_next:r("Next"),lhf_exit:r("Exit"),lhf_play:r("Play"),lhf_stop:r("Pause"),lhf_fast:r("Faster"),lhf_slow:r("Slower"),lhf_show:r("ToggleCaptions")};v(b.lhf_prev,m(a.xf,a));v(b.lhf_next,m(a.wf,a));v(b.lhf_exit,m(a.qj,a));v(b.lhf_play,m(a.eq,a));v(b.lhf_stop,m(a.xj,a));v(b.lhf_fast,m(a.sv,a));v(b.lhf_slow,m(a.rv,a));v(b.lhf_show,m(this.kB,this));this.L2=b;this.vs=new Eb(this.tj,0,this);var c=P(nz,{});s(c,false);x(document.body,c);
this.tm=c;this.DG=new Eb(this.YL,500,this);var d=new Ni(document.body,"lhcl_slideshow_feedback");this.ZP=d;this.JD=new Eb(this.RA,2000,this);this.Nw=new Qc(d.div);this.Nw.bn(0);var e=u("div");x(document.body,e);e.className="lhcl_slideshow_container";this.I2=e;var f=new Ni(e,"lhcl_slideshow_caption");this.GN=f;this.$B=new Qc(f.contents);this.$B.bn(0);var g=new Ni(e,"lhcl_slideshow_controls");this.CC=g;this.Lq=new Qc(g.contents);this.Lq.bn(0);if(!n.IE){Ne(f.bg,0.7);Ne(g.bg,0.7);Ne(d.bg,0.7)}var h=u("table");
x(g.fg,h);var i=u("tbody");x(h,i);var j=u("tr");x(i,j);var l=u("td");x(j,l);this.I6=new Sd(l,"img/slideshowprev.gif","img/slideshowprev_on.gif",'javascript:_d("'+b.lhf_prev+'")');var p=u("td");x(j,p);this.v5=new Sd(p,"img/slideshowpause.gif","img/slideshowpause_on.gif",'javascript:_d("'+b.lhf_stop+'")');this.KX=new Sd(p,"img/slideshowplay.gif","img/slideshowplay_on.gif",'javascript:_d("'+b.lhf_play+'")');this.KX.yf(false);var t=u("td");x(j,t);this.x6=new Sd(t,"img/slideshownext.gif","img/slideshownext_on.gif",
'javascript:_d("'+b.lhf_next+'")');var w=u("td");x(j,w);this.i6=new Sd(w,"img/slideshowminus.gif","img/slideshowminus_on.gif",'javascript:_d("'+b.lhf_fast+'")');this.Z0=u("td");x(j,this.Z0);var y=u("td");x(j,y);this.U6=new Sd(y,"img/slideshowplus.gif","img/slideshowplus_on.gif",'javascript:_d("'+b.lhf_slow+'")');var Z=u("td");x(j,Z);this.Jz=u("a");this.Jz.href='javascript:_d("'+b.lhf_show+'")';x(Z,this.Jz);U(this.Jz,"hide captions");var M=u("td");x(j,M);this.h6=new Sd(M,"img/slideshowexit.gif","img/slideshowexit_on.gif",
'javascript:_d("'+b.lhf_exit+'")');this.d4=q(document,vd,this.wL,false,this)};wc.prototype.Cp=true;wc.prototype.ob=true;wc.prototype.P=function(){ka.gc(this);ua(this.d4);this.JD.e();this.vs.e();this.DG.e();this.Lq.stop();this.$B.stop();this.Nw.stop();var a=this.L2;if(a){F(a.lhf_prev);F(a.lhf_next);F(a.lhf_exit);F(a.lhf_play);F(a.lhf_stop);F(a.lhf_fast);F(a.lhf_slow);F(a.lhf_show)}this.GN.P();this.CC.P();this.ZP.P();C(this.tm);C(this.I2)};wc.prototype.yf=function(){this.vs.stop();this.Lq.eh(1,300);
if(!this.KW){this.sj(3000)}};wc.prototype.sj=function(a){this.vs.stop();if(a){this.vs.start(a)}else{this.tj()}};wc.prototype.iq=function(a){if(!a&&!this.ob){this.RA();this.JD.stop();return}if(a==this.ob){return}this.v5.yf(a);this.KX.yf(!a);var b="pause";if(a){this.sj();b="play"}else{this.yf()}U(this.ZP.fg,b);this.Nw.eh(1,100);this.JD.start();this.ob=a};wc.prototype.RA=function(){this.Nw.eh(0,300)};wc.prototype.pv=function(a){if(a){this.DG.start()}else{this.DG.stop();s(this.tm,false)}};wc.prototype.qv=
function(a){var b=a?1:0;this.$B.eh(b,300)};wc.prototype.gq=function(a){this.tb=a;if(!this.Cp){return}if(a){a=Ae(a);this.GN.fg.innerHTML=a;this.qv(true)}else{this.qv(false)}};wc.prototype.vR=function(){return this.CC.bg.offsetHeight};wc.prototype.kB=function(){this.Cp=!this.Cp;var a="show captions";if(this.Cp){this.gq(this.tb);a="hide captions"}else if(this.tb){if(this.tb){this.qv(false)}}U(this.Jz,a)};wc.prototype.zj=function(a){var b=a/1000;U(this.Z0,"seconds: "+b);this.yf()};wc.prototype.YL=function(){s(this.tm,
true)};wc.prototype.tj=function(){if(this.Lq){this.Lq.eh(0,300)}};wc.prototype.wL=function(a){if(a.clientX==this.oj&&a.clientY==this.bl){return}this.yf();this.oj=a.clientX;this.bl=a.clientY;this.KW=false;for(var b=a.target;b!=null;b=b.parentNode){if(b==this.CC.div){this.vs.stop();this.KW=true;break}}};var Ni=function(a,b){ka.fc(this);var c={fg:r("fg"),bg:r("bg"),outer:r("table"),inner:r("inner"),className:b};this.p=P('<table id="{outer}" class="{className}"><tr><td><div id="{inner}" style="position:relative;height:100%"><div id="{bg}" class="{className}_bg" style="position:absolute;z-index:2;width:100%;height:100%"></div><div id="{fg}" class="{className}_fg" style="position:relative;z-index:3;width:100%"></div></div></td></tr></table>',
c);x(a,this.p);this.contents=k(c.inner);this.div=k(c.outer);this.fg=k(c.fg);this.bg=k(c.bg);if(n.IE){this.fg.onresize=m(this.NL,this)}};Ni.prototype.P=function(){ka.gc(this);if(this.fg){this.fg.onresize=null}C(this.p)};Ni.prototype.NL=function(){V(this.bg,"height",this.fg.offsetHeight-1+"px")};var Sd=function(a,b,c,d){ka.fc(this);var e={anchor:r("anchor"),off_id:r("button"),off_src:b,on_id:r("buttonOn"),on_src:c,mouseover:r("mouseover"),mousedown:r("mousedown"),mouseout:r("mouseout"),mouseup:r("mouseup")};
this.g=e;this.p=P('<table><tr><td><a id="{anchor}" onmouseover="_d(\'{mouseover}\')" onmouseout="_d(\'{mouseout}\')" onmousedown="_d(\'{mousedown}\')" onmouseup="_d(\'{mouseup}\')"><img id="{on_id}" src="{on_src}" style="position:absolute;" ondragstart="return false" /><img id="{off_id}" src="{off_src}" onmousedown="return false" /></a></td></tr></table>',e);x(a,this.p);this.d2=k(e.anchor);this.d2.href=d;this.zk=k(e.on_id);if(n.IE){V(this.zk,"visibility","hidden")}else{this.Em=new Qc(this.zk);this.Em.bn(0)}v(e.mouseover,
m(this.yL,this));v(e.mouseout,m(this.xL,this));v(e.mousedown,m(this.vL,this));v(e.mouseup,m(this.zL,this))};Sd.prototype.P=function(){ka.gc(this);var a=this.g;F(a.mouseover);F(a.mouseout);F(a.mousedown);F(a.mouseup);if(this.Em){this.Em.stop()}};Sd.prototype.yf=function(a){s(this.p,a)};Sd.prototype.yL=function(){if(!n.IE){this.Em.eh(0.5,200)}};Sd.prototype.xL=function(){if(n.IE){V(this.zk,"visibility","hidden")}else{this.Em.eh(0,200)}};Sd.prototype.vL=function(){if(n.IE){V(this.zk,"visibility","")}else{this.Em.eh(1,
0)}};Sd.prototype.zL=function(){if(n.IE){V(this.zk,"visibility","hidden")}else{this.Em.eh(0.5,0)}};var nz='<div class="lhcl_slideshow_loading">'+tf+"</div>";var Cb=function(a){ka.fc(this);this.AF=[];for(var b=document.body.firstChild;b!=null;b=b.nextSibling){if(b.style&&b.style.display!="none"){s(b,false);this.AF.push(b)}}var c=document.body;this.p=u("div");c.appendChild(this.p);this.m2=ss(c);V(c,"background","#000");var d=n.IE?document.documentElement:c;V(d,"overflow","hidden");this.F=_photo;this.W=new wc(this);this.ia=new Qb(this,this.p,this.F,true);this.ia.Ag=m(this.DL,this);this.ia.onload=m(this.tL,this);this.ia.Tf=m(this.uL,this);this.Vi=xj(this.F,
"id");this.zc=new Eb(this.BK,0,this);mt(this);this.W.zj(this.md);this.db=new hc(document);q(this.db,"key",this.Zc,false,this);this.wa(a);v("f",m(this.ZK,this))};Cb.prototype.ob=true;Cb.prototype.$c=false;Cb.prototype.md=4000;Cb.prototype.ay=false;Cb.prototype.P=function(){ka.gc(this);F("f");if(this.ia){this.ia.P()}if(this.W){this.W.P()}if(this.zc){this.zc.e()}L(this.db,"key",this.Zc,false,this);this.db.e()};Cb.prototype.kb=function(){this.xj();while(this.AF.length){s(this.AF.pop(),true)}var a=document.body;
V(a,"background",this.m2);var b=n.IE?document.documentElement:a;V(b,"overflow",n.GECKO?"-moz-scrollbars-vertical":"hidden");if(this.p){C(this.p)}this.P()};Cb.prototype.wa=function(a){var b=a[1],c=this.Vi[b];if(c==undefined){location.replace(location.href.replace(/#.*/,"#unknown-"+b));return}this.title=" - "+this.F[c].t;this.Z=c;this.ia.RL(!this.ay);this.ia.$p(c)};Cb.prototype.Ye=function(a,b){var c=this.Z+a,d=this.F.length;if(b){c=gk(c,d)}if(c<0||c>=d){return false}if(n.IE&&Vh){if(this.ia.hasVideo&&
this.F[c].vsurl){oz(this);window.open(location.href.replace(/#.*/,"#s"+this.F[c].id),"_top");return true}}location.replace(location.href.replace(/#.*/,"#s"+this.F[c].id));return true};Cb.prototype.wf=function(){this.xj();this.Ye(1,true)};Cb.prototype.xf=function(){this.xj();this.Ye(-1,true)};Cb.prototype.eq=function(){if(this.ob){return}this.ob=true;this.W.iq(true);if(!this.$c){this.zc.start(this.md)}};Cb.prototype.xj=function(){this.ob=false;this.W.iq(false);this.zc.stop()};Cb.prototype.qj=function(){location=
_album.link};Cb.prototype.sv=function(){this.md=Math.max(this.md-1000,1000);this.W.zj(this.md);if(this.ob){this.zc.start(this.md)}};Cb.prototype.rv=function(){this.md=Math.min(this.md+1000,20000);this.W.zj(this.md);if(this.ob){this.zc.start(this.md)}};Cb.prototype.rj=function(a){var b=jh();if(a.nb()){b=Math.max(b-this.W.vR(),0)}return b};Cb.prototype.DL=function(){this.W.pv(false);var a=this.ia.Wh();if(this.ia.ze().nb()){this.W.gq("")}else{this.W.gq(this.F[a].c)}if(this.ay){this.Ye(this.P4,true)}};
Cb.prototype.uL=function(){this.$c=true;this.W.pv(true)};Cb.prototype.tL=function(){this.$c=false;this.W.pv(false);if(this.ob){this.zc.start(this.md)}};Cb.prototype.Zc=function(a){if(vj(a)){return}var b=parseInt(String.fromCharCode(a.keyCode),10);if(!isNaN(b)){this.md=b*1000;this.W.zj(this.md);if(this.ob){this.zc.start(this.md)}return}switch(a.keyCode){case 27:this.qj();a.preventDefault();case 74:case 37:this.xf();a.preventDefault();break;case 75:case 39:this.wf();a.preventDefault();break;case 32:if(this.ob){this.xj()}else{this.eq()}a.preventDefault();
break}};Cb.prototype.BK=function(){this.Ye(1,true)};Cb.prototype.ZK=function(a,b){if(a=="stateChanged"){var c=b.split(",");if(c[1].indexOf("completed")>-1){Ac("movieDone")}}};var oz=function(a){if(a&&a.W){var b=a.W.ob?"1":"0",c=a.W.Cp?"1":"0",d=a.md;Ug(ko,b+","+c+","+d)}},mt=function(a){if(a&&a.W){var b=Le(ko);if(b&&b.length){var c=b.split(",");if(c.length==3){a.ob=c[0]=="1";a.W.iq(a.ob);if(c[1]!="1"){a.W.kB()}a.md=Number(c[2])}}}un(ko)},ko="_lh_slideshow";if(_features.fr){}function Id(a,b,c){this.C=a;this.qf=_photo;this.rZ=!(!c);this.L=new ma(this);this.g={albumlink:_album.link,albumlinkID:r("lhid_albumlink"),prevboxID:r("prevbox"),nextboxID:r("nextbox"),zoomID:r("zoom"),zoomTextID:r("zoomtext"),toolID:r("tools"),indextextID:r("indextext"),emailID:r("email"),returnText:_album.isdefault?"View Drop Box":Ql};var d=this.rZ?tv:sv;this.p=P(d,this.g);b.appendChild(this.p);if(!_authuser.user){s(k(this.g.emailID),false)}if(_authuser.isOwner&&!this.rZ){this.Mg=
{rotateFunc:r("func"),leftID:r("leftrotate"),rightID:r("rightrotate"),leftOn:"img/rotateleft_normal.gif",leftOff:"img/rotateleft_ghosted.gif",rightOn:"img/rotateright_normal.gif",rightOff:"img/rotateright_ghosted.gif"};k(this.g.toolID).innerHTML=ja('<img id="{leftID}" src="{leftOff}" title="Rotate Left" class="lhcl_fakelink" onclick="_d(\'{rotateFunc}\', \'ROTATE270\')" /><img id="{rightID}" src="{rightOff}" title="Rotate Right" class="lhcl_fakelink" onclick="_d(\'{rotateFunc}\', \'ROTATE90\')" />',
this.Mg);v(this.Mg.rotateFunc,m(this.CL,this))}v(this.g.zoomID,Jd(this.C,this.C.xn));this.gl(false);this.zoom=false;this.Qy=r("prev");this.zy=r("next");var e={src:"img/left_normal.gif",id:this.Qy,alt:"Previous"},f={src:"img/right_normal.gif",id:this.zy,alt:"Next"},g=P(cq,e),h=P(cq,f);g.style.visibility="hidden";h.style.visibility="hidden";k(this.g.prevboxID).appendChild(g);k(this.g.nextboxID).appendChild(h);v(this.Qy,m(this.WA,this,-1));v(this.zy,m(this.WA,this,1));this.Pg(true);this.K6=m(this.ov,
this)}Id.prototype.P=function(){if(this.p)C(this.p);F(this.g.zoomID);F(this.Qy);F(this.zy);if(this.Mg)F(this.Mg.rotateID);this.L.e();for(var a in this)this[a]=null};Id.prototype.Pg=function(a){var b=a||!this.C.ev();if(this.Mg){var c=k(this.Mg.leftID),d=k(this.Mg.rightID);if(b){c.src=this.Mg.leftOff;d.src=this.Mg.rightOff;Oa(c,"lhcl_fakelink");Oa(d,"lhcl_fakelink")}else{c.src=this.Mg.leftOn;d.src=this.Mg.rightOn;ga(c,"lhcl_fakelink");ga(d,"lhcl_fakelink")}this.Z2=b}};Id.prototype.lB=function(a,b){var c=
k(this.Qy),d=k(this.zy);if(a){c.style.visibility="";c.href=location.href;c.hash=a}else{c.style.visibility="hidden";c.blur()}if(b){d.style.visibility="";d.href=location.href;d.hash=b}else{d.style.visibility="hidden";d.blur()}};Id.prototype.Xd=function(a){this.Mk(this.qf[a])};Id.prototype.Mk=function(a){this.gl(false);this.F=a;this.jc=this.F.id;var b=a.user?a.user.name:_user.name,c=["uname="+b,"iid="+this.jc],d=(new B(document.location.href)).Za("authkey");if(typeof d!="undefined"){c.push("authkey="+
d)}var e="/lh/emailPhoto?"+c.join("&");k(this.g.emailID).href=e;k(this.g.emailID+"_t").innerHTML=this.F.vsurl?"Share Video":Ml;var f=k(this.g.albumlinkID);if(f){f.href=this.g.albumlink}this.Pg(!(!this.F.vsurl))};Id.prototype.t_=function(a){var b=k(this.g.indextextID);if(b){U(b,a)}};Id.prototype.gl=function(a,b){var c=k(this.g.zoomID),d=k(this.g.zoomTextID);if(b){a=false;c.src="img/zoom_ghosted.gif";c.title=""}else{c.src=a?"img/zoom_active.gif":"img/zoom_normal.gif";c.title=a?"Zoom out":"Zoom in"}d.style.display=
a?"":"none";c.className=b?"":"lhcl_fakelink";this.zoom=a};Id.prototype.CL=function(a){if(this.Z2||!this.C.bq())return;var b=this.jc,c=_album.id,d=_user.name,e=this.F.album;if(this.F&&e&&this.F.user){b=this.F.id;c=e.id;d=this.F.user.name}var f=["selectedphotos="+b,"optgt="+a,"uname="+d,"aid="+c,"noredir=true"];this.Hk=b;var g=_selectedPhotosPath+"&"+f.join("&");Ad(g,m(Id.prototype.ov,this),"POST")};Id.prototype.ov=function(a){if(this.C.Wc(a)||this.C.zd(a)){this.C.Yh();return}this.C.vf(this.Hk,true)};
Id.prototype.WA=function(a,b){if(b==0){this.mouseups++}else if(b==1||b==2&&this.mouseups>=2){this.C.Ye(a);this.mouseups=0}};var sv='<div><table class="lhcl_photonav"><tr><td width="50%"><table width="100%"><tr><td width="100%"><span class="lhcl_albumlink" ><a id="{albumlinkID}" href="{albumlink}">&laquo; {returnText}</a></span></td><td><div class="lhcl_photoArrowBox" id="{prevboxID}" style="background-image:url(img/left_ghosted.gif)"></div></td></tr></table></td><td><table width="100%" class="lhcl_editbuttons"><tr><td><div class="lhcl_photoArrowBox" id="{nextboxID}" style="background-image:url(img/right_ghosted.gif)"></div></td><td width="100%"></td><td class="lhcl_toolspace"><span id="{toolID}"></span></td><td><span><a class="lhcl_nounderline" id="{emailID}"><div class="lhcl_cbbox lhcl_cbox_disabled"><p class="lhcl_cbdesc"></p><p class="lhcl_cblink"><em><img src="img/share_icon.gif"  /> <span id="{emailID}_t">'+
Ml+'</span></em></p></div></a></span></td><td class="lhcl_toolspace"><span><img src="img/zoom_normal.gif" title="Zoom In" class="lhcl_fakelink"id="{zoomID}" onclick="_d(\'{zoomID}\')" /></span></td></tr></table></td></tr></table><div class="lhcl_zoomtext" id="{zoomTextID}" style="display:none">'+Fp+"</div></div>",cq='<a href="" id="{id}" onclick="return false"><img src="{src}" title="{alt}" onmouseup="_d(\'{id}\', 0); return false" onmousedown="_d(\'{id}\', 1); return false" ondblclick="_d(\'{id}\', 2); return false" /></a>',
tv='<div><table class="lhcl_photonav"><tr><td width="50%"><table width="100%"><tr><td width="100%"></td><td><div class="lhcl_photoArrowBox" id="{prevboxID}" style="background-image:url(img/left_ghosted.gif)"></div></td></tr></table></td><td><table width="100%" class="lhcl_editbuttons"><tr><td id="{lhui_indexbox}"><span><b id="{indextextID}">'+tf+'</b></span></td><td><div class="lhcl_photoArrowBox" id="{nextboxID}" style="background-image:url(img/right_ghosted.gif)"></div></td><td width="100%"></td><td class="lhcl_toolspace"><span id="{toolID}"></span></td><td><span><a class="lhcl_nounderline" id="{emailID}"><div class="lhcl_cbbox lhcl_cbox_disabled"><p class="lhcl_cbdesc"></p><p class="lhcl_cblink"><em><img src="img/share_icon.gif"  /> <span id="{emailID}_t">'+
Ml+'</span></em></p></div></a><span></td><td class="lhcl_toolspace"><span><img src="img/zoom_normal.gif" title="Zoom In" class="lhcl_fakelink"id="{zoomID}" onclick="_d(\'{zoomID}\')" /></span></td></tr></table></td></tr></table><div class="lhcl_zoomtext" id="{zoomTextID}" style="display:none">'+Fp+"</div></div>";function zc(a,b,c,d,e){this.C=a;this.qf=c?c:_photo;this.pI=e;this.tm=null;var f={lhui_albumtitle:Ae(_album.title),lhui_indexbox:r("indexbox"),lhui_infobox:r("infobox"),lhui_exifbox:r("exifbox"),lhui_downloadlink:r("download"),lhui_albumlink:r("lhid_viewalbum"),lhui_slideshowlink:r("slideshow"),lhui_togglelink:r("toggle"),lhui_links:r("links")};if(d){f.lhui_slideshow_link_markup=""}else{f.lhui_slideshow_link_markup=ja('<a href="#" id="{lhui_slideshowlink}" onclick="_d(\'hideSlideshow\');">Slideshow</a><br />',
f)}var g=this.pI?rv:qv;if(_features.newStrings){f.flash_str="You need Adobe&reg; Flash&reg; Player 7 or higher to watch videos."}else{f.flash_str=Dp}this.b=P(g,f);b.appendChild(this.b);this.s3=k(f.lhui_indexbox);this.SU=k(f.lhui_infobox);this.Sj=k(f.lhui_exifbox);this.yw=k(f.lhui_downloadlink);this.FB=k(f.lhui_albumlink);if(d){this.zJ=null}else{this.zJ=k(f.lhui_slideshowlink)}this.G5=k(f.lhui_togglelink);if(_features.cart&&Ca(_updateCartPath)&&(e||_album.prints)){this.Gj=u("span");k(f.lhui_links).appendChild(this.Gj);
this.cartMsgId=r("cartmsg");var h=P('<div id="{cartMsgId}" class="lhcl_output"></div>',this);k(f.lhui_links).appendChild(h);this.N4=m(this.mB,this,false);this.f2=m(this.mB,this,true);this.x2=m(this.HK,this);this.y2=m(this.IK,this);var i=Le("_cart1","");if(i.length){var j="/lh/listCart";if(!e){j+="?uname="+_user.name}oa.Fb(j,this.y2)}}this.OJ=f.lhui_togglelink;v(this.OJ,m(this.hM,this));this.lJ=false;var l=document.getElementById("hdf_profile");if(l){l.innerHTML+='<div id="debug_meta_rss"></div>'}if(_features.newStrings){cj.push(["flash",
"Flash Used"])}if(_features.geotagging){cj.push(["latitude","Latitude"],["longitude","Longitude"])}}zc.prototype.P=function(){if(this.h3)C(this.h3);if(this.b)C(this.b);if(this.OJ)F(this.OJ);for(var a in this)this[a]=null};zc.prototype.Xd=function(a){this.Z=a;var b=this.qf[a];if(!b){return}b.album=b.album||_album;if(!Ca(b.Z)){b.Z=a}this.Mk(b)};zc.prototype.LE=function(){return(this.Zb?this.Zb.album:null)||_album};zc.prototype.cS=function(){return this.Zb?this.Zb.user:_user};zc.prototype.Vr=function(){return this.b};
zc.prototype.Mk=function(a){this.Zb=a;if(_photo&&_photo.length){this.s3.innerHTML=Jl(a.Z+1,_photo.length)}this.wa(a.g||null);if(a.vsurl){this.yw.innerHTML="";k("lhid_flashMsg").style.display=Vh?"none":""}else{this.yw.href=a.s+"?imgdl=1";U(this.yw,Al);k("lhid_flashMsg").style.display="none"}s(this.yw,a.dl);var b=a.album;if(this.FB&&b){U(this.FB,Ql);this.FB.href=b.link}if(this.zJ){this.zJ.href=location.href.replace(/#/,"#s")}if(_features.cart&&this.Gj){this.vv(a,false)}};zc.prototype.wa=function(a){if(!a||
!a.exif){if(!this.tm){this.tm=P(Rl,{})}Sb(this.SU,this.tm);this.nB(null);return}var b=k("debug_meta_rss");if(b){b.innerHTML=ja('<a href="/lh/rssPhoto?uname={username}&amp;iid={id}&js=1">RSS</a><br />',{username:_user.name,id:a.id})}a.datestring=a.exif.time||a.date;var c=this.cS();a.username=c?c.name:tf;var d=this.LE();a.albumname=d?d.name:tf;a.sizestring=a.width+"&times;"+a.height+" pixels &#8211; "+(a.kbytes+"KB");this.SU.innerHTML=ja('<div class="lhcl_photoinfo">{datestring}<br />{sizestring}<br /></div>',
a);a.exif.title=a.title;if(a.lat&&a.lon){a.exif.latitude=a.lat;a.exif.longitude=a.lon}else{a.exif.latitude=null;a.exif.longitude=null}this.nB(a.exif)};zc.prototype.nB=function(a){if(a){if(a.exposure){var b=parseFloat(a.exposure);if(b&&b<=0.5)a.exposure="1/"+Math.round(1/b)}if(a.focallength){var c=parseFloat(a.focallength);if(c)a.focallength=Math.round(c*10)/10}if(a.flash){a.flash=a.flash=="true"?"Yes":"No"}if(_features.geotagging){var d=parseFloat(a.latitude),e=parseFloat(a.longitude);if(!isNaN(d*
e)){d=d.toFixed(6);e=e.toFixed(6);a.latitude=d<0?Up(-d):Jp(d);a.longitude=e<0?Xp(-e):Bp(e)}else{a.latitude=null;a.longitude=null}}}var f=[];for(var g=0;g<cj.length;g++){var h=cj[g],i=h[0],j=h[1],l="";if(a){l=a[i];if(!l||l=="0"||l=="0.0"){l="n/a"}else{if(h.length>=3)l=ja(h[2],{s:l});l="<em>"+Ae(l)+"</em>"}}f.push(j+": "+l)}var p='<div class="lhcl_exifbox">'+f.join("<br />")+"</div>";fc(this.Sj);this.Sj.innerHTML=p};zc.prototype.hM=function(){var a=this.Sj,b=this.G5;if(!(a&&b))return;if(this.lJ){a.className=
"lhcl_exifoff";b.innerHTML="more info";this.lJ=false}else{a.className="lhcl_photoinfo";b.innerHTML="less info";this.lJ=true}};zc.prototype.mB=function(a){this.QM=a;var b=this.Zb;this.Q4=(this.Z=b.Z);var c=["uname="+(b.user?b.user.name:_user.name),"iid="+b.id,"noredir=true"];if(!a){c.push("cartop=remove")}var d=Le("_rtok","");c.push("rtok="+d);oa.Fb(_updateCartPath,this.x2,c.join("&"))};zc.prototype.HK=function(a){if(this.C.Wc(a)){return}var b=false;if(a.text.indexOf("<id>1</id>")>=0){b=true}else if(this.C.zd(a)){return}this.Zb.inCart=
this.QM;if(this.Q4==this.Z){this.vv(this.Zb,true)}var c=k("lhid_cartDiv"),d=k("lhid_cartCount");if(c&&d){c.style.display="";var e=d.innerHTML?parseInt(d.innerHTML,10):0;if(!b){d.innerHTML=this.QM?e+1:e-1}}};zc.prototype.IK=function(a){if(this.C.Wc(a)){return}this.IN=eval("("+a.text+")");var b=this.Zb?this.Zb:this.qf[this.Z];if(b){this.vv(b,false)}};zc.prototype.oV=function(a){if(Ca(a.inCart)){return a.inCart}if(!this.IN){return false}var b=a.user?a.user.name:_user.name,c=this.IN[b];return c&&Xf(c,
a.id)>=0};zc.prototype.vv=function(a,b){var c=this.LE();if(c&&c.prints&&!a.vsurl){s(this.Gj,true);if(this.oV(a)){if(b){k(this.cartMsgId).innerHTML='<span>This photo has been added. <a href="/lh/viewCart" onclick="javascript:_setBackLink()" >View your order</a>.</span>'}else{k(this.cartMsgId).innerHTML=""}this.Gj.innerHTML='<img src="img/clearcart.gif"> <span class="lhcl_fakelink">Remove from order</span><br />';this.Gj.onclick=this.N4}else{this.Gj.innerHTML='<img src="img/order.gif"> <span class="lhcl_fakelink">Order Prints</span>';
this.Gj.onclick=this.f2;k(this.cartMsgId).innerHTML=""}}else{s(this.Gj,false);k(this.cartMsgId).innerHTML=""}};var cj=[["title","Filename"],["make","Camera"],["model","Model"],["iso","ISO"],["exposure","Exposure","{s} sec"],["fstop","Aperture","f/{s}"],["focallength","Focal Length","{s}mm"]],Rl='<div class="lhcl_photoinfo">'+tf+"<br />&nbsp;</div>",qv='<div class="lhcl_toolbox"><div class="lhcl_tools lhcl_hideoverflow"><div id="{lhui_indexbox}">&nbsp;</div><div class="lhcl_albumtitle">{lhui_albumtitle}</div><div id="{lhui_infobox}">'+
Rl+'</div><div class="lhcl_exifoff" id="{lhui_exifbox}"></div><div style="text-align:right"><span class="lhcl_toollink lhcl_fakelink" id="{lhui_togglelink}" onclick="_d(\'{lhui_togglelink}\')">more info</span></div><div class="lhcl_pseudo_hr"></div><div id="{lhui_links}"><a href="#" id="{lhui_downloadlink}">'+Al+'</a><br />{lhui_slideshow_link_markup}</div><div id="lhid_flashMsg" class="lhcl_output" style="display:none;"><span>{flash_str}</span><br /><br /><a href="http://www.macromedia.com/go/getflashplayer">'+
zl+"</a></div></div></div>",rv='<div class="lhcl_toolbox"><div class="lhcl_tools lhcl_hideoverflow"><a class="lhcl_albumtitle" id="lhid_main_albumtitle" href="#"><b>Album:  </b><span id="lhid_main_albumtitle_text">{lhui_albumtitle}</span></a><div id="{lhui_infobox}">'+Rl+'</div><div class="lhcl_exifoff" id="{lhui_exifbox}"></div><div style="text-align:right"><span class="lhcl_toollink lhcl_fakelink" id="{lhui_togglelink}" onclick="_d(\'{lhui_togglelink}\')">more info</span></div><div class="lhcl_pseudo_hr"></div><div id="{lhui_links}"><a href="#" id="{lhui_downloadlink}" style="display:block;">'+
Al+'</a>{lhui_slideshow_link_markup}<a href="#" id="{lhui_albumlink}" style="display:block;">'+Ql+'</a></div><div id="lhid_flashMsg" class="lhcl_output" style="display:none;"><span>'+Dp+'</span><br /><br /><a href="http://www.macromedia.com/go/getflashplayer">'+zl+"</a></div></div></div>";function ze(a,b){this.C=a;var c={lhui_albumFunc:r("SetAlbumCover"),lhui_snippetFunc:r("UpdateSnippet"),lhui_snippetId:r("SnippetPanel"),lhui_snippetCheckBoxId:r("SnippetCheckBox"),lhui_snippetTextBoxId:r("SnippetTextBox"),lhui_deleteFunc:r("DeletePhoto"),lhui_copyFunc:r("CopyPhoto"),lhui_moveFunc:r("MovePhoto"),lhui_outputId:r("output"),lhui_deleteId:r("delete")};this.g=c;if(!_album.isdefault){c.cover_html=ja("<a href=\"javascript:_d('{lhui_albumFunc}')\">Set as album cover</a><br />",c)}c.embed_html=
ja(wv,c);this.p=P(xv,c);b.appendChild(this.p);v(c.lhui_albumFunc,this.XA.bind(this,"BANNER"));v(c.lhui_snippetFunc,this.xv.bind(this));v(c.lhui_deleteFunc,this.XA.bind(this,"DELETE"));v(c.lhui_copyFunc,this.nL.bind(this));v(c.lhui_moveFunc,this.AL.bind(this));this.e2=this.wK.bind(this);this.jl=null;this.Hk=null;this.$O=k(this.g.lhui_deleteId)}ze.prototype.P=function(){if(this.p)C(this.p);var a=this.g;if(a){F(a.lhui_albumFunc);F(a.lhui_deleteFunc);F(a.lhui_copyFunc);F(a.lhui_moveFunc);F(a.lhui_snippetFunc)}for(var b in this)this[b]=
null};ze.prototype.Xd=function(a){var b=_photo[a];this.Gg(b)};ze.prototype.Gg=function(a){if(!a){return}var b=a.album||_album;this.jc=a.id;this.g.snippet={l:b.slideshowlink+"#"+this.jc,a:b.titleshort,al:b.link,u:a.s};if(a.vsurl){this.xv(fq)}else{this.xv(eq)}var c=this.$F;this.$F=!(!a.vsurl);if(this.$F){this.$O.innerHTML="Delete this video"}else{this.$O.innerHTML=yl}if(this.jl=="DELETE")if(c)this.hq("Video deleted.");else this.hq("Photo deleted.");else this.hq(null);this.jl=null};ze.prototype.hq=function(a){var b=
k(this.g.lhui_outputId);if(!b)return;if(a){b.innerHTML="<span>"+a+"</span>";b.style.display=""}else{b.style.display="none"}};ze.prototype.Pg=function(a){};ze.prototype.XA=function(a){if(!this.C.bq())return;var b=["selectedphotos="+this.jc,"noredir=true","optgt="+a];if(a=="DELETE"){var c;if(_album.isdefault){c="Are you sure you want to delete this photo? It will no longer appear on other sites if you delete it."}else if(_album.blogger){c=_features.newStrings?"Are you sure you want to delete this photo? It will no longer appear in your blog if you delete it. It may take up to 24 hours for photos to be removed.":
"Are you sure you want to delete this photo? It will no longer appear in your blog if you delete it."}else{c=this.$F?zp:yp}if(!confirm(c)){this.C.Yh();return}}this.jl=a;this.Hk=this.jc;var d=_selectedPhotosPath+"&uname="+_user.name+"&aid="+_album.id;oa.Fb(d,this.e2,b.join("&"))};ze.prototype.wK=function(a){if(this.C.Wc(a)||this.C.zd(a)){this.C.Yh();return}if(this.jl=="DELETE"){this.C.TK(this.Hk)}else if(this.jl=="BANNER"){this.C.Yh();this.hq("Album cover set.")}};ze.prototype.xv=function(a){var b=
k("lhid_embed");if(a==fq){s(b,false)}else{s(b,true);var c=k(this.g.lhui_snippetId),d;if(a==yv){d=true}else if(a==eq){d=false}else{d=c.style.display=="none"}s(c,d);k("lhid_zippy").src=d?"img/opentriangle.gif":"img/triangle.gif";var e=k(this.g.lhui_snippetCheckBoxId),f=this.g.snippet.u;b.className=d?"lhcl_embed_on":"lhcl_embed";if(d){k("lhid_link").value=this.g.snippet.l;var g="/s"+k("lhid_sizeSelect").value+"/$1";this.g.snippet.s=f.replace(/\/([^\/]*)$/,g);var h=e.checked?'<table style="width:auto;"><tr><td><a href="{l}"><img src="{s}" /></a></td></tr><tr><tr><td style="font-family:arial,sans-serif; font-size:11px; text-align:right">From <a href="{al}">{a}</a></td></tr></table>':
'<a href="{l}"><img src="{s}" /></a>',i=ja(h,this.g.snippet);k(this.g.lhui_snippetTextBoxId).value=i}else{e.checked=false}}};ze.prototype.nL=function(){Ac("hideVideo");LH_copyDialog([this.jc])};ze.prototype.AL=function(){if(!_album.blogger||confirm("Are you sure you want to move this photo? It will no longer appear in your blog if you move it.")){Ac("hideVideo");LH_moveDialog([this.jc])}};var yv=1,eq=-1,fq=-2,xv='<div class="lhcl_toolbox"><div class="lhcl_tools">{cover_html}<a href="javascript:_d(\'{lhui_copyFunc}\')">Copy to another album</a><br /><a href="javascript:_d(\'{lhui_moveFunc}\')">Move to another album</a><br /><div class="lhcl_pseudo_hr"></div>{embed_html}<a id="{lhui_deleteId}" href="javascript:_d(\'{lhui_deleteFunc}\')">'+
yl+'</a><div id="{lhui_outputId}" class="lhcl_output"></div></div>';var wv='<ul class="lhcl_albumcontrols"><li style="padding-top:0.2em;width:216px"><div id="lhid_embed" class="lhcl_embed"><span class="lhcl_fakelink" onclick="_d(\'{lhui_snippetFunc}\')">Link to this Photo</span> <img src="img/triangle.gif" class="hand" id="lhid_zippy" onclick="_d(\'{lhui_snippetFunc}\')"><div id="{lhui_snippetId}" class="lhcl_embedlinks" style="display:none;"><div id="lhid_snippetinfo" style="margin-top:0.2em;">Paste link in <b>email or IM</b><br/><input class="lhcl_embedtextbox" onclick="this.select()" id="lhid_link"></div><div class="lhcl_pseudo_hr_embed"></div><div style="margin-top: 0.4em;">HTML to <b>embed in website</b><input class="lhcl_embedtextbox" onclick="this.select()" type="text" id="{lhui_snippetTextBoxId}" /></div><div>Select size<select id="lhid_sizeSelect" onchange="_d(\'{lhui_snippetFunc}\', 1)"><option value="144">Thumbnail '+
uf(144)+'</option><option value="288">Small '+uf(288)+'</option><option value="400">Medium '+uf(400)+'</option><option value="800">Large '+uf(800)+'</option></select></div><div style="margin-top:0.3em">Show link to album <input id="{lhui_snippetCheckBoxId}" type="checkbox" style="margin:0;" onclick="_d(\'{lhui_snippetFunc}\', 1)"/></div></div></div></li></ul>';function oc(a,b,c,d){this.C=a;this.F=null;this.Yb=u("div");s(this.Yb,!d);b.appendChild(this.Yb);this.Wg=u("div");s(this.Wg,!d);b.appendChild(this.Wg);this.YN=r("comment");this.Dv=r("addcommentbox");this.q1=r("unauthcommentbox");this.MD=r("addcomment");this.tk=P(pv,{lhui_commentbox:this.YN,lhui_addcommentbox:this.Dv,lhui_unauthcommentbox:this.q1,signInStr:bq(_authuser),lhui_focuscomment:this.MD});s(this.tk,false);c.appendChild(this.tk);v(this.MD,m(this.aL,this));this.B4=m(this.JL,this);this.X2=m(this.SK,
this);this.kK=r("viewAll");v(this.kK,m(this.mM,this));this.cD=r("deleteCommentFunc");v(this.cD,m(this.RK,this));this.ND=r("focusFunc");v(this.ND,m(this.bL,this));this.Sv=_authuser.user}oc.prototype.show=function(a){s(this.tk,a);s(this.Yb,a);s(this.Wg,a)};oc.prototype.P=function(){this.Xh();if(this.Yb)C(this.Yb);if(this.Wg)C(this.Wg);if(this.tk)C(this.tk);F(this.MD);F(this.kK);F(this.cD);F(this.ND);for(var a in this)this[a]=null};oc.prototype.Xh=function(){this.Yb.innerHTML="&nbsp;";this.Wg.innerHTML=
"";if(this.Tm){oa.GA(this.Tm);this.Tm=0}if(this.Cr)F(this.Cr);if(this.Cu)F(this.Cu)};oc.prototype.GR=function(){return this.tk};oc.prototype.wv=function(a){this.F=a;this.wa(a.g)};oc.prototype.wa=function(a){this.jc=a.id;var b=a.comment;this.Yb.innerHTML="&nbsp;";if(b.length>0){var c=['<div style="width:99%"><table class="lhcl_comments">'],d=this.F?this.F.user:null,e=_authuser.name,f=d?d.name==e:_authuser.isOwner;for(var g=0;g<b.length;++g){var h=b[g];h.lhui_date=h.timestamp;h.lhcl_ownerclass=_authuser.name==
h.username?"lhcl_ownercomment":"";var i=bs(h.comment);i=i.replace(/\n\n+/g,"\n\n").replace(/\n/g,"<br />");h.lhui_comment=Ae(qq(i));if(h.link){h.lhui_linkstart='<a href="'+h.link+'">';h.lhui_linkend="</a>"}if(f||e==h.username){h.lhui_deletelink=ja('<span class="lhcl_fakelink" tabindex="0" onclick="_d(\'{lhui_func}\', \'{lhui_commentId}\')">delete</span>',{lhui_commentId:h.id,lhui_func:this.cD})}c.push(ja('<tr class="{lhcl_ownerclass}" ><td rowspan="2" class="lhcl_commentimg">{lhui_linkstart}<img src="{portrait}" />{lhui_linkend}</td><th width="100%">{lhui_linkstart}{nickname}{lhui_linkend}</th><th>{lhui_date}</th><th>{lhui_deletelink}</th></tr><tr><td colspan="3" class="lhcl_commenttext">{lhui_comment}</td></tr>',
h))}c.push("</table></div>");this.Yb.innerHTML=c.join("")}var j=k(this.YN);if(b.length){var h=b[b.length-1];h.lhui_date=h.timestamp;h.lhui_viewallbox=r("viewall");Sb(j,P('<div class="lhcl_lastcomment"><table><tr><td width="100%"><b>Latest comment</b></td><td id="{lhui_viewallbox}"></td></tr></table><div class="lhcl_pseudo_hr"></div><div>&#8220;{lhui_comment}&#8221;</div><div class="lhcl_commentauthor">{nickname} &#8211; {lhui_date}</div><div class="lhcl_pseudo_hr"></div></div>',h));j.style.display=
"";if(b.length>1){var l=k(h.lhui_viewallbox);if(l){l.appendChild(P('<a class="lhcl_toollink" href="javascript:_d(\'{lhui_viewallfunc}\')">view all</a>',{lhui_viewallfunc:this.kK}))}}}else{j.innerHTML="";j.style.display="none"}this.tk.style.display="";k(this.Dv).style.display=this.Sv?"":"none";k(this.q1).style.display=this.Sv?"none":"";this.lL(b.length)};oc.prototype.lL=function(a){fc(this.Wg);if(!this.Sv){this.signInBoxId=r("signInBox");var b=ja(ov,{lhui_signInBoxId:this.signInBoxId,signInStr:bq(_authuser)})}else{if(this.c6||
a>=100){k(this.Dv).style.display="none";this.Wg.innerHTML="Commenting is closed for this photo.";return}else{k(this.Dv).style.display=""}this.Cr=r("commentForm");this.Lp=r("commentText");this.Cu=r("commentLength");this.w5=r("submitButton");var b=ja('<form class="lhcl_commentform" id="{lhui_formId}" action="javascript:_d(\'{lhui_formId}\')"><div class="lhcl_title">Add a comment</div><textarea id="{lhui_id}"onfocus="_d(\'{lhui_focusFunc}\', this)" onkeydown="_d(\'{lhui_sizeId}\', this)" onkeyup="_d(\'{lhui_sizeId}\', this)"></textarea><table><tr><td width="100%"><div id="{lhui_sizeId}">&nbsp;</div></td><td><input type="submit" id="{lhui_submitId}" value="Post Comment"  /></td></tr></table></form>',
{lhui_formId:this.Cr,lhui_id:this.Lp,lhui_sizeId:this.Cu,lhui_submitId:this.w5,lhui_focusFunc:this.ND})}this.Wg.innerHTML=b;if(this.Sv){q(k(this.Lp),X,function(c){c.target.blur();c.target.focus()})}this.BP=false;v(this.Cr,m(this.IL,this));v(this.Cu,m(this.VL,this))};oc.prototype.IL=function(){var a=k(this.Cr),b=k(this.Lp);if(!(b&&a))return;var c=Va(b.value);if(!c){alert("Please enter a comment first.");return}if(c.length>512){alert("Your comment seems to be a bit long. Please, do try to be more efficient with your words.");
return}var d=["uname="+qb(this.F?this.F.user.name:_user.name),"aname="+qb(this.F?this.F.album.name:_album.name),"iid="+this.jc,"AddComment="+qb(c),"noredir=true"];for(var e=0;e<a.elements.length;e++){var f=a.elements[e];f.disabled=true;f.blur()}this.Hk=this.jc;this.C2=c;oa.Fb(_addCommentPath,this.B4,d.join("&"))};oc.prototype.JL=function(a){if(this.C.Wc(a)||this.C.zd(a)){var b=k(this.Lp);if(b)b.value=this.C2;return}this.C.vf(this.Hk,true)};oc.prototype.RK=function(a){if(!confirm("Are you sure you want to delete this comment?"))return;
var b=["uname="+qb(this.F?this.F.user.name:_user.name),"mode=delete","cid_"+a+"=on","iid="+this.jc,"noredir=true"];this.Hk=this.jc;oa.Fb(_selectedCommentsPath,this.X2,b.join("&"))};oc.prototype.SK=function(a){this.C.vf(this.Hk,true)};oc.prototype.VL=function(a){var b=k(this.Cu);if(!(b&&a))return;if(a.value.length>480){var c=a.value.length,d=u("span"),e=Tq("Your comment is "+c+" characters long. (512 maximum)");d.appendChild(e);if(c>512)d.style.color="red";Sb(b,d)}else{b.innerHTML=""}};oc.prototype.mM=
function(){window.scrollTo(0,Gh(this.Yb)-50)};oc.prototype.aL=function(){window.scrollTo(0,Gh(this.Wg)-50);if(this.Lp){var a=k(this.Lp);if(a&&!a.disabled)a.focus()}};oc.prototype.bL=function(a){if(this.BP)return;a.value="";a.style.color="#000";this.BP=true};var bq=function(a){var b=new B(Hc(_loginUrl));b.$("continue",location.href);var c=new B(Hc(_activateUrl)),d=new B(c.Za("continue"));d.$("continue",location.href);c.$("continue",d.toString());if(_features.newStrings){if(typeof a.user=="undefined"&&
typeof a.isLoggedIn!="undefined"){return'<a href="'+c.toString()+'">Activate</a> your free Picasa Web Albums account.'}else{return'<a href="'+b.toString()+'">Sign in</a> if you have a Picasa Web Albums account, or '+('<a href="'+c.toString()+'">')+"sign up</a> for a free account."}}else{return'<a href="'+b.toString()+'">Sign in</a> if you have a Google account, or '+('<a href="'+c.toString()+'">')+"sign up</a> for a free account."}},pv='<div class="lhcl_toolbox"><div class="lhcl_tools"><div id="{lhui_commentbox}"></div><div id="{lhui_addcommentbox}"><a href="javascript:_d(\'{lhui_focuscomment}\')">'+
ul+'</a></div><div id="{lhui_unauthcommentbox}"><b>'+ul+"</b><div>{signInStr}</div></div></div></div>",ov='<div id="{lhui_signInBoxId}" class="lhcl_toolbox lhcl_photoCommentSignIn"><div class="lhcl_tools"><b>'+ul+"</b><div>{signInStr}</div></div></div>";function td(a,b,c){this.C=a;this.tb=u("div");this.tb.className="lhcl_caption";b.appendChild(this.tb);this.Gn=u("div");c.appendChild(this.Gn);this.tD=r("edit_caption");v(this.tD,m(this.UL,this));this.YO=r("lhui_deleteCaption")}td.prototype.Bl=null;td.prototype.P=function(){if(this.Bl){ua(this.Bl)}F(this.tD);if(this.Gn)C(this.Gn);if(this.tb)C(this.tb);for(var a in this)this[a]=null};td.prototype.Xh=function(){if(this.Bl){ua(this.Bl);this.Bl=null}this.tb.innerHTML="&nbsp;";this.Gn.innerHTML="";if(this.uc&&
this.uc.id){F(this.uc.id);F(this.uc.cancelID);F(this.uc.sizeID)}};td.prototype.Xd=function(a){this.jc=a.id;var b=a.c||"",c=Ae(qq(b));c=c.replace(/  /g,"&nbsp; ").replace(/\n/g,"<br />");var d={caption:c},e=false;if(!a.user){e=_authuser.isOwner}if(e){d.id=this.tD;d.text=b?"edit":"Add a Caption";var f=[ja('&nbsp;<span id="{id}" class="lhcl_fakelink" onclick="_d(\'{id}\')">{text}</span>',d)];if(b&&_features.newStrings){f.push(ja('&nbsp;<span id="{lhui_deleteId}" class="lhcl_fakelink" style="vertical-align: bottom;"><img src="img/trash.gif" alt="{lhui_title}" title="{lhui_title}"/></span>',
{lhui_deleteId:this.YO,lhui_title:"Delete caption"}))}d.addtext=f.join("");this.uc={caption:b}}this.Xh();this.tb.innerHTML=ja("<b>{caption}</b>{addtext}",d);this.tb.style.display="";if(e&&b&&_features.newStrings){this.Bl=q(k(this.YO),ta,this.QK,false,this)}};td.prototype.QK=function(){if(confirm("Are you sure you want to delete this caption?")){this.YA("")}};td.prototype.UL=function(){this.tb.style.display="none";this.uc={caption:this.uc.caption,id:r("lhid_capform"),saveID:r("lhid_capsave"),sizeID:r("lhid_capsize"),
cancelID:r("lhid_capcancel")};this.Gn.appendChild(P(nv,this.uc));this.fB();v(this.uc.id,m(this.iM,this));v(this.uc.cancelID,m(this.IA,this));v(this.uc.sizeID,m(this.fB,this));var a=k(this.uc.id);a.focus();zw(a,a.value.length);q(a,X,function(b){b.target.blur();b.target.focus()})};td.prototype.IA=function(){this.tb.style.display="";this.Gn.innerHTML=""};td.prototype.fB=function(a){var b=k(this.uc.sizeID),c=k(this.uc.id),d=k(this.uc.saveID);if(!(b&&c&&d))return;if(c.value.length>992){var e=c.value.length,
f=1024,g=u("span");g.appendChild(Tq("Your caption is "+e+" characters long. ("+f+" maximum)"));if(e>f){g.style.color="red"}Sb(b,g)}else{b.innerHTML=""}};td.prototype.iM=function(){var a=k(this.uc.id);if(!a)return;var b=Va(a.value);if(b==this.uc.caption){this.IA();return}if(b.length>1024){alert(_features.newStrings?xp(1024):wp);return}k(this.uc.saveID).disabled=true;k(this.uc.cancelID).disabled=true;this.YA(b)};td.prototype.YA=function(a){var b=["description="+qb(a),"noredir=true"],c=this.jc,d=m(this.GK,
this,c,a),e=_updatePhotoPath+"&uname="+_user.name+"&aname="+_album.name+"&iid="+c;oa.Fb(e,d,b.join("&"))};td.prototype.GK=function(a,b,c){if(!this.C)return;if(this.C.Wc(c)||this.C.zd(c)){k(this.uc.saveID).disabled=false;k(this.uc.cancelID).disabled=false;return}this.C.yn(a,ca(b))};var nv='<div class="lhcl_captionform"><div id="{sizeID}" style="color:#999"></div><textarea name="description" id="{id}" rows="0" comments="0" onkeydown="_d(\'{sizeID}\')" onkeyup="_d(\'{sizeID}\')">{caption}</textarea><div><input type="button" value="Save Caption"class="lhcl_default" id="{saveID}" onclick="_d(\'{id}\')" /><input type="button" value="'+
Cg+'" id="{cancelID}" onclick="_d(\'{cancelID}\')"/></div></div>';function ll(){ka.fc(this);v("ClearCart",m(this.KK,this))}ll.prototype.P=function(){ka.gc(this);F("ClearCart")};ll.prototype.KK=function(){if(confirm("Are you sure you want to clear your order?")){var a=k("lhid_clearform"),b=new B(_updateCartPath);b.$("cartop","clear");b.$("rtok",Le("_rtok",""));a.action=b.toString();a.submit()}};function dA(a,b,c){var d="uname="+a+"&iid="+c+"&cartop=remove&noredir=true",e=Le("_rtok","");d+="&rtok="+e;oa.Fb(_updateCartPath,null,d);var f=k("lhid_cart_"+c);if(f)C(f);
cartPhotoCount--;k("lhid_cartcount").innerHTML=cartPhotoCount;cartAlbumCount[b]--;if(cartAlbumCount[b]<=0){var g=k("lhid_cartalbum_"+b);if(g)C(g)}if(cartPhotoCount<=0){k("lhid_emptycart").style.display="";k("lhid_instructions3_photos").style.display="";k("lhid_nonemptycart").style.display="none";k("lhid_instructions3_none").style.display="none";k("lhid_instructions3").style.display="none";k("lhid_instructions").className="lhcl_cartinstructions lhcl_instep1"}}function nA(a){var b=Le("printProvider");
if(!b){return true}Ug(pl,"1");var c="/lh/sendToProvider?provider="+b;if(a){window.open(c,"selectProviderWnd");var d='<a href="javascript:void(0)" onclick="return window._sendToProvider(false);">';k("msg").innerHTML="Your order has been opened in a new window.  If a new window didn't open, click "+d+"here</a>";k("lhid_feedback").style.display=""}else{window.location=c}return false}function Gu(a,b){var c=k("lhid_orderform"),d=Le("_rtok",""),e=new B(c.action);e.$("rtok",d);e.$("uname",a);e.$("aid",b);
c.action=e.toString();c.submit()}function Du(){if($h){return}$h=true;oa.Fb("/lh/selectProvider",Cu)}function Cu(a){if(a.status==200&&a.text.length==0){alert("We're sorry.  Picasa Web Albums does not currently work with any photo processing providers that ship to your country.");$h=false;return}else if(a.status>=400||a.text.length==0){alert("Failed to retrieve list of Print Providers.  Please try again later.");$h=false;return}Ac("hideVideo");new zg(a.text)}function zg(a){ka.fc(this);var b={lhui_ok_func:r("func"),
lhui_cancel_func:r("func")};this.g=b;this.hc=u("div");this.hc.className="lhcl_cover";document.body.appendChild(this.hc);this.oc();this.le=m(this.oc,this);Yd(window,"resize",this.le);window.scrollTo(0,0);Ph();this.p=P('<div class="lhcl_dialog" style="width:400px; top:100px"><div class="lhcl_dialog_body"><form id="lhid_chooseProviderForm"><div class="lhcl_selectProviderTitle">Please select a print provider from the list below:</div><div style="padding:0 25px 15px 0;">'+a+Bu,this.g);document.body.insertBefore(this.p,
document.body.firstChild);var c=Le("printProvider");if(!c){document.getElementById("lhid_accept_provider").disabled=true}v(this.g.lhui_ok_func,m(this.vK,this));v(this.g.lhui_cancel_func,m(this.HA,this));this.Bk=Jd(this,this.uj);Yd(document,"keydown",this.Bk)}zg.prototype.uj=function(a){if(a.keyCode==27){this.HA()}};zg.prototype.P=function(){ka.gc(this);if(this.g){F(this.g.lhui_ok_func);F(this.g.lhui_cancel_func)}ue(document,"keydown",this.Bk);ue(window,"resize",this.le);$h=false;for(var a in this)this[a]=
null};zg.prototype.kb=function(){C(this.p);C(this.hc);Ac("restoreVideo");this.P()};zg.prototype.oc=function(){var a=Math.max(document.body.offsetHeight,document.body.scrollHeight);a=Math.max(a,document.body.clientHeight);a=Math.max(a,document.documentElement.clientHeight);this.hc.style.height=a+"px"};zg.prototype.HA=function(){this.kb()};function Io(a){Ug("printProvider",a,2592000);var b=u("img");b.width=150;b.height=50;b.src="/lh/providerLogo/"+a;var c=k("lhid_currentprovider");Sb(c,b);k("lhid_hasprovider").style.display=
"";k("lhid_noprovider").style.display="none";c=k("lhid_instructions3");if(c){k("lhid_instructions3_none").style.display="none";if(cartPhotoCount>0){c.style.display="";k("lhid_instructions").className="lhcl_cartinstructions lhcl_instep3"}}}zg.prototype.vK=function(){var a=k("lhid_chooseProviderForm").provider;if(typeof a.length=="undefined"){Io(a.value)}else{for(var b=0;b<a.length;b++){if(a[b].checked){Io(a[b].value);break}}}this.kb()};function ai(){var a=0,b="";for(var c=1;c<=4;c++){var d=Le("_cart"+
c);if(d){b+=d}}var e=b.split("@");if(e.length>=2){var f=e[1].match(/\:/g);if(f){a=f.length}}if(a>0){k("lhid_cartDiv").style.display="";k("lhid_cartCount").innerHTML=a}}var $h=false,pl="_lh_cartRedirect",Bu='</div><table style="width:100%"><tr><td style="width:50%; text-align:right;"><input type="button" value="'+Cg+'" onclick="_d(\'{lhui_cancel_func}\')"/></td><td><input id="lhid_accept_provider" type="button" value="OK" onclick="_d(\'{lhui_ok_func}\')"/></td></tr></table></form></div></div>';function T(a){ka.fc(this);this.F=_photo;this.Ja=_album;var b=k("lhid_main"),c=k("lhid_tools");this.HG=k("lhid_login");this.wJ=k("lhid_signup");this.bd=new Id(this,b);this.Sa=u("div");this.Sa.className="lhcl_photobox";b.appendChild(this.Sa);this.p=u("div");this.Sa.appendChild(this.p);this.Cb=new zc(this,c);this.tb=new td(this,this.Sa,b);this.za=null;if(_features.tags){this.za=new ec(this,c)}this.pe=_authuser;if(this.pe.isOwner){this.Uk=new ze(this,c)}else{var d=u("div");d.className="lhcl_toolbox";
c.appendChild(d);var e=u("div");e.className="lhcl_tools";d.appendChild(e);this.Tl=new Pe(e);this.Br=d}if(_features.geotagging){this.qi=k("lhid_geodiv");this.vm=k("lhid_map");if(this.qi&&this.vm){if(_features.showgeo){this.n=new Y(this.vm,2);var f=k("lhid_geolinks");fc(f);if(this.pe.isOwner){this.Bj=G("span",{tabindex:0,"class":"lhcl_fakelink"});f.appendChild(this.Bj);f.appendChild(u("br"))}this.cv=G("a",{href:this.Ja.slideshowlink+"#map"},"View album map");s(this.cv,false);f.appendChild(this.cv)}this.Xk(false);
this.Al=null}this.Zn=null}this.Yb=new oc(this,b,c);var g=new Qb(this,this.p,this.F,false,false,512);g.Ag=this.EL.bind(this);g.onload=this.sn.bind(this);g.Tf=this.dq.bind(this);g.onstopped=this.FL.bind(this);g.onresize=this.oc.bind(this);this.ia=g;this.db=new hc(document);q(this.db,"key",this.Zc,false,this);this.R2=this.MK.bind(this);this.Z=-1;this.Vi=xj(this.F,"id");this.QV={};this.wa(a);v("hideSlideshow",this.tj.bind(this));v("hideVideo",this.aq.bind(this));v("restoreVideo",this.jq.bind(this))}T.prototype.P=
function(){ka.gc(this);if(this.Ud)window.clearTimeout(this.Ud);F("hideSlideshow");F("hideVideo");F("restoreVideo");if(this.Cb)this.Cb.P();if(this.Uk)this.Uk.P();if(this.tb)this.tb.P();if(this.Yb)this.Yb.P();if(this.bd)this.bd.P();if(this.ia)this.ia.P();if(this.za)this.za.P();if(this.p)C(this.p);if(this.Sa)C(this.Sa);if(this.Tl)this.Tl.close();if(this.Br)C(this.Br);L(this.db,"key",this.Zc,false,this);this.db.e();if(this.If){this.If.e()}if(this.Wj){ua(this.Wj)}if(this.Zn){this.Zn.e()}for(var a in this)this[a]=
null};T.prototype.kb=function(){Ph();if(this.Tm){oa.GA(this.Tm)}this.P()};T.prototype.wa=function(a){var b=a[1],c=this.Vi[b];if(c==undefined){location.replace(location.href.replace(/#.*/,"#unknown-"+b));return}this.Z=c;this.title=" - "+this.F[c].t;var d=this.F,e=c>0?d[c-1].id:null,f=c<d.length-1?d[c+1].id:null;this.bd.lB(e,f);if(this.Tl)this.Tl.jn(_user.name,_album.id,b,!(!this.F[c].vsurl));this.Cb.Xd(c);if(this.za)this.za.Xh();this.ia.$p(c);if(this.HG){var g=new B(_loginUrl);g.$("continue",location.href);
this.HG.href=g.toString()}if(this.wJ){var h=new B(_signUpUrl);h.$("continue",location.href);this.wJ.href=h.toString()}};T.prototype.ze=function(){if(!this.ia||!this.ia.ze()){return null}return this.ia.ze().ze()};T.prototype.YQ=function(){return this.F[this.Z]};T.prototype.Ye=function(a,b){var c=this.Z+a,d=this.F.length;if(b){c=gk(c,d)}if(c<0||c>=d){return false}location=location.href.replace(/#.*/,"#"+this.F[c].id);return true};T.prototype.wf=function(){this.Ye(1)};T.prototype.xf=function(){this.Ye(-1)};
T.prototype.qj=function(){location=_album.link};T.prototype.rj=function(a){return jh()-Gh(this.Sa.firstChild)-50};T.prototype.dq=function(){};T.prototype.EL=function(){var a=this.ia.Wh();this.Yh();this.bd.Xd(a);this.tb.Xd(this.F[a]);if(this.Uk)this.Uk.Xd(a);this.pj()};T.prototype.sn=function(){};T.prototype.FL=function(){this.vf(this.F[this.ia.Wh()].id)};T.prototype.oc=function(){this.pj()};T.prototype.pj=function(){var a=this.ia.ze(),b=this.ia.Wh();if(!a||a.nb()||a.DE()>=1||!this.F[b].dl){this.bd.gl(false,
true);if(a)a.un(false)}else{this.bd.gl(a.getZoom(),false)}};T.prototype.vf=function(a,b){var c=this.Vi[a],d=this.F[c],e=(new Date).getTime(),f=this.QV[a];if(!b&&f&&e-f<60000)e=f;this.QV[a]=e;var g="/lh/rssPhoto?uname="+_user.name+"&iid="+d.id+"&v="+e+"&js=1";this.Tm=oa.Fb(g,this.R2)};T.prototype.TK=function(a){var b=this.ia.Wh(),c=this.Vi[a];this.F.splice(c,1);this.Vi=xj(this.F,"id");this.ia.ZB();Ph(true);if(b==c){if(this.F.length==0){location.replace(_album.link)}else if(this.F.length==c){location.replace(location.href.replace(/#.*$/,
"#"+this.F[c-1].id))}else{location.replace(location.href.replace(/#.*$/,"#"+this.F[c].id))}}else{var d=this.F[b].id;location.replace(location.href.replace(/#.*$/,"#"+d));this.wa(["",d])}};T.prototype.MK=function(a){if(this.Wc(a)){this.Yh();return}var b=oa.KA(a);if(!b){alert(Ap);location.replace(_album.link);return}var c=this.Vi[b.id];if(c<0)return;var d=this.ia.Wh(),e=this.F[c];if(e.v!=b.version){e.v=b.version;e.w=parseInt(b.width,10);e.h=parseInt(b.height,10);e.s=b.imgsrc;if(c==d){this.ia.$A()}return}if(c==
d){this.Cb.wa(b);if(this.za){this.XC=b.tags;this.G1()}this.Yb.wa(b);if(_features.geotagging&&this.pe.isOwner&&this.Ja.hasHiddenGeo&&b.exifgeo){this.Zn=new se;this.Ja.hashiddengeo=false}if(_features.showgeo&&this.n){this.qB(b,d)}}};T.prototype.G1=function(){if(!ra(this.XC)){this.XC=[]}this.za.wa(this.XC,this.YQ().id)};T.prototype.qB=function(a,b){if(_features.showgeo&&this.n){var c=this.F[b];if(b==this.Z){if(c.lat&&c.lon){this.Xk(true);this.n.Gg(c)}else{this.Xk(false)}this.jM(a,b)}}};T.prototype.Xk=
function(a){if(_features.geotagging){a=_features.showgeo&&a;var b=this.pe.isOwner?this.vm:this.qi;s(b,a)}};T.prototype.vr=function(a){if(_features.geotagging){var b=Math.max(a,this.F.length-a-1);for(var c=1;c<=b;c++){var d=a-c,e;if(d>=0){e=this.F[d];if(e.lat&&e.lon){return this.Zp(e)}}d=a+c;if(d<this.F.length){e=this.F[d];if(e.lat&&e.lon){return this.Zp(e)}}}}return null};T.prototype.Zp=function(a){if(_features.geotagging){if(a.lat&&a.lon){var b={lat:a.lat,lon:a.lon,address:a.location||""};if(a.bb){b.bb=
{ll:{lat:a.bb.ll.lat,lon:a.bb.ll.lon},ur:{lat:a.bb.ur.lat,lon:a.bb.ur.lon},latSpan:a.bb.latSpan,lonSpan:a.bb.lonSpan}}return b}}return null};T.prototype.jM=function(a,b){if(_features.showgeo){var c=this.F[this.Z],d=c.lat&&c.lon;if(this.pe.isOwner){var e;if(d){e="Edit location"}else{e="Add location"}U(this.Bj,e);this.Bj.onclick=this.yK.bind(this,a)}s(this.cv,d)}};T.prototype.yK=function(a,b){if(this.pe.isOwner){var c=this.F[this.Z],d=this.Al,e;if(!(c.lat&&c.lon)&&!d){d=this.vr(this.Z);if(!d&&this.Ja.lat&&
this.Ja.lon){d=this.Zp(this.Ja);e=this.Ja.location}}if(this.nb()){this.aq()}if(this.If){this.If.e();this.If=null}if(this.Wj){ua(this.Wj);this.Wj=null}this.If=new jf(c,this.xK.bind(this,a),e,d?[d]:null);if(this.nb()){this.Wj=q(this.If,qk,this.jq.bind(this))}}};T.prototype.xK=function(a){if(this.pe.isOwner){var b=this.Vi[a.id],c=this.F[b];if(c.lat&&c.lon){this.Al=this.Zp(c);this.Ja.hasGeotaggedPhotos=true}else{this.Al=null}if(b==this.Z){a.lat=c.lat;a.lon=c.lon;this.Cb.wa(a);this.qB(a,b)}}};T.prototype.xn=
function(){var a=this.ia.ze(),b=a.DE(),c=a.getZoom();if(c){this.bd.gl(false);a.un(false)}else if(!a.nb()&&b<1){this.bd.gl(true);a.un(true)}};T.prototype.yn=function(a,b){var c=this.Vi[a],d=this.F[c];if(!d)return;d.c=b;this.tb.Xd(d)};T.prototype.bq=function(){if(this.p1)return false;this.p1=true;this.bd.Pg(true);if(this.Uk)this.Uk.Pg(true);return true};T.prototype.Yh=function(){this.p1=false;this.bd.Pg(false);if(this.Uk)this.Uk.Pg(false)};T.prototype.Wc=function(a){var b=a.status;if(b>=400){var c;
if(b==403){c=Cl}else if(b==404){c=Hl}else if(b>=500){c=di+"\n"+ih(b)}else{c=Nl+"\n"+ih(b)}alert(c);return true}return false};T.prototype.zd=function(a){var b=a.text;if(a.target&&a.target.Qc){b=a.target.Qc()}if(b.indexOf("success")<0){var c=b.replace(/\<[^>]*\>/g,"");alert(c);return true}return false};T.prototype.Zc=function(a){if(vj(a)){return}if(this.If&&this.If.Oa()){return}switch(a.keyCode){case 27:case 85:this.qj();a.preventDefault();break;case 74:case 37:this.xf();a.preventDefault();break;case 75:case 39:this.wf();
a.preventDefault();break}};T.prototype.nb=function(){if(!this.ia)return false;var a=this.ia.ze();if(!a)return false;return a.nb()};T.prototype.ev=function(){if(this.nb())return false;var a=this.ia.Wh();if(this.F[a].br)return false;return true};T.prototype.tj=function(){if(this.ia.D)this.ia.D.sj()};T.prototype.aq=function(){if(this.nb()&&this.ia.D&&this.ia.D.ig){this.ia.D.ig.style.visibility="hidden"}};T.prototype.jq=function(){if(this.nb()&&this.ia.D&&this.ia.D.ig){this.ia.D.ig.style.visibility=""}};
var vj=function(a){if(a.altKey||a.ctrlKey||a.metaKey){return true}var b=a.target.nodeName.toLowerCase();if(b=="button"||b=="input"||b=="select"||b=="textarea"){return true}return false};function kq(a){this.name=a}kq.prototype.toString=function(){return this.name};var Gv=function(a){var b=[];if(a){for(var c=0;c<a.length;++c){b.push(a[c].name)}}return b},Fv=function(a){var b=[];if(a){for(var c=0;c<a.length;++c){var d=new kq(a[c]);b.push(d)}}return b},nq=function(a){var b=[];if(a){for(var c=0;c<a.length;++c){var d=a[c].name;if(d.indexOf(" ")<0){b.push(d)}else{b.push('"'+d+'"')}}}return b.join(" ")},lq=function(a){var b=[];if(a){for(var c=0;c<a.length;++c){var d=a[c];if(d.indexOf(" ")<
0){b.push(d)}else{b.push('"'+d+'"')}}}return b.join(" ")};var Hv=function(a){a=ik(a);var b=a.match(/[^,'" ][^, ]*|\"[^"]*(?:\"|$)|\'[^']*(?:\'|$)/g),c={},d=[];if(b){for(var e=0;e<b.length;e++){var f=mq(mq(ik(b[e]),"'"),'"');if(f.length&&f!="'"&&f!='"'&&!c[f]){d.push(f);c[f]=1}}}return d},mq=function(a,b){if(a.charAt(0)==b&&a.charAt(a.length-1)==b){if(a.length>1){return a.substring(1,a.length-1)}else{return""}}return a};var Fk=function(a,b,c,d){this.h4=a;this.L1=b;this.RX=c;this.Mn=null;this.A4=d};Fk.prototype.hK=function(a){var b=a.currentTarget;if(this.Mn.name==b.name){this.RX.src=b.icon}};Fk.prototype.K1=function(a){if(this.Mn==a){return}this.Mn=a;U(this.h4,Hc(a.nickname));this.RX.src=a.icon;this.L1.href="/"+this.Mn.name+"/";U(this.L1,"View "+Hc(this.Mn.nickname)+"'s gallery page");this.A4.href="/"+this.Mn.name+"/";if(!a.loaded){a.addEventListener(Kk,m(Fk.prototype.hK,this));a.uk()}};if(_features.fr){}function ec(a,b,c){this.pe=_authuser;this.F=null;this.pI=c;this.searchCorpus="G";this.W={pnlListID:r("lhid_listPanel"),pnlAddID:r("lhid_addPanel"),pnlInputID:r("lhid_inputPanel"),pnlAlterID:r("lhid_alterPanel"),btnAddID:r("lhid_addButton"),btnDeleteID:r("lhid_deleteButton"),btnSaveID:r("lhid_saveButton"),btnCancelID:r("lhid_cancelButton"),txtNewTagsID:r("lhid_newTagsText"),uname:qb(_user.name),aname:qb(_album.name)};this.p=P(vv,this.W);b.appendChild(this.p);this.DH=k(this.W.pnlListID);
this.LX=k(this.W.pnlAddID);this.NX=k(this.W.pnlInputID);this.MX=k(this.W.pnlAlterID);this.Vu=k(this.W.txtNewTagsID);this.a6=k(this.W.btnAddID);this.t2=k(this.W.btnSaveID);this.s2=k(this.W.btnCancelID);v(this.W.btnAddID,m(this.eL,this));v(this.W.btnDeleteID,m(this.gL,this));v(this.W.btnSaveID,m(this.QA,this));v(this.W.btnCancelID,m(this.fL,this));this.X6=q(this.Vu,Ld,this.$L,true,this);this.C=a;this.za=[];this.jc=0;this.vn(false);if(!this.$o()){this.MX.style.display="none"}}ec.prototype.$L=function(a){if(a.keyCode==
13){this.jG=true;this.QA();a.preventDefault()}};ec.prototype.$o=function(){if(this.F){return this.F.uname==this.pe.name}return this.pe.isOwner};ec.prototype.P=function(){if(this.p)C(this.p);if(this.W.btnAddID){F(this.W.btnAddID)}if(this.W.btnDeleteID){F(this.W.btnDeleteID)}if(this.W.btnSaveID){F(this.W.btnSaveID)}if(this.W.btnCancelID){F(this.W.btnCancelID)}for(var a in this){this[a]=null}};ec.prototype.Vr=function(){return this.p};ec.prototype.Xh=function(){this.vn(false);Sb(this.DH,P(dq,{}))};ec.prototype.wa=
function(a,b,c){this.za=[];if(!a){if(!this.$o()){this.Xh()}else{Sb(this.DH,P("<div></div>",{}))}}else{this.jc=b;this.kM(a,Nf,c);this.p.style.display=""}if(a&&a.length||this.$o()){this.p.style.display="";s(this.MX,this.$o())}else{this.p.style.display="none"}};ec.prototype.kM=function(a,b,c){var d=[];if(a&&a.length){this.za=a;var e=_user.name;if(this.F&&this.F.user){e=this.F.user.name}var f;this.searchCorpus=b||(e?"F":"G");if(this.pI){f='<li><div class="lhcl_tagname"><a href="{url}"  title="{name}">{displayName}</a></div></li>'}else if(this.$o()){f=
'<li><a href="{url}" title="{name}">{displayName}</a><a class="lhcl_tagdelete" href="javascript:_d(\'{func}\', \'{tagid}\')"> &nbsp;&nbsp;</a></li>';this.searchCorpus="S";e=this.pe.name}else{f='<li><div class="lhcl_tagname"><img src="img/tag.png"> <a href="{url}" title="{name}">{displayName}</a></div></li>'}var g=0;if(this.C&&this.C.Dk&&this.C.Dk.f6){g=1}var h=["psc="+this.searchCorpus,"filter="+g,"uname="+e],i="&"+h.join("&");for(var j=0;j<a.length;++j){var l=a[j];if(!Ca(l.tagId)){l.tagId=r("lhcl_tag_");
l.name=Hc(l.name)}var p=l.name,t=p.length<=30?ca(p):ca(p.substring(0,30))+"&#8230;",w={tagid:l.tagId,aname:qb(p),name:ca(p),displayName:t,username:e,searchParams:i,func:this.W.btnDeleteID,aid:_album.id},y=ja(_features.tagviewer?"/lh/view?uname={username}&tags={aname}":"/lh/searchbrowse?q={aname}{searchParams}",w);w.url=y;d.push(ja(f,w))}}else{if(_features.newStrings){d.push('<div class="lhcl_disabledText">No tags</div>')}}var Z='<ul class="lhcl_taglist">'+d.join("")+"</ul>";this.DH.innerHTML=Z};ec.prototype.vn=
function(a){this.jG=false;this.S6=a;if(a){this.NX.style.display="";this.LX.style.display="none";this.Vu.value="";this.Vu.focus()}else{this.LX.style.display="";this.NX.style.display="none"}};ec.prototype.zK=function(a){var b=Va(a);if(b.length<=0){return}var c=Gv(this.za),d=Hv(b),e=lq(d).length,f=lq(c).length,g=e+f;if(g>4096){var h=_features.newStrings?Fl:Ip;alert(h(4096,g));return}for(var i=0;i<d.length;++i){Go(c,d[i])}this.cB(Fv(c))};ec.prototype.UK=function(a){var b=[];for(var c=0;c<this.za.length;++c){var d=
this.za[c];if(d.tagId!=a){b.push(d)}}this.cB(b)};ec.prototype.lM=function(a){if(a.length>100){alert(Gp(100,a.length));return false}if(a.length==this.za.length){var b=0;for(var c=0;c<a.length;++c){if(this.za[c]==a[c]){++b}else{break}}if(b==this.za.length){return false}}for(var c=0;c<a.length;++c){var d=a[c].name;if(d.length>128){alert(Hp(128,d.length));return false}}var e=nq(a).length;if(e>4096){var f=_features.newStrings?Fl:Ip;alert(f(4096,e));return false}return true};ec.prototype.cB=function(a){if(!this.lM(a)){return}k(this.W.btnSaveID).disabled=
true;k(this.W.btnCancelID).disabled=true;var b=["tags="+qb(nq(a)),"noredir=true"].join("&"),c=this.jc,d=m(this.QL,this,c,a),e=_updatePhotoPath+"&uname="+_user.name+"&aname="+_album.name+"&iid="+c;oa.Fb(e,d,b)};ec.prototype.eL=function(){this.vn(true)};ec.prototype.fL=function(){this.vn(false)};ec.prototype.QA=function(){this.zK(this.Vu.value)};ec.prototype.gL=function(a){this.UK(a)};ec.prototype.QL=function(a,b,c){if(!this.C){return}this.t2.disabled=false;this.s2.disabled=false;if(this.C.Wc(c)||this.C.zd(c)){return}if(this.jG){this.Vu.value=
""}else{this.vn(false)}this.jG=false;this.C.vf(this.jc,true)};var dq='<div class="lhcl_photoinfo">Loading&#8230;<br />&nbsp;</div>',uv='<div class="lhcl_addtaghelp">'+Qp+"<br>"+Pp+"</div>",vv='<div id="lhcl_tagbox" class="lhcl_toolbox" style="display: none;"><div class="lhcl_tools lhcl_hideoverflow"><div id="{lhui_tagsHeaderPanel}" style="margin: 0 0 1em 0"><div><b>Tags</b></div></div><div id="{pnlListID}">'+dq+'</div><div id="{pnlAlterID}"><div class="lhcl_pseudo_hr"></div><div id="{pnlAddID}"><div style="text-align:right"><span class="lhcl_fakelink" id="{btnAddID}" onclick="_d(\'{btnAddID}\')">Add Tag</span></div></div><div id="{pnlInputID}"><div class="lhcl_addtagform"><table class="lhcl_addtag"><tr><td width="100%"><input class="lhcl_taginputfield" type="text" id="{txtNewTagsID}" maxlength="4096" /></td></tr><tr><td class="lhcl_addtagbuttoncell"><input id="{btnSaveID}" onclick="_d(\'{btnSaveID}\')" type="button" value="Add" /><input id="{btnCancelID}" onclick="_d(\'{btnCancelID}\')" type="button" value="Cancel" /></td></tr></table></div>'+
uv+"</div></div></div></div>";var Ki=function(a,b){Ga.call(this,"lhcl_menu");this.cl=1000;this.oe=a;this.gt=b;this.u6=false;this.BI(this.oe,3);ua(this.Ql);this.Ql=q(this.gt,X,m(this.Hm,this));q(this.gt,"dblclick",this.RO,false,this)};Ki.k(Ga);Ki.prototype.Hm=function(a){Ga.prototype.Hm.call(this);Au(this.b);a.preventDefault()};Ki.prototype.Di=function(){qu();Ga.prototype.Di.call(this)};Ki.prototype.RO=function(){if(this.Tb){this.ma(false)}};var Li=function(a){Jc.call(this,Hc(a));this.zf=false};Li.k(Jc);Li.prototype.Rd=function(a){this.zf=
a;if(this.b){this.Pp()}};Li.prototype.Pp=function(){if(!this.b){return}if(this.zf){ga(this.b,"lhcl_active")}else{Oa(this.b,"lhcl_active")}};Li.prototype.Df=function(){if(!this.Aa){throw Error("MenuItem is not attached to a menu");}this.b=G("div",{className:this.Aa.uE()},this.tb,this.sf?G("span",null,"\u25b6"):null);this.b.onselectstart=function(){return false};return this.b};var re=function(a){ma.call(this);var b=a.query,c=null;this.la=[];for(var d in a){if("primary"==d||"query"==d){continue}this.la.push(a[d])}this.Lc=
k("lhid_searchbox");this.M6=k("lhid_searchform");this.Ty=k("lhid_querytext");this.Zk=!Me(Va(b));this.L6=k("lhid_searchbox_context");this.X4=k("lhid_psc");this.Y4=k("lhid_crowdfilter");this.gt=k("lhid_btn");var e=k("lhid_searchanchor");if(!e){e=k("lhid_searchanchor_on")}this.Aa=new Ki(e,this.gt);this.Lc.value=Hc(b);this.Ty.value=this.Zk?this.Lc.value:"";var f=null;for(var g=0;g<this.la.length;++g){var d=this.la[g],h=d.name;d.name=h;var i=null;if(h=="-"){i=new Jn}else{i=new Li(h);i.va(d)}this.Aa.add(i);
if(d.is_primary){i.Rd(true);this.sb=i;c=d}i.Pp();if("G"==d.search_corpus){f=i}}this.m(this.Aa,On,this.b0,true,this);this.m(this.Lc,X,this.Jn,true,this);this.m(this.Lc,Cf,this.Jn,true,this);this.m(this.Lc,ag,this.Tx,true,this);this.m(this.Lc,ce,this.Tx,true,this);this.m(this.Lc,uh,this.Tx,true,this);this.m(this.Lc,"blur",this.XJ,true,this);this.m(document,"selectstart",this.tZ,true,this);if(f){this.va(f)}else{var j=c?c.search_corpus:"G",l=c?c.name:bi;this.me(j,l)}};re.k(ma);re.prototype.e=function(){if(this.da())return;
ma.prototype.e.call(this)};re.prototype.tZ=function(a){if(this.Aa.Tb){a.preventDefault()}};re.prototype.b0=function(a){this.va(a.item)};re.prototype.Jn=function(){this.Lc.focus();if(!this.Zk){this.Lc.value="";this.Ty.value="";Oa(this.Lc,"lhcl_nosearch")}};re.prototype.Tx=function(a){var b=Va(this.Lc.value),c=Me(b);this.Ty.value="";if(this.Zk&&c){this.Zk=false}else{this.Zk=!c;if(this.Zk){this.Ty.value=b}}};re.prototype.XJ=function(){if(!this.Zk){ga(this.Lc,"lhcl_nosearch");var a=this.sb.H().name;if(a){a=
Hc(a);this.Lc.value=a}}else{Oa(this.Lc,"lhcl_nosearch")}};re.prototype.va=function(a){if(this.sb){this.sb.Rd(false)}a.Rd(true);this.sb=a;var b=this.sb.H();this.me(b.search_corpus,b.name)};re.prototype.me=function(a,b){this.U5=a;var c="Now searching in "+b;this.gt.title=c;if(!this.Zk){this.Lc.value=Hc(b)}this.X4.value=a;this.Y4.value="G"==a?1:0;this.XJ()};function fa(a,b,c,d,e){bc(a,"element passed to DP_DatePicker constructor is null");this.p=a;this.Na=c?c:this.p.id+"_";this.La=d?d:"DP_";bj[this.Na]=this;if(e){Rf(e,dd,"opt_today is not an ICAL_Date");this.Tk=e}else{this.Tk=ku()}this.Hl=ed(this.Tk.N,this.Tk.M,1);this.xr=0;this.f3=!(!b);this.gK=false;this.cY=null;this.$W=null;this.Qq={};this.lm={};this.ys={};this.Bb={};this.Rl=null;this.Rs=null;this.BZ=new Bg(this);this.b4=new Bg(this);this.j5=false;this.Tb=false;this.Pe=new Tf;this.Cm=0;this.kw=null;
this.TO=null;this.h5=true;this.LH=null;this.PC=null;this.$G=null;this.bp();this.o5=false;this.P_(0);this.SZ(0);this.OF=false;this.Er=null;this.nd=null;this.li=null;this.fp=null;this.ep=null;this.CV=null;this.As=false;this.R1=null;this.Q1=null;this.R3=new Bg(this)}fa.prototype.SZ=function(a,b){if(a!=0&&a!=1&&a!=7&&a!=30&&a!=-1&&!(b instanceof Function)){throw new Error("Invalid click mode: "+a);}this.B2=a;this.UN=b};fa.prototype.$_=function(a){if(a!=this.gK){this.gK=a;this.bp()}};fa.prototype.SQ=function(){return this.B2};
fa.prototype.P_=function(a){if(!(0<=a&&a<=3)){Wh("Invalid selection mode: "+a)}if(this.au==a){return}this.au=a;this.sl()};fa.prototype.px=function(){return this.au};fa.prototype.show=function(){this.Tb=true;this.bp()};fa.prototype.hide=function(){this.p.innerHTML="";this.Tb=false};fa.prototype.Oa=function(){return this.Tb};fa.prototype.sx=function(){return Tc(this.Na+"tbl")};fa.prototype.ju=function(a){bc(0<=a&&a<=6,a+" not a valid first day of week");this.xr=a;this.bp()};fa.prototype.bm=function(){return this.xr};
fa.prototype.M_=function(a){Rf(a,Function);this.LH=a};fa.prototype.UZ=function(a){Rf(a,Function);this.PC=a};fa.prototype.z_=function(a){Rf(a,Function);this.$G=a};fa.prototype.PR=function(){return Ie(He).MONTHS};fa.prototype.bp=function(){if(!this.Tb){return}var a=this.Na,b,c=this.Hl.M,d=this.Hl.N,e=Ie(He).WEEKDAYS.length,f=[c==1?12:c-1,c,c==12?1:c+1],g=ed(this.Tk.N,this.Tk.M,1),h=Ok(d,c-1,1).xd(),i=Ok(d,c+1,1).xd(),j=this.PR();if(this.LH){f[0]=this.LH(h)}else{var l=h.ua()>=g.ua()?"&laquo;":"&lsaquo;&nbsp;";
f[0]=l+j[f[0]]}if(this.PC){f[1]=this.PC(this.Hl)}else{f[1]=j[f[1]]+" "+d}if(this.$G){f[2]=this.$G(i)}else{var p=i.ua()-g.ua()<=0?"&raquo;":"&nbsp;&rsaquo;";f[2]=j[f[2]]+p}var t=Uf(d,c),w=Uf(h.N,h.M),y=new Array(49),Z=this.Hl.$Q()-this.xr;if(Z<0)Z+=7;if(t<30||Z<5)Z+=7;for(var M=0;M<Z;++M){y[M]=ed(h.N,h.M,w-Z+M+1)}for(var M=Z,I=0;I<t;++M){y[M]=ed(d,c,++I)}for(var M=Z+t,I=0;M<y.length;++M){y[M]=ed(i.N,i.M,++I)}this.R1=y[0];this.Q1=y[y.length-1];var Ab=[],Gd=this.f3?[2,3,2]:[1,5,1];Ab.push('<table cols=7 cellspacing="0" cellpadding="3" id="',
a,'tbl"',' class="',this.La,'monthtable" ',' style="-moz-user-select:none; cursor:pointer;">','<tr class="',this.La,'heading" id="',a,'header">',"<td colspan=",Gd[0]," unselectable=on",' onmousedown="'+$k(bu)+"(",Tl(this.Na),')"',' id="',a,'mhl" class="',this.La,'prev">',f[0],"</td>","<td colspan=",Gd[1],' unselectable="on"',' id="',a,'mhc" class="',this.La,'cur">',f[1],"</td>","<td colspan=",Gd[2],' unselectable="on"',' onmousedown="'+$k(au)+"(",Tl(this.Na),')"',' id="',a,'mhr" class="',this.La,
'next">',f[2],"</td>","</tr>");if(this.gK){Ab.push('<tr class="',this.La,'days" id="',a,'dow">');var Ue=Ie(He).NARROWWEEKDAYS;for(var M=0;M<Ue.length;++M){Ab.push('<td unselectable="on"',' class="',this.La,'dayh" id="',a,"day_",M,'">',Ue[(M+this.xr)%7],"</td>")}Ab.push("</tr>")}var eh=(7-this.xr)%7,hl=(eh+6)%7;this.Qq={};var b=null,fd=null,fh=$k($t);for(var M=0,I=-1;M<7;++M){Ab.push('<tr id="',a,"week_",M,'">');for(var Rc=0;Rc<Ie(He).WEEKDAYS.length;++Rc){++I;var rf=this.Pe.contains(y[I]);fd=[];if(M==
0)fd.push(this.La+"day_top");if(Rc==0)fd.push(this.La+"day_left");else if(Rc==6)fd.push(this.La+"day_right");fd.push(this.La+"week"+(Rc==eh||Rc==hl?"end":"day")+(rf?"_selected":""));if(I<Z||I>=Z+t){fd.push(this.La+"offmonth");if(y[I].date<=7){fd.push(this.La+"month_top");if(y[I].date==1&&Rc!=0){fd.push(this.La+"month_left")}}}else{fd.push(this.La+"onmonth");if(y[I].date<=7){fd.push(this.La+"month_top");if(y[I].date==1&&Rc!=0){fd.push(this.La+"month_left")}}if(y[I].date==this.Tk.date&&c==this.Tk.M&&
d==this.Tk.N){fd.push(this.La+"today"+(rf?"_selected":""))}}var gh="";if(this.TO){var hj=this.TO(y[I]);if(hj){gh=' style="'+hj+'"'}}Ab.push('<td id="',a,"day_",M,"_",Rc,'"',' class="',fd.join(" "),'"',gh,' onclick="',fh,'(this)"',' unselectable="on">',y[I].date,"</td>")}Ab.push("</tr>")}if(this.j5){Ab.push('<tr class="',this.La,'months">','<td colspan="7" id="',a,'sel"></td></tr>')}Ab.push("</table>");this.p.innerHTML=Ab.join("");this.Rl=Tc(a+"day_0_0");this.Rs=Tc(a+"day_6_6");var b=this.Rl,xg=b.parentNode,
Yh=null,fp=null,I=-1,il=-1;while(xg!=null){++il;if(il==7)break;var gp=-1;while(b!=null){++I;++gp;var jl=a+"day_"+il+"_"+gp;this.Bb[jl]=y[I];this.Qq[y[I].toString()]=b;this.ys[jl]=Yh;if(Yh)this.lm[fp]=b;Yh=b;fp=jl;b=b.nextSibling}xg=xg.nextSibling;if(xg!=null){b=xg.firstChild}}this.Cm=7;if(!this.h5){var ou=Tc(a+"week_4"),hp=Tc(a+"week_5"),kl=Tc(a+"week_6");if(this.Bb[a+"day_4_0"].M!=c){ou.style.display="none";hp.style.display="none";kl.style.display="none";this.Cm=4}else if(this.Bb[a+"day_5_0"].M!=
c){hp.style.display="none";kl.style.display="none";this.Cm=5}else if(this.Bb[a+"day_6_0"].M!=c){kl.style.display="none";this.Cm=6}}this.cY=h;this.$W=i;if(this.kw){this.kw.call(null,this)}this.HM()};fa.prototype.refresh=function(){if(this.kw){this.kw.call(null,this)}};fa.prototype.NM=function(a){return this.BZ.add(a)};fa.prototype.sl=function(a){a=arguments.length===0||a;var b=this.Pe.Iv();for(var c=0;c<b.length;++c){var d=this.Qq[b[c].toString()];this.bj(d,false)}this.Pe.clear();if(!this.As){this.MI(null);
this.uz(null)}if(a)this.Tj()};fa.prototype.aC=function(a){if(this.UN){this.UN.call(null,a);return}var b=Tc(a),c=this.Pe;switch(this.au){case 1:var d=this.SQ();if(d==0)break;if(d!=1&&(d!=-1||!c.contains(this.Bb[a]))){var e=this.Bb[b.id],f;switch(d){case -1:if(c.getSize()>7&&this.Ns()){var g=b.id.substr(b.id.length-3,1);e=this.Bb[this.Na+"day_"+g+"_0"]}f=c.getSize()-1;break;case 7:var g=b.id.substr(b.id.length-3,1);e=this.Bb[this.Na+"day_"+g+"_0"];f=6;break;case 30:e=this.Bb[b.id];e=ed(e.N,e.M,1);var h=
Si(e);f=Uf(e.N,e.M)-1;break;default:Wh("Invalid click mode: "+d)}bc(typeof f!="undefined","duration should have been defined");var h=Si(e);h.date+=f;var i=h.xd();this.Ig(e,i);return}bc(d==1||d==-1&&c.contains(this.Bb[a]),"not a case for single date selection");this.sl(false);case 0:if(c.getSize()>0){var j=c.Iv()[0];c.remove(j);var l=this.Qq[j.toString()];if(l)this.bj(l,false)}c.add(this.Bb[b.id]);this.bj(b);this.Tj(this.Bb[b.id]);break;case 2:break;case 3:default:break}};fa.prototype.MI=function(a){this.nd=
a;this.fp=a?this.Bb[a.id]:null};fa.prototype.uz=function(a){this.li=a;this.ep=a?this.Bb[a.id]:null};fa.prototype.OU=function(){return this.As};fa.prototype.Cc=function(a,b){this.sl(false);this.As=true;this.MI(this.mr(a));var c=this.Bb[this.nd.id];this.Pe.add(c);this.bj(this.nd);this.Ig(c);this.uz(this.nd)};fa.prototype.$n=function(a,b,c){this.As=false;this.li=this.mr(a);if(this.Ns()){this.Tj(this.fp,this.ep,false);return}var d,e;if(this.Bb[this.li.id].ua()<this.Bb[this.nd.id].ua()){d=this.Bb[this.li.id];
e=this.Bb[this.nd.id]}else{d=this.Bb[this.nd.id];e=this.Bb[this.li.id]}this.Tj(d,e,false)};fa.prototype.Lf=function(a,b,c,d){this.CV=Mo(a);if(this.au!=1||this.OF)return;this.OF=true;var e=this;window.setTimeout(function(){try{if(e.As){e.dQ.call(e,b,c,d)}}finally{e.OF=false}},50)};fa.prototype.Ns=function(){return this.o5};fa.prototype.dQ=function(a,b,c){var d=this.CV,e=this.mr(d);if(e===this.li)return;var f=this.li;this.uz(e);bc(f!=e);var g=this.Bb,h=g[f.id].ua()<g[e.id].ua(),i=g[f.id].ua()<g[this.nd.id].ua(),
j=g[e.id].ua()<g[this.nd.id].ua(),l=g[this.nd.id].ua()<g[e.id].ua(),p=g[this.nd.id].ua()<g[f.id].ua(),t,w,y,Z,M=j?this.li:this.nd,I=j?this.nd:this.li;if(this.Ns()){var Ab=bp(g[I.id],g[M.id]);if(Ab>=7){var Gd,Ue;Gd=parseInt(M.id.charAt(M.id.length-3),10);Ue=parseInt(I.id.charAt(I.id.length-3),10);M=Tc(this.Na+"day_"+Gd+"_0");I=Tc(this.Na+"day_"+Ue+"_6")}this.Nk(this.Rl,M,false);this.Nk(I,this.Rs,false);this.Nk(M,I,true);this.fp=g[M.id];this.ep=g[I.id]}else{if(h){if(i){w=j?this.ys[e.id]:this.ys[this.nd.id];
this.Nk(f,w,false)}if(l){t=p?this.lm[f.id]:this.lm[this.nd.id];this.Nk(t,e,true)}}else{if(p){t=l?this.lm[e.id]:this.lm[this.nd.id];this.Nk(t,f,false)}if(j){w=j?this.ys[this.nd.id]:this.ys[f.id];this.Nk(e,w,true)}}}y=g[M.id];Z=g[I.id];this.Tj(y,Z,true)};fa.prototype.Nk=function(a,b,c){bc(a);bc(b);Rf(c,Boolean);var d=false;while(a){if(c){d=this.Pe.add(this.Bb[a.id])}else{d=this.Pe.remove(this.Bb[a.id])}if(d){this.bj(a,c)}if(a.id===b.id)break;a=this.lm[a.id];bc(a,"did not find endCell: "+b.id)}};var Vo=
{4:"day_3_6",5:"day_4_6",6:"day_5_6",7:"day_6_6"};fa.prototype.cN=function(a,b){if(!this.Er)return;if(b){a.x-=this.Er.x;a.y-=this.Er.y}else{a.x+=this.Er.x;a.y+=this.Er.y}};fa.prototype.mr=function(a){var b=Wd(this.Rl),c=this.qS(),d=of(a);this.cN(d);var e=7,f=this.KD(c.x,b.w,e,d.x),g=this.KD(c.y,b.h,this.Cm,d.y);return Tc(this.Na+"day_"+g+"_"+f)};fa.prototype.KD=function(a,b,c,d){if(d<a)return 0;var e=Math.floor((d-a)/b);return e>=c?c-1:e};fa.prototype.qS=function(){var a=this.Na,b=this.Cm,c=Wd(this.Rl),
d=Wd(Tc(a+Vo[b]));return new vf(c.x,c.y,d.x+d.w-c.x,d.y+d.h-c.y,c.coordinateFrame)};fa.prototype.Tj=function(a,b,c){var d={};d.startDate=a;d.endDate=b||a;d.OU=!(!c);d.mode=this.px();this.BZ.fireEvent(d)};fa.prototype.JB=function(a){if(a instanceof dd)return a;if(a instanceof Tb){return ed(a.N,a.M,a.date)}else{bc(false,"Invalid arg: "+a)}};fa.prototype.Ig=function(a,b,c){var d=this.px();c=c!==false;if(a)a=this.JB(a);if(b)b=this.JB(b);if(a)this.jJ(a);if(!a||d==3){this.sl(c);return}if(d==0){this.sl(false);
var e=this.Qq[a.toString()];this.Pe.add(a);this.bj(e);if(c)this.Tj(a)}else if(d==1){if(!b)b=a;var f=bp(b,a),g=false;if(this.Ns()&&f>=7){var h=fl(a)+7,i=fl(b)+7;h=(h-this.bm())%7;i=(i-this.bm())%7;var j;j=Ok(a.N,a.M,a.date-h);a=j.xd();j=Ok(b.N,b.M,b.date+(6-i));b=j.xd();g=this.jJ(a)}if(g){this.sl(false)}var e=this.Rl;this.fp=a;this.ep=b;var l=this.Rs,p=a.ua(),t=b.ua();for(;e;e=this.lm[e.id]){var w=this.Bb[e.id],y=this.Pe.contains(w),Z=w.ua()>=p&&w.ua()<=t;if(y!=Z){if(Z){this.Pe.add(w);this.bj(e)}else{this.Pe.remove(w);
this.bj(e,false)}}if(e===l)break}if(!e){l=this.Rs;var j=Si(this.Bb[this.Rs.id]),M=null;do{j.date+=1;M=j.xd();this.Pe.add(M)}while(!M.equals(b))}if(c)this.Tj(a,b)}};fa.prototype.Lz=function(a,b){if(this.Hl.M==a.M&&this.Hl.N==a.N)return false;b=arguments.length==1||b;this.Hl=ed(a.N,a.M,1);this.bp();if(b)this.b4.fireEvent();return true};fa.prototype.jJ=function(a,b){if(a.ua()>=this.R1.ua()&&a.ua()<=this.Q1.ua()){return false}return this.Lz(a,b)};fa.prototype.getSelection=function(){switch(this.px()){case 0:if(this.Pe.getSize()){return this.Pe.Iv()[0]}else{return null}case 1:var a=
this.fp?this.fp:null,b=this.ep?this.ep:null;if(!a||!b)return null;return[a,b];case 2:return null;case 3:default:return null}};fa.prototype.bj=function(a,b){if(!a)return;if(!Xh(b))b=true;var c=[],d=[],e=" "+a.className+" ",f=" "+this.La;if(b){if(-1!=e.indexOf(f+"today ")){c.push(f+"today ");d.push(f+"today_selected ")}if(-1!=e.indexOf(f+"weekday ")){c.push(f+"weekday ");d.push(f+"weekday_selected ")}else if(-1!=e.indexOf(f+"weekend ")){c.push(f+"weekend ");d.push(f+"weekend_selected ")}}else{if(-1!=
e.indexOf(f+"today_selected ")){d.push(f+"today ");c.push(f+"today_selected ")}if(-1!=e.indexOf(f+"weekday_selected ")){d.push(f+"weekday ");c.push(f+"weekday_selected ")}else if(-1!=e.indexOf(f+"weekend_selected ")){d.push(f+"weekend ");c.push(f+"weekend_selected ")}}for(var g=0;g<c.length;++g){e=e.replace(c[g],d[g])}if(c.length!=0){a.className=e}};var bj={};function bu(a){var b=bj[a];return b.Lz(b.cY)}function au(a){var b=bj[a];return b.Lz(b.$W)}function $t(a){var b=a.id,c=b.match(/(.*)day_\d+_\d+/),
d=bj[c[1]];return d.aC(b)}fa.prototype.HM=function(){if(this.I3===true)return;this.I3=true;var a=this.Na,b=this,c=this.p;Zt(function(d){if(b.au==1&&d===c){var e=new cd(d);e.escapedStartPoint=false;e.Cc=function(f,g){var h=of(f),i=Wd(b.Rl),j=Wd(Tc(a+Vo[b.Cm]));if(h.x<i.x||h.x>=j.x+j.w||h.y<i.y||h.y>=j.y+j.h)return false;this.startPoint=h.ha();this.startEvent=f;var l=Tc(a+"lasso");if(!l){l=document.createElement("div");l.id=a+"lasso";l.style.position="absolute";l.style.display="none";document.body.appendChild(l)}lb=
5;Xa=3;A=l;return true};e.Lf=function(f,g,h,i){if(!this.escapedStartPoint){var j=cu(this.startPoint,of(f));if(j>5){this.escapedStartPoint=true;b.Cc.call(b,this.startEvent,g)}else{return true}}b.Lf.apply(b,arguments);return true};e.$n=function(f,g,h){if(this.escapedStartPoint){b.$n.apply(b,arguments)}else{if(this.startPoint){var i=b.mr(this.startEvent).id;b.aC.call(b,i)}}return true};return e}else{return undefined}})};fa.prototype.log=function(){this.R3.fireEvent(arguments)};fa.prototype.Pn=function(a){};
function Tf(){this.Mj={};this.wb=0}Tf.prototype.getSize=function(){return this.wb};Tf.prototype.add=function(a){var b=this.wA(a);if(b in this.Mj)return false;this.Mj[b]=a.xd();++this.wb;return true};Tf.prototype.remove=function(a){var b=this.wA(a);if(!(b in this.Mj))return false;delete this.Mj[b];--this.wb;return true};Tf.prototype.clear=function(a){this.Mj={};this.wb=0};Tf.prototype.contains=function(a){var b=this.wA(a);return b in this.Mj};Tf.prototype.Iv=function(){var a=new Array(this.getSize()),
b=-1;for(var c in this.Mj)a[++b]=this.Mj[c];return a};Tf.prototype.wA=function(a){bc(a instanceof dd||a instanceof Tb,"expected a date or datetime: "+a);return a.toString().substr(0,9)};function Bg(a){this.J4=a;this.vh=[]}Bg.prototype.add=function(a){Rf(a,Function);if(!a)return false;for(var b=0;b<this.vh.length;++b){if(a===this.vh[b])return false}this.vh.push(a);return true};Bg.prototype.remove=function(a){if(!a)return false;for(var b=0;b<this.vh.length;++b){if(a===this.vh[b]){this.vh.splice(b,1);
return true}}return false};Bg.prototype.fireEvent=function(a){for(var b=0;b<this.vh.length;++b){this.vh[b].apply(this.J4,arguments)}};Bg.prototype.getSize=function(){return this.vh.length};function tl(a){this.Tc=a;this.Z=0;this.lb=null}tl.prototype.nU=function(){return this.Z<this.Tc.getSize()};tl.prototype.next=function(){if(this.nU()){this.lb=this.Tc.vh[this.Z++]}else{this.lb=null}return this.lb};tl.prototype.remove=function(){if(!this.lb)throw new Error("no current element!");this.Tc.remove(this.lb);
this.lb=null;--this.Z};function Sa(a,b,c){ka.fc(this);this.Qa=a;var d={body_id:r("dlg"),toggle_id:r("toggle"),form_id:r("form"),submit_id:r("input"),cancel_id:r("input"),album_id:r("input"),title_id:r("input"),desc_id:r("input"),location_id:r("input"),dayselect:r("select"),monthselect:r("select"),yearselect:r("select"),albumlist:r("list"),choosefunc:r("func"),createfunc:r("func"),selectfunc:r("func"),onsubmit:r("func"),oncancel:r("func"),title:"Untitled Album",description:"",location:"",publicChecked:"checked",privateChecked:"",
dateChecked:"",uname:_user.name};if(_features.geotagging){d.lat_id=r("input");d.lon_id=r("input");d.latSpan_id=r("input");d.lonSpan_id=r("input");d.removeGeo_id=r("input");d.spin_id=r("img");d.results_id=r("div");d.map_id=r("map");d.lhui_geoTable=r("table");d.lhui_showLocation_id=r("input");d.lhui_locationChecked="checked";d.geocodefunc=r("func")}switch(a){case 5:d.header="Edit album information";d.action=_editAlbumPath;d.dialog="updateAlbumDialog";d.redir="SAME_ALBUM";d.id=_album.id;d.title=_album.title;
d.description=_album.description;d.location=_album.location;d.publicChecked=_album.unlisted?"":"checked";d.privateChecked=_album.unlisted?"checked":"";d.dateChecked=_album.updatedate?"checked":"";if(_features.geotagging){if(_album.location&&(!_album.lat||!_album.lon)){d.lhui_locationChecked=""}d.lat=_album.lat;d.lon=_album.lon;if(_album.bb){d.latSpan=_album.bb.latSpan;d.lonSpan=_album.bb.lonSpan}}break;case 3:d.header="Copying items to album: "+b.length;d.action=_copyOrMovePath;d.dialog="CopyOrMovePhotosDialog";
d.selected=b.join(",");d.photoop="copy";d.uname=_user.name;break;case 4:d.header="Moving items to album: "+b.length;d.action=_copyOrMovePath;d.dialog="CopyOrMovePhotosDialog";d.selected=b.join(",");d.photoop="move";break;case 0:d.header="Create a new album";d.action=_createAlbumPath;d.dialog="NewOrExistingDialog";d.dest="new";break;case 2:d.header="Upload Photos: Create Album";d.action=_createAlbumPath;d.dialog="NewOrExistingDialog";d.redir="upload";d.dest="new";break;case 1:default:d.header="Upload Photos: Create or Select Album";
d.action=_createAlbumPath;d.dialog="NewOrExistingDialog";d.redir="upload";d.dest="new";break}if(a==5||a==0||a==2)this.MH=true;this.Ja=_album;this.g=d;this.n6=b;this.Ak=c;this.Ga=-1;this.hc=u("div");this.hc.className="lhcl_cover";document.body.appendChild(this.hc);this.oc();this.le=m(this.oc,this);Yd(window,"resize",this.le);window.scrollTo(0,0);Ph();Ac("hideVideo");this.p=P(uu,this.g);document.body.insertBefore(this.p,document.body.firstChild);v(this.g.oncancel,m(this.kb,this));v(this.g.onsubmit,
m(this.GL,this));v(this.g.choosefunc,m(this.UA,this));v(this.g.createfunc,m(this.lv,this));v(this.g.selectfunc,m(this.fq,this));if(_features.geotagging){v(this.g.geocodefunc,m(this.QD,this));if(this.g.geotag){this.g.geotag.e();this.g.geotag=null}}this.Bk=Jd(this,this.uj);Yd(document,"keydown",this.Bk);if(a==1)this.UA();else this.lv()}Sa.prototype.P=function(){ka.gc(this);if(this.g){F(this.g.oncancel);F(this.g.onsubmit);F(this.g.choosefunc);F(this.g.createfunc);F(this.g.selectfunc);if(_features.geotagging){F(this.g.geocodefunc);
if(this.g.geotag){this.g.geotag.e()}if(this.XV){ua(this.XV)}}}ue(document,"keydown",this.Bk);ue(window,"resize",this.le);for(var a in this)this[a]=null};Sa.prototype.kb=function(){if(this.p)C(this.p);if(this.hc)C(this.hc);if(this.Ak)this.Ak();this.P()};Sa.prototype.lv=function(){this.Cd=null;if(this.Qa==3||this.Qa==4)this.g.albumop="new";var a=k(this.g.submit_id);if(this.Qa==5){a.value="Save changes"}else if(this.Qa==0){a.value="Create"}else{a.value="Continue"}a.disabled=false;this.eB(!_user.noalbums);
var b=k(this.g.body_id),c=ja('<a href="{link}">{link}</a>',_user);this.g.publicSearchable="";if(_features.globalsearch){this.g.public_desc="This album will be visible to all users at "+c+". It will be included in Picasa Web Albums community search, based on preferences (Community search preferences may be modified on the Settings page).";if(_user.searchable){this.g.publicSearchable="_searchable"}}else{this.g.public_desc="For albums you want to show publicly. Anyone who visits "+c+" can see them"}Sb(b,
P(tu(),this.g));var d=k(this.g.title_id);if(this.Qa==5){if(_album.blogger||_album.isdefault){d.disabled=true;d=k(this.g.desc_id)}if(!_features.autoupdatealbums&&_album.isdefault){k("lhid_date").disabled=true}}d.focus();d.select();if(_features.geotagging){var e=k(this.g.lhui_showLocation_id);if(e.checked){var f=k(this.g.lhui_geoTable);s(f,true)}this.XV=q(e,ta,this.ET,false,this);var g;if(this.Qa==5){g={id:this.Ja.id,lat:this.Ja.lat,lon:this.Ja.lon};if(this.Ja.bb){g.bb={ll:{lat:this.Ja.bb.ll.lat,lon:this.Ja.bb.ll.lon},
ur:{lat:this.Ja.bb.ur.lat,lon:this.Ja.bb.ur.lon}}}}else{g={}}this.g.geotag=new db(g,"album",k(this.g.map_id),k(this.g.results_id),k(this.g.location_id),k(this.g.lat_id),k(this.g.lon_id),k(this.g.latSpan_id),k(this.g.lonSpan_id),k(this.g.removeGeo_id),{noGeotagMessage:Kp(Kl),geotaggedMessage:Ep,updateGeoPrompt:"Would you like to move the map to the new location?"},5,5,this.g.spin_id,false);if(!e.checked){this.g.geotag.wD(false)}}this.iL()};Sa.prototype.UA=function(){this.Ga=-1;if(typeof oa=="undefined"||
!oa.il()){if(this.MH){this.kb()}else{this.MH=true;this.lv()}return}if(this.Qa==3||this.Qa==4)this.g.albumop="existing";var a=k(this.g.submit_id);a.value="Select Album";a.disabled=true;this.eB(false);var b=k(this.g.body_id);Sb(b,P(su,this.g));if(this.hd){this.kv()}else{var c="/data/feed/back_compat/user/"+_user.name+"?alt=json&kind=album";oa.Fb(c,m(this.dL,this))}};Sa.prototype.eB=function(a){var b=k(this.g.toggle_id);if(this.MH){b.innerHTML="";b.style.display="none"}else{b.style.display="";Sb(b,P(a?
"<p>Enter details for a new album below or <a href=\"javascript:_d('{choosefunc}')\">choose an existing album</a>.</p>":"<p>Choose an album below or <a href=\"javascript:_d('{createfunc}')\">create a new album</a>.</p>",this.g))}};Sa.prototype.dL=function(a){var b=oa.KA(a);if(!b){return}this.hd=b.feed.entry;if(this.kv){this.kv()}};Sa.prototype.kv=function(){if(!this.hd){return}var a=k(this.g.albumlist);a.innerHTML="";var b=-1;for(var c=0;c<this.hd.length;++c){var d=this.hd[c];if(_album&&_album.id==
d.gphoto$id.$t){if(this.Qa==4||this.Qa==3){this.hd.splice(c,1);c--;continue}b=c}var e=false;for(var f=0;f<d.link.length;f++){e|=d.link[f].rel=="edit"}if(!e){if(this.Qa==4||this.Qa==3||this.Qa==1){this.hd.splice(c,1);c--;continue}}d.selectfunc=this.g.selectfunc;d.onsubmit=this.g.onsubmit;d.name=ca(d.title.$t);d.icon=d.photo$thumbnail.$t;if(d.rights.$t!="public"){d.access='<span class="lhcl_unlisted">'+uj+"</span>"}else{d.access='<span class="lhcl_public">Public</span>'}d.num=c;a.appendChild(P('<table class="lhcl_fakelink" onmousedown="_d(\'{selectfunc}\', {num}); return false" ondblclick="_d(\'{onsubmit}\')" onselectstart="return false"><tr><td><img src="{icon}" width="32" height="32" /></td><td width="100%">{name}<br />{access}</td></tr></table>',
d))}if(!this.hd){return}if(b>=0)this.fq(b)};Sa.prototype.GL=function(){var a=k(this.g.form_id);if(!a)return;var b=k(this.g.title_id);if(b&&Va(b.value)==""){alert("The title of your album must not be blank. Please enter a title.");return}if(this.Sp&&this.Uf.style.display==""){return false}var c=k("lhid_datefield");if(c){var d=k(this.g.yearselect).value,e=parseInt(k(this.g.monthselect).value,10)+1,f=k(this.g.dayselect).value;c.value=e+"/"+f+"/"+d}var g=k(this.g.desc_id);if(g&&g.value.length>1000){alert(Zz("Album descriptions must be less than 1000 characterslong. You are currently using "+
g.value.length+" characters. Please make your description shorter and try again.","Album descriptions must be 1000 characters or less. You are currently using "+g.value.length+" characters. Please make your description shorter and try again."));return}k(this.g.submit_id).disabled=true;k(this.g.cancel_id).disabled=true;if(this.Qa==1&&this.Cd){location.href="/lh/webUpload?uname="+_user.name+"&aid="+this.Cd}else{a.submit()}};Sa.prototype.uj=function(a){if(this.Ga<0)return;switch(a.keyCode){case 38:window.scrollTo(0,
0);this.fq(Math.max(this.Ga-1,0));Qh(a);break;case 40:window.scrollTo(0,0);this.fq(Math.min(this.Ga+1,this.hd.length-1));Qh(a);break}};Sa.prototype.fq=function(a){var b=k(this.g.albumlist);if(this.Ga>=0)b.childNodes[this.Ga].className="lhcl_fakelink";b.childNodes[a].className="lhcl_selected lhcl_fakelink";this.Ga=a;this.Cd=this.hd[a].gphoto$id.$t;k(this.g.album_id).value=this.Cd;var c=k(this.g.submit_id);c.disabled=false;c.focus();c.parentNode.style.textAlign="right";var d=b.childNodes[this.Ga],e=
d.offsetTop,f=e+d.offsetHeight,g=b.scrollTop,h=g+b.offsetHeight;if(e<g)b.scrollTop=Math.max(e-(f-e)*0.3,0);else if(f>h)b.scrollTop=e+(f-e)*1.3-(h-g)};Sa.prototype.oc=function(){var a=Math.max(document.body.offsetHeight,document.body.scrollHeight);a=Math.max(a,document.body.clientHeight);a=Math.max(a,document.documentElement.clientHeight);this.hc.style.height=a+"px"};Sa.prototype.iL=function(){this.Sp=true;this.pi=k("lhid_date");this.Uf=k("lhid_dp");var a=this.Qa==5?Ct(_album.datestring):new Date;
if(a==null){a=new Date}if(this.Sp){this.jd=a;var b=new pa(this.jd);b.i_(_LH.calDay==0?6:0);this.wj();this.Qg();te(this.pi,"focus",m(this.pL,this),false);this.pi.onkeydown=Jd(this,this.NK);te(k(this.g.title_id),"focus",m(this.fv,this),false);te(k(this.g.desc_id),"focus",m(this.fv,this),false);q(this.p,ta,m(this.OK,this),false,this);b.fJ(5,"weekend");b.fJ(6,"weekend");b.R_(false);b.f_(false);b.S_(false);q(b,"select",this.oB.bind(this));b.create(this.Uf);if(!n.IE){var c=this.Uf.getElementsByTagName("button");
for(var d=0;d<c.length;d++){c[d].type="button"}}U(b.uD,Cg);this.ld=b}else{this.Uf.style.width="20em";this.jd=uq(a);var b=new fa(this.Uf,false,"lhid_dp_","DP_",this.jd);b.ju(_LH.calDay);b.$_(true);this.wj();this.Qg();te(this.pi,"focus",m(this.qL,this),false);te(this.pi,"blur",m(this.oL,this),false);b.Pn=m(this.rL,this);b.NM(m(this.oB,this));b.UZ(function(e){return["January","February","March","April","May","June","July","August","September","October","November","December"][e.M-1]+" "+e.N});b.M_(function(e){return"&laquo;"});
b.z_(function(e){return"&raquo;"});this.ld=b}s(this.Uf,false)};Sa.prototype.qL=function(){s(this.Uf,true);this.ld.show();lv(this.ld);return true};Sa.prototype.oL=function(a){s(this.Uf,false);if(!this.ld.Oa()){this.yj();return true}var a=a||window.event,b=false;if(n.IE){var c=Wd(this.ld.sx());b=c.contains(of(a))}else{var d=a.explicitOriginalTarget;b=mu(this.ld.sx(),d)}if(!b){this.ld.hide();this.yj()}return true};Sa.prototype.rL=function(a){if(!this.ld.Oa()){this.yj();return true}var b=Wd(this.ld.sx()),
c=of(a);if(!b.contains(c)){this.yj();return true}return false};Sa.prototype.pL=function(){s(this.Uf,true);return true};Sa.prototype.fv=function(a){this.Zx=true;this.$x=false;this.yj();return true};Sa.prototype.NK=function(a){if(a.keyCode==9){this.Zx=true;this.$x=true;this.yj()}return true};Sa.prototype.OK=function(a){if(this.Uf.style.display=="none"){return true}var a=a||window.event;if(a.target==this.pi){this.Zx=true;this.$x=true;this.yj();return true}var b=Wd(this.Uf),c=of(a);if(!b.contains(c)){this.fv(null);
return true}this.jd=this.ld.getDate();this.Qg();this.wj();return false};Sa.prototype.jB=function(a){if(a.getFullYear()<1970){alert(wl);return false}else if(a.getFullYear()>2037){alert(xl(2037));return false}else{return true}};Sa.prototype.eM=function(){var a=this.pi.value,b=new Date,c=Ie(He),d=mn(c.DATEFORMATS[3],a,0,b);if(d>0){return this.jB(b)}else{return false}};Sa.prototype.oB=function(a){if(this.Sp){if(a.date){if(this.jB(a.date)){this.jd=a.date;this.Qg();this.wj()}else{this.ld.setDate(this.jd)}}if(!this.$x){s(this.Uf,
false)}if(!this.Zx){k(this.g.desc_id).focus()}this.Zx=false;this.$x=false}else{var b=this.ld.getSelection();if(b){if(b.N<1970){alert(wl);this.ld.Ig(this.jd)}else if(b.N>2037){if(_features.newStrings){alert(xl(2037))}this.ld.Ig(this.jd)}else{this.jd=b;this.Qg();this.wj()}this.ld.hide()}}};Sa.prototype.yj=function(){if(this.Sp){if(this.eM()){var a=this.pi.value,b=new Date,c=Ie(He),d=mn(c.DATEFORMATS[3],a,0,b);this.jd=b;this.ld.setDate(this.jd);this.wj()}else{this.Qg()}}else{var a=this.pi.value,b=new Date,
c=Ie(He),d=mn(c.DATEFORMATS[3],a,0,b);if(d>0){if(b.getFullYear()<1970){alert(wl);this.Qg()}else if(b.getFullYear()>2037){if(_features.newStrings){alert(xl(2037))}this.Qg()}else{this.jd=uq(b);this.ld.Ig(this.jd);this.wj()}}else{this.Qg()}}};Sa.prototype.wj=function(){var a=this.Sp?this.jd:vq(this.jd);k(this.g.dayselect).value=a.getDate();var b=a.getMonth()+1;k(this.g.monthselect).value=b-1;k(this.g.yearselect).value=a.getFullYear();k("lhid_datefield").value=b+"/"+a.getDate()+"/"+a.getFullYear()};Sa.prototype.Qg=
function(){var a=this.Sp?this.jd:vq(this.jd);this.pi.value=Zl(a,3)};Sa.prototype.QD=function(){if(_features.geotagging){var a=k(this.g.location_id),b=Va(a.value);if(b){this.g.geotag.bo()}else{this.lC()}}};Sa.prototype.lC=function(){if(_features.geotagging){this.g.geotag.kC()}};Sa.prototype.ET=function(a){var b=a.target;if(b){var c=k(this.g.lhui_geoTable);s(c,b.checked);this.g.geotag.wD(b.checked);if(b.checked){this.g.geotag.ck().kp();this.g.geotag.ck().reset();this.QD()}else{this.lC()}}};function uq(a){return ed(a.getFullYear(),
a.getMonth()+1,a.getDate())}function vq(a){return new Date(a.N,a.M-1,a.date)}var uu='<div class="lhcl_dialog"><form id="{form_id}" method="post" action="{action}" onsubmit="_d(\'{onsubmit}\'); return false"><input type="hidden" name="uname" value="{uname}" /><input type="hidden" name="dialogName" value="{dialog}" /><input type="hidden" name="redir" value="{redir}" /><input type="hidden" name="dest" value="{dest}" /><input type="hidden" name="photoop" value="{photoop}" /><input type="hidden" name="selectedphotos" value="{selected}" /><div class="lhcl_dialog_body"><h1>{header}</h1><div id="{toggle_id}"></div><div id="{body_id}"></div></div><div class="lhcl_buttons"><input type="submit" class="lhcl_default" id="{submit_id}" /><input type="button" id="{cancel_id}" value="'+
Cg+'" onclick="_d(\'{oncancel}\')" /></div></form></div>',tu=function(){var a=[];if(_features.geotagging){a.push('<div class="lhcl_geoalbumDialog">')}else{a.push("<div>")}a.push('<h2>Title</h2><input type="hidden" name="aid" value="{id}" /><input type="hidden" name="albumop" value="{albumop}" /><input type="text" class="lhcl_input" id="{title_id}" name="title" value="{title}" maxlength="100"/><table class="lhcl_table"><tbody><tr><td><h2>Date</h2></td><td style="text-align: right;">');if(_features.autoupdatealbums&&
_album.isdefault){a.push('<input type="checkbox" name="autoDate" value="true" id="lhid_autoUpdateDate" {dateChecked} />Use most recent upload date')}a.push('</td></tr></tbody></table><div style="position:relative;"><div><input id="lhid_date" class="lhcl_input" type="text" autocomplete="off" /></div><div id="lhid_dp" style="display:none"></div><input type="hidden" id="lhid_datefield" name="date" /><input type="hidden" id="{dayselect}" name="dateDay" /><input type="hidden" id="{monthselect}" name="dateMonth" /><input type="hidden" id="{yearselect}" name="dateYear" /></div><h2>Description <em>'+
Il+'</em></h2><textarea class="lhcl_input" name="description" id="{desc_id}">{description}</textarea>');if(_features.geotagging){a.push('<table class="lhcl_table"><tbody><tr><td><h2>'+Kl+" <em>"+Il+'</em></h2></td><td style="text-align: right;"><input type="checkbox" id="{lhui_showLocation_id}" {lhui_locationChecked} /><label for="{lhui_showLocation_id}">Show location on map</label></td></tr></tbody></table><input type="text" class="lhcl_input" name="location" id="{location_id}" onkeydown="_d(\'{stoptimerfunc}\')" onkeyup="_d(\'{starttimerfunc}\')" value="{location}" maxlength="100" /><img src="img/spin.gif" style="visibility:hidden" id="{spin_id}" hspace=4><br /><input type="hidden" name="lat" id="{lat_id}" value="{lat}" /><input type="hidden" name="lon" id="{lon_id}" value="{lon}" /><input type="hidden" name="latspan" id="{latSpan_id}" value="{latSpan}" /><input type="hidden" name="lonspan" id="{lonSpan_id}" value="{lonSpan}" /><input type="hidden" name="removegeo" id="{removeGeo_id}" value="false" /><table id="{lhui_geoTable}" class="lhcl_geoResultTable" style="display: none;"><tbody><tr><td colspan="2"><a href="javascript:_d(\'{geocodefunc}\')">Update map</a></td></tr><tr><td width="25%" valign="top"><div id="{results_id}"></div></td><td width="75%"><div id="{map_id}" class="lhcl_mapBorder lhcl_smallMap"></div></td></tr></tbody></table><br />')}else{a.push("<h2>"+
Kl+" <em>"+Il+'</em></h2><input type="text" class="lhcl_input" name="location" id="{location_id}" value="{location}" maxlength="100" />')}a.push('<div id="lhid_access"><p><input type="radio" name="access" value="public" id="lhid_publicaccess" {publicChecked} /> <label for="lhid_publicaccess"><span class="lhcl_public{publicSearchable}_label">Public</span></label> <em>(default)</em> &#8211; For albums you want to show publicly.</p><p class="lhcl_mini_text">{public_desc}</p><p><input type="radio" name="access" value="private" id="lhid_unlistedaccess" {privateChecked} /> <label for="lhid_unlistedaccess"><span class="lhcl_unlisted_label">'+
uj+"</span></label> &#8211; For albums that you only want to share with select people</p></div>");a.push("</div>");return a.join("")},su='<div><input type="hidden" name="albumop" value="{albumop}" /><input id="{album_id}" type="hidden" name="aid" /><div class="lhcl_albumlist" id=\'{albumlist}\'>'+tf+"</div></div>";function Ag(){ka.fc(this);this.hc=u("div");this.hc.className="lhcl_cover";document.body.appendChild(this.hc);this.oc();this.le=m(this.oc,this);Yd(window,"resize",this.le);window.scrollTo(0,0);Ph();Ac("hideVideo");this.g={close:r("func"),change:r("func"),changeCode:r("func")};v(this.g.close,m(this.kb,this));v(this.g.change,m(this.hv,this));v(this.g.changeCode,m(this.hv,this));this.p=P(Ju,this.g);document.body.insertBefore(this.p,document.body.firstChild);this.hv();this.Ej=_authuser;this.Ja=_album;
if(!Vh){k("lhid_widget_preview").innerHTML='<div class="lhcl_output" style="height:192px"><span>You need Adobe&reg; Flash&reg; Player 8 or higher to play slideshows.</span><br /><br /><a target="_blank" href="http://www.macromedia.com/go/getflashplayer">'+zl+"</a></div>"}}Ag.prototype.P=function(){this.fa();ka.gc(this);ue(window,"resize",this.le);F(this.g.close);F(this.g.change);F(this.g.changeCode);for(var a in this)this[a]=null};Ag.prototype.kb=function(){if(this.p)C(this.p);if(this.hc)C(this.hc);
if(this.Ak)this.Ak();this.P()};Ag.prototype.oc=function(){var a=Math.max(document.body.offsetHeight,document.body.scrollHeight);a=Math.max(a,document.body.clientHeight);a=Math.max(a,document.documentElement.clientHeight);this.hc.style.height=a+"px"};var mj=function(a,b,c,d){var e="host="+window.location.hostname;e+=window.location.port?"&port="+window.location.port:"";e+=a.captions.checked?"&captions=1":"";e+=a.autoplay.checked?"":"&noautoplay=1";var f=xq("http",null,window.location.hostname,window.location.port,
"/lh/getEmbed"),g={flash_src:_flashPath+"/slideshow.swf",width:d,height:Math.round(d*2/3),font:d<=144?10:13,url:b,vars:e,album_url:c,embed_url:f.toString()};return ja(a.html.checked?Lu:mp,g)};Ag.prototype.hv=function(){var a=k("lhid_slideshow_options");this.w2=a.captions.checked;this.RB=a.autoplay.checked;this.m6=a.html.checked;this.uf=a.size.value;var b=qb(_album.photosRss);k("lhid_html").value=mj(a,b,_album.link,a.size.value);k("lhid_widget_preview").innerHTML=mj(a,b,_album.link,288)};Ag.prototype.fa=
function(){var a={width:this.uf};if(this.w2){a.captions=1}Bk().log(116,a)};var Ku=function(){var a="";for(var b=0;b<_user.albums.length;b++){if(_user.albums[b].count>0){a+='<option value="'+b+'">'+_user.albums[b].title+" ("+_user.albums[b].count+")</option>"}}if(a.length==0){return}var c={change:r("func"),changeCode:r("func"),options:a};v(c.change,np);v(c.changeCode,op);document.getElementById("lhid_body").innerHTML=ja(Mu,c);np()},np=function(){op();var a=Number(document.Embed.album.value);document.getElementById("lhid_embedPreview").innerHTML=
mj(document.Embed,qb(_user.albums[a].link),_user.albums[a].url,288)},op=function(){var a=document.Embed.size.value,b=Number(document.Embed.album.value);document.Embed.code.value=mj(document.Embed,qb(_user.albums[b].link),_user.albums[b].url,a)},pp='<h2>Slideshow options</h2><div>Select slideshow size:</div><select name="size" onchange="_d(\'{changeCode}\')"><option value="144">Small '+uf(144)+'</option><option value="288" selected>Medium '+uf(288)+'</option><option value="400">Large '+uf(400)+'</option><option value="600">Extra large '+
uf(600)+'</option><option value="800">Extra-extra large '+uf(800)+'</option></select><br /><input type="checkbox" name="captions" onclick="_d(\'{change}\')"/>Show captions<input type="checkbox" name="autoplay" checked onclick="_d(\'{change}\')"/>Autoplay<br /><input type="checkbox" name="html" onclick="_d(\'{change}\')"/>HTML Links (for MySpace)<hr><h2>Embed slideshow</h2><div class="lhcl_copy">Copy and paste this into your website:</div><textarea name="code" id="lhid_html" onclick="this.select()" rows="4"></textarea>',
qp='<a href="http://picasa.google.com/support/bin/answer.py?answer=66969" target="_blank">Need help putting this slideshow on your website?</a>',Ju='<div id="lhid_slideshow" class="lhcl_dialog"><div class="lhcl_dialog_body"><h1>'+Tp+'</h1><table><tr><td style="vertical-align:top"><form id="lhid_slideshow_options">'+pp+'</form></td><td><span class="lhcl_frameblock" style="display:block;"><div class="lhcl_small">'+Rp+'</div><div id="lhid_widget_preview"></div></span><div class="lhcl_small">'+qp+'</div></td></tr></table></div><div class="lhcl_buttons"><input type="button" onclick="_d(\'{close}\')" value="Done" class="lhcl_default" id="{submit_id}" /></div></div>',
Mu='<p class="lhcl_h1">'+Tp+'</p><table class="lhcl_slideshow"><tr><td><form name="Embed"><h2>Select an album</h2><select name="album" onchange="_d(\'{change}\')">{options}</select><br /><br />'+pp+'</form></td><td><span class="lhcl_frameblock" style="display:block;"><div class="lhcl_normal" style="text-align:center;">'+Rp+'</div><div id="lhid_embedPreview"></div><br clear="all" /></span><div  style="text-align:center;">'+qp+"</div></td></tr></table>",mp='<embed type="application/x-shockwave-flash" src="{flash_src}" width="{width}" height="{height}" flashvars="{vars}&RGB=0x000000&feed={url}" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed>',
Lu='<div style="width:{width}px;font-family:arial,sans-serif;font-size:{font}px;"><div>'+mp+'</div><span style="float:left;"><a href="{album_url}" style="color:#3964c2">View Album</a></span><div style="text-align:right;"><a href="{embed_url}" style="color:#3964c2">Get your own</a></div></div>';var ht=function(){K.call(this,null,true);Sb(this.$r(),G("h1",{},"Link to this album"));var a=rj(_album.count),b=_album.src.replace(/\/([^?\/]*)\?.*$/,"/s160-c/$1"),c={url:_album.link,src:b,title:_album.title_wb,info:_album.dateonly+" - "+_album.count+" "+a},d=ja(sl,c),e=ja('<table><tr><td style="vertical-align:top"></td><td>Paste link in <b>email or IM</b><br/><textarea class="lhcl_copyarea lhcl_singleline" onclick="this.select()">{link}</textarea></td></tr><tr><td style="vertical-align:top"></td><td><b>{embed_heading}</b><br/>Copy and paste this into your website:<br/><textarea class="lhcl_copyarea" onclick="this.select()">{embed_content}</textarea></td></tr></table>',
{link:document.location.toString(),embed_heading:"Embed album",embed_content:d});this.Bc(e);var f=new Gb;f.K("yes","Done");this.Lk(f);this.ma(true)};ht.k(K);var hz=function(){new ht};var Mz=function(a){var b=false;if(!Ca(a)){a=_features.internalview;b=true}var c=k("lhid_viewInternalVersion"),d=k("lhid_viewExternalVersion");if(c&&d){s(c,a);s(d,!a);if(!b){var e=new Ke;e.send(0,_internalViewUrl,"POST","intview="+a);ri(e,sa.SUCCESS,function(){window.location.reload(true)},false,this)}}};Nd("pwa.showInternalOnlyMessage",Mz);var Yb=function(a,b){this.Ld=a;this.Wb=Math.max(b,1);this.fi=-1;this.gi=0;this.Ln=0;this.Mp=Math.ceil(this.Ld/this.Wb);this.O3=false;this.N3=false},jz;S(Yb,J);var Ji="totalpageschanged",kf="currentpagechanged",rg="currentitemchanged",jt="totalitemschanged";Yb.prototype.UR=function(a){if(a<0||a>=this.Mp){return null}var b;if(this.gi==a){b=this.Ln}else{b=this.Wb*a}return{index:a,startItemIndex:b,size:Math.min(this.Wb,this.Ld-b)}};Yb.prototype.Fg=function(a){if(this.fi==a||0==this.Ld){return}if(a<0||
a>=this.Ld){if(this.Ld==0){return}else if(a<0){a=0}else if(a>=this.Ld){a=this.Ld-1}}var b=false;if(this.O3){var c=this.Sr(a);if(c!=this.gi){this.gi=c;b=true}}this.fi=a;this.dispatchEvent(rg);if(b){this.dispatchEvent(kf)}};Yb.prototype.hf=function(){return this.fi};Yb.prototype.ng=function(a){if(a<0||a>this.Mp){return-1}return Math.floor(a*this.Wb)};Yb.prototype.Sr=function(a){if(a<0||a>=this.Ld){return-1}return Math.floor(a/this.Wb)};Yb.prototype.SH=function(){var a=Math.ceil(this.Ld/this.Wb),b=this.fi<
0?-1:this.Sr(this.fi);if(a!=this.Mp){this.Mp=a;this.dispatchEvent(Ji)}if(b>=0&&b!=this.zl){this.zl=b;this.dispatchEvent(kf)}if(this.fi>=this.Ld){this.fi=this.Ld-1;this.dispatchEvent(rg)}};Yb.prototype.Pk=function(a){var b=this.Ld!=a;this.Ld=a;this.SH();if(b){this.dispatchEvent(jt)}};Yb.prototype.Qr=function(){return this.Ld};Yb.prototype.bs=function(){return this.Mp};Yb.prototype.aX=function(){this.hJ(1)};Yb.prototype.fY=function(){this.hJ(-1)};Yb.prototype.hJ=function(a){var b=this.Ln+a*this.Wb;
if(b<0){b=0}if(b>=this.Ld){b=this.Ld-this.Wb}var c=this.Sr(b);this.Ln=b;this.gi=c;this.dispatchEvent(kf)};Yb.prototype.ce=function(){return this.gi};Yb.prototype.KI=function(a){if(a<0||a>=this.Mp){return}var b=a!=this.gi;this.gi=a;this.Ln=this.gi*this.Wb;var c=false;if(this.N3){if(this.fi!=this.Ln){this.fi=this.Ln;c=true}}if(b){this.dispatchEvent(kf)}if(c){this.dispatchEvent(rg)}};Yb.prototype.cn=function(a){this.Wb=a;this.SH()};Yb.prototype.Jf=function(){return this.Wb};Yb.prototype.BO=function(a,
b){var c=b||a*2;return new Jh(this,a,c,this.gi)};var Jh=function(a,b,c,d){this.A=a;this.qN=b;this.wb=b;this.Eu=d||0;this.sB=0;this.Ni=c||b*2;this.ba(true);this.A.addEventListener(Ji,this.ba.bind(this,false));this.A.addEventListener(kf,this.ba.bind(this,false))};S(Jh,J);var kt=function(a){Q.call(this,"windowscroll",a);this.active=a.sB};kt.k(Q);Jh.prototype.ba=function(a){var b=this.A.bs(),c=b-1,d=Math.min(c,this.Eu+(this.wb-1)),e=this.A.ce(),f=Math.min(this.Ni,this.qN+e);f=Math.max(f,this.qN);var g=this.Ni;if(f>b){f=b;g=b;d=c}var h=Math.ceil(g/2),
i=-1,j=-1;if(f==this.Ni){if(e>c-h){var l=c-e;j=this.Ni-1-l;i=c-this.Ni+1}else{j=h;i=e-h}}else{i=0;j=e}this.wb=f;this.Eu=i;this.sB=j;if(!a){this.dispatchEvent(new kt(this))}};Jh.prototype.oR=function(){return this.Eu};Jh.prototype.r=function(){return this.wb};Jh.prototype.FQ=function(){return this.sB};var mc=function(a){z.call(this);this.Hc=a||"";this.gh=null};S(mc,z);mc.prototype.D=null;mc.prototype.Zf=null;mc.prototype.o=function(){this.b=u("td");this.D=u("div");this.Zf=u("div");x(this.b,this.D);x(this.b,this.Zf)};mc.prototype.I=function(){mc.j.I.call(this);this.c4=q(this.b,X,this.Nd.bind(this))};mc.prototype.J=function(){ua(this.c4);mc.j.J.call(this)};mc.prototype.Nd=function(){if(this.gh){this.gh()}};mc.prototype.h_=function(){this.show(true);Ba(this.D,this.Hc+"pagerfirst");U(this.Zf,"");this.gh=
null};mc.prototype.L_=function(a){this.show(true);Ba(this.D,this.Hc+"pagerprev");U(this.Zf,"Previous");Ba(this.b,this.Hc+"firstCell");Ba(this.Zf,this.Hc+"firstCellTxt");this.gh=a.fY.bind(a)};mc.prototype.y_=function(a){this.show(true);Ba(this.D,this.Hc+"pagernext");Ba(this.Zf,this.Hc+"pagernextnum");U(this.Zf,"Next");this.gh=a.aX.bind(a)};mc.prototype.u_=function(){this.show(true);Ba(this.D,this.Hc+"pagerlast");U(this.Zf,"");this.gh=null};mc.prototype.VZ=function(){this.show(true);Ba(this.D,this.Hc+
"pagercurrent");Ba(this.Zf,this.Hc+"pagercurrentpagenum");this.gh=null};mc.prototype.mu=function(a,b){this.show(true);Ba(this.D,this.Hc+"pagerpage");U(this.Zf,b+1);Ba(this.Zf,this.Hc+"pagerpagenum");this.gh=a.KI.bind(a,b)};mc.prototype.show=function(a){s(this.b,a)};var lf=function(a,b,c){z.call(this);this.qa(a);this.S5=b;this.Hc=c||"";this.AA=this.A.BO(this.S5);this.Tu=null};S(lf,z);lf.prototype.ja=false;lf.prototype.o=function(){this.b=u("table");Ba(this.b,this.Hc+"pager");var a=u("tbody");this.Tu=
u("tr");x(this.b,a);x(a,this.Tu)};lf.prototype.I=function(){z.prototype.I.call(this);this.A.addEventListener(kf,this.ba,false,this);this.A.addEventListener(Ji,this.ba,false,this)};lf.prototype.J=function(){this.A.removeEventListener(kf,this.ba,false,this);this.A.removeEventListener(Ji,this.ba,false,this);this.show(false);z.prototype.J.call(this)};lf.prototype.ba=function(){var a=this.AA.r(),b=0;if(a<=1){b=-1}else{b=1}if(b!=0&&this.b){this.ja=b>0;s(this.b,this.ja)}if(!b){return}var c=this.AA.oR(),
d=this.AA.FQ(),e=d-c;if(!this.gj){this.gj=[]}var f=this.gj[0];if(!f){f=new mc(this.Hc);this.gj[0]=f;this.xb(f);f.V(this.Tu)}if(c==0&&e==0){f.h_()}else{f.L_(this.A)}for(var g=0;g<a;++g){var h=this.gj[g+1];if(!h){h=new mc(this.Hc);this.gj[g+1]=h;this.xb(h);h.V(this.Tu)}h.mu(this.A,c+g);if(d==g){h.VZ()}}var i=a+1,j=this.gj[i];if(!j){j=new mc(this.Hc);this.gj[i]=j;this.xb(j);j.V(this.Tu)}if(this.A.ce()+1==this.A.bs()){j.u_()}else{j.y_(this.A)}for(var g=i+1;g<this.gj.length;++g){var l=this.gj[g];if(l){l.show(false)}}};
lf.prototype.VR=function(){return this.AA};lf.prototype.show=function(a){if(this.ja!=a){this.ja=a;this.ba();if(this.b){s(this.b,a)}}};var Yg=function(a){this.Qb=a;this.Q=this.Qb.yb();this.b=u("td");this.of=u("a");this.zs=u("img");Ic(this.zs,"144px","96px");this.Fe=u("td");this.F=null;this.HX=0;this.xw=null;x(this.of,this.zs);x(this.b,this.of);s(this.b,false)},kz={PHOTO_DESCRIPTION:"",PHOTO_TAGS:"Tag",ALBUM_TITLE:"",ALBUM_DESCRIPTION:"",ALBUM_LOCATION:""};Yg.prototype.sN=function(a){this.zs.src="img/spacer.gif";this.F=null;if(!a){this.Fe.innerHTML=tf}};Yg.prototype.Rd=function(a){if(a){ga(this.b,"lhcl_activecell");ga(this.Fe,"lhcl_activecell")}else{Oa(this.b,
"lhcl_activecell");Oa(this.Fe,"lhcl_activecell")}};Yg.prototype.E1=function(a,b){x(a,this.b);x(b,this.Fe)};Yg.prototype.show=function(a){s(this.b,a);s(this.Fe,a)};Yg.prototype.select=function(a){if(this.Qb&&this.F&&a.Is(0)){var b=this.HX;this.Qb.Gg(b);this.Qb.Bg.Fg(b);var c=et();if(c.qk()){c.cj(b+"+1")}location.href=this.of.href;a.stopPropagation()}};Yg.prototype.ba=function(a,b,c){if(!a||this.F&&this.F.id==a.id&&this.Q==c){return}this.F=a;this.Q=c;this.HX=b;var d=this.F.thumbnail(1);if(d){var e=
location.href.replace(/#.*/,""),f=a.Md?d.url:"img/spacer.png",g=e+"#"+b;this.of.href=g;this.of.title=a.t;if(this.xw){L(this.of,X,this.xw)}this.xw=m(this.select,this);q(this.of,X,this.xw);this.zs.src=f;Ic(this.zs,d.width+"px",d.height+"px")}var h=a.snippet||"",i=h&&a.snippetType?kz[a.snippetType]:"",j=a.user,l="/"+j.name,p=a.Gd?a.Gd():a.album,t=p.link,w=p.title,y=a.eG?a.eG(this.Qb.yb()):a.truncated,Z=y?ja('<div class="truncated_link"><a href="{albumLink}">[{moremessage}]</a></div>',{albumLink:t,moremessage:"More from this album"}):
"",M=ca(An(j.nickname,24)),I='<a href="'+l+'">'+M+"</a>",Ab=Op(I),Gd=ja('<div><div class="album_link"><span class="">{albumTitle}</span></div><div class="owner_gallery_link">{ownerLink}</div><div class="context_info">{snippetType} {snippet}</div>{truncatedLink}</div>',{albumLink:t,albumTitle:ca(An(w,24)),ownerLink:Ab,snippet:An(h,24),snippetType:i,truncatedLink:Z});this.Fe.innerHTML=Gd};var bd=function(a,b,c){this.C=a;this.Dk=b;this.Bg=c;this.W6=0;this.gridMax=21;this.gridMin=18;this.ds=this.gridMin;
this.maxColumns=7;this.minColumns=3;this.maxRows=6;this.cellSize=205;this.Ox=[];this.Px=[];this.Hj=[];this.bf=-1;this.la=-1;this.$c=false;this.Ou=0;this.pw=0;this.ow=0;this.tg=true;var d=u("tr"),e=u("td");d.appendChild(e);x(this.C,d);e.innerHTML='<div class="lhcl_search_results_count_info" style="overflow: hidden;" />';this.vl=e.firstChild;this.vl.innerHTML=tf;for(var f=0;f<this.maxRows;++f){var g=this.hW();s(g,false);this.Ox.push(g);x(this.C,g);g=this.gW();s(g,false);this.Px.push(g);x(this.C,g)}var h=
this.maxRows*this.maxColumns;for(var f=0;f<h;++f){this.Hj.push(new Yg(this))}this.pt=u("td");var i=u("tr");i.appendChild(this.pt);x(this.C,i);this.Bg.addEventListener(jz,m(this.Qm,this))};S(bd,J);bd.prototype.tN=function(){this.UB(false)};bd.prototype.uN=function(){this.UB(true)};bd.prototype.UB=function(a){for(var b=0;b<this.Hj.length;++b){this.Hj[b].sN(a)}};bd.prototype.Dp=function(a){if(this.Ou){gi(this.Ou);this.Ou=0;if(this.ow>0){if(ha()-this.ow>45000){alert("The operation timed out.")}else{this.Ou=
pc(m(this.Dp,this,false),1000)}this.ow=-1;this.Qm()}}if(!this.sm){this.sm=new K("lhcl_modal-dialog");var b=new Gb;this.sm.Lk(b);this.sm.kn(Np);this.sm.Bc('<img src="img/spin.gif" />');this.sm.V()}if(a){this.ow=ha();this.Ou=pc(m(this.Dp,this,false),1000);this.tN();this.sm.pb()}this.sm.ma(a)};bd.prototype.mn=function(a){this.Dp(false);if(this.pw>0){gi(this.pw);this.pw=0}if(!this.C){return}this.$c=a;if(a){this.pw=pc(m(this.Dp,this,true),1000)}else{this.Dp(false)}};bd.prototype.Gg=function(a){var b=this.Bg.UR(this.Bg.ce());
if(!b){return}var c=b.startItemIndex;if(a>=c&&a<=c+this.ds){var d=a-c,e=this.Hj[d];if(this.Bv&&this.Bv!=e){this.Bv.Rd(false);this.Bv=null}if(e){e.Rd(true);this.Bv=e}}};bd.prototype.XI=function(a){var b=a||gd(),c=80,d=Math.max(b.width,c*this.bf),e=Math.min(200,c*this.la),f=k("lhid_listview");if(f){f.setAttribute("style","width: "+d+"px; height: "+e+"px;")}};bd.prototype.kp=function(a){if(a.width+a.height<1){a={width:document.body.clientWidth,height:document.body.clientHeight}}var b=Math.floor(a.width/
this.cellSize);b=Math.min(this.maxColumns,b);b=Math.max(this.minColumns,b);var c=Math.floor(this.gridMax/b);c=Math.min(this.maxRows,c);var d=false;if(b!=this.bf){this.bf=b;d=true}if(c!=this.la){this.la=c;d=true}if(d){this.XI(a);var e=this.bf*this.la;this.Bg.cn(e);this.tg=true;if(this.ds!=e){this.ds=e;this.Qm();this.dispatchEvent({type:"gridsizechanged",gridSize:e})}}};bd.prototype.Qe=function(a){this.Dk=a;if(!a.isLoaded()){this.XI()}};bd.prototype.lc=function(){if(!this.tg){return}this.tg=false;var a=
this.ds,b=this.Bg.ng(this.Bg.ce()),c=0,d=this.Ox[0],e=this.Px[0],f=this.Bg.hf(),g=0;for(;g<a;++g){var h=this.Hj[g],i=!(g%this.bf);if(i){d=this.Ox[c];e=this.Px[c];++c;fc(d);fc(e);s(d,true);s(e,true)}h.E1(d,e);h.show(true)}for(var j=c;j<this.maxRows;++j){var l=this.Ox[j],p=this.Px[j];if(l){s(l,false)}if(p){s(p,false)}}};bd.prototype.Qm=function(){this.lc();var a=this.ds,b=this.Bg.ce(),c=this.Bg.ng(b),d=this.Bg.hf(),e=0,f=0,g=a,h=Math.min(1000,this.Dk.$b());if(h<c+a){g=h-c}for(;f<a;++f){var i=this.Hj[f],
j=c+f,l=this.Dk.si(j);i.show(true);i.ba(l,j,this.Dk);if(!l){continue}++e}f=g;for(;f<this.Hj.length;++f){var i=this.Hj[f];if(i){i.show(false)}}if(h<=0){s(this.vl,false)}else{U(this.vl,sj(c+1,c+e,this.Dk.Wu()));s(this.vl,true)}};bd.prototype.hW=function(){return G("tr",{className:"lhcl_imgrow"})};bd.prototype.gW=function(){return G("tr",{className:"lhcl_inforow"})};bd.prototype.yb=function(){return this.Dk};var Dk=function(a,b){this.C=a;this.fb=b;this.b=u("td");Ba(this.b,"lhcl_searchtab");this.JJ=u("div");x(this.b,this.JJ);this.gy=u("span");U(this.gy,this.fb.name);x(this.JJ,this.gy);q(this.gy,X,m(this.kq,this));this.vl=u("span");x(this.JJ,this.vl);this.Ep=u("td");Ba(this.Ep,"lhcl_nav_border");this.Ep.setAttribute("width","9");this.Ep.innerHTML='<img src="img/spacer.gif" width="9" height="1" />';s(this.Ep,false);x(this.C,this.b);x(this.C,this.Ep);this.i4=-1;this.x4=-1;var c=b.Q;c.addEventListener(Lh,
m(this.Yu,this));if(c.isLoaded()){this.Yu()}else{this.i4=c.addEventListener("noitems",m(this.Yu,this));this.x4=c.addEventListener(Kh,m(this.Yu,this))}};Dk.prototype.Yu=function(){var a=this.fb.Q;if(a.isLoaded()){var b=a.Wu();U(this.vl," ("+b+")")}};Dk.prototype.Pp=function(){var a=et(),b=a.ci==this.fb.search_corpus,c,d="";if(b){c="lhcl_searchtab_on"}else{d="lhcl_fakelink";c="lhcl_searchtab"}s(this.Ep,b);Ba(this.gy,d);Ba(this.b,c);var e=a.qk()||b;s(this.b,e)};Dk.prototype.kq=function(){var a=k("lhid_search_uname");
if(this.fb.search_corpus=="F"){a.value=_user.name}else{a.value=""}var b=Ak,c=b.ci==this.fb.search_corpus;if(c){return}b.me(this.fb.search_corpus)};var Xg=function(a,b,c,d,e,f,g){this.G6=a;this.pe=b;this.Cb=c;this.tb=d;this.za=e;this.Yb=f;this.bd=g;this.Zb=null;this.totalPhotoCount=0;this.displayPhotoCount=0;s(k("email"),false);var h=k("lhid_tools"),i=u("div");i.className="lhcl_toolbox";h.appendChild(i);var j=u("div");j.className="lhcl_tools";i.appendChild(j);this.Tl=new Pe(j);this.Br=i;if(this.za){h.insertBefore(this.za.Vr(),i)}h.insertBefore(this.Cb.Vr(),this.Yb.GR());this.bW=k("lhid_main_albumtitle");this.T3=k("lhid_main_albumtitle_text");
if(_features.geotagging){this.qi=k("lhid_geodiv");s(this.qi,false);var l=k("lhid_map");this.n=new Y(l,2)}};Xg.prototype.Rn=null;Xg.prototype.zH=function(a,b,c){var d=this.Zb!=a;if(d){ua(this.Rn);this.Rn=null}a.Z=b;this.Zb=a;if(a.Vx()){this.iF(this.Zb,d);return}this.Cb.Mk(a);if(this.Tl){if(a.user.name==this.pe.name){s(this.Br,false)}else{s(this.Br,true);var e=!(!a.vsurl);this.Tl.jn(a.user.name,a.album.id,a.id,e)}}this.bd.Pg(!(!a.vsurl));this.bd.F=a;if(c&&this.totalPhotoCount>0){this.bd.t_(Jl(b+1,this.totalPhotoCount));
this.bd.Mk(a);this.bd.lB(b>0,b+1<this.displayPhotoCount)}if(c){if(a.g){this.Og({currentTarget:a})}else{this.Rn=q(a,"deleted",m(this.iF,this,a,true));a.uk()}}};Xg.prototype.iF=function(a,b){ua(this.Rn);this.Rn=null;if(b&&a==this.Zb){alert(Ap)}};Xg.prototype.show=function(a){s(k("lhid_rightbox"),a)};Xg.prototype.J_=function(a){this.Cb.qf=a;this.bd.qf=a};Xg.prototype.Og=function(a){var b=a.currentTarget;if(!b){return}if(this.Zb!==b){return}var c=b.g;if(!c){return}this.tb.Xd(b);this.Cb.Mk(b);if(this.za){this.za.F=
b;this.za.wa(c.tags,c.id)}if(this.Yb&&c.comment){this.Yb.wv(b)}var d=b.album;if(this.bW&&d){this.bW.href=d.link;U(this.T3,Hc(Ae(d.title)))}if(_features.geotagging){if(c.lat&&c.lon){s(this.qi,true);this.n.Gg(c)}else{s(this.qi,false)}}};var W=function(){ka.fc(this);this.hb=new Zb;var a=zq(location.href);this.Nm=a.Za("q");this.xs=a.Za("hl");this.ci=a.Za("psc")||"G";this.Z=-1;this.aw=a.Za("cuname")||a.Za("uname");this.Ej=_authuser;this.bQ=!(!a.Za("filter"));this.Wb=24;this.g6=a.Za("id");this.oa=null;this.F=[];this.gG=new ma(this);this.XU=false;Ak=this;this.B=new ma(this);this.db=new hc(document);this.TU();this.ue();zk=this.qk();var b=k("lhid_query"),c=b?b.firstChild:null;if(c&&this.Nm){if(!c.firstChild){U(c,Hc(this.Nm))}}if(!Nf){Nf=
this.ci}else{this.ci=Nf}if(!co){co=this.aw}else{this.aw=co}this.oa=this.Wl().Q;this.F=this.oa.Wa;this.pA();this.dz()},Ii;W.k(J);var dt=["S","C","F","G"];var qg={},Nf=null,co=null,Ak=null,zk=true;W.prototype.ud=-1;var et=function(){return Ak};W.prototype.cj=function(a){var b=location.toString();if(b.indexOf("#")>0){b=b.replace(/#.*/,"")}var c=this.qk(),d=b+"#"+a;if(zk!=c){location=d}else{location.replace(d)}};W.prototype.pn=function(a){this.cj(this.my(a))};W.prototype.ue=function(){this.B.m(this.db,
"key",this.Zc);this.pA()};W.prototype.iD=function(){this.B.mc();this.gG.mc()};W.prototype.qk=function(){return false};W.prototype.P=function(){ka.gc(this);this.iD();this.db.e()};W.prototype.jA=function(){if(this.oa){this.oa.rp(false);this.oa.lh(this.Z)}this.bQ=false};W.prototype.Ch=function(a){this.F=a.currentTarget.Wa;var b=k("lhid_searchload");s(b,false);if(!this.XU){this.XU=true;var c=k("lhid_searchmain");s(c,true);this.Kg(true)}};W.prototype.Ye=function(a,b){var c=this.Z+a,d=this.oa.$b();if(b){while(c<
0)c+=d;c%=d}if(c<0||c>=d)return false;this.pn(c);return true};W.prototype.wf=T.prototype.wf;W.prototype.xf=T.prototype.xf;W.prototype.rj=T.prototype.rj;W.prototype.nb=function(){var a=this.Zj();if(a&&a.vsurl){return true}};W.prototype.Zc=T.prototype.Zc;W.prototype.pj=T.prototype.pj;W.prototype.xn=T.prototype.xn;W.prototype.yn=T.prototype.yn;W.prototype.Wc=T.prototype.Wc;W.prototype.zd=T.prototype.zd;W.prototype.bq=function(){return true};W.prototype.Yh=function(){};W.prototype.ev=function(){return false};
W.prototype.vf=function(a,b){};W.prototype.kb=function(){this.iD();this.Kg(false)};W.prototype.Kg=function(a){};W.prototype.fa=function(){Bk().log(this.ud,this.bk())};W.prototype.bk=function(){var a={ts:ha()},b=this.Wl();if(b){var c=b.Q;if(c&&c.Ib()){var d=c.Ib().ix();Vg(a,d)}}return a};W.prototype.wa=function(a){var b=false;if(!a){this.Z=0;b=true}else{if(a.length<2){this.Z=0;b=true}else{this.Z=parseInt(a[1],10);if(isNaN(this.Z)){this.Z=0;b=true}if(this.Z<0){this.Z=0;b=true}}}if(b){this.pn(this.Z)}var c=
this.qk();if(zk!=c){zk=c;this.Cs()}};W.prototype.my=function(a){return a};W.prototype.Cs=function(){Ak=this;this.me(Nf);this.dz();this.ue();this.Kg(true);this.fa(this.bk())};W.prototype.Zj=function(){if(!this.oa){return null}return this.oa.si(this.Z)};W.prototype.EC=function(a){var b=a||this.ci;if("G"==b){return bi}else if("S"==b){return"My Photos"}else if("C"==b){return vl}else if("F"==b){var c=this.hb.zi(this.aw,this.aw);if(c){return Dl(c.nickname)}}return bi};W.prototype.dz=function(){var a=k("lhid_searchbar");
for(var b=0;b<dt.length;++b){var c=qg[dt[b]];if(!c){continue}if(!c.tab){c.tab=new Dk(a,c)}c.tab.Pp()}};W.prototype.Wl=function(){var a=qg[Nf];if(!a){Nf="G";a=qg.G}return a};W.prototype.pA=function(){this.gG.mc();if(this.oa){this.gG.m(this.oa,Kh,m(this.Ch,this))}};W.prototype.me=function(a){var b=qg[a],c=this.Wl();if(c){c.savedIndex=this.Z}var d=false;if(b!=c){d=true;this.oa=b.Q}this.ci=b.search_corpus;this.oa=b.Q;this.F=this.oa.Wa;var e=b.savedIndex;Nf=a;this.dz();this.pA();this.pn(e);if(d){this.fa(this.bk())}return e};
W.prototype.ko=function(){var a=this.Wl();return a?a.lastError:null};W.prototype.mC=function(){var a=this.Wl();if(a){a.lastError=null}};W.prototype.qr=function(a,b){a.lastError=b};W.prototype.st=function(){var a=k("lhid_searchload");s(a,false)};W.prototype.HS=function(){return"LH_SEARCH_CONTEXT_INFO"};W.prototype.TU=function(){if(!Ii){cz(this,this.HS())}var a=[];for(var b in qg){var c=qg[b],d=c.Q;d.addEventListener("noitems",m(this.st,this));d.addEventListener("error",m(this.qr,this,c));if(b==this.ci){if(!d.isLoaded()){d.lh(0)}}else{a.push(d)}}for(var e=
0;e<a.length;++e){if(!a[e].isLoaded()){a[e].lh(0)}}};var cz=function(a,b){if(Ii){return}Ii=window[b];for(var c in Ii){var d=Ii[c],e=false;d.savedIndex=0;if("S"==d.search_corpus&&(!a.Ej.name||!a.Ej.user)){continue}if(Ca(d)&&Ca(d.search_corpus)){if(d.is_primary&&d.search_corpus=="G"&&a.bQ==1){e=true}else if(d.search_corpus=="G"){e=true}var f=a.hb.UE(this.Nm);f.wz(function(i,j){var l=i.thumbnail();if(l){(new Image).src=l.url}});var g=f.Ib();g.rp(e);g.bJ(a.Nm,e);if(a.xs){g.n_(a.xs)}g.II(d.search_corpus);
var h=a.Ej.name;if(d.search_corpus=="F"){h=d.target_user||h}g.JI(h);f.cn(a.Wb);if(d.json){f.$X(0,d.json,d.is_primary)}d.Q=f;qg[d.search_corpus]=d}}};var Ma=function(a){W.call(this);this.zl=-1;var b=k("lhid_rightbox");s(b,false);var c=u("tr"),d=u("td");this.ct=u("table");this.Ws=u("tbody");this.U=null;this.Jb=null;this.Ws.id="lhid_listview";Jj(this.Ws,{"class":"lhcl_search_results_content"});var e=k("lhid_searchmain");x(e,c);x(c,d);x(d,this.ct);x(this.ct,this.Ws);this.th=gd(window);this.pt=null;this.wa(a)};Ma.k(W);Ma.prototype.ud=118;Ma.prototype.qk=function(){return true};Ma.prototype.ue=function(){Ma.j.ue.call(this);this.B.m(window,ee,m(this.Rb,
this))};Ma.prototype.Rb=function(){if(this.Jb){this.th=gd(window);this.Jb.kp(this.th)}};Ma.prototype.Rp=function(){var a=k("lhid_searchmain");s(a,true);if(this.Jb){this.Jb.Qm()}if(this.Ek){this.Ek.VR().ba();this.Ek.ba()}if(this.Jb){this.Qp(this.ko());this.Jb.Gg(Math.max(this.Z,0))}};Ma.prototype.Kg=function(a){if(this.Ek){this.Ek.show(a)}s(this.ct,a);s(this.Ws,a);if(!a){this.pJ(null)}};Ma.prototype.bk=function(){var a=Ma.j.bk.call(this);if(this.U){a.start=this.U.ng(this.U.ce());a.num=this.U.Jf()}return a};
Ma.prototype.wa=function(a){Ma.j.wa.call(this,a);if(!this.oa){var b=this.Wl();this.oa=b.Q}if(!this.U){this.U=new Yb(0,this.Wb);this.U.Pk(this.oa.$b());this.Jb=new bd(this.Ws,this.oa,this.U);var c=this.U,d=function(j){c.cn(j.gridSize)};this.Jb.addEventListener("gridsizechanged",d);this.Jb.kp(gd());var e=k("lhid_searchmain");this.pt=k("lhid_searchbody");this.pG=null;var f=u("tr"),g=u("td");g.align="center";var h=u("center");h.id="pager";x(g,h);x(f,g);x(e,f);this.Ek=new lf(this.U,10);this.Ek.V(h);this.U.addEventListener(kf,
m(this.Pq,this));this.oa.lh(this.Z);var i=k("lhid_searchload");s(i,false)}if(this.Z+1>=this.oa.$b()){this.Z=Math.max(0,this.oa.$b()-1)}this.U.KI(this.U.Sr(this.Z));this.U.Fg(this.Z);this.Rp()};Ma.prototype.my=function(a){return a+"+1"};Ma.prototype.Cs=function(){Ma.j.Cs.call(this);var a=gd(window);if(this.th.width!=a.width||this.th.height!=a.height){this.Rb()}};Ma.prototype.Pq=function(){var a=this.U.ce(),b=this.U.ng(a),c=this.U.Jf();if(this.Z<b||this.Z>=b+c){this.pn(b)}var d=this.oa.Ea(b,c,function(){}),
e=this.U.ce(),f=-1;if(this.zl<e){f=b+c}else{f=b-c}this.zl=e;if(f>=0&&f<this.oa.$b()){this.oa.Ea(f,c,function(){})}this.Jb.uN();this.Jb.mn(!d);this.Qp(this.ko());this.fa(this.bk())};Ma.prototype.pJ=function(a,b,c){if(this.pG){C(this.pG)}var d=k("lhid_searchload");if(a){if(c&&c.parentNode){x(c.parentNode,a);c.parentNode.insertBefore(a,c)}else{x(this.pt,a);if(b){if(d){this.pt.insertBefore(a,d)}}}}this.pG=a};Ma.prototype.OQ=function(){var a=[],b=["S","C","F","G"];for(var c=0;c<b.length;++c){var d=qg[b[c]];
if(!d){continue}if(d.Q){if(d.Q.$b()>0){a.push(d)}}}if(a.length==0){return null}var e=u("div"),f=u("div");f.className="lhcl_search_results_help";var g=u("div");g.className="lhcl_search_results_no_results";var h=ca(this.Nm);g.innerHTML=Mp('<span class="lhcl_search_results_query">'+h+"</span>",this.EC());f.innerHTML="However, photos that matched "+('<span class="lhcl_search_results_query">'+h+"</span>")+" were found in the following locations:";var i=u("div");i.className="lhcl_search_results_help_related";
x(e,g);x(e,f);x(f,i);for(var c=0;c<a.length;++c){var d=a[c],j=u("span");j.className="lhcl_fakelink";U(j,d.name);x(i,j);q(j,X,m(this.me,this,d.search_corpus));var l=u("span");U(l," ("+d.Q.Wu()+") ");x(i,l)}return e};Ma.prototype.Qp=function(a){var b=null;a=a||this.ko();var c=false;if(a){c=true;var d="";if(no==a.status){d=Vp(a.value)}else if(mo==a.status){d="You entered a query string that was too long.  Please enter one that is less than 128 characters."}else if("empty_query_string"==a.status){d='You didn\'t enter any query in the search box.  Please enter some terms in the search box and click the "Search Photos" button again.'}else{d=
"Unknown search error: "+a.value}if(d){b=u("div");Ba(b,"lhcl_error_msg");U(b,d)}}s(this.ct,true);var e;if(!b&&this.U&&this.oa.isLoaded()){var f=this.U.ce(),g=this.U.bs(),h=f+1>=g,i=this.oa.Ib().pm(),j=this.oa.$b(),l=0==j,p=false;if(h&&i&&j>0&&j<this.oa.Wu()){var t='In order to show you the most relevant results, we have omitted some entries very similar to those already displayed.<br>If you like, you can <span class="lhcl_fakelink" id="lhid_uncrowded_link">repeat the search with the omitted results included.</span>',
w=k("lhid_uncrowded_link");if(w){C(w)}b=G("div",{className:"lhcl_search_crowded_results"});x(b,wm(t));p=true}if(!b&&h&&j>1000){b=u("div");Ba(b,"lhcl_error_msg");U(b,Vp(this.U.ng(f)+1));c=true}if(l&&!b){s(this.ct,false);b=this.OQ();if(!b){b=P(bz,{query:ca(this.Nm),corpusName:this.EC()})}}}this.mC();this.pJ(b,c,p?k("pager"):null);if(p){e=k("lhid_uncrowded_link")}if(e){q(e,X,m(this.jA,this))}};Ma.prototype.jA=function(){if(this.oa){var a=this.U.ng(this.U.ce());this.oa.Ib().rp(false);this.oa.reset();
this.oa.Ea(a,this.U.Jf(),function(){});if(this.Jb){this.Jb.mn(true)}}};Ma.prototype.Ch=function(a){Ma.j.Ch.call(this,a);if(this.U){this.U.Pk(Math.min(1000,this.oa.$b()))}this.Rp();if(this.Jb){this.Jb.mn(false)}};Ma.prototype.Zc=function(a){if(vj(a)){return}if(a.keyCode==13){window.location.replace(window.location.href.replace(/#.*/,"#"+this.Z));a.stopPropagation();return}Ma.j.Zc.call(this,a)};Ma.prototype.me=function(a){if(this.oa&&this.oa.ci==a){return}if(this.Jb){this.Jb.tg=true}var b=Ma.j.me.call(this,
a);if(this.U){var c=Math.min(1000,this.oa.$b());b=Math.min(b,c-1);b=Math.max(b,0);this.U.Pk(c);this.U.Fg(b);this.Jb.Qe(this.oa);var d=true;if(this.oa.isLoaded()&&this.oa.$b()>0){d=this.oa.lh(b)}if(d){if(n.SAFARI){pc(m(this.Jb.Qm,this.Jb))}else{this.Jb.Qm()}this.Qp(this.ko());this.Jb.mn(false)}else{this.Jb.mn(true)}if(this.Ek){this.Ek.ba()}}};Ma.prototype.st=function(){Ma.j.st.call(this);if(this.Jb){this.Jb.mn(false)}this.Qp(this.ko())};Ma.prototype.qr=function(a,b){Ma.j.qr.call(this,a,b);if(Nf==a.search_corpus){this.Qp();
this.mC()}};var bz='<div class="lhcl_search_results_no_results">'+Mp('<span class="lhcl_search_results_query">{query}</span>',"{corpusName}")+'<div class="lhcl_search_results_help"><div>In order to find more items, consider the following tips:</div><div><ul><li>Choosing the right search terms is the key to finding the information you need.  Start with the obvious - if you\'re looking for items related to <b>Hawaii</b> try typing "<b>Hawaii</b>".</li><li>It\'s often advisable to use multiple search terms. For example, if you\'re looking for items of a Hawaiian vacation, type "<b>vacation Hawaii</b>".</li><li>Don\'t worry about capitalization.  Google searches are not case sensitive.</li><li>Sometimes you\'ll only want results that include an exact phrase. In this case, simply put quotation marks around your search terms. For example, you could type "the long and winding road".</li></ul></div></div>';var jb=function(a){W.call(this);var b=k("lhid_main"),c=k("lhid_tools");this.n4=b;this.HG=k("lhid_login");this.wJ=k("lhid_signup");var d=k("lhid_user_nickname"),e=d.parentNode,f=u("a");Jj(f,{id:"lhid_user_gallery_link"});e.appendChild(f);var g=k("lhid_portraitlink"),h=k("lhcl_portrait_id");this.lj=new Fk(d,f,h,g);var i=new Id(this,b,true);this.Sa=u("div");this.Sa.className="lhcl_photobox";b.appendChild(this.Sa);this.p=u("div");this.Sa.appendChild(this.p);if(_features.tags){var j=new ec(this,c,true);
j.searchCorpus=this.ci}var l=new oc(this,b,c);this.Cb=new Xg(this,this.Ej,new zc(this,c,[],true,true),new td(this,this.Sa,b),j,l,i);this.bd=i;this.ia=new Qb(this,this.p,this.F,false,false,512);this.ia.Ag=m(this.ST,this);this.ia.Tf=m(this.QT,this);this.ia.onload=m(this.RT,this);this.ia.onstopped=m(this.TT,this);this.ia.onresize=m(this.pj,this);this.addEventListener("loadstart",m(jb.prototype.oF,this));this.addEventListener("loadstop",m(jb.prototype.rF,this));v("hideSlideshow",m(T.prototype.tj,this));
v("hideVideo",m(T.prototype.aq,this));v("restoreVideo",m(T.prototype.jq,this));this.wa(a)};jb.k(W);jb.prototype.ud=119;jb.prototype.ue=function(){W.prototype.ue.call(this);var a=k("lhid_backlink");this.B.m(a,X,this.eF,true)};jb.prototype.oF=function(a){var b=a.photo;if(!b){return}if(!b.g){var c=m(this.Og,this);b.removeEventListener(Nh,c);b.addEventListener(Nh,c)}this.Cb.zH(b,this.Z,false);this.lj.K1(b.user)};jb.prototype.rF=function(a){var b=a.photo;if(!b){return}this.Cb.zH(b,this.Z,true)};jb.prototype.l0=
function(){var a=this.oa.$b();if(this.Z>=a){this.pn(a-1);return}this.ia.$p(this.Z);this.pn(this.Z)};jb.prototype.P=function(){ka.gc(this);if(this.ia)this.ia.P();if(this.W)this.W.P()};jb.prototype.wa=function(a){W.prototype.wa.call(this,a);this.TJ();var b=this.oa.lh(this.Z);if(b){var c={currentTarget:this.oa,offset:this.Z,crowdedCount:this.oa.$b()};this.Ch(c)}this.fa()};jb.prototype.Ch=function(a){W.prototype.Ch.call(this,a);this.VJ();this.l0()};jb.prototype.nb=function(){var a=this.Zj();return a&&
a.vsurl};jb.prototype.Zc=function(a){if(vj(a)){return}if(a.keyCode==85){this.eF(a)}else{jb.j.Zc.call(this,a)}};jb.prototype.vf=function(a,b){var c=this.Zj();if(c){c.g=null;c.uk()}};jb.prototype.Kg=function(a){s(k("lhid_backlink_holder"),a);s(this.n4,a);if(this.Cb){this.Cb.show(a)}};jb.prototype.ST=function(){var a=this.Zj();if(!a){return}if(this.ay)this.Ye(this.P4);this.oa.lh(this.ia.Wh());this.dispatchEvent({type:"onShow",photo:a})};jb.prototype.QT=function(){this.$c=true;this.TJ();var a=this.Zj();
if(a){this.dispatchEvent({type:"loadstart",photo:a})}};jb.prototype.RT=function(){this.$c=false};jb.prototype.TT=function(){var a=this.Zj();if(!a){return}this.dispatchEvent({type:"loadstop",photo:a})};jb.prototype.Og=function(a){var b=a.currentTarget;if(!b){return}var c=this.Zj();if(c!=b){return}if(b.vsurl){this.ia.D.dB(b.s,b.w,b.h,b.vsurl);this.ia.$A()}if(b.g){this.Cb.Og({currentTarget:b})}};jb.prototype.TJ=function(){var a=window.location.toString(),b=a+"+1";if(b!=a){var c=k("lhid_backlink");c.href=
b}};jb.prototype.eF=function(a){a.stopPropagation();this.cj(this.Z+"+1")};jb.prototype.VJ=function(){this.F=this.oa.Wa;this.ia.F=this.F;this.Cb.J_(this.F);this.Cb.totalPhotoCount=this.oa.Vd;this.Cb.displayPhotoCount=this.oa.$b();this.Cb.Cb.totalPhotoCount=this.oa.$b()};jb.prototype.me=function(a){var b=W.prototype.me.call(this,a),c=this.oa.lh(b);if(c){this.VJ()}};function gq(a){if((!location.hash||location.hash=="#")&&_photo.length){var b="http://"+location.host+location.pathname+location.search+"#"+_photo[0].id;location.replace(b);return}window.setTimeout('location.replace("'+_album.link+'")',1000);var c=k("lhid_main");this.p=u("div");c.appendChild(this.p);this.p.innerHTML="The requested photo is invalid or unavailable.<br />You will be redirected to the album page."}gq.prototype.kb=function(){if(this.p)C(this.p)};function iq(a){var b=location.href.replace("#.*","#0+1");if(b.indexOf("#0+1")<0){b=location.href.toString()+"#0+1"}if(!location.hash||location.hash=="#"){location.replace(b)}}iq.prototype.kb=function(){};function tg(a,b){this.Se=a;this.b=b;this.En=u("div");this.En.className="lhcl_bandselect";Ne(this.En,0.2);this.Pi=m(this.Od,this);this.xh=m(this.zg,this);this.yh=m(this.Vb,this);this.Am=m(this.xc,this);this.Nu=[];this.yc={};this.z0=n.IE||n.SAFARI;this.YV=false;q(this.b,"mousedown",this.Pi);this.b.onselectstart=function(){return false}}tg.prototype.Od=function(a){L(this.b,"mousedown",this.Pi);q(document,"mousemove",this.xh);q(document,"mouseup",this.yh);q(document,"mouseout",this.Am);var b=md(),c=a.clientX+
b.scrollLeft,d=a.clientY+b.scrollTop;this.Xp=c;this.Yp=d;var e=this.En.style;e.left=c+"px";e.top=d+"px";e.width="0";e.height="0";this.lG=new gb(d,c,d,c);this.Nu.length=0;if(!(a.shiftKey||a.ctrlKey)){this.Se.ve()}document.body.appendChild(this.En);a.stopPropagation();a.preventDefault()};tg.prototype.zg=function(a){var b=md(),c=a.clientX+b.scrollLeft,d=a.clientY+b.scrollTop,e=new gb(Math.min(d,this.Yp),Math.max(c,this.Xp),Math.max(d,this.Yp),Math.min(c,this.Xp)),f=this.En.style;f.left=e.left+"px";f.top=
e.top+"px";f.width=e.right-e.left+"px";f.height=e.bottom-e.top+"px";var g=Ir(e,this.lG),h=Jr(g,this.lG),i=Jr(g,e),j=a.ctrlKey?2:1;for(var l=0;l<h.length;l++){this.tI(e,h[l],j)}for(var l=0;l<i.length;l++){this.tI(e,i[l],0)}this.lG=e};tg.prototype.tI=function(a,b,c){var d=this.Se.wr(b.right,b.top),e=this.Se.wr(b.left,b.bottom),f=this.Se.slide,g=false;for(var h=d.row;h<=e.row;h++){var i=h*d.rowLength+e.col,j=Math.min(h*d.rowLength+d.col,(h+1)*d.rowLength-1);j=Math.min(j,f.length-1);for(var l=i;l<=j;l++){var p=
f[l],t=p.fx(),w=Ja(t),y=new gb(w.y,w.x+t.offsetWidth,w.y+t.offsetHeight,w.x);if(c==0){if(!on(a,y)){qc(this.Nu,p);g=true;this.yc[p.iid]=[p,p.selected]}}else if(on(b,y)){ji(this.Nu,p);g=true;this.yc[p.iid]=[p,c==2?!p.selected:true]}}}if(g){if(this.z0&&!this.lock){pc(this.DF,0,this)}else{this.DF()}}};tg.prototype.DF=function(){for(var a in this.yc){var b=this.yc[a];b[0].CF(b[1]);delete this.yc[a]}if(this.z0){this.YV=true;pc(function(){this.YV=false},0,this)}};tg.prototype.Vb=function(a){q(this.b,"mousedown",
this.Pi);L(document,"mousemove",this.xh);L(document,"mouseup",this.yh);L(document,"mouseout",this.Am);for(var b=0;b<this.Nu.length;b++){var c=this.Nu[b];if(a.ctrlKey){this.Se.Zi(c,!c.selected)}else{this.Se.Zi(c,true)}}document.body.removeChild(this.En)};tg.prototype.xc=function(a){if(!a.relatedTarget){this.Vb(a)}};function wf(a,b,c,d,e,f,g){this.Se=a;this.p=P('<div class="lhcl_slide" style="left:0"><div class="lhcl_slideImage"style="background-image:url({url})"><div class="lhcl_selectBox" style="visibility:hidden"><div class="lhcl_innerSelectBox"></div></div></div></div>',{url:e});this.D=this.p.firstChild;this.Pi=m(this.Od,this);this.xh=m(this.zg,this);this.yh=m(this.Vb,this);q(this.D,"mousedown",this.Pi);this.zh=f;this.O=new Date(g);this.iid=d;this.old_layout=c;this.layout_num=b;this.src=e;this.selected=false}
wf.prototype.remove=function(){C(this.p)};wf.prototype.S=function(){return this.p};wf.prototype.fx=function(){return this.D};wf.prototype.Od=function(a){if(!this.selected||a.shiftKey||a.ctrlKey){this.Se.aU(this,a.shiftKey,a.ctrlKey)}if(this.selected){q(document,"mousemove",this.xh);q(document,"mouseup",this.yh);L(this.D,"mousedown",this.Pi);this.Xp=a.clientX;this.Yp=a.clientY}a.stopPropagation();a.preventDefault()};wf.prototype.zg=function(a){var b=a.clientX-this.Xp,c=a.clientY-this.Yp;if(b*b+c*c>=
16){this.Vb(a);b+=this.D.offsetTop;c+=this.D.offsetLeft;this.Se.kT(this,a.clientX,a.clientY,b,c)}a.stopPropagation();a.preventDefault()};wf.prototype.Vb=function(a){L(document,"mousemove",this.xh);L(document,"mouseup",this.yh);q(this.D,"mousedown",this.Pi)};wf.prototype.select=function(a){this.selected=!(!a);this.CF(a)};wf.prototype.CF=function(a){this.D.firstChild.style.visibility=a?"":"hidden"};var Dv=function(a,b){if(a.layout_num<b.layout_num){return-1}else if(a.layout_num>b.layout_num){return 1}else{return 0}},
Cv=function(a,b){return is(a.zh,b.zh)},Bv=function(a,b){if(a.O<b.O){return-1}else if(a.O==b.O){return 0}else{return 1}};function Eg(a){this.Se=a;this.Hv=false;this.YM=m(this.ZM,this);this.la=[]}Eg.prototype.ru=function(a){var b=a.first,c=a.last,d=a.mid;a.t0=ha();a.x0.length=(a.x1.length=c-b);var e=this.Se.slide;for(var f=b;f<c;f++){var g=f-b,h=parseInt(e[f].S().style.left,10);a.x0[g]=h;if(d>=0){a.x1[g]=f<d?-10:10}else{a.x1[g]=0}}};Eg.prototype.F0=function(a,b,c){var d=a*c,e=d+b;if(this.la.length){var f=this.la[0];if(f.first==d){if(f.mid!=e){f.mid=e;this.ru(f);this.Rz()}return}else{if(f.mid>=0){f.mid=-1;this.ru(f)}for(var g=
1;g<this.la.length;g++){var h=this.la[g];if(h.first==d){this.la.splice(g,1);this.la.unshift(h);this.ru(h);this.Rz();return}}}}var i=Math.min(d+c,this.Se.slide.length),a={first:d,last:i,mid:e,x0:[],x1:[],t0:-1};this.ru(a);this.la.unshift(a);this.Rz()};Eg.prototype.Rz=function(){if(!this.Hv){this.Hv=true;wj(this.YM)}};Eg.prototype.FJ=function(){if(this.Hv){this.Hv=false;zo(this.YM)}};Eg.prototype.reset=function(){var a=this.Se.slide;while(this.la.length){var b=this.la.pop(),c=b.first+b.x0.length;for(var d=
b.first;d<c;d++){a[d].S().style.left="0"}}this.FJ()};Eg.prototype.ZM=function(a){var b=this.Se.slide,c=false;for(var d=this.la.length-1;d>=0;d--){var e=this.la[d];if(e.t0<0)continue;c=true;var f=a-e.t0;if(f<100){var g=f/100;for(var h=0;h<e.x0.length;h++){b[e.first+h].S().style.left=e.x0[h]+(e.x1[h]-e.x0[h])*g+"px"}}else{for(var h=0;h<e.x1.length;h++){b[e.first+h].S().style.left=e.x1[h]+"px"}e.t0=-1;if(e.mid==-1)this.la.splice(d,1)}}if(!c)this.FJ()};function Na(a,b,c){this.p=u("div");this.iQ=u("div");this.iQ.className="lhcl_tableEnd";a.appendChild(this.p);a.appendChild(this.iQ);this.Y5=new tg(this,a);this.bZ=new Eg(this);this.Ga=[];this.ff=null;this.slide=[];this.xh=m(this.zg,this);this.yh=m(this.Vb,this);this.Am=m(this.xc,this);if(n.IE){this.A6=q(document,"selectstart",this.ps,false,this)}v(r("reorder"),m(this.jz,this));v(r("copyToAlbum"),m(this.iO,this));v(r("moveToAlbum"),m(this.OW,this));v(r("deleteSelected"),m(this.Nj,this));v(r("sortSlides"),
m(this.nX,this));this.b3=b;this.zP=c;this.rw(true)}Na.prototype.ps=function(a){if(this.ff&&Cc(this.ff,a.target)||Cc(this.p,a.target)){a.preventDefault()}};Na.prototype.OM=function(a,b,c,d,e){c+="?crop=1&imgmax=64";var f=new wf(this,this.slide.length,a,b,c,d,e);this.slide.push(f);this.p.appendChild(f.S())};Na.prototype.eV=function(a,b){b.sort(Dv);if(a>=this.slide.length){for(var c=0;c<b.length;c++){this.slide.push(b[c]);this.p.appendChild(b[c].S())}}else{var d=this.p.childNodes[a];for(var c=0;c<b.length;c++){this.p.insertBefore(b[c].S(),
d);this.slide.splice(a,0,b[c]);a++}}for(var c=0;c<this.slide.length;c++){this.slide[c].layout_num=c}};Na.prototype.WE=function(){return nh(this.Ga,function(a){return a.iid})};Na.prototype.ez=function(a){var b=md(),c=a.clientX+b.scrollLeft,d=a.clientY+b.scrollTop,e=this.wr(c,d,true),f=e.index;for(var g=this.slide.length-1;g>=0;g--){var h=this.slide[g];if(h.selected){this.slide.splice(g,1);h.remove();if(g<f)f--}}this.eV(f,this.Ga)};Na.prototype.ve=function(){while(this.Ga.length){this.Zi(this.Ga.pop(),
false)}};Na.prototype.Zi=function(a,b,c){qc(this.Ga,a);if(b){if(c){this.Ga.unshift(a)}else{this.Ga.push(a)}}a.select(b);if(this.Ga.length<2){this.rw(this.Ga.length==0)}};Na.prototype.aU=function(a,b,c){if(hg(n.PLATFORM,"Mac")){c=b;b=false}if(b){if(this.Ga.length){var d=this.Ga[0].layout_num,e=a.layout_num;if(!c)this.ve();if(d<e){for(var f=d;f<=e;f++){this.Zi(this.slide[f],true)}}else{for(var f=d;f>=e;f--){this.Zi(this.slide[f],true)}}}else{this.Zi(a,true)}}else if(c){this.Zi(a,!a.selected,true)}else{this.ve();
this.Zi(a,true)}};Na.prototype.kT=function(a,b,c,d,e){if(this.ff)C(this.ff);var f=Ja(a.S());this.Xp=b;this.Yp=c;this.qD=f.x+d;this.Aw=f.y+e;var g=P('<div style="position:absolute;left:{x}px;top:{y}px"><div class="lhcl_slideImage" style="background-image:url({src})"></div></div>',{x:this.qD,y:this.Aw,src:a.src});Ne(g.firstChild,0.5);document.body.appendChild(g);if(this.Ga.length>1){var h=u("div");h.className="lhcl_draginfo";g.appendChild(h);h.innerHTML="+ "+(this.Ga.length-1)+" more"}q(document,"mousemove",
this.xh);q(document,"mouseup",this.yh);q(document,"mouseout",this.Am);this.wW=document.documentElement.scrollHeight-jh();this.ff=g};Na.prototype.zg=function(a){var b=a.clientX,c=a.clientY,d=b-this.Xp,e=c-this.Yp;this.TG(d,e);var f=md(),g=b+f.scrollLeft,h=c+f.scrollTop,i=this.wr(g,h,true);this.bZ.F0(i.row,i.col,i.rowLength);var j=jh(),l=0;if(c<40){l=c-40}else if(j-c<40){l=40-(j-c)}if(l){l=2000*(l/40);l=Se(l,-2000,2000)}this.Mv(l)};Na.prototype.xc=function(a){if(!a.relatedTarget)this.Mv(0)};Na.prototype.TG=
function(a,b){this.ff.style.left=this.qD+a+"px";this.ff.style.top=this.Aw+b+"px"};Na.prototype.Vb=function(a){L(document,"mousemove",this.xh);L(document,"mouseup",this.yh);L(document,"mouseout",this.Am);this.bZ.reset();this.ez(a);this.Mv(0);if(this.ff)C(this.ff);this.ff=null};Na.prototype.Mv=function(a){if(a==0){if(this.Wt){zo(this.Wt);this.Wt=null}}else{this.W4=a;if(!this.Wt&&this.wW>0){this.DV=ha();this.Wt=m(this.oZ,this);wj(this.Wt)}}};Na.prototype.oZ=function(a){var b=(a-this.DV)*0.0010;this.DV=
a;var c=this.W4*b,d=md(),e=Number(d.scrollTop);if(c!=0){d.scrollTop=Se(Number(e+c),0,this.wW);if(this.ff){var f=this.ff.offsetLeft-this.qD,g=this.ff.offsetTop-this.Aw;this.Aw+=d.scrollTop-e;this.TG(f,g)}}};Na.prototype.aZ=function(){if(this.slide.length==0)return 0;var a=this.p.offsetWidth,b=Math.floor(a/this.slide[0].S().offsetWidth);return Math.max(b,1)};Na.prototype.wr=function(a,b,c){var d=0,e=0,f=this.aZ();if(f>0){var g=this.slide[0].S(),h=g.offsetWidth,i=g.offsetHeight,j=Ja(g),l=Math.max(a-
j.x,0),p=Math.max(b-j.y,0);if(c)l+=h/2;var t=Math.floor((this.slide.length-1)/f);d=Math.min(Math.floor(p/i),t);var w=d!=t?f:this.slide.length%f||f;e=Math.min(Math.floor(l/h),w)}var y=d*f+e;return{index:y,row:d,col:e,rowLength:f}};Na.prototype.gJ=function(a){this.jz();var b=this.WE();if(b.length>100){alert("We're sorry, you cannot copy or move more than 100 photos at once. You currently have "+b.length+" photos selected.");return}this.Tn(true);this.sJ(false);new Sa(a,b,m(this.FN,this))};Na.prototype.FN=
function(){this.Tn(false);this.sJ(true)};Na.prototype.sJ=function(a){var b=rm("select");for(var c=0;c<b.length;c++){b[c].style.visibility=a?"":"hidden"}};Na.prototype.iO=function(){this.gJ(3)};Na.prototype.OW=function(){if(!_album.blogger||confirm("Are you sure you want to move these photos? They will no longer appear in your blog if you move them.")){this.gJ(4)}};Na.prototype.Nj=function(){this.jz();this.Tn(true);if(!confirm(_album.blogger?"Are you sure you want to delete the selected photos? They will no longer appear in your blog if you delete them.":
"Are you sure you want to delete the selected photos?\n\nImportant: deleting photos cannot be undone.")){this.Tn(false);return}var a=["noredir=true","optgt=DELETE","aid="+_album.id,"selectedphotos="+this.WE()];document.body.style.cursor="wait";oa.Fb(_selectedPhotosPath,m(this.XO,this,this.Ga.length),a.join("&"))};Na.prototype.XO=function(a,b){if(b.status>=400||b.text.indexOf("success")<0){alert(Ll);document.body.style.cursor="";return}if(a>=this.slide.length){location.href=_album.link}else{location.reload()}};
Na.prototype.jz=function(a){if(a)this.Tn(true);var b=Infinity,c=-1;for(var d=0;d<this.slide.length;d++){if(this.slide[d].old_layout!=d){b=d;break}}for(var d=this.slide.length-1;d>b&&d>0;d--){if(this.slide[d].old_layout!=d){c=d+1;break}}var e=[],f=Infinity,g=-1;for(var d=b;d<c;d++){var h=this.slide[d];e.push(h.iid);f=Math.min(f,h.old_layout);g=Math.max(g,h.old_layout)}if(e.length){var i=["aid="+_album.id,"uname="+qb(_authuser.name),"start="+f,"stop="+g,"iids="+e.join(",")];oa.Fb(_reorderPath,m(this.OY,
this,a),i.join("&"))}else{if(a){document.location=a}}};Na.prototype.OY=function(a,b){if(b.status>=400||b.text.indexOf("success")<0){alert(Ll);return}if(a){document.location=a}};Na.prototype.Tn=function(a){this.b3.disabled=a;this.rw(a)};Na.prototype.rw=function(a){if(this.Ga.length==0)a=true;for(var b=0;b<this.zP.length;b++){this.zP[b].disabled=a}};Na.prototype.BJ=function(a){this.slide.sort(a);for(var b=0;b<this.slide.length;b++){var c=this.slide[b];c.remove();this.p.appendChild(c.S());c.layout_num=
b}};Na.prototype.nX=function(a){if(a.value=="name"){this.BJ(Cv)}else if(a.value=="date"){this.BJ(Bv)}a.value="default"};function nl(a,b,c,d,e){this.bi=a;this.Bn=null;this.X5=null;this.p5=b;this.TM=c;this.D5=d;this.C5=e;v("sortAlbums",m(this.hB,this));this.hB(ij.param)}nl.prototype.hB=function(a){var b=[];if(a==ij.param){this.JA(this.bi);b.push(ij.label);b.push(ja(ip,ol))}else if(a==ol.param){if(this.Bn==null){this.Bn=[];this.Bn.length=this.bi.length;for(var c=0;c<this.bi.length;c++){this.Bn[c]=this.bi[c]}this.Bn.sort(wu)}this.JA(this.Bn);b.push(ja(ip,ij));b.push(ol.label)}var d='<span class="lhcl_notbold">Sort by:</span> '+
b.join(" | ");this.p5.innerHTML=d};nl.prototype.JA=function(a){this.TM.innerHTML="";for(var b=0;b<a.length;b++){var c=a[b];c.width=this.D5;c.height=this.C5;c.photo_count=c.count;if(c.unlisted){c.listing='<span class="lhcl_status">'+uj+"</span>"}c.i=b;var d=c.blogger?'<div class="lhcl_blogger lhcl_fakelink" style="background: url({src}) no-repeat left; width: {width}px; height: {height}px"><img src="img/blogger.gif" /></div>':'<img src="{src}" width="{width}" height="{height}"/>';if(c.isdefault){c.addclass=
" lhcl_dropbox";c.icon='<a href="'+c.url+'"><img src="img/dropbox.gif"></a>&nbsp;'}c.image_html=ja(d,c);if(_features.geotagging&&c.lat&&c.lon){c.icon_html='<img src="img/mapped.gif" />'}this.TM.appendChild(P('<div class="lhcl_album"><div class="lhcl_imagebox{addclass}"><div class="lhcl_frame"><div class="lhcl_padding"><a href="{url}" onclick="_d(\'AlbumClearPaging\')">{image_html}</a></div></div></div><div class="lhcl_desc{addclass}"><table class="lhcl_title" style="height:4em;"><tr><td><div class="lhcl_titlebox">{icon}<a href="{url}" id="url{i}"></a> <span class="lhcl_info">({photo_count})</span>{icon_html}</div><div class="lhcl_info">{date} {listing}</div></td></tr></table></div></div>',
c));var e=k("url"+b);V(e,"paddingLeft","3em");Vl(e,2,c.title,225);V(e,"paddingLeft","0")}};var jp=function(a){Av("_lhmessageid",a?"INDEX_SET_ON":"INDEX_SET_OFF",-1,"/");window.location.reload()},wu=function(a,b){return b.upload_secs-a.upload_secs},ip="<a href=\"javascript:_d('sortAlbums', '{param}');\">{label}</a>",ij={param:"none",label:"Album date"},ol={param:"upload",label:"Upload date"};var Dz=function(){k("lhid_emailtofield").focus();v("LTA",xu);v("CancelMail",Nu);v("CheckFacesAll",Ou);v("CheckFacesNone",Pu);if(_features.contactpicker){Sj="/lh/ui/";q(k("lhid_pick"),ta,Qu);_initEmailAutocomplete(k("lhid_emailtofield"),"/lh/data/contacts",true)}else{_initEmailAutocomplete(k("lhid_emailtofield"),"/lh/contacts?out=js",true)}};function Qu(a){var b="toolbar=no,location=no,menubar=no,scrollbars=no,resizable=yes,status=no,width=315,height=610,top="+a.screenY+",left="+a.screenX+",screenY="+
a.screenY+",screenX="+a.screenX,c=Rm("lhid_emailtofield",false).toString();window.open(c,"_picker",b)}function Ru(){var a=k("lhid_emailtofield"),b=k("lhid_emailto");if(!(a&&b))return false;var c=gu(a.value),d=[];for(var e=0;e<c.length;e++){var f=c[e];if(!f)continue;var g=aq(c[e])[1];if(!g||!Xz(g)){alert('The address "'+f+'" does not appear to be a valid email address. Please check the address and try again.');return false}d.push(f)}if(!d.length){alert("Please specify at least one recipient.");return false}b.value=
d.join(",");return true}function Nu(a){var b=k("lhid_emailform");for(var c=0;c<b.elements.length;c++){var d=b.elements[c];if(d.type!="textarea")continue;if(Va(d.value)!=""){if(confirm('Your email has not been sent. Press "Okay" to discard your message, or "Cancel" to continue writing.')){break}else{return}}}window.location=a}function Ou(){return vp("sids","lhid_emailform",true)}function Pu(){return vp("sids","lhid_emailform",false)}function vp(a,b,c){var d=k(b);if(typeof d!="undefined"){for(var e=
0;e<d.elements.length;e++){var f=d.elements[e];if(f.name==a){f.checked=c}}}};function pu(a,b,c,d){oa.Fb(a,m(Fu,null,b,c))}function Fu(a,b,c){if(c.status>=400||c.text.indexOf("success")<0){alert(Ol);return}var d=k("lhid_addFav");if(d){s(d,false)}d=k("lhid_inFav");if(d){s(d,true)}d=k("lhid_nolink");if(d){s(d,true)}Ac("hideVideo");new yg(a,b)}function Eu(a){if(a.status>=400||a.text.indexOf("success")<0){alert(Ol);return}var b=k("lhid_nolink");if(b){s(b,false)}b=k("lhid_link");if(b){s(b,true)}}function yg(a,b){ka.fc(this);this.L4=a;var c={lhui_username:b,lhui_yes_func:r("func"),
lhui_no_func:r("func")};this.g=c;this.hc=u("div");this.hc.className="lhcl_cover";document.body.appendChild(this.hc);this.oc();this.le=m(this.oc,this);Yd(window,"resize",this.le);window.scrollTo(0,0);Ph();this.p=P('<div class="lhcl_dialog"><div class="lhcl_dialog_body lhcl_addfavorite"><p><img src="img/favorites_checked.gif" />{lhui_username} has been added as a favorite.</p><br /><hr /><p>Now that this user is one of your favorites, you can link to their public gallery from your public gallery.</p><p>Would you like to link to {lhui_username}\'s public gallery?</p><br /><table><tr><td class="lhcl_halfwidth lhcl_align_right""><input type="button" value="Yes" onclick="_d(\'{lhui_yes_func}\')" /></td><td class="lhcl_halfwidth lhcl_dialog_button"><input type="button" value="No, Skip this" onclick="_d(\'{lhui_no_func}\')" /></td></tr><tr><td></td><td class="lhcl_dialog_button"><span class="lhcl_mini_text">(you can always do this later)</span></td></tr></table></div></div>',
this.g);document.body.insertBefore(this.p,document.body.firstChild);v(this.g.lhui_yes_func,m(this.YK,this));v(this.g.lhui_no_func,m(this.ZL,this));this.Bk=Jd(this,this.uj);Yd(document,"keydown",this.Bk);this.cM()}yg.prototype.P=function(){ka.gc(this);if(this.g){F(this.g.lhui_yes_func);F(this.g.lhui_no_func)}ue(document,"keydown",this.Bk);ue(window,"resize",this.le);for(var a in this)this[a]=null};yg.prototype.kb=function(){if(this.p)C(this.p);if(this.hc)C(this.hc);Ac("restoreVideo");this.P()};yg.prototype.cM=
function(){if(typeof oa=="undefined"||!oa.il()){window.location=this.V6+"&redir="+encodeURIComponent(window.location);this.kb()}};yg.prototype.oc=function(){var a=Math.max(document.body.offsetHeight,document.body.scrollHeight);a=Math.max(a,document.body.clientHeight);a=Math.max(a,document.documentElement.clientHeight);this.hc.style.height=a+"px"};yg.prototype.ZL=function(){this.kb()};yg.prototype.YK=function(){oa.Fb(this.L4,Eu);this.kb()};function sf(a,b,c){this.jb=a;this.Nc=b;this.of=c;this.sU=k("lhid_header");this.sM=k("lhid_activity");this.EX=k("lhid_favorites");this.A5=k("lhid_teaser");this.r6=k("lhid_lastshown");if(_features.googlephotos){this.K4=k("lhid_userHomeFavorites");this.g_()}this.jb.sort(this.$N);this.OX();this.HH(false);var d=window.location.hash;if(d==""){this.yu("")}else{this.yu(d)}this.Yd=m(this.Rp,this);wj(this.Yd);v("call",ml);v("toggleNotify",m(this.h1,this));v("toggleLink",m(this.g1,this))}sf.prototype.g_=function(){var a=
[];if(_authuser.isOwner){a.push({content:"My Favorites"})}else{a.push({content:ci(_user.nickname),link:_user.link});a.push({content:"Favorites"})}Wn(a)};var ml=function(a){oa.Fb(a,vu)},vu=function(a){if(a.status>=400||a.text.indexOf("success")<0){alert(Ol);window.location.reload()}};sf.prototype.Rp=function(){var a=window.location.hash;if(this.P2==a){return}this.yu(a)};sf.prototype.OX=function(){var a=[];a.push('<table class="lhcl_fullwidth"><tr>');for(var b=0;b<this.Nc.length;++b){if(null==this.Nc[b]||
this.Nc[b].deleted){continue}a.push('<td class="lhcl_halfcol">',"<table><tr>",'<td><a href="',this.Nc[b].link,'">','<img class="lhcl_activity" src="',this.Nc[b].src,'"></a></td>','<td><a href="',this.Nc[b].link,'" class="lhcl_plain">');var c=this.Nc[b].type;switch(this.Nc[b].reason){case "starred":a.push('<div class="lhcl_title">',this.Nc[b].album,"</div>",'<div class="lhcl_info">By ',this.Nc[b].person,".</div>");break;case "photos_added":a.push('<div class="lhcl_title">',this.Nc[b].album,"</div>",
'<div class="lhcl_info">',"Photos added by "+this.Nc[b].person+": "+this.Nc[b].photo_count,"</div>");break;case "email_notification":switch(c){case "album":a.push('<div class="lhcl_title">',this.Nc[b].album,"</div>",'<div class="lhcl_info">',this.Nc[b].person+" shared an album with you.","</div>");break;case "photo":a.push('<div class="lhcl_title">',this.Nc[b].person,"</div>",'<div class="lhcl_info">',"Shared a photo with you.","</div>");break;case "account":a.push('<div class="lhcl_title">',this.Nc[b].person,
"</div>",'<div class="lhcl_info">',"Shared gallery with you.","</div>");break}break}a.push('<div class="lhcl_info">',this.Nc[b].date,"</div>","</a></td></tr></table></td>");if((b+1)%2==0){a.push("</tr><tr>")}}a.push("</tr></table>");this.sM.innerHTML=a.join("")};sf.prototype.HH=function(a){un("AddFavoriteId");if(this.vC==a)return;this.vC=a;var b=[];if(_features.contacts){b.push("<p>");if(a){b.push("You are viewing all favorite users.  To view only those whose activity updates you are receiving, click "+
('<a href="'+this.of+'#list">')+"here</a>")}else{b.push("You are receiving activity updates from these users. For all your favorite users, click "+('<a href="'+this.of+'#all">')+"here</a>")}b.push("</p>")}b.push('<table class="lhcl_fullwidth">');var c=a?"#all":"#list",d=encodeURIComponent(this.of+c),e=false;for(var f=0;f<this.jb.length;++f){if(!_features.contacts||a||this.jb[f].notify){if(e){b.push('<tr><td colspan="2" class="lhcl_listEnd"></td></tr>')}else{e=true}b.push('<tr class="lhcl_favoritePersonListed">',
'<td class="lhcl_host"><a href="',this.jb[f].link,'"><img class="lhcl_portrait" src="',this.jb[f].src,'" ></a></td>','<td class="lhcl_data"><table><tr>','<td><table style="width:100%;"><tr><td><a href="',this.jb[f].link,'">',this.jb[f].name,"</a>");b.push("</td>");if(_features.contacts){b.push('<td class="lhcl_starProperty"><input type="checkbox" ');if(this.jb[f].notify){b.push('checked="true"')}b.push("onclick=\"_d('toggleNotify', '",f,"');\" />","Receive updates","</td>")}b.push('<td class="lhcl_starProperty">');
b.push('<div><input type="checkbox" ');b.push("onclick=\"_d('toggleLink', '",f,"');\" ");if(this.jb[f].linked){b.push('checked="true" ')}b.push("/>","show link on my gallery");b.push("</div></td></tr></table></td>");if(this.jb[f].unstar){b.push('<td class="lhcl_starProperty">',"<a");b.push(" onclick=\"return confirm('",Sp,"');\"");b.push(' href="',this.jb[f].unstar,"&redir=",d,'">',"remove user","</a></td>")}else{b.push("<td>&nbsp;</td>")}b.push("</tr>");if(this.jb[f].albums.length>0){b.push('<tr><td colspan="2"><div class="lhcl_unlistedListing">',
"Unlisted albums you have seen",":</div></td></tr>");for(var g=0;g<this.jb[f].albums.length;++g){var h="";if((g+1)%2){h=" lhcl_colorbar"}b.push('<tr><td class="lhcl_starred',h,'">');if(this.jb[f].albums[g].deleted){b.push(this.jb[f].albums[g].name," (deleted)")}else{b.push('<a href="',this.jb[f].albums[g].link,'">',this.jb[f].albums[g].name,"</a>")}b.push('</td><td class="lhcl_starProperty',h,'">',"<a");b.push(" onclick=\"return confirm('",Sp,"');\"");b.push(' href="',this.jb[f].albums[g].unstar,
"&redir=",d,'">',"remove album","</a></td></tr>")}}b.push("</table>")}}b.push("</table>");this.EX.innerHTML=b.join("")};sf.prototype.yu=function(a){this.P2=a;var b=a=="#activity",c=this.sM.style,d=this.EX.style,e=this.A5.style;if(_features.googlephotos){var f=this.K4.style}c.display="none";d.display="none";e.display="none";if(_features.googlephotos){f.display="none"}if(b){(this.Nc.length==0?e:c).display="";this.sU.innerHTML='<span class="lhcl_notbold">View:</span> <a href="'+this.of+'#list">List</a> | Activity'}else{(this.jb.length==
0?e:d).display="";this.sU.innerHTML='<span class="lhcl_notbold">View:</span> List | <a href="'+this.of+'#activity">Activity</a>';if(_features.contacts){this.HH(a=="#all")}if(_features.googlephotos){f.display=""}}};sf.prototype.h1=function(a){ml(this.jb[a].notify?this.jb[a].notifylink.replace("notify=true","notify=false"):this.jb[a].notifylink.replace("notify=false","notify=true"));this.jb[a].notify=!this.jb[a].notify;this.vC=!this.vC;this.yu(window.location.hash)};sf.prototype.g1=function(a){ml(this.jb[a].linked?
this.jb[a].removelink:this.jb[a].addlink);this.jb[a].linked=!this.jb[a].linked};sf.prototype.$N=function(a,b){if(a.name<b.name){return-1}else if(a.name>b.name){return 1}return 0};function ru(a,b,c){var d=k(b);if(d){d.innerHTML='<object id="UploadListView" classid="CLSID:474F00F5-3853-492C-AC3A-476512BBC336" codebase="'+a+"uploader2.cab#version="+c+'" width="564" height="375"></OBJECT>'}};function cc(a,b,c){ka.fc(this);this.ta=a;this.Eb={};this.mw="Click to add a caption";this.J5=b;this.b=c;this.kz="";this.W={lhui_nextfunc:r("func"),lhui_promptfunc:r("func"),lhui_savefunc:r("func"),lhui_undofunc:r("func"),lhui_checkfunc:r("func")};v(this.W.lhui_nextfunc,m(this.MA,this));v(this.W.lhui_promptfunc,m(this.$K,this));v(this.W.lhui_savefunc,m(this.HN,this));v(this.W.lhui_undofunc,m(this.OL,this));v(this.W.lhui_checkfunc,m(this.dM,this));v("ReturnToAlbum",m(this.aB,this));this.MA(0,50)}cc.prototype.P=
function(){ka.gc(this);if(this.Ud)window.clearTimeout(this.Ud);if(this.W){F(this.W.lhui_nextfunc);F(this.W.lhui_promptfunc);F(this.W.lhui_savefunc);F(this.W.lhui_undofunc);F(this.W.lhui_checkfunc);F("ReturnToAlbum")}for(var a in this)this[a]=null};cc.prototype.MA=function(a,b){var c=ha(),d=["off="+a,"max="+b,"v="+c],e="http://"+document.domain+":"+document.location.port+"/data/feed/back_compat/user/"+_authuser.name+"/albumid/"+_album.id+"?kind=photo&alt=rss&"+d.join("&"),f=m(this.AK,this,a,b);oa.Fb(e,
f)};cc.prototype.rn=function(a,b){var c=b,d=b.split(":");if(d.length>1){if(!n.IE){c=d[1]}}var e=a.getElementsByTagName(c);for(var f=0;f<e.length;f++){if(e[f].nodeName!=b)continue;var g=e[f].firstChild;if(g!=null){var h=g.nodeValue;if(h!=null){return h}}}return null};cc.prototype.DK=function(a){var b={};b.id=this.rn(a,"gphoto:id");b.l=this.rn(a,"link");b.c=this.rn(a,"description")||"";b.a=this.rn(a,"title");b.s=this.rn(a,"photo:thumbnail");return b};cc.prototype.AK=function(a,b,c){if(!c||c.status>=
400){if(!c){alert(qj+"\nPlease check your connection and try again.")}else{alert(qj+"\n\n"+ih(c.status))}return}if(c.text.substring(0,5)!="<?xml"){alert(qj);return}var d;if(n.IE){try{d=new ActiveXObject("Microsoft.XMLDOM");d.async=false;var e=d.loadXML(c.text);if(!e){alert(qj+"\n\n"+ih(c.status))}}catch(f){}}else{d=c.xml}var g=d.getElementsByTagName("item");if(_album.photoCount>50){this.WK(a,g.length)}this.b.innerHTML="";window.scrollTo(0,0);for(var h=0;h<g.length;h++){var i=this.DK(g[h]);this.Eb[i.id]=
{};i.lhui_checkfunc=this.W.lhui_checkfunc;i.lhui_promptfunc=this.W.lhui_promptfunc;i.lhui_savefunc=this.W.lhui_savefunc;i.z=_album.photoCount-a-h;i.index=a+h;i.tabindex=h+1;i.selected=false;i.cid="lhid_caption_"+i.id;if(i.c){i.active="lhcl_active";i.caption=i.c}else{i.active="";this.Eb[i.id].empty=true;i.caption=this.mw}this.ta[i.index]=i;var j=P('<div><table class="lhcl_onebatchcaption"><tr><td class="lhcl_photo"><img src="{s}" alt="{a}"/></td><td class="lhcl_textbox"><textarea id="lhid_caption_{id}" name="caption_{id}" onkeydown="_d(\'{lhui_checkfunc}\', \'{index}\')" onfocus="_d(\'{lhui_promptfunc}\', \'{index}\')" onblur="_d(\'{lhui_savefunc}\', \'{index}\')" onkeyup="_d(\'{lhui_checkfunc}\', \'{index}\')" class="{active}" tabindex="{tabindex}">{caption}</textarea><div id="status_{id}" class="lhcl_statusbox"></div></td></tr></table></div>',
i);this.b.appendChild(j);if(h<b-1){var l=u("div");l.className="lhcl_captionspacer";this.b.appendChild(l)}}};cc.prototype.WK=function(a,b){var c={};c.lhui_nextfunc=this.W.lhui_nextfunc;var d="",e="";if(a>0){c.offset=a-50;c.interval=50;d=ja('<span><a id="lhid_previous" class="lhcl_navlink" href="javascript: _d(\'{lhui_nextfunc}\', {offset}, {interval})">&lt; Previous</a></span>',c)}if(_album.photoCount>a+50){c.offset=a+50;c.interval=Math.min(50,_album.photoCount-(a+50));c.tabindex=b+1;e=ja('<span><a class="lhcl_navlink" href="javascript:_d(\'{lhui_nextfunc}\', {offset}, {interval})" tabindex="{tabindex}">Next&gt;</a></span>',
c)}var f={};f.msg=_features.newStrings?sj(a+1,a+b,_album.photoCount):a+1+" - "+(a+b)+" ( "+_album.photoCount+")";var g=ja("<span>&nbsp; {msg} &nbsp;</span>",f),h=[d,g,e].join("");k("lhid_batchnav_top").innerHTML=h;k("lhid_batchnav_bottom").innerHTML=h};cc.prototype.aB=function(){if(this.kz){if(this.Ud){window.clearTimeout(this.Ud);this.Ud=0}this.Ud=pc(this.aB,200,this)}else{window.location=_album.link}};cc.prototype.$K=function(a){var b=this.ta[a].id;this.ta[a].input=k("lhid_caption_"+b);if(this.Eb[b].empty){this.ta[a].input.className=
"lhcl_active";this.ta[a].input.value=""}};cc.prototype.VK=function(a){var b=this.ta[a].id,c=this.ta[a].input,d=c.value.replace(/\s+/g," ").replace(/^\s+|\s+$/g,""),e=this.ta[a].c;c.value=d;if(e==At(d)){if(Me(d)){c.value=this.mw;c.className="";this.Eb[b].state="default";this.Rg(a)}return false}if(Me(d)){this.Eb[b].empty=true}else{this.Eb[b].empty=false}if(d.length>1024){this.Eb[b].state="error";this.Rg(a);return false}return true};cc.prototype.bB=function(a){var b=this.ta[a].id,c=this.ta[a].input,
d=Va(c.value),e=k("aid").value,f=this.J5+"&aid="+e,g=m(this.PL,this,a),h=["optgt=SAVE_PHOTO_CAPTIONS","noredir=true","caption_"+b+"="+qb(d)];oa.Fb(f,g,h.join("&"));this.kz=true;if(this.Eb[b].state=="reverting"){this.Eb[b].state="reverting"}else{this.Eb[b].state="saving"}this.Rg(a)};cc.prototype.PL=function(a,b){if(this.Wc(b)||this.zd(b)){var c=this.ta[a].id,d=this.ta[a].input;d.className="";d.value=this.mw;this.Eb[c].state="";this.Rg(a);this.kz=false;return}var c=this.ta[a].id,d=this.ta[a].input,
e=d.value;this.Eb[c].undo=this.ta[a].c;this.ta[a].c=At(e);if(this.Eb[c].empty){d.className="";d.value=this.mw}else{d.className="lhcl_active"}if(this.Eb[c].state=="reverting"){this.Eb[c].state="reverted";this.Rg(a)}else{this.Eb[c].state="saved";this.Rg(a)}this.kz=false};cc.prototype.OL=function(a){var b=this.ta[a].id,c=this.ta[a].input,d=this.Eb[b].undo;c.value=Hc(d);if(Me(d)){this.Eb[b].empty=true}else{this.Eb[b].empty=false}this.Eb[b].state="reverting";this.bB(a)};cc.prototype.dM=function(a){var b=
this.ta[a].id,c=this.ta[a].input,d=c.value,e=this.ta[a].c;if(d!=e&&this.Eb[b].state!="prompt"&&!Me(d)){this.Eb[b].state="prompt";this.Rg(a)}this.JK(a)};cc.prototype.JK=function(a){var b=this.ta[a].id,c=this.ta[a].input,d=k("status_"+b);if(!(c&&d))return;if(c.value.length>992){this.Eb[b].state="warning";this.Rg(a)}else if(this.Eb[b].state=="error"){this.Eb[b].state="prompt";this.Rg(a)}};cc.prototype.Rg=function(a){var b=this.ta[a].id,c=this.ta[a].input,d=this.Eb[b].state,e=k("status_"+b),f,g={};g.lhui_undofunc=
this.W.lhui_undofunc;g.index=a;e.style.color="#666";switch(d){case "prompt":f='<span class="lhcl_statusdefault">Changes to captions are automatically saved.</span>';break;case "saving":f='<table><tr><td class="lhcl_status"><img src="img/progressanim.gif" class="lhcl_statusimg" /></td><td class="lhcl_status">Saving caption&#8230;</td></tr></table>';break;case "saved":f='<table><tr><td class="lhcl_status"><img src="img/check.gif" class="lhcl_statusimg" /></td><td class="lhcl_status">This caption has been saved.</td><td class="lhcl_undo"><a href="javascript:_d(\'{lhui_undofunc}\', \'{index}\')">Undo</a></td></tr></table>';
break;case "reverting":f='<table><tr><td class="lhcl_status"><img src="img/progressanim.gif" class="lhcl_statusimg" /></td><td class="lhcl_status">Reverting caption&#8230;</td></tr></table>';break;case "reverted":f='<table><tr><td class="lhcl_status"><img src="img/check.gif" class="lhcl_statusimg" /></td><td class="lhcl_status">This caption has been reverted.</td></tr></table>';break;case "warning":g.num=c.value.length;g.max=1024;if(g.num>g.max){e.style.color="#f00"}g.msg=_features.newStrings?"Your caption is "+
g.num+" characters long. ("+g.max+" maximum)":"";f="<span>{msg}</span>";break;case "error":f=fu;break;default:f="<span> </span>";break}var h=P(f,g);Sb(e,h)};cc.prototype.HN=function(a){if(this.VK(a)){this.bB(a)}};var fu=_features.newStrings?'<div class="lhcl_warning" style="width:400px;">'+xp(1024)+"</div>":'<span class="lhcl_warning">'+wp+"</span>";cc.prototype.Wc=function(a){var b=a.status;if(b>=400){var c;if(b==403)c="403 "+Cl;else if(b==404)c="404 "+Hl;else if(b>=500)c="500 "+di;else c="unknown "+
Nl;alert(ja(c,{status:b}));return true}return false};cc.prototype.zd=function(a){if(a.text.indexOf("success")<0){var b=a.text.replace(/\<[^>]*\>/g,"");alert(b);return true}return false};if(_features.fr){}function dc(a,b,c,d){ka.fc(this);this.ta=a;this.p=b;this.vX=c;this.O6=d;this.C6=false;this.lastClicked=-1;this.shiftDown=false;this.y6=0;v("thumbClick",m(this.fM,this));v("thumbHover",m(this.gM,this));if(_features.googlephotos){var e=k("lhid_linkbutton");if(e){q(e,X,hz)}}if(_album.pageInterval<=0){_album.pageInterval=_album.photoCount}v("getSnippet",m(this.WL,this));v("getLink",m(this.XL,this));if(_features.geotagging){var f=k("lhid_geolinks");if(f){if(_album.hasGeotaggedPhotos||
_authuser.isOwner&&_album.photoCount>0){f.appendChild(G("a",{href:_album.slideshowLink+"#map"},"View map"))}if(_album.hasGeotaggedPhotos){f.appendChild(G("br"));f.appendChild(G("a",{href:_album.kmlLink},Wp))}}if(_album.hasHiddenGeo&&_authuser.isOwner){this.Zn=new se}}}dc.prototype.P=function(){ka.gc(this);if(this.Zn){this.Zn.e()}F("thumbClick");F("thumbHover");for(var a in this)this[a]=null};dc.prototype.TL=function(){if(_album.count==0){return}this.Yg=_thumbSize;this.HL()};dc.prototype.XK=function(){if(!this.p)return;
if(!this.Qt){this.Qt=0;this.p.innerHTML="";this.a7=this.ta.length}var a=this.Qt;this.Qt=Math.min(a+50,this.ta.length);for(var b=a;b<this.Qt;b++){var c=this.ta[b];if(c.c)c.caption='<p id="lhid_c'+b+'">'+c.c+"</p>";c.index=b;c.selected=false;var d=P(sp,c);d.style.zIndex=this.ta.length-b;this.p.appendChild(d);c.div=k("lhid_t"+b);c.box=k("lhid_b"+b);this.jL(c)}if(this.Qt<this.ta.length){pc(this.XK,0,this)}if(!this.H3.he()){this.H3.start()}};dc.prototype.jL=function(a){a.voff=-1;a.loaded=false;var b=tq(a.w,
a.h,this.Yg);a.iw=b.w;a.ih=b.h;Th(a.div,Number(this.Yg+10),Number(b.h+10));Th(a.box,b.w,b.h);if(a.box.hasChildNodes())Th(a.box.firstChild,b.w,b.h);var c=(this.Yg-b.w)/2;if(!n.IE)a.box.style.left=c+"px";var d=k("lhid_c"+a.index);if(d){var e=this.Yg+10;d.style.width=e+"px";Ul(d)}};dc.prototype.LL=function(a,b){this.Yg=b;this.gv()};dc.prototype.XL=function(){var a=k("lhid_embed"),b=k("lhid_zippy");if(a.className=="lhcl_embed_on"){a.className="lhcl_embed";k("lhid_embedform").style.display="none";b.src=
"img/triangle.gif"}else{a.className="lhcl_embed_on";k("lhid_embedform").style.display="";k("lhid_link").value=_album.link;var c=rj(_album.count),d=_album.src.replace(/\/([^?\/]*)\?.*$/,"/s160-c/$1"),e={url:_album.link,src:d,title:_album.title_wb,info:_album.dateonly+" - "+_album.count+" "+c},f=ja(sl,e);k("lhid_snippet").value=f;b.src="img/opentriangle.gif"}};dc.prototype.WL=function(a,b,c){var d=a.style,e=k("lhid_zippy");if(d.display==""){d.display="none";b.style.display="none";e.src="img/triangle.gif"}else{d.display=
"";var f=rj(c.count),g=c.src.replace(/\/([^?\/]*)\?.*$/,"/s160-c/$1"),h={url:c.link,src:g,title:c.title_wb,info:c.dateonly+" - "+c.count+" "+f},i=ja(sl,h);b.style.display="";b.value=i;b.focus();b.select();e.src="img/opentriangle.gif"}};dc.prototype.PK=function(){var a="Are you sure you want to delete this album?";if(_album.isdefault){a+=" Photos in the Drop Box will be removed from any other sites where they are used."}if(!confirm(a))return;var b=k("lhid_albumactionsform"),c=k("lhid_albumop");if(!(b&&
c))return;c.value="DELETE";b.action=_deleteAlbumPath;b.submit()};dc.prototype.fM=function(a,b){window.location=this.ta[b].l};dc.prototype.gM=function(a,b,c){var d="lhcl_thumbnail";if(this.ta[b].selected)d+=" lhcl_selected";if(c)d+=" lhcl_hover";a.className=d};dc.prototype.uj=function(a){this.R6=a.shiftKey};function Th(a,b,c){a.style.width=b+"px";a.style.height=c+"px"}function tq(a,b,c){var d={};d.w=a;d.h=b;if(a>c||b>c){if(a<b){d.h=c;d.w=Math.round(a*c/b)}else{d.w=c;d.h=Math.round(b*c/a)}}return d}
var sp='<div class="lhcl_thumbnail" onclick="_d(\'thumbClick\', this, {index});" ondblclick="return false;" onmouseover="_d(\'thumbHover\', this, {index}, true)" onmouseout="_d(\'thumbHover\', this, {index}, false)"><div class="lhcl_thumb_row" id="lhid_t{index}"><div id="lhid_b{index}" class="lhcl_greybox"></div></div><div class="lhcl_thumb_row"><div class="lhcl_thumb_captionbox">{caption}</div></div></div>',sl='<table style="width:194px;"><tr><td align="center" style="height:194px;background:url(http://picasaweb.google.com/f/img/transparent_album_background.gif) no-repeat left"><a href="{url}"><img src="{src}" width="160" height="160" style="margin:1px 0 0 4px;"></a></td></tr><tr><td style="text-align:center;font-family:arial,sans-serif;font-size:11px"><a href="{url}" style="color:#4D4D4D;font-weight:bold;text-decoration:none;">{title}</a></td></tr></table>';
dc.prototype.HL=function(){while(this.ta.length<_album.photoCount){this.ta.push({})}this.ft=Math.ceil(_album.photoCount/_album.pageInterval)-1;this.YP=_album.photosRss.replace("&alt=rss","&alt=json")+"&max-results="+_album.pageInterval+"&start-index=";this.C4=m(this.PA,this,false);this.p4=m(this.PA,this,true);v("showpage",m(this.gB,this));this.gB(0)};dc.prototype.gB=function(a){this.Xf=Se(a,0,this.ft);var b=this.Xf*_album.pageInterval;if(this.ta[b].s){this.gv()}else{b++;var c=this.YP+b;Ad(c,this.p4)}};
dc.prototype.PA=function(a,b){var c=b.target,d=c.Ce();if(d){var e=Number(d.feed.openSearch$startIndex.$t)-1,f=d.feed.entry.length;for(var g=0;g<f;g++){var h=d.feed.entry[g],i={w:Number(h.media$group.media$content[0].width),h:Number(h.media$group.media$content[0].height),s:h.media$group.media$thumbnail[0].url,l:h.link[1].href,c:h.media$group.media$description.$t};i.id=i.l.substr(i.l.lastIndexOf("#")+1);this.ta[e+g]=i}this.LN();if(a){this.gv()}}};dc.prototype.gv=function(){this.p.innerHTML=_album.photoCount>
_album.pageInterval?'<div style="color:#666;padding:10px;">'+this.NA()+"</div>":"";var a=this.Xf*_album.pageInterval,b=Math.min(a+_album.pageInterval,_album.photoCount);for(var c=a;c<b;c++){var d=this.ta[c];d.index=c;d.caption=d.c?'<p id="lhid_c'+c+'">'+d.c+"</p>":"";d.s=d.s.replace(/\/s[0-9]+\/(?=[^\/]+$)/,"/s"+this.Yg+"/");var e=P(sp,d);e.style.zIndex=b-c;this.p.appendChild(e)}if(_album.photoCount>_album.pageInterval){this.p.appendChild(P(this.cL(),{}))}for(var c=a;c<b;c++){var d=this.ta[c];d.div=
k("lhid_t"+c);d.box=k("lhid_b"+c);d.box.innerHTML='<img src="'+d.s+'">';var f=tq(d.w,d.h,this.Yg);d.iw=f.w;d.ih=f.h;Th(d.div,Number(this.Yg+10),Number(f.h+10));Th(d.box,f.w,f.h);if(d.box.hasChildNodes())Th(d.box.firstChild,f.w,f.h);var g=(this.Yg-f.w)/2;if(!n.IE)d.box.style.left=g+"px";var h=k("lhid_c"+d.index);if(h){var i=this.Yg+10;h.style.width=i+"px";Ul(h)}}k("lhid_albummainbox").style.height="100%";if(b<_album.photoCount&&!this.ta[b].s){b++;var j=this.YP+b;Ad(j,this.C4)}};dc.prototype.LN=function(){if(!this.W5){return}var a=
this.Xf*_album.pageInterval,b=Math.min(a+_album.pageInterval,_album.photoCount);for(var c=a;c<b;c++){var d=this.ta[c],e=this.Q2.client.getPhotos()[d.id];if(!e){var e=new Ss.sapphire.data.Photo({aid:_album.id,id:d.id,url:d.s,shapes:[]});this.Q2.client.addPhotos(e)}}};dc.prototype.NA=function(){var a=this.Xf*_album.pageInterval+1,b=Math.min(a-1+_album.pageInterval,_album.photoCount);return sj(a,b,_album.photoCount)};dc.prototype.cL=function(){var a=["<center><div>"];if(this.Xf>0){a.push(ja(tp,{page:0,
link:_LH.locale=="en_US"?"&laquo; First":"&laquo; 1"}))}if(this.Xf>1){var b=1+(this.Xf-1)*_album.pageInterval;a.push(ja(tp,{page:this.Xf-1,link:_LH.locale=="en_US"?"&lsaquo; Previous":"&lsaquo; "+b}))}a.push('<span style="font-weight:bold">',this.NA(),"</span>");if(this.Xf<this.ft-1){var c=1+(this.Xf+1)*_album.pageInterval;a.push(ja(up,{page:this.Xf+1,link:_LH.locale=="en_US"?"Next &rsaquo;":""+c+" &rsaquo;"}))}if(this.Xf<this.ft){var d=1+this.ft*_album.pageInterval;a.push(ja(up,{page:this.ft,link:_LH.locale==
"en_US"?"Last &raquo;":""+d+" &raquo;"}))}a.push("</div></center>");return a.join("")};var tp="<a href=\"javascript:_d('showpage', {page})\">{link}</a>&nbsp;&nbsp;",up="&nbsp;&nbsp;<a href=\"javascript:_d('showpage', {page})\">{link}</a>",Vz=function(a){if(_features.geotagging){var b=k("lhid_map");if(b){var c=new Y(b,3,{photos:_features.showgeo?a:[],defaultView:_album})}}var d=[k("lhid_copybutton"),k("lhid_movebutton"),k("lhid_deletebutton")],e=new dc(a,k("lhid_test"),k("lhid_albummainbox"),d);if(a.length>
0){new nj(k("lhid_thumbnailsizechooser"),k("lhid_test"),a,e)}e.TL();v("DeleteAlbum",m(e.PK,e));v("slideshow",function(){var f=new Ag});mt(false);Tk();ai();if(_features.photosstring){Uy()}};function nj(a,b,c,d){this.EZ=a;this.NU=b;this.fX=[];this.zk=[];for(var e=0;e<oj.length;e++){var f=e+1;this.fX[e]=P(rp,{s:e,size:oj[e],src:"img/zoom"+f+"off.gif"});this.zk[e]=P(rp,{s:e,size:oj[e],src:"img/zoom"+f+"on.gif"})}var g=Le("_thumbnail"),h=1;for(var e=0;e<rl.length;e++){if(g==rl[e]){h=e}}this.VA(h);ga(this.NU,ql[h]);this.lb=h;v("SetThumb",m(this.SL,this));for(var e=0;e<c.length;e++){var i=c[e].s;if(i){c[e].s=i.replace(/\/s[0-9]+\/(?=[^\/]+$)/,"/s"+pj[h]+"/")}}this.Ja=d;_thumbSize=pj[h]}nj.prototype.SL=
function(a){if(this.lb==a){return}Ug("_thumbnail",rl[a]);this.VA(a);this.ML(this.lb,a);this.lb=a};nj.prototype.VA=function(a){this.EZ.innerHTML="";for(var b=0;b<oj.length;b++){var c=a==b?this.zk[b]:this.fX[b];this.EZ.appendChild(c)}};nj.prototype.ML=function(a,b){var c=pj[a],d=pj[b];this.Ja.LL(c,d);Sq(this.NU,ql[a],ql[b])};var rp='<img src="{src}" width=18" height="18" alt="{size}" title="{size}" onclick="_d(\'SetThumb\', {s});" />',oj=["Small thumbnails","Medium thumbnails","Large thumbnails"],ql=
["lhcl_smallthumb","lhcl_mediumthumb","lhcl_largethumb"],rl=["SMALL","MEDIUM","LARGE"],pj=[72,144,288];var Uz=function(){var a=false;function b(c){var d=k(c);if(d){s(d,true);a=true}}if(n.IE){b("lhid_activexControlInfo")}if(n.MAC){b("lhid_macInfo")}else if(n.WINDOWS){if(_picasaInstalled){b("lhid_picasaLaunch")}else{b("lhid_picasaInfo")}}if(a){b("lhid_uploadInfo")}},yt=function(a){var b=Va(a.value);return Me(b)||/.+\.(?:bmp|gif|jpe|jpeg|jpg|png)$/i.test(b)};var zt=function(a){var b=k("lhid_photosToAdd");if(b){U(b,a)}},Tz=function(a,b){var c=k("lhid_greenbar");if(c){var d=Math.round(180*(a/b));V(c,"width",
Math.min(d,180)+"px")}};var nf=function(a,b,c,d,e){this.k2=e?e-d:5;this.Yz=a;this.zq=b;this.jC=c;this.lf=[];this.IP=[];this.B=new ma(this)};nf.k(z);nf.prototype.e=function(){if(!this.da()){nf.j.e.call(this);this.B.e()}};nf.prototype.Ob=function(a){nf.j.Ob.call(this,a);var b=Math.min(this.k2,5),c=k("lhid_files");if(b<1){var d=k("lhid_maxed");if(d){s(d,true)}var e=k("lhid_selectheader");if(e){s(e,false)}if(c){s(c,false)}}if(c){for(var f=0;f<b;f++){var g=u("div");x(c,g);var h=G("input",{type:"file",name:"file"+f,size:32}),
i=u("span");Ba(i,"lhcl_error");s(i,false);x(g,h);x(g,i);U(i,"Not a valid file type.");this.lf[f]=h;this.IP[f]=i;this.B.m(h,uh,this.nA)}}this.B.m(this.b,"submit",this.qs);this.B.m(this.jC,ta,this.SY);this.nA()};nf.prototype.nA=function(){var a=this.RD(),b=a.length;zt(b);this.jC.disabled=!b;this.Yz.disabled=!b;zt(a.length);for(var c=0;c<this.lf.length;c++){var d=this.lf[c],e=this.IP[c];if(yt(d)){if(Me(d.value)){d.value=""}Ba(d,"");s(e,false)}else{Ba(d,"lhcl_error");s(e,true);this.Yz.disabled=true}}};
nf.prototype.SY=function(){this.b.reset();for(var a=0;a<this.lf.length;a++){if(this.lf[a].value){window.location.reload(true);return}}this.nA()};nf.prototype.qs=function(a){var b=this.RD(),c=b.length,d=k("lhid_num");if(!(d&&c)){a.preventDefault();return}if(ew(b,yt)){d.value=c;this.Yz.value="Uploading...";this.Yz.disabled=true;this.zq.disabled=true;this.jC.disabled=true}else{alert("Some of the selected files appear to be invalid. These files are marked in red. Please remove these files and try the upload again.");
a.preventDefault()}};nf.prototype.RD=function(){return ii(this.lf,function(a){return!Me(a.value)})};var Sz=function(a,b,c,d){var e=k("lhid_uploadFiles"),f=k("startbutton"),g=k("cancel"),h=k("clearall");if(e&&f&&g&&h){var i=new nf(f,g,h,c,d);i.ib(e)}Uz();Tz(a,b);var j=k("lhid_uploadTable");V(j,"display","block")};var Ha=function(a,b,c){z.call(this);this.aj(a);this.mu(b);this.qa(c||null)};S(Ha,z);Ha.prototype.Z=-1;Ha.prototype.Ga=false;Ha.prototype.Fx=false;Ha.prototype.ub=true;Ha.prototype.jo=function(){return this.C?this.Z:-1};Ha.prototype.mu=function(a){this.Z=a};Ha.prototype.rc="";Ha.prototype.o=function(){this.b=u("div");Ba(this.b,this.rc)};Ha.prototype.J=function(){if(this.mb){C(this.b)}Ha.j.J.call(this)};Ha.prototype.sa=function(){return"goog.ui.icon.AbstractIcon"};Ha.prototype.aj=function(a){this.rc=
a;if(this.mb){Ba(this.b,this.rc)}};Ha.prototype.cm=function(){return this.Fx};Ha.prototype.ec=function(a){this.Fx=!(!a)};Ha.prototype.kf=function(){return this.Ga};Ha.prototype.ej=function(a){this.Ga=!(!a);this.ec(a)};Ha.prototype.Sc=function(){return this.ub};Ha.prototype.Kb=function(a){if(this.ub!=a){this.ub=a;var b=a?"enable":"disable";this.dispatchEvent(new Q(b,this))}};Ha.prototype.qa=function(a){Ha.j.qa.call(this,a);if(this.mb){this.ba()}};Ha.prototype.ba=function(a){};Ha.prototype.Wq=function(a){this.dispatchEvent(new wk(this,
a))};Ha.prototype.Vq=function(a){this.dispatchEvent(new wk(this,a,true));a.preventDefault()};Ha.prototype.nn=false;Ha.prototype.columns=0;Ha.prototype.width=0;Ha.prototype.height=0;var Rs=function(a,b){return a.Z-b.Z};var wk=function(a,b,c){Q.call(this,zs,a);this.activated=c||false;this.shiftKey=b.shiftKey;this.ctrlKey=b.ctrlKey;this.mouseEvent=b};wk.k(Q);var gf=function(a,b,c,d){Ha.call(this,b,c,d)};gf.k(Ha);gf.prototype.sa=function(){return"goog.ui.icon.BasicIcon"};gf.prototype.I=function(){gf.j.I.call(this);x(this.b,G("div",{style:"background:url("+this.A.src+");width:"+this.A.width+"px;height:"+this.A.height+"px;"}));x(this.b,G("div",null,"caption"));this.UF()};gf.prototype.UF=function(a,b){q(a||this.b,X,this.Wq,false,this);q(b||this.b,X,this.Vq,false,this)};gf.prototype.J=function(){if(this.mb){C(this.b);L(this.b,Gw,this.Wq,false,this)}Ha.j.J.call(this)};
gf.prototype.ec=function(a){gf.j.ec.call(this,a);var b=this.rc+Iy;if(a){ga(this.b,b)}else{Oa(this.b,b)}};var Iy="-selected";var ff=function(){J.call(this)};ff.k(J);ff.prototype.r=function(){return 0};ff.prototype.dm=function(a){return null};ff.prototype.jp=function(a,b,c){};ff.prototype.rg=function(a,b){this.dispatchEvent(new Vn("insert",this,b))};ff.prototype.remove=function(a){this.dispatchEvent(new Vn("remove",this,a))};ff.prototype.ez=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e,f;if(df(d)){e=(f=d)}else{e=d.start;f=d.end}for(var g=e;g<=f;g++){var h=this.remove(g);if(g<a){this.rg(--a,h)}else{this.rg(a++,h)}}}};
var Vn=function(a,b,c,d){Q.call(this,a,b);this.count=b.r();this.index=c;this.endIndex=d||c};Vn.k(Q);var Oe=function(a){this.Je=a||[]};Oe.k(ff);Oe.prototype.r=function(){return this.Je.length};Oe.prototype.dm=function(a){return this.Je[a]};Oe.prototype.jp=function(a,b,c){if(a>=0&&a<this.Je.length){b=Math.min(b+1,this.Je.length);pc(c.wH(a,this.Je.slice(a,b)))}};Oe.prototype.rg=function(a,b){this.Je.splice(b,0,a);Oe.j.rg.call(this,a,b)};Oe.prototype.bN=function(a){this.Je.push(a);Oe.j.rg.call(this,a,this.Je.length-1)};Oe.prototype.remove=function(a){if(a>=0&&a<this.Je.length){var b=this.Je.splice(a,
1)[0];Oe.j.remove.call(this,a);return b}else{return undefined}};var Jf=function(){wb.call(this);this.B=new ma};Jf.k(wb);Jf.prototype.e=function(){if(!this.da()){Jf.j.e.call(this);this.B.e()}};Jf.prototype.ub=false;Jf.prototype.ax=function(){return this.ub};Jf.prototype.Kb=function(a){this.ub=!(!a)};Jf.prototype.Bd=function(a,b){var c=new Wg(a,this,b);this.Wa.push(c);this.B.m(c.element,X,c.To,true,c);if(this.Nz){ga(c.element,this.Nz)}};Jf.prototype.Cc=function(a,b){if(this.ef){return}this.ef=b;var c=new ie("dragstart",this,this.ef);if(this.dispatchEvent(c)==false){c.e();
return}c.e();var d=b.Kr(),e;if(d.parentNode){e=Ja(d);e.x-=parseInt(Hf(d,"marginLeft"),10)*2;e.y-=parseInt(Hf(d,"marginTop"),10)*2;this.Ed=this.pC(d)}else{e=new Fa(a.clientX,a.clientY);var f=rh();e.x+=f.x;e.y+=f.y;if(b.GE){e=Kr(e,b.GE())}this.Ed=d}this.Ed.style.position="absolute";this.Ed.style.left=e.x+"px";this.Ed.style.top=e.y+"px";if(this.zw){ga(this.Ed,this.zw)}bb(d).body.appendChild(this.Ed);this.tc=new yd(this.Ed);q(this.tc,"drag",this.vy,false,this);q(this.tc,"end",this.Rj,false,this);this.Kp=
[];for(var g,h=0;g=this.Td[h];h++){for(var i,j=0;i=g.Wa[j];j++){this.vB(g,i)}}if(!this.Qh){this.Qh=new gb(0,0,0,0)}this.ml=null;this.tc.Cc(a);a.preventDefault()};var Wg=function(a,b,c){je.call(this,a,c);this.C=b};Wg.k(je);Wg.prototype.$w=function(a){return this.element};Wg.prototype.Kr=function(){if(this.data&&this.data.iE){return this.data.iE()}else{return this.xl}};Wg.prototype.GE=function(){if(this.data&&this.data.jE){return this.data.jE()}else{return new Fa(0,0)}};Wg.prototype.To=function(a){if(this.C.ax()&&
a.Is(0)){Wg.j.To.call(this,a)}};var O=function(a,b,c){z.call(this);this.gw=b||"goog-icon-list";this.Ga=[];this.B=new ma(this);this.jt=new ma(this);this.oD=new ma(this);this.o_(c||this.gw+"-icon");this.QI(a)};O.k(z);var Hy=rc("goog.ui.IconList");O.prototype.fa=function(a){Hy.Pb(a)};O.prototype.Of=null;O.prototype.Jx="";O.prototype.uX=false;O.prototype.zl=0;O.prototype.oy=0;O.prototype.bu=null;O.prototype.we=null;O.prototype.Ac=0;O.prototype.sw={};O.prototype.e=function(){if(!this.da()){O.j.e.call(this);this.B.e();this.jt.e();this.oD.e();
if(this.Fo){ua(this.Fo)}}};O.prototype.sa=function(){return"goog.ui.IconList"};O.prototype.Nb=function(a){return false};O.prototype.o=function(){this.b=this.X.createElement("div");Ba(this.b,this.gw)};O.prototype.I=function(){O.j.I.call(this);this.Qd()};O.prototype.J=function(){this.Eq();C(this.b);O.j.J.call(this)};O.prototype.Qd=function(){if(!this.mb){return}if(!this.A||this.A&&this.A.isLoaded&&!this.A.isLoaded()){return}if(this.Sb){this.Eq()}this.HC();this.mP()};O.prototype.HC=function(){if(this.Of.prototype.nn){var a=
u("table");x(this.b,a);V(a,"width","100%");this.Sb=u("tbody");x(a,this.Sb)}else{this.Sb=u("div");x(this.b,this.Sb);var b=u("div");V(b,"clear","both");V(b,"font-size","0");x(this.b,b)}Ba(this.Sb,this.gw+"-area")};O.prototype.mP=function(){if(!this.A){return}var a=this.A.r(),b=0,c=a;if(this.uX){var d=this.SE()*this.oy;b=this.zl*d;c=Math.min(b+d,a)}var e=this.Of.prototype.columns;this.wO(b,c,e);this.B.m(this,zs,this.yx);this.B.m(this,"enable",this.kF);this.B.m(this,"disable",this.kF)};O.prototype.wO=
function(a,b,c){if(c){var d=this.Of.prototype.nn,e;for(var f=a;f<b;f++){if((f-a)%c==0){e=u(d?"tr":"div");x(this.Sb,e)}this.Bw(f,e)}}else{for(var f=a;f<b;f++){this.Bw(f,this.Sb)}}};O.prototype.Bw=function(a,b){var c;if(this.A){c=this.A.dm(a)}var d=new this.Of(this,this.Jx,a,c);this.xb(d);d.V(b);if(this.we){this.we.Bd(d.S(),d)}};O.prototype.Eq=function(){this.ve();this.B.mc();this.Vj(function(a){a.e()});this.Ta=null;this.af=null;if(this.mb){fc(this.b)}this.Sb=null};O.prototype.SE=function(){var a=this.Of.prototype.columns,
b=this.Of.prototype.width;if(a){return a}else if(b){return Math.floor(this.Sb.offsetWidth/b)||1}else if(this.Ta.length){var c=Ja(this.Ta[0].S()).x;for(var d=1;d<this.Ta.length;d++){var e=this.Ta[d],f=Ja(e.S()).x;if(f<=c){break}c=f}return d}return 0};O.prototype.qa=function(a){if(this.A){this.Eq();this.jt.mc()}O.j.qa.call(this,a);if(this.A){this.jt.m(this.A,"insert",this.zT);this.jt.m(this.A,"remove",this.ns);this.jt.m(this.A,"update",this.rs)}if(this.mb){this.Qd()}};O.prototype.zT=function(a){this.Qd()};
O.prototype.ns=function(a){this.Qd()};O.prototype.rs=function(a){var b=a.index,c=a.endIndex;for(b;b<=c;b++){var d=this.Hd(b);if(d){d.ba(a)}}};O.prototype.aj=function(a){this.gw=a;if(this.mb){Ba(this.b,a)}};O.prototype.QI=function(a,b){if(this.Of!=a){this.Of=a;this.Eq();if(b){this.setIconClassName(b)}this.Qd()}};O.prototype.o_=function(a){if(this.Jx!=a){this.Jx=a;this.Vj(function(b){b.aj(a)})}};O.prototype.enableDragging=function(a){if(a&&!this.we){this.we=new Jf;this.we.EB(this.we);if(this.mb){this.Vj(function(b){this.we.Bd(b.S(),
b)},this)}this.oD.m(this.we,"dragstart",this.gk);this.oD.m(this.we,"dragend",this.mh)}if(this.we){this.we.Kb(a)}};O.prototype.zM=function(a){if(!this.we){this.enableDragging(true);this.enableDragging(false)}this.we.EB(a)};O.prototype.gk=function(a){for(var b=0;b<this.Ga.length;b++){Ne(this.Ga[b].S(),0.5)}};O.prototype.mh=function(a){for(var b=0;b<this.Ga.length;b++){Ne(this.Ga[b].S(),1)}};O.prototype.Hg=function(a){this.Ac=a;if(a==0){this.ve()}else if(a==1){var b=this.bu;this.ve();if(b){this.op(b,
true)}}};O.prototype.kf=function(){return this.Ga};O.prototype.yx=function(a){var b=a.target;if(this.Ac==1){a.ctrlKey=false;a.shiftKey=false}if(n.MAC){a.ctrlKey=a.shiftKey;a.shiftKey=false}if(a.shiftKey){if(this.Ga.length==0){this.su(b)}var c=this.NE(),d=b.jo();if(d<c){var e=c;c=d;d=e}if(!a.ctrlKey){this.ve()}for(var f=c;f<=d;f++){this.op(this.Ta[f],true)}}else if(a.ctrlKey||this.Ac==3){this.op(b,!b.kf());this.su(b)}else{if(!b.kf()){this.ve();this.op(b,true);this.su(b)}}if(a.activated){this.iP()}else{this.Xq()}a.stopPropagation();
a.preventDefault()};O.prototype.kF=function(a){var b=a.target,c=String(b.jo()),d=false;if(a.type=="enable"&&vn(this.sw,c)){gg(this.sw,c);d=true}else if(a.type=="disable"&&b.kf()){Zr(this.sw,c,true);d=true}if(d){this.bC(b,a.type=="enable");this.Xq()}a.stopPropagation();a.preventDefault()};O.prototype.rI=function(a){var b=this.Hd(a);if(b){this.ve();this.op(b,true);this.su(b);this.Xq()}};O.prototype.ve=function(){if(this.Ga.length){while(this.Ga.length){this.Ga.pop().ej(false)}this.Xq()}};O.prototype.op=
function(a,b){if(a.Sc()){this.bC(a,b);this.ey=a}};O.prototype.bC=function(a,b){var c=b?bw:cw;c(this.Ga,a,Rs);a.ej(b)};O.prototype.su=function(a){this.bu=a};O.prototype.NE=function(){return this.bu?this.bu.jo():0};O.prototype.Eo=function(a){return this.Ta?mh(this.Ta,a,Rs):-1};O.prototype.Xq=function(){this.dispatchEvent("select")};O.prototype.iP=function(){this.dispatchEvent(uh)};O.prototype.xD=function(a){if(a&&!this.Fo){this.Fo=q(document,ce,this.CT,false,this)}else if(!a&&this.Fo){ua(this.Fo);this.Fo=
null}};O.prototype.CT=function(a){if(!(this.Ta&&this.Ta.length&&Gy(a))){return}var b=a.keyCode,c=this.ey?this.ey.jo():this.NE(),d=this.SE();if(b==38||b==40){var e=b==38?c-d:c+d;if(e>=0&&e<this.Ta.length){c=e}}else if(b==37){var e=c-1;if(e%d<c%d){c=e}}else if(b==39){var e=c+1;if(e%d>c%d){c=e}}c=qn(c,0,this.Ta.length-1);var f=this.Ta[c];if(f!=this.ey){a.preventDefault()}if(!a.shiftKey){this.ve()}this.yx(new wk(f,a));this.ey=f};var Gy=function(a){if(a.altKey&&!a.ctrlKey){return false}switch(a.keyCode){case 38:case 40:case 37:case 39:return true}return false};var Td=function(a,b,c,d){Ha.call(this,b,c,d)};Td.k(Ha);Td.prototype.Sb=null;Td.prototype.wh=null;Td.prototype.sa=function(){return"gphoto.map.Icon"};Td.prototype.I=function(){Td.j.I.call(this);var a=document.getElementsByTagName("base")[0].href;Hn(this.b,a+"img/shadow64.png");this.Sb=u("div");Ba(this.Sb,this.rc+"-image");x(this.b,this.Sb);this.ba();this.ec(this.Fx);q(this.b,X,this.Wq,false,this);if(this.A){this.b.title=Hc(this.A.c||this.A.t)}};Td.prototype.ba=function(a){if(this.A){V(this.Sb,"background-image",
"url("+this.A.s+"?imgmax=64&crop=1)");if(this.A.lat&&this.A.lon){if(!this.wh){this.wh=u("div");Ba(this.wh,this.rc+"-mapped");V(this.wh,"backgroundImage","url(img/mapped.gif)");x(this.Sb,this.wh)}}else if(this.wh){C(this.wh);this.wh=null}}nk(this.b,true)};Td.prototype.J=function(){Ha.j.J.call(this);L(this.Sb,X,this.Wq,false,this);this.Sb=null;this.wh=null};Td.prototype.ec=function(a){Td.j.ec.call(this,a);if(this.mb&&a!=this.l6){var b=this.rc+"-selected";if(a){ga(this.b,b)}else{Oa(this.b,b)}}};Td.prototype.iE=
function(){var a=G("div",{"class":this.rc+"-drag"});V(a,"background-image","url("+this.A.s+"?imgmax=32&crop=1)");return a};Td.prototype.jE=function(){return Ez};var Ez=n.IE?new Fa(16,33):new Fa(13,31);var Vd=function(a,b,c,d){var e=new GIcon(st,b);tt.icon=e;GMarker.call(this,c,tt);this.parent=a;this.data=d;this.handlers=[GEvent.addListener(this,"mouseover",this.ms),GEvent.addListener(this,"mouseout",this.ks),GEvent.addListener(this,"remove",this.e)];this.editHandlers=[];this.viewHandlers=[];this.disableDragging()};if(typeof GMarker!="undefined"){Vd.k(GMarker)}Vd.prototype.e=function(){ab(this.handlers,GEvent.removeListener);ab(this.editHandlers,GEvent.removeListener);ab(this.viewHandlers,GEvent.removeListener)};
Vd.prototype.js=function(){this.parent.ge(this)};Vd.prototype.ms=function(){this.parent.OI(this)};Vd.prototype.ks=function(){if(this.parent.sE()==this){this.parent.OI(null)}};Vd.prototype.nT=function(){this.parent.closeInfoWindow()};Vd.prototype.mT=function(){this.parent.A1(this)};Vd.prototype.getData=function(){return this.data};Vd.prototype.enableDragging=function(){if(!this.editHandlers.length){this.editHandlers.push(GEvent.addListener(this,"dragstart",this.nT),GEvent.addListener(this,"dragend",
this.mT))}ab(this.viewHandlers,GEvent.removeListener);Vd.j.enableDragging.call(this)};Vd.prototype.disableDragging=function(){if(!this.viewHandlers.length){this.viewHandlers.push(GEvent.addListener(this,"mousedown",this.js))}ab(this.editHandlers,GEvent.removeListener);Vd.j.disableDragging.call(this)};var Iz="?imgmax=64&crop=1",Jz="?imgmax=32&crop=1";if(typeof GIcon!="undefined"){var st=new GIcon;Nr(st,{iconSize:new GSize(32,32),iconAnchor:new GPoint(15,31),shadow:"img/marker-shadow.png",shadowSize:new GSize(59,
32),transparent:"img/marker-overlay.png",infoWindowAnchor:new GPoint(15,0)})}var tt={draggable:true};var Rb=function(a){this.b=a;this.Xa=[];this.n=new GMap2(a);this.Uv();this.n.addControl(new GLargeMapControl);this.n.addControl(new GScaleControl);this.n.addControl(new GMapTypeControl);this.n.addControl(new GOverviewMapControl);this.n.enableContinuousZoom();this.n.enableScrollWheelZoom();this.n.enableDoubleClickZoom();this.q6=new GKeyboardHandler(this.n);this.jy=[GEvent.addListener(this.n,"click",m(this.Bi,this))];this.xk=new pi(this.b);q(this.xk,Mj,this.xo,true,this)};Rb.k(J);Rb.prototype.Hb=false;
Rb.prototype.e=function(){if(!this.da()){while(this.Xa.length){this.Xa.pop().e()}L(this.xk,Mj,this.xo,true,this);ab(this.jy,GEvent.removeListener);this.xk.e();Rb.j.e.call(this)}};Rb.prototype.ck=function(){return this.n};Rb.prototype.zE=function(){return this.Xa};Rb.prototype.Uv=function(){var a,b=false;if(this.Xa.length>0){var c=this.Xa[0].getPoint();a=new GLatLngBounds(c,c)}else{a=new GLatLngBounds}for(var d=0;d<this.Xa.length;d++){var e=this.Xa[d],f=e.getData().bb;jo(e.getPoint(),f,a);if(f){b=
true}}var g=this.n.getBoundsZoomLevel(a),h=a.getCenter();if(!b){var i=this.n.getBoundsZoomLevel(new GLatLngBounds(h,h));g=Math.min(g,i-2)}this.n.setCenter(h,g);this.n.savePosition()};Rb.prototype.JN=function(a,b){var c;if(b){c=this.n.getBoundsZoomLevel(b)}else{c=this.n.getBoundsZoomLevel(new GLatLngBounds(a,a))-2}this.n.setCenter(a,c)};Rb.prototype.er=function(a){if(this.Hb!=a){this.Hb=a;if(a){this.n.disableDoubleClickZoom();for(var b=0;b<this.Xa.length;b++){this.Xa[b].enableDragging()}}else{this.n.enableDoubleClickZoom();
for(var b=0;b<this.Xa.length;b++){this.Xa[b].disableDragging()}}}};Rb.prototype.addMarker=function(a,b,c){var d=a+Iz,e=new Vd(this,d,c,b);this.n.addOverlay(e);var f=mh(this.Xa,e,qt);if(f<0){ki(this.Xa,e,-(f+1))}else{var g=this.Xa[f];this.Xa[f]=e;this.cz(g)}if(this.Hb){e.enableDragging()}e.setImage(a+Jz);return e};Rb.prototype.cz=function(a){qc(this.Xa,a);this.n.removeOverlay(a)};Rb.prototype.xE=function(a){var b=a||this.n.getBounds().getCenter(),c=this.n.fromLatLngToDivPixel(b),d=Wa(this.b);d.width/=
2;d.height/=2;var e=this.n.fromDivPixelToLatLng(new GPoint(c.x-d.width,c.y+d.height)),f=this.n.fromDivPixelToLatLng(new GPoint(c.x+d.width,c.y-d.height));return new GLatLngBounds(e,f)};Rb.prototype.PD=function(a){var b=Kr(Ja(this.b),rh()),c=new GPoint(a.x-b.x,a.y-b.y);return this.n.fromContainerPixelToLatLng(c)};Rb.prototype.sE=function(){return this.IF};Rb.prototype.OI=function(a){this.IF=a};Rb.prototype.closeInfoWindow=function(){this.n.closeInfoWindow()};Rb.prototype.A1=function(a){this.dispatchEvent(new Q("markermove",
a))};Rb.prototype.ge=function(a){this.dispatchEvent(new Q(ro,a))};Rb.prototype.Bi=function(a,b){if(a&&a.getData){this.dispatchEvent(new Q(ro,a))}else if(b){this.dispatchEvent(new rt("mapclick",this.n,b))}};Rb.prototype.xo=function(a){a.preventDefault()};var qt=function(a,b){return a.getData().index-b.getData().index};var rt=function(a,b,c){Q.call(this,a,b);this.latlng=c};rt.k(Q);var ro="markerclick";var Ia=function(a){J.call(this);this.n=a.ck();this.Rc=this.n.getInfoWindow();this.Xa=a.zE();this.jy=[GEvent.addListener(this.n,"infowindowopen",m(this.UT,this)),GEvent.addListener(this.n,"infowindowclose",m(this.aT,this)),GEvent.addListener(this.n,"movestart",m(this.HT,this)),GEvent.addListener(this.n,"moveend",m(this.GT,this))];this.B=new ma(this);this.zc=new Eb(this.RB,4000,this)};Ia.k(J);Ia.prototype.Py=null;Ia.prototype.Wo=null;Ia.prototype.Kt=null;Ia.prototype.bz=null;Ia.prototype.Kj=null;Ia.prototype.yl=
0;Ia.prototype.At=false;Ia.prototype.ob=false;Ia.prototype.dt=false;Ia.prototype.Hb=false;Ia.prototype.e=function(){if(!this.da()){while(this.jy.length){GEvent.removeListener(this.jy.pop())}this.B.e();Ia.j.e.call(this)}};Ia.prototype.close=function(){this.n.closeInfoWindow()};Ia.prototype.open=function(a){if(!this.Kj||!this.At||a.getData().index!=this.Kj.getData().index){this.yl=mh(this.Xa,a,qt);this.oH()}};Ia.prototype.dE=function(){return this.Kj};Ia.prototype.er=function(a){this.Hb=a};Ia.prototype.oH=
function(){this.Kj=this.Xa[this.yl];if(this.Rc.isHidden()){this.gn(false)}this.Kj.openInfoWindow(this.vO(this.Kj.getData()));this.$I()};Ia.prototype.vO=function(a){var b=a.s+"?imgmax=400",c=location.href.replace(/#.*/,"#"+a.id),d=a.w,e=a.h;this.Py=r("lhui_prev");this.Wo=r("lhui_next");this.Kt=r("lhui_play");this.bz=this.Hb?r("lhui_remove"):"";if(d>400||e>400){var f=d/e;if(d>e){d=400;e=d/f}else{e=400;d=e*f}}var g=Gz(Number(a.lat),Number(a.lon)),h=this.Xa.length;return ja(Fz(h,a.c,this.Hb),{lhui_prev:this.Py,
lhui_next:this.Wo,lhui_play:this.Kt,lhui_remove:this.bz,lhui_link:c,lhui_src:b,lhui_width:d,lhui_height:e,lhui_photoIndex:Jl(this.yl+1,h),lhui_caption:Ae(a.c||""),lhui_title:Ae(a.t||"",5),lhui_lat:g.lat,lhui_lon:g.lng})};Ia.prototype.UT=function(){if(this.Xa.length>1){var a=k(this.Py),b=k(this.Wo),c=k(this.Kt);this.B.m(a,X,this.ZT);this.B.m(b,X,this.NT);this.B.m(c,X,this.YT)}if(this.Hb){var d=k(this.bz);this.B.m(d,X,this.ns)}if(this.ob&&!this.dt){this.zc.start()}this.At=true;this.dispatchEvent("open");
Bk().log(128)};Ia.prototype.aT=function(){if(this.zc.he()){this.gn(false)}this.B.mc();this.dispatchEvent("close");pc(this.WN,0,this)};Ia.prototype.ZT=function(a){this.gn(false);this.Nd(-1)};Ia.prototype.NT=function(a){this.gn(false);this.Nd(1)};Ia.prototype.YT=function(a){this.gn(!this.ob)};Ia.prototype.ns=function(){this.dispatchEvent(new Q("removemarker",this.Kj))};Ia.prototype.HT=function(){if(this.ob&&!this.zc.he()){this.dt=true}};Ia.prototype.GT=function(){if(this.dt){this.dt=false;this.zc.start()}};
Ia.prototype.gn=function(a){this.ob=a;this.$I();if(a){this.zc.start(2000)}else{this.zc.stop()}};Ia.prototype.$I=function(){var a=k(this.Kt);if(a){U(a,this.ob?"pause":"play")}};Ia.prototype.RB=function(){if(!this.Rc.isHidden()){this.Nd(1)}else{this.gn(false)}};Ia.prototype.Nd=function(a){this.yl=gk(this.yl+a,this.Xa.length);var b=this.Xa[this.yl];if(b){this.oH()}};Ia.prototype.WN=function(){this.At=false};Ia.prototype.isOpen=function(){return this.At};var Gz=function(a,b){var c={};a=a.toFixed(6);b=
b.toFixed(6);c.lat=a<0?Up(-a):Jp(a);c.lng=b<0?Xp(-b):Bp(b);return c},Fz=function(a,b,c){var d=['<div class="lhcl_infowindow">'];if(a>1){d.push('<table class="lhcl_photoinfobar"><tbody><tr><td width="25%" style="valign:center"><span class="lhcl_fakelink" id="{lhui_play}"></span></td><td width="25%" style="text-align:right"><img src="img/left_normal.gif" id="{lhui_prev}" /></td><td width="25%"><img src="img/right_normal.gif" id="{lhui_next}" /></td><td width="25%" style="text-align:right"><div class="lhcl_photoinfo">{lhui_photoIndex}</div></td></tr></tbody></table>')}d.push('<div class="lhcl_infophoto"><a href="{lhui_link}"><img src="{lhui_src}" width="{lhui_width}" height="{lhui_height}" /></a></div>');
if(b){d.push('<div class="lhcl_caption" style="width: 400px">{lhui_caption}</div>')}d.push('<table class="lhcl_photoinfobar"><tbody><tr><td width="25%"><div class="lhcl_photoinfo">{lhui_title}</div></td><td width="25%" style="text-align:right"><div class="lhcl_photoinfo">{lhui_lat}</div></td><td width="25%"><div class="lhcl_photoinfo">{lhui_lon}</div></td><td width="25%" style="text-align:right">');if(c){d.push('<span class="lhcl_fakelink" id="{lhui_remove}">'+tj+"</span>")}else{d.push('<a href="{lhui_link}">View full size</a>')}d.push("</td></tr></tbody></table></div>");
return d.join("")};var $b=function(a,b,c){z.call(this);this.aj(a);this.qa(b);this.Ti=_user;this.pe=_authuser;this.wk=c};$b.k(z);$b.prototype.rc="";$b.prototype.bw=null;$b.prototype.Hb=false;$b.prototype.e=function(){if(!this.da()){$b.j.e.call(this)}};$b.prototype.o=function(){this.b=G("div",{"class":this.rc})};$b.prototype.J=function(){if(this.mb){C(this.b)}$b.j.J.call(this)};$b.prototype.I=function(){$b.j.I.call(this);this.Qd()};$b.prototype.sa=function(){return"gphoto.map.MapHeader"};$b.prototype.Nb=function(a){return false};
$b.prototype.aj=function(a){this.rc=a;if(this.mb){Ba(this.b,this.rc)}};$b.prototype.u1=function(a){if(this.bw){var b;if(this.wk==0){b="Albums: "+a}else if(this.wk==1){b=rj(a)}U(this.bw,b)}};$b.prototype.$Z=function(a){this.Hb=a;this.Qd()};$b.prototype.Qd=function(){if(!this.mb){return}var a;if(this.wk==0){a=this.rR()}else if(this.wk==1){a=this.KQ()}a.lhui_countDiv=r("lhui_countDiv");var b=Hz(this.wk,this.Hb);Sb(this.b,P(b,a));this.bw=k(a.lhui_countDiv)};$b.prototype.rR=function(){return{lhui_src:this.A.portrait,
lhui_imgLink:this.A.link,lhui_owner:this.Ti.nickname}};$b.prototype.KQ=function(){var a="lhcl_public",b="Your public albums will not be included in community search.";if(!_authuser.isOwner){a+="_foreign";b=""}else if(this.Ti.searchable){a+="_searchable";b="Your public albums can be found in community search."}a+="_label";var c=zn(this.A.title,14,true),d=c!=this.A.title,e=zn(this.A.location,18,true),f=e!=this.A.location;return{lhui_src:this.A.src+"?imgmax=64&crop=1",lhui_imgLink:this.A.link,lhui_title:c,
lhui_titleFull:d?this.A.title:"",lhui_location:e,lhui_locationFull:f?this.A.location:"",lhui_date:this.A.dateonly,lhui_visibilityClass:this.A.unlisted?"lhcl_unlisted_label":a,lhui_visibility:this.A.unlisted?uj:"Public",lhui_visibilityTip:this.A.unlisted?"":b,lhui_owner:Op(this.Ti.nickname)}};var Hz=function(a,b){var c=['<div class="lhcl_prettybox lhcl_recordbox" style="overflow: hidden;"><div class="lhcl_body">'];if(b){c.push("Select a thumbnail and click the map to place it or drag and drop the  thumbnails onto the map.")}else{c.push('<table class="lhcl_host"><tr><td><a href="{lhui_imgLink}"><img src="{lhui_src}"/></a></td>');
if(a==0){c.push('<td width="100%"><div class="lhcl_host"><div class="lhcl_name">{lhui_owner}</div><div id="{lhui_countDiv}"></div>')}else if(a==1){c.push('<td style="padding-left: 6px" width="100%"><div class="lhcl_info"><div class="lhcl_title" title="{lhui_titleFull}">{lhui_title}</div><div class="lhcl_mapHeaderMeta"><div>{lhui_owner}</div><div title="{lhui_locationFull}">{lhui_location}</div><div>{lhui_date} &#8211; <span class="{lhui_visibilityClass}" title="{lhui_visibilityTip}">{lhui_visibility}</span></div><div id="{lhui_countDiv}"></div></div>')}c.push("</div></td></tr></table>")}c.push("</div></div>");
return c.join("")};var kb=function(){Pa.call(this);this.B.m(document,X,this.ge,true);this.B.m(document,hd,this.Ci,true)};kb.k(Pa);kb.prototype.Qv=false;kb.prototype.KJ=null;kb.prototype.MJ=null;kb.prototype.NJ=null;kb.prototype.LJ=null;kb.prototype.he=function(){return this.Qv||this.Oa()||this.mK()};kb.prototype.no=function(){return this.Dh};kb.prototype.tS=function(){return this.KJ};kb.prototype.NI=function(a){this.AP=a};kb.prototype.UI=function(a){this.MJ=a;if(a&&this.AP){this.Gu();this.Bd(new Lc(tj,"remove"))}};
kb.prototype.LR=function(){return this.MJ};kb.prototype.RI=function(a){this.NJ=a;if(a&&a.length&&Cj(a,function(b){return b.fe().marker})){this.Gu();this.Bd(new Lc("Center map here","center"));if(this.AP){this.Gu();this.Bd(new Lc(tj,"remove"))}}};kb.prototype.xR=function(){return this.NJ};kb.prototype.SI=function(a){this.LJ=a;if(a){this.Gu();this.Bd(new Lc("Zoom in","zoomin"));this.Bd(new Lc("Zoom out","zoomout"));this.Bd(new Lc("Center map here","center"))}};kb.prototype.KR=function(){return this.LJ};
kb.prototype.Gu=function(){if(this.kg()){this.Bd(new rk)}};kb.prototype.ge=function(a){this.Qv=a.Is(2)};kb.prototype.Ci=function(a){if(a.Is(2)){this.Qv=false}};kb.prototype.Au=function(a,b,c){this.NI(false);this.UI(null);this.RI(null);this.SI(null);while(this.kg()){this.FY(0)}this.Dh=new Fa(b,c);this.KJ=a.b;this.dispatchEvent("beforeshow");if(this.kg()){kb.j.Au.call(this,a,b,c)}};kb.prototype.Ec=function(a){kb.j.Ec.call(this,a,undefined,undefined,true)};kb.prototype.sq=function(a){this.B.m(a.b,a.Kw,
this.zt,true)};kb.prototype.Uq=function(a){this.B.yd(a.b,a.Kw,this.zt,true)};var $g=function(a,b,c,d){this.B=new ma(this);var e=Wa(a),f={lhui_georesults:r("lhui_georesults"),width:e.width-10};if(b.length>0){f.lhui_header="Did you mean:"}this.JH=P('<div id="lhid_georesults_popup" class="lhcl_geoResultPopup" style="width: {width}px;"><h2>{lhui_header}</h2><div id="{lhui_georesults}"></div></div>',f);a.appendChild(this.JH);qd.call(this,this.JH);var g=k(f.lhui_georesults);if(b.length==0){this.CI(true);var h=ca(d);g.innerHTML=Lp('<span style="font-weight: bold;">'+Ae(h)+"</span>")}else{this.CI(false);
this.DO(g,b,c)}this.K_(1);this.setPosition(new lg(a,3));this.ma(true)};$g.k(qd);$g.prototype.DO=function(a,b,c){c=Math.min(b.length,c);for(var d=0;d<c;d++){var e=ca(b[d].address),f=P('<div class="lhcl_geoResult"><span class="lhcl_fakelink">{address}</span></div>',{address:e});a.appendChild(f);this.B.m(f,ta,m(this.cU,this,b[d]))}};$g.prototype.cU=function(a){if(a.bb){this.dispatchEvent(new to(so,a))}else{this.sr(a)}};$g.prototype.sr=function(a){var b=[_geocodePath,"location="+qb(a.address),"lat="+
a.lat,"lon="+a.lon,"mresults=false","alt=json"];Ad(b.join("&"),m(this.wq,this,a))};$g.prototype.wq=function(a,b){var c=b.target;try{if(c.Kd()){var d=c.Ce();if(ra(d)&&d.length){a=d[0]}}}catch(e){}this.dispatchEvent(new to(so,a))};$g.prototype.e=function(){this.ma(false);this.B.e();qd.prototype.e.call(this);C(this.JH)};var so="selectresult",to=function(a,b){Q.call(this,a);this.geoResult=b};to.k(Q);var Ri=function(){K.call(this,null,true);this.oO();this.vg=new Ud(this.$l(),"Enter a location","Go","lhcl_locationdialog");this.ma(true);var a=this.vg.hS();a.focus();a.select();this.qZ=q(this.vg,"geocode",this.$T,false,this)};Ri.k(K);Ri.prototype.oO=function(){Sb(this.$r(),G("h1",{},El));var a=new Gb;a.K(Hh,Cg,false,true);this.Lk(a)};Ri.prototype.e=function(){if(!this.da()){K.prototype.e.call(this);if(this.qZ){ua(this.qZ)}}};Ri.prototype.$T=function(a){this.dispatchEvent(a);this.ma(false)};var Ud=function(a,b,c,d){var e={lhui_searchLabel:b,lhui_searchButtonLabel:c,lhui_divClass:d||"",lhui_popupAnchor:r("lhui_popupAnchor")};x(a,P('<div class="{lhui_divClass}"><div id="{lhui_popupAnchor}"><form action="javascript:void 0"><b>{lhui_searchLabel}</b> <input type="text" class="lhcl_input" maxlength="100"/> <button type="submit" class="lhcl_locationsearchbutton">{lhui_searchButtonLabel}</button></form></div></div>',e));var f=a.getElementsByTagName("form")[0],g=k(e.lhui_doneButton);this.z4=
k(e.lhui_popupAnchor);this.Lc=f.getElementsByTagName("input")[0];this.B=new ma(this);this.B.m(f,"submit",this.qs);this.B.m(window,ee,this.Rb);J.call(this)};Ud.k(J);Ud.prototype.Ky=null;Ud.prototype.Jk=null;Ud.prototype.e=function(){if(!this.da()){this.vw();this.B.e();J.prototype.e.call(this)}};Ud.prototype.vw=function(){if(this.Jk){ua(this.Ky);this.Ky=null;this.Jk.e();this.Jk=null}};Ud.prototype.hS=function(){return this.Lc};Ud.prototype.qs=function(a){this.vw();this.search(this.Lc.value)};Ud.prototype.search=
function(a){a=Va(a);if(a){var b=[_geocodePath,"location="+qb(a),"alt=json"];Ad(b.join("&"),m(this.pZ,this,a))}};Ud.prototype.pZ=function(a,b){var c=b.target,d;try{d=c.Ce()}catch(e){}if(d){if(d.length!=1||d[0].spellCorrection){this.Jk=new $g(this.z4,d,5,a);this.Ky=q(this.Jk,so,this.bU,false,this)}else{this.dispatchEvent(new qo(d[0]))}}};Ud.prototype.bU=function(a){this.Lc.value=a.geoResult.address;this.dispatchEvent(new qo(a.geoResult));this.vw()};Ud.prototype.Rb=function(){if(this.Jk){this.Jk.pb()}};
var qo=function(a){Q.call(this,"geocode");this.geoResult=a};qo.k(Q);var se=function(){K.call(this,null,true);Sb(this.$r(),G("h1",{},El));this.Bc('<div style="width:50em">We\'ve noticed that some photos in this album have location information. You currently do not display this EXIF location data. Would you like to change your default setting to display this location information? (Note: you can change this setting in the future by going to the Settings page)</div>');this.Lk(Gs);this.nw=q(this,qk,this.hs,false,this);this.ma(true)};se.k(K);se.prototype.Sy=false;se.prototype.e=
function(){if(!this.da()){se.j.e.call(this);if(this.nw){ua(this.nw)}}};se.prototype.ma=function(a){if(!this.Sy){se.j.ma.call(this,a)}};se.prototype.hs=function(a){if(a.key=="yes"){this.Sy=true;this.av("EXIF_DIALOG",false);this.av("EXIF_GEO",true,m(this.n0,this))}else if(a.key=="no"){this.av("EXIF_GEO",false);this.av("EXIF_DIALOG",false,m(this.uU,this))}};se.prototype.av=function(a,b,c){var d=["pref="+a,"value="+b].join("&");Ad(_setPrefUrl,c,"POST",d)};se.prototype.uU=function(a){if(!a.target.Kd()){alert(di)}};
se.prototype.n0=function(a){this.Sy=false;if(!a.target.Kd()){alert(di);return}window.location.reload()};var ya=function(a){ka.fc(this);this.qm=!(!_authuser.isOwner);this.Ja=_album;this.B=new ma(this);this.ac=new O(Td,"lhcl_iconList","lhcl_mapIcon");this.ac.xD(true);this.LG=new $b("lhcl_albumMapHeader",this.Ja,1);var b=k("lhid_leftbox");while(b.className!="lhcl_body"&&b.parentNode){b=b.parentNode}this.xX=b;this.qJ(false);this.b=P('<div class="lhcl_mapViewMode"><div class="lhcl_editcontrols"><div class="lhcl_title">Map Photos: <span class="lhcl_albumname">{lhui_albumName}</span></div></div><table class="lhcl_albumMapContainer"><tr><td><div id="lhid_iconHeader"></div><div id="lhid_iconListContainer"></div></td><td width="100%"><div id="lhid_mapHeader"></div><div id="lhid_mapElement" class="lhcl_mapViewBorder"></div></td></tr></table></div>',
{lhui_albumName:_album.title});x(this.xX,this.b);this.h2=k("lhid_iconHeader");this.LG.V(this.h2);this.Sb=k("lhid_iconListContainer");this.ac.V(this.Sb);this.KG=k("lhid_mapHeader");this.No=k("lhid_mapElement");this.B.m(window,ee,this.Rb);this.yP=new yr(this.No);this.ac.zM(this.yP);this.B.m(this.yP,"drop",this.lT);this.Qu=[];this.Aa=new kb(this);if(typeof GBrowserIsCompatible!="undefined"&&GBrowserIsCompatible()){this.Gb=new Rb(this.No);this.Aa.V(document.body);this.Aa.Ec(this.No);this.Aa.Ec(this.Sb);
this.Rc=new Ia(this.Gb);this.Ew(!this.Ja.hasGeotaggedPhotos);this.Rb();if(this.Ja.hasGeotaggedPhotos){this.QX()}else if(this.Ja.lat&&this.Ja.lon){this.EI(this.Ja)}else{this.Gb.Uv();this.EG=new Ri;this.B.m(this.EG,"geocode",this.lF)}this.B.m(this.Gb,ro,this.IT);this.B.m(this.Gb,"markermove",this.JT);this.B.m(this.Gb,"mapclick",this.FT);this.B.m(this.Aa,"beforeshow",this.WS);this.B.m(this.Aa,od,this.KT);this.B.m(this.Rc,"open",this.xT);this.B.m(this.Rc,"close",this.wT);this.B.m(this.Rc,"removemarker",
this.yT);this.B.m(this.ac,"select",this.ps);this.fa()}};ya.prototype.Hb=null;ya.prototype.Ll=null;ya.prototype.mp=null;ya.prototype.IF=null;ya.prototype.Fk=null;ya.prototype.vg=null;ya.prototype.P=function(){ka.gc(this);this.Aa.e();this.B.e();this.ac.e();this.Fk.e();if(this.Ll){ua(this.Ll)}if(this.mp){ua(this.mp)}if(this.vg){this.vg.e()}if(this.EG){this.EG.e()}if(this.Gb){this.Gb.e()}if(this.Rc){this.Rc.e()}};ya.prototype.kb=function(){this.P();C(this.b);this.qJ(true)};ya.prototype.qJ=function(a){var b=
sm(this.xX);while(b){s(b,a);b=vm(b)}};ya.prototype.Ew=function(a){a=a&&this.qm;if(this.Hb!=a){s(k("lhid_navbar_nz"),!a);Ba(this.b,a?"lhcl_mapEditMode":"lhcl_mapViewMode");this.Hb=a;this.ac.Hg(a?2:1);this.p_();var b="lhcl_iconList";if(a){b+="-edit";this.wP()}else{this.xP()}this.ac.aj(b);if(this.Gb){this.Rc.close();this.Rc.er(a);this.Gb.er(a);this.ac.enableDragging(a);this.LG.$Z(a)}this.Rb()}};ya.prototype.nC=function(){if(this.vg){this.vg.e();this.vg=null}fc(this.KG);if(this.Ll){ua(this.Ll)}if(this.mp){ua(this.mp)}};
ya.prototype.p_=function(){var a;if(this.Hb){a=_photo}else{a=ii(_photo,function(c){return c.lat&&c.lon})}if(!this.Fk||this.Fk.r()!=a.length){this.Fk=new Oe(a);this.ac.qa(this.Fk);this.LG.u1(this.Fk.r())}for(var b=0;b<a.length;b++){a[b].index=b}};ya.prototype.QX=function(){var a=this.ac.kg();for(var b=0;b<a;b++){var c=this.ac.Hd(b),d=c.fe();if(d.lat&&d.lon){this.AB(d)}}this.Gb.Uv()};ya.prototype.xP=function(){this.nC();var a={lhui_albumLink:this.Ja.link,lhui_editButtonContainer:r("lhui_editButtonContainer"),
lhui_linkContainer:r("lhui_linkContainer")};x(this.KG,P('<div class="lhcl_viewMapHeader"><div class="lhcl_albumbox"><div class="lhcl_header"><table class="lhcl_tableheader lhcl_editbuttons"><tbody><tr><td id="{lhui_editButtonContainer}"></td><td width="100%"><a href="{lhui_albumLink}">Back to album view</a></td><td id="{lhui_linkContainer}"></td></tr></tbody></table></div></div></div>',a));if(this.qm){var b=k(a.lhui_editButtonContainer),c=P('<div class="lhcl_uibutton lhcl_ur"><p class="lhcl_ul"></p><p class="lhcl_bl"><em class="lhcl_br"><img src="{lhui_img}">{lhui_text}</em></p></div>',
{lhui_img:"img/mapped_sm.gif",lhui_text:"Edit Map"});x(b,c);this.Ll=q(c,ta,m(this.Ew,this,true))}b=k(a.lhui_linkContainer);if(b&&this.Fk.r()>0){var d=P('<div><a href="{lhui_href}"><img src="{lhui_img}" /></a> <a href="{lhui_href}">{lhui_text}</a></div>',{lhui_href:this.Ja.kmlLink,lhui_img:"img/kml.jpg",lhui_text:Wp});x(b,d)}};ya.prototype.wP=function(){this.nC();var a={lhui_albumLink:this.Ja.link,lhui_doneButton:r("lhui_doneButton"),lhui_search:r("lhui_search")};x(this.KG,P('<div class="lhcl_editMapHeader"><div class="lhcl_toolbar"><table><tbody><tr><td><button id="{lhui_doneButton}"><b>Done</b></button></td><td width="100%"></td><td><div id="{lhui_search}"></div></td></tr></tbody></table></div></div>',
a));var b=k(a.lhui_search);this.vg=new Ud(b,Bl,"Go","lhcl_mapsearch");this.mp=q(this.vg,"geocode",this.lF,false,this);var c=k(a.lhui_doneButton);this.Ll=q(c,ta,m(this.Ew,this,false))};ya.prototype.Rb=function(){var a=Gh(this.No),b=Math.max(gd().height-k("lhid_footer").offsetHeight-a-7,300);V(this.No,"height",b+"px");var c=b-(Gh(this.Sb)-a);V(this.Sb,"height",c+"px");if(this.Gb){this.Gb.ck().checkResize()}};ya.prototype.lF=function(a){this.EI(a.geoResult)};ya.prototype.EI=function(a){if(this.Gb&&a){var b,
c=Of(a),d=new GLatLng(c.lat,c.lon);if(a.bb){b=io(a.bb)}this.Gb.JN(d,b)}};ya.prototype.JT=function(a){var b=a.target,c=b.getPoint(),d=b.getData();this.Az(d,c);this.rA()};ya.prototype.Az=function(a,b){var c=a.lat&&a.lon?new GLatLng(Number(a.lat),Number(a.lon)):null;if(b==c||b&&c&&b.equals(c)){return}if(b){var d=this.Gb.xE(b);a.lat=String(b.lat());a.lon=String(b.lng());a.bb=lt(d)}else{delete a.lat;delete a.lon;delete a.bb}this.Qu.push(a)};ya.prototype.rA=function(){if(this.Qu.length>0){var a=nh(this.Qu,
this.RP,this),b=["iids="+a.join(",")],c=this.Qu[0];if(c.lat&&c.lon){b.push("lat="+c.lat,"lon="+c.lon,"latspan="+c.bb.latSpan,"lonspan="+c.bb.lonSpan)}else{b.push("removegeo=true")}Ad(_batchUpdateGeoPath,null,"POST",b.join("&"));dm(this.Qu)}};ya.prototype.RP=function(a,b,c){return a.id};ya.prototype.IT=function(a){if(this.Aa.he()){return}var b=a.target;this.Rc.open(b)};ya.prototype.xT=function(a){var b=this.Rc.dE();this.ac.rI(b.getData().index)};ya.prototype.wT=function(a){if(!this.Hb){this.ac.ve()}};
ya.prototype.yT=function(a){if(this.Hb){this.YH([a.target])}};ya.prototype.ps=function(a){if(!this.Hb){var b=this.ac.kf();if(b.length==1){var c=b[0],d=c.fe().marker;if(d){this.Rc.open(d)}}}};ya.prototype.lT=function(a){if(this.Gb){var b=this.Gb.PD(new Fa(a.clientX,a.clientY));this.BB(b)}};ya.prototype.BB=function(a){this.Rc.close();var b=this.ac.kf(),c=this.Gb.xE(a);if(b.length>1){var d=ii(b,function(g){return g.fe().marker});if(d.length&&!confirm(_features.newStrings?"Some photos in your selection are already mapped. Are you sure you want to overwrite the current locations?\n(Mapped photos in selection: "+
d.length+")":"Some photos in your selection are already mapped. Are you sure you want to overwrite the current locations?\n(Mapped photos in selection: "+d.length+")")){return}}for(var e=0;e<b.length;e++){var f=b[e].fe();this.Az(f,a);this.AB(f)}this.rA()};ya.prototype.AB=function(a){if(a.marker){this.Gb.cz(a.marker)}this.Ja.hasGeotaggedPhotos=true;var b=new GLatLng(Number(a.lat),Number(a.lon)),c=this.Gb.addMarker(a.s,a,b),d=this.ac.Hd(a.index);d.ba();a.marker=c};ya.prototype.YH=function(a){var b=
this.Rc.isOpen(),c=this.Rc.dE();if(a.length>1&&!confirm(_features.newStrings?"Are you sure you want to remove the selected photos from the map?\n(Mapped photos in selection: "+a.length+")":"Are you sure you want to remove the selected photos from the map?\n(Mapped photos in selection: "+a.length+")")){return}for(var d=0;d<a.length;d++){var e=a[d],f=e.getData();if(b&&e==c){this.Rc.close()}this.Az(f,null);this.Gb.cz(e);delete f.marker;this.ac.Hd(f.index).ba()}this.Ja.hasGeotaggedPhotos=this.Gb.zE().length>
0;this.rA()};ya.prototype.FT=function(a){if(this.Aa.Oa()){this.Aa.ma(false);return}var b=this.ac.kf();if(!this.Hb||this.Aa.he()||this.Rc.isOpen()||!b.length||Cj(b,function(h){return h.fe().marker})){return}var c=a.latlng,d=c.lat();if(d>=-85&&d<=85){this.BB(c)}var b=this.ac.kf();if(b.length){var e=Cq(b).jo()+1,f=this.ac.kg();for(var g=e;g<f;g++){if(!this.ac.Hd(g).fe().marker){this.ac.rI(g);break}}}};ya.prototype.WS=function(a){this.Aa.NI(this.Hb);if(this.Aa.tS()==this.No){this.Aa.SI(this.Gb.PD(this.Aa.no()));
this.Aa.UI(this.Gb.sE());this.Rc.close()}else if(this.Hb){this.Aa.RI(this.ac.kf())}};ya.prototype.KT=function(a){var b=a.target,c=b.fe(),d=this.Gb.ck(),e=this.Aa.KR(),f=this.Aa.xR(),g=this.Aa.LR(),h;if(f){h=nh(f,function(M){return M.fe().marker});h=ii(h,function(M){return M})}else if(g){h=[g]}if(c=="center"){if(e){d.panTo(e)}else if(h){var i=nh(h,function(M){return M.getPoint()}),j;if(h.length==1){var l=h[0].getData().bb;j=l?io(l):null}else{j=new GLatLngBounds(i[0],i[0])}for(var p=1;p<i.length;p++){j.extend(i[p])}var t=
d.getZoom(),w=j?d.getBoundsZoomLevel(j):t,y;if(h.length==1){var Z=w-t;if(Math.abs(Z)<2){w=t}y=h[0].getPoint()}else{y=j.getCenter()}if(w==t){d.panTo(y)}else{d.setCenter(y,w)}}}else if(c=="remove"){this.YH(h)}else if(c=="zoomin"){d.setCenter(e,d.getZoom()+1)}else if(c=="zoomout"){d.setCenter(e,d.getZoom()-1)}};ya.prototype.fa=function(){Bk().log(127)};var Y=function(a,b,c){ka.fc(this);a.photoMap=this;this.JF=a;this.n=new GMap2(this.JF);this.lW=this.n.getSize();this.Ov=Math.min(this.lW.width,this.lW.height)*0.1;this.n.enableContinuousZoom();this.n.enableScrollWheelZoom();this.Qa=b;this.SJ=c;this.Xa=[];this.e7=oa;this.Rt();this.IM();this.Es();J.call(this)};Y.k(J);var Ck="markermove";var ho="http://www.google.com/mapfiles/";Y.prototype.Zb=null;Y.prototype.Mi=null;Y.prototype.SC=0;Y.prototype.wm=null;Y.prototype.Km=null;Y.prototype.EA=false;Y.prototype.e=
function(){if(!this.da()){Y.j.e.call(this);ka.gc(this);this.clearOverlays();GEvent.clearInstanceListeners(this.n)}};Y.prototype.P=function(){this.e()};Y.prototype.VF=function(a,b){this.Qa=a;this.SJ=b;this.clearOverlays();this.pz(null);this.Es()};Y.prototype.RN=function(){while(this.Xa.length){var a=this.Xa.pop();this.n.removeOverlay(a);GEvent.clearInstanceListeners(a)}this.HU=null;this.Fr=null};Y.prototype.clearOverlays=function(){this.RN()};Y.prototype.reset=function(){this.clearOverlays();this.Rt()};
Y.prototype.S=function(){return this.JF};Y.prototype.Gg=function(a){this.Zb=a;if(a){this.XF()}else{this.Rt();this.EA=false}};Y.prototype.Bz=function(a){if(a==this.SC){return}if(this.Mi){this.n.removeControl(this.Mi);this.Mi=null}this.SC=a;if(a==1){this.Mi=new GLargeMapControl}else if(a==2){this.Mi=new GSmallMapControl}else if(a==3){this.Mi=new GSmallZoomControl}if(this.Mi){this.n.addControl(this.Mi)}};Y.prototype.Cz=function(a){if(a==this.N2){return}if(this.wm){this.n.removeControl(this.wm);this.wm=
null}this.N2=a;if(a==1){this.wm=new GMapTypeControl}if(this.wm){this.n.addControl(this.wm)}};Y.prototype.Fw=function(a){if(a&&!this.Km){this.Km=new GOverviewMapControl;this.n.addControl(this.Km)}else if(!a&&this.Km){this.n.removeControl(this.Km);this.Km=null}};Y.prototype.pz=function(a){if(!a){this.Fr=null}else{this.Fr=this.Xa[this.HU[a]]}};Y.prototype.savePosition=function(a){var b=this.n.getBounds();if(a){var c=this.n.getCenter(),d=Of(a);this.n.setCenter(new GLatLng(d.lat,d.lon));this.n.savePosition();
b=this.n.getBounds();this.n.setCenter(c)}else{this.n.savePosition()}return lt(b)};Y.prototype.kp=function(){this.n.checkResize()};var lt=function(a){var b=a.toSpan();return{ll:{lat:String(a.getSouthWest().lat()),lon:String(a.getSouthWest().lng())},ur:{lat:String(a.getNorthEast().lat()),lon:String(a.getNorthEast().lng())},latSpan:b.lat()/2,lonSpan:b.lng()/2}},Of=function(a){if(a&&a.lat&&a.lon){var b=Number(a.lat),c=Number(a.lon);if(!isNaN(b+c)){return{lat:b,lon:c}}}return null},jo=function(a,b,c){c.extend(a);
if(b){var d=Of(b.ll);c.extend(new GLatLng(d.lat,d.lon));d=Of(b.ur);c.extend(new GLatLng(d.lat,d.lon))}},io=function(a){var b=Of(a.ll),c=Of(a.ur);return new GLatLngBounds(new GLatLng(b.lat,b.lon),new GLatLng(c.lat,c.lon))};Y.prototype.Mq=function(a,b,c){var d=new GMarker(a,c);d.data=b;d.dataId=b.id;GEvent.addListener(d,"dragend",m(this.NG,this,Ck,"dragend",d));return d};Y.prototype.EO=function(a,b){return this.Mq(a,b,{clickable:false})};Y.prototype.KC=function(a,b){var c=new GIcon;c.image=ho+"marker_mini.png";
c.shadow=ho+"marker_mini_shadow.png";c.iconSize=new GSize(12,20);c.shadowSize=new GSize(22,20);c.iconAnchor=new GPoint(6,20);return this.Mq(a,b,{clickable:false,icon:c})};Y.prototype.uO=function(a,b){var c=String.fromCharCode("A".charCodeAt(0)+b.index),d=new GIcon(G_DEFAULT_ICON);d.image=ho+"marker"+c+".png";return this.Mq(a,b,{clickable:false,icon:d})};Y.prototype.qO=function(a,b){return this.Mq(a,b,{draggable:true})};Y.prototype.Es=function(){this.YU();this.n.enableDoubleClickZoom();if(this.Qa==
1||this.Qa==0){this.bV()}else if(this.Qa==3){this.cV()}else if(this.Qa==2){this.XF()}else if(this.Qa==4){this.$U()}else if(this.Qa==5||this.Qa==6){this.n.disableDoubleClickZoom();this.aV()}};Y.prototype.aV=function(){this.Ds(["photo","album"],m(this.qO,this))};Y.prototype.$U=function(){this.Ds(["geoResult"],m(this.uO,this))};Y.prototype.bV=function(){this.Ds(["album"],m(this.KC,this))};Y.prototype.jR=function(a){var b=[];for(var c=0;c<a.length;c++){var d=this.SJ[a[c]+"s"];if(d){for(var e=0;e<d.length;e++){var f=
d[e];f.storeType=a[c];b.push(f)}}}return b};Y.prototype.Ds=function(a,b){var c=this.jR(a),d=null,e=false,f;for(var g=0;g<c.length;g++){var h=c[g],i=Of(h);if(i){var j=new GLatLng(i.lat,i.lon),l=b(j,h);this.Xa.push(l);this.n.addOverlay(l);if(!f||f.getPoint().lat()<i.lat){f=l}if(!d){d=new GLatLngBounds(j,j)}jo(j,h.bb,d);if(h.bb){e=true}}}this.HU=xj(this.Xa,"dataId");var p,t=this.SJ.defaultView;if(this.Xa.length==1){p=this.Xa[0].getPoint()}else if(this.Xa.length==0){if(t){var j=Of(t);p=new GLatLng(j.lat,
j.lon);d=new GLatLngBounds(p,p);jo(p,t.bb,d);if(t.bb){e=true}}else{this.Rt();return}}if(!p){p=d.getCenter()}var w=this.n.getBoundsZoomLevel(d);if(!e){w=Math.min(w,this.AE(p)-2)}this.n.setCenter(p,w);this.gQ(f)};Y.prototype.gQ=function(a){if(a){var b=this.n.fromLatLngToDivPixel(a.getPoint()).y-1.5*a.getIcon().iconSize.height,c=this.n.fromLatLngToDivPixel(this.n.getBounds().getNorthEast());if(c.y>b){this.n.zoomOut()}}};Y.prototype.cV=function(){this.Ds(["photo"],m(this.KC,this))};Y.prototype.XF=function(){this.clearOverlays();
if(!this.Zb){return}var a=Of(this.Zb);if(a){this.n.checkResize();var b=new GLatLng(a.lat,a.lon),c=this.EO(b,this.Zb);this.Xa.push(c);this.n.addOverlay(c);var d=this.n.getZoom(),e=this.AE(b);if(this.Zb.bb){d=this.n.getBoundsZoomLevel(io(this.Zb.bb))}else if(!this.EA){d=e-2}this.EA=true;this.n.setZoom(d);this.n.panTo(b)}};Y.prototype.AE=function(a){return this.n.getBoundsZoomLevel(new GLatLngBounds(a,a))};Y.prototype.Rt=function(){var a=new GLatLngBounds;this.n.setCenter(a.getCenter(),this.n.getBoundsZoomLevel(a))};
Y.prototype.IM=function(){GEvent.bind(this.n,"click",this,this.kW);GEvent.addDomListener(this.JF,n.GECKO?"DOMMouseScroll":"mousewheel",m(this.LW,this))};Y.prototype.YU=function(){switch(this.Qa){case 0:case 6:this.Fw(true);this.Bz(1);this.Cz(1);break;case 1:case 2:case 3:this.Fw(false);this.Bz(3);this.Cz(0);break;case 5:this.Fw(false);this.Bz(2);this.Cz(1);break}};Y.prototype.rT=function(a,b){if(this.Fr&&!a){this.Fr.setPoint(b);this.NG(Ck,"click",this.Fr)}};Y.prototype.kW=function(a,b){if(this.Qa==
5||this.Qa==6){this.rT(a,b)}};Y.prototype.LW=function(a){if(!a){a=window.event}if(!a.preventDefault){a.returnValue=false}else{a.preventDefault()}};Y.prototype.NG=function(a,b,c){this.dispatchEvent(new Yp(a,b,this,c))};function Yp(a,b,c,d){Q.call(this,a);this.mapEventType=b;this.marker=d;this.map=c}Yp.k(Q);var db=function(a,b,c,d,e,f,g,h,i,j,l,p,t,w,y){this.j2=y||false;this.g=a;this.QO=b;this.wk=p;this.n=new Y(c,this.wk,this.IC());if(this.g.lat&&this.g.lon){this.n.pz(this.g.id);this.n.savePosition()}this.Tt=d;this.j4=t;this.FG=e;this.EV=f;this.S3=g;this.FV=h;this.$V=i;this.Jn=j;this.So=l;this.Xj=new Eb(this.oX,600,this);this.B=new ma(this);this.B.m(e,ce,this.Uc);this.B.m(e,ag,m(this.Xj.start,this.Xj,600));this.B.m(this.n,Ck,this.vP);this.RU=w||"";this.hI=r("lhui_func");v(this.hI,m(this.sZ,this));this.bv()};
S(db,mb);db.prototype.oG=null;db.prototype.Uw=true;db.prototype.e=function(){if(this.da())return;mb.prototype.e.call(this);this.n.e();this.B.e();if(this.Xj){this.Xj.e()}F(this.hI)};db.prototype.bo=function(){if(!this.Uw)return;var a=Va(this.FG.value);if(a){Fo(true,this.RU);var b=["location="+qb(a),"alt=json"],c=_geocodePath+"&"+b.join("&");Ad(c,m(this.EQ,this));this.oG=a}};db.prototype.kC=function(){this.oA("","",null);this.mA(null,null,null);this.bv();this.n.reset();this.n.savePosition()};db.prototype.QQ=
function(){return this.g.bb};db.prototype.mF=function(a,b){var c=[];if(a.length==1&&!a[0].spellCorrection){a[0].hasBoundingBox=true;this.xz(a[0]);c=null}else if(a.length>0){var d=Math.min(a.length,this.j4);for(var e=0;e<d;e++){c[e]=a[e];c[e].index=e}this.Tw=c;this.Zt=-1;this.n.VF(4,{geoResults:c})}this.bv(c,b)};db.prototype.ck=function(){return this.n};db.prototype.wD=function(a){this.Uw=a};db.prototype.IC=function(){var a={};a[this.QO+"s"]=[this.g];return a};db.prototype.oX=function(){if(!this.Uw)return;
var a=Va(this.FG.value);if(a&&this.oG!=a){if(!this.j2&&this.g.lat&&this.g.lon){this.nY()}else{this.bo()}}};db.prototype.Uc=function(a){if(this.Xj){this.Xj.stop()}if(a.keyCode==13){this.bo();Qh(a)}};db.prototype.EQ=function(a){if(this.Xj){this.Xj.stop()}Fo(false,this.RU);var b=a.target,c;try{c=b.Ce()}catch(d){this.p0();return}if(c){this.mF(c)}};db.prototype.oA=function(a,b,c){this.EV.value=a;this.S3.value=b;if(a&&b){this.Jn.value="false"}else{this.Jn.value="true"}if(c){this.FV.value=c.latSpan;this.$V.value=
c.lonSpan}else{this.FV.value="";this.$V.value=""}};db.prototype.mA=function(a,b,c){this.g.lat=a;this.g.lon=b;if(c){if(!this.g.bb){this.g.bb={ll:{},ur:{}}}this.g.bb.latSpan=c.latSpan;this.g.bb.lonSpan=c.lonSpan;this.g.bb.ll.lat=c.ll.lat;this.g.bb.ll.lon=c.ll.lon;this.g.bb.ur.lat=c.ur.lat;this.g.bb.ur.lon=c.ur.lon}else{this.g.bb=null}};db.prototype.sr=function(a){var b=["location="+qb(a.address),"lat="+a.lat,"lon="+a.lon,"mresults=false","alt=json"],c=_geocodePath+"&"+b.join("&");Ad(c,m(this.wq,this,
a))};db.prototype.wq=function(a,b){var c=b.target;try{if(c.Kd()){var d=c.Ce();if(d&&d.length>0){var e=d[0];a.lat=e.lat;a.lon=e.lon;a.bb=e.bb}}}catch(f){}a.hasBoundingBox=true;if(this.Zt==a.index){this.xz(a)}};db.prototype.xz=function(a){var b=a.bb;if(!b&&!a.hasBoundingBox){this.sr(a);return}this.mA(a.lat,a.lon,b);this.oA(a.lat,a.lon,b);this.n.VF(this.wk,this.IC());this.n.pz(this.g.id);this.n.savePosition()};db.prototype.p0=function(){var a=P(gt,{text:"There was an error while trying to determine the location."});
Sb(this.Tt,a)};db.prototype.bv=function(a,b){var c;if(b){c=b}else if(!a){if(this.EV.value){c=this.So.geotaggedMessage}else{c=this.So.noGeotagMessage}}else if(a.length==0){var d=ca(this.FG.value);c=Lp('<span style="font-weight: bold;">'+Ae(d)+"</span>")}else{this.oP(a);return}var e=P(gt,{text:c});Sb(this.Tt,e)};db.prototype.oP=function(a){Sb(this.Tt,G("span",{"class":"lhcl_didyou"},"Did you mean:"));for(var b=0;b<a.length;b++){var c=String.fromCharCode("A".charCodeAt(0)+b),d={index:b,id:"result"+b,
resultfunc:this.hI,letter:c,address:Ae(ca(a[b].address))},e=P('<div class="lhcl_geoResult"><span id="{id}" class="lhcl_fakelink" onclick="_d(\'{resultfunc}\', {index})">{letter}. {address}</span></div>',d);x(this.Tt,e)}};db.prototype.nY=function(){var a={msg:this.So.updateGeoPrompt,yesId:r("lhui_func"),noId:r("lhui_func")};Sb(this.Tt,P('<div>{msg}<br /><span class="lhcl_fakelink" id="{yesId}">Yes</span>&#32;<span class="lhcl_fakelink" id="{noId}">No</span></div>',a));var b=k(a.yesId),c=k(a.noId);
this.B.m(b,X,this.bo);this.B.m(c,X,m(this.bv,this,null,null))};db.prototype.sZ=function(a){if(a==this.Zt){return}if(this.Zt>=0){var b=k("result"+this.Zt);b.className="lhcl_fakelink"}this.Zt=a;var c=k("result"+a);c.className="lhcl_selectedResult";this.xz(this.Tw[a])};db.prototype.vP=function(a){if(a.type==Ck){var b=a.marker.getPoint(),c=String(b.lat()),d=String(b.lng()),e=this.n.savePosition({lat:c,lon:d});this.mA(c,d,e);this.oA(c,d,e)}};var gt="<div>{text}</div>";var jf=function(a,b,c,d){K.call(this,null,true);this.g={location_id:r("input"),lat_id:r("input"),lon_id:r("input"),latSpan_id:r("input"),lonSpan_id:r("input"),removeGeo_id:r("input"),spin_id:r("img"),results_id:r("div"),map_id:r("map"),geocodefunc:r("func"),cleargeofunc:r("func"),lat:a.lat,lon:a.lon,location:c};if(a.bb){this.g.latSpan=a.bb.latSpan;this.g.lonSpan=a.bb.lonSpan}this.F=a;this.Tw=d?d:[];if(b){this.Yd=b}this.qX()};S(jf,K);jf.prototype.AS=function(){var a;if(this.F){a=this.F.user}if(!a){a=
_user}return a};jf.prototype.MQ=function(){var a;if(this.F){a=this.F.album}if(!a){a=_album}return a};jf.prototype.e=function(){if(!this.da()){K.prototype.e.call(this);if(this.initialized){F(this.g.geocodefunc);F(this.g.cleargeofunc);this.Yj.e();this.Yj=null;ua(this.nw)}this.g=null}};jf.prototype.Oa=function(){return this.da()?false:K.prototype.Oa.call(this)};jf.prototype.qX=function(){Sb(this.$r(),P("<h1>{title}</h1>",{title:El}));Sb(this.$l(),P(gz,this.g));var a=new Gb;a.K("save","Save location",
true);a.K(Hh,Cg,false,true);this.Lk(a);this.ma(true);var b=k(this.g.location_id);b.focus();b.select();var c={id:this.F.id,lat:this.F.lat,lon:this.F.lon};if(this.F.bb){c.bb={ll:{lat:this.F.bb.ll.lat,lon:this.F.bb.ll.lon},ur:{lat:this.F.bb.ur.lat,lon:this.F.bb.ur.lon}}}this.Yj=new db(c,"photo",k(this.g.map_id),k(this.g.results_id),k(this.g.location_id),k(this.g.lat_id),k(this.g.lon_id),k(this.g.latSpan_id),k(this.g.lonSpan_id),k(this.g.removeGeo_id),{noGeotagMessage:Kp(Bl),geotaggedMessage:Ep},6,10,
this.g.spin_id,true);v(this.g.geocodefunc,m(this.Yj.bo,this.Yj));v(this.g.cleargeofunc,m(this.Yj.kC,this.Yj));if(!(c.lat&&c.lon)&&this.Tw.length>0){this.Yj.mF(this.Tw)}this.Fs=true;this.pb();this.nw=q(this,qk,m(this.hs,this));var d=document.getElementsByName("save");if(d){V(d[0],"font-weight","bold")}};jf.prototype.hs=function(a){if(a.key=="save"){var b=k(this.g.lat_id).value,c=k(this.g.lon_id).value,d=k(this.g.latSpan_id).value,e=k(this.g.lonSpan_id).value,f=k(this.g.removeGeo_id).value;if(b&&c||
f=="true"&&this.F.lat&&this.F.lon){var g=this.AS(),h=this.MQ(),i=["uname="+g?g.name:"","aname="+h?h.name:"","iid="+this.F.id,"lat="+b,"lon="+c,"latspan="+d,"lonspan="+e,"removegeo="+f,"noredir=true"].join("&"),j=_updatePhotoPath,l;Ad(j,m(this.C1,this,this.F,b,c,this.Yj.QQ(),this.Yd),"POST",i,l)}}};jf.prototype.C1=function(a,b,c,d,e,f){var g=f.target;if(g.Kd()){if(b&&c){a.lat=b;a.lon=c;a.bb=d}else{a.lat=null;a.lon=null;a.bb=null}if(e){e()}}};var gz='<div class="lhcl_geophotoDialog"><b>'+Bl+'</b> <input type="text" class="lhcl_input" name="location" id="{location_id}" value="{location}" maxlength="100" /><button class="lhcl_locationsearchbutton" onclick="_d(\'{geocodefunc}\')">Go</button><img src="img/spin.gif" style="visibility:hidden; margin: 0 4px" id="{spin_id}" /><br /><div class="lhcl_align_right"><a href="javascript:_d(\'{cleargeofunc}\')">'+
tj+'</a><br /></div><input type="hidden" name="lat" id="{lat_id}" value="{lat}" /><input type="hidden" name="lon" id="{lon_id}" value="{lon}" /><input type="hidden" name="latspan" id="{latSpan_id}" value="{latSpan}" /><input type="hidden" name="lonspan" id="{lonSpan_id}" value="{lonSpan}" /><input type="hidden" name="removegeo" id="{removeGeo_id}" value="false" /><table width="720px" class="lhcl_geoResultTable"><tr><td width="20%" valign="top"><div id="{results_id}"></div></td><td width="80%"><div id="{map_id}" class="lhcl_mapBorder lhcl_smallMap"></div></td></tr></table><br /></div>';var hf=function(a,b){ff.call(this);this.Q=a;this.Q.H_(true);this.U=b;q(this.U,kf,this.Pq,false,this)};S(hf,ff);hf.prototype.Fa=rc("gphoto.FeedModel");hf.prototype.r=function(){if(!this.Q.isLoaded()){return-1}return this.Q.$b()};hf.prototype.dm=function(a){return this.Q.si(a)};hf.prototype.jp=function(a,b,c){this.Q.Ea(a,b-a,c)};hf.prototype.Qe=function(a){this.Q=a};hf.prototype.yb=function(){return this.Q};hf.prototype.isLoaded=function(){return this.Q.isLoaded()};hf.prototype.Pq=function(){this.dispatchEvent("update")};var yb=function(a,b,c,d){gf.call(this,a,b,c,d);this.i5=Ly;this.Q=a.fe()};S(yb,gf);var Jy=rc("gphoto.BasicEntityIcon");yb.prototype.nn=false;yb.prototype.columns=4;var xk=144,Ly=false,og=1,Ts=false;yb.prototype.D=null;yb.prototype.fA=1;yb.prototype.Yn=-1;yb.prototype.Fe=null;yb.prototype.fa=function(a){Jy.Pb(a)};yb.prototype.e=function(){if(this.da()){yb.j.e.call(this);if(this.gg){this.gg.e()}}};var Ky=function(a){if(xk==a){return false}var b=og;xk=a;if(xk<=72){og=0}else if(xk>144){og=2}else{og=1}return b!=
og};yb.prototype.o=function(){this.b=G("div",{"class":this.rc+" "+this.rc+"-loading"});wy(this.b);var a=G("div",{"class":this.rc+"-content"});this.D=G("img",{"class":this.rc+"-photo"});x(this.b,a);x(a,this.D);if(this.i5){this.Fe=G("div",{"class":this.rc+"-photo-info"});x(a,this.Fe)}this.UF()};yb.prototype.I=function(){this.zz(true);if(!this.A){return}else{this.ba()}if(this.gg){this.gg.I()}};yb.prototype.J=function(){if(this.gg){this.gg.J()}};yb.prototype.vz=function(a){this.Yn=a;if(this.Fe&&Ts){var b=
"("+this.Yn+") ";if(this.A){try{b=b+this.A.De()}catch(c){}}U(this.Fe,b)}};yb.prototype.mE=function(){return this.Yn};yb.prototype.zz=function(a){if(!this.b){return}var b=this.rc+"-loading";Ze(this.b,b,a);if(a){s(this.b,true);if(!this.ot){this.ot=G("div",{"class":this.rc+"-msg"});x(this.b,this.ot)}this.ot.innerHTML=tf;s(this.D,false)}else{if(this.ot){s(this.ot,false)}s(this.D,true)}};yb.prototype.qa=function(a){if(a==Mh){a=null}var b=this.fA!=og;if(this.A!=a){this.A=a;b=true}if(this.A){this.zz(false)}if(b){this.ba()}};
yb.prototype.ba=function(){if(!this.A||this.A==Mh){return}this.fA=og;var a=this.A.thumbnail(this.fA);if(a){var b=this.A.isLoaded()?a.url:"";if(!b){this.fa("no thumbnail for entity: "+this.A.id+" at index "+og)}if(this.D&&b!=this.D.src){this.D.src=b;this.zz(false);var c=1,d=1,e=this.A.Yl()||1;if(e>=1){d=1/e}else{c=e}Ic(this.D,c+"em",d+"em")}if(this.Fe){var f=this.A.De();if(Ts){f="("+this.Yn+") "+f}U(this.Fe,f)}}};yb.prototype.show=function(a){if(this.b){s(this.b,a)}};yb.prototype.Vq=function(a){var b=
us(a,this.D);if((new gb(0,this.D.offsetWidth,this.D.offsetHeight,0)).contains(b)){yb.j.Vq.call(this,a)}};var Hb=function(a,b,c){this.Tc=a;this.Po=b;if(!isNaN(c)){this.a4=c}else{this.a4=-1}this.L=new ma(this)},iz;Hb.prototype.bf=-1;Hb.prototype.la=-1;Hb.prototype.DW=3;Hb.prototype.oy=6;Hb.prototype.yq=true;Hb.prototype.Aq=200;Hb.prototype.GG=-1;Hb.prototype.zG=-1;Hb.prototype.zr=0;Hb.prototype.xA=0;Hb.prototype.Fa=rc("gphoto.ListLayout");Hb.prototype.fa=function(a){this.Fa.Pb(a)};Hb.prototype.I=function(){this.L.m(window,ee,this.wF);this.L.m(window,"scroll",this.os);this.wF();this.os()};Hb.prototype.J=
function(){this.L.mc()};Hb.prototype.PZ=function(a){this.Aq=a;this.fa("new cellSize_: "+a);this.yq=true};Hb.prototype.dj=function(a){var b=Math.ceil(1.1*a+4+4+2);this.PZ(b)};Hb.prototype.os=function(){var a=gd(),b=this.Tc.S(),c=ts(b),d=mk(b),e=c.top-(c.top+d.y);e=e<0?0:e;var f=this.Or(),g=this.Aq,h=Math.floor(e/g),i=a.height-(d.y>0?d.y:0),j=Math.ceil(i/g);this.zr=h*f.columns;this.xA=j*f.columns;this.fa("topRows: "+h+" offscreenHeight: "+e+" rowHeight: "+g+" geom columns: "+f.columns+", rows: "+f.rows+
" firstVisibleItem: "+this.zr+" visibleRows: "+j+" visibleItemCount: "+this.xA)};Hb.prototype.wF=function(){var a=gd(),b=this.Tc.S(),c=ts(b),d=mk(b),e=a.height-(d.y>0?d.y:0);this.GG=e;this.zG=c.width;this.yq=true};Hb.prototype.Jf=function(){var a=this.Or();return a.columns*a.rows};Hb.prototype.Or=function(){if(this.yq){this.bf=Math.floor(this.zG/this.Aq);this.bf=Math.max(this.bf,this.DW);this.la=Math.ceil(this.GG/this.Aq);var a;if(this.Po!=-1){a=this.Po}else{var b=this.Tc.fe();if(b){a=b.r()}else{return{columns:4,
rows:4}}}var c=a/this.bf;if(c<1){c=1}else{if(this.Po!=iz){c=Math.ceil(c)}else{c=Math.floor(c)}}this.la=Math.min(this.la,c);if(this.la>1&&this.la*this.bf>c){--this.la}this.yq=false}return{columns:this.bf,rows:this.la}};Hb.prototype.ES=function(){var a=this.Or();return this.xA+a.columns};var zb=function(a,b){b.iconClass=b.iconClass||yb;if(b.debug){b.iconClass.showInfo=true;b.iconClass.debug=true}O.call(this,b.iconClass,b.listCssClass,b.iconCssClass);if(!this.Of||!this.Of.setSize){this.fa("replacing iconClass");this.QI(yb)}this.U=a;this.L=new ma(this);this.Hg(1);this.xD(b.keyboardShortcuts);this.S4=new Eb(this.YJ,100,this);this.OO=new Eb(this.Og,100,this);this.lc=new Hb(this,b.pageSize);this.tg=true;this.fQ=true};S(zb,O);zb.prototype.yr=-1;zb.prototype.Fa=rc("gphoto.BasicFeedList");
zb.prototype.Kx=144;zb.prototype.ja=true;zb.prototype.fa=function(a){this.Fa.Pb(a)};zb.prototype.show=function(a){this.fa("show: "+a);if(this.ja!=a){this.ja=a;if(this.b){s(this.b,a)}this.ue(a);if(a){this.Rb()}}};zb.prototype.Oa=function(){return this.ja};zb.prototype.ue=function(a){var b=a?this.L.m:this.L.yd;b.call(this.L,window,ee,this.Rb);b.call(this.L,window,"scroll",this.jP);if(this.lc.Po!=-1){b.call(this.L,this.U,kf,this.VT)}a?this.lc.I():this.lc.J()};zb.prototype.I=function(){O.prototype.I.call(this);
this.lc.I();this.ue(this.Oa())};zb.prototype.o=function(){zb.j.o.call(this);V(this.b,"fontSize",this.Kx+"px");this.HC();this.B.m(this,Ay,this.yx)};zb.prototype.J=function(){this.L.mc();this.lc.J();zb.j.J.call(this)};zb.prototype.jP=function(){this.oI=true;this.OO.start()};zb.prototype.Rb=function(){this.tg=true;this.oI=true;this.S4.start()};zb.prototype.dj=function(a){this.tg=true;var b=this.Of.setSize||Ky,c=b(a);this.Kx=a;this.b.style.fontSize=a+"px";this.lc.dj(this.Kx);this.Rb()};zb.prototype.tX=
function(a,b,c){if(a!=this.A.yb()){this.fa("mismatch feed load");return}var d=a.$b(),e=this.U.Qr();if(e!=d){this.tg=true}if(this.fQ){this.lc.os();this.YJ();this.fQ=false}};zb.prototype.qa=function(a){O.prototype.qa.call(this,a);this.L.m(this.A.yb(),Kh,this.Og);if(this.ja){this.rs()}};zb.prototype.rs=function(){this.fa("handleUpdate_");var a=this.U.ce(),b=this.U.ng(a),c=this.U.Jf();this.yr=b;this.A.jp(b,b+c,m(this.tX,this))};zb.prototype.YJ=function(){this.fa("updateLayout_: "+this.tg+", scrollDirty: "+
this.oI);if(!this.ja){return}if(this.oI){this.lc.os()}if(!this.tg){return}var a=this.lc.zr,b=this.lc.Po!=-1,c,d,e,f=-1,g=this.A?this.A.r():0;if(b){d=this.lc.Or();c=Math.min(d.columns*d.rows,g);e=this.kg();if(e>c){f=c}}else{c=g}var h=this.U.ce(),i=this.U.ng(h);for(var j=a;j<c;++j){var l=this.Hd(j),p=i+j;if(!l){this.Bw(j,this.Sb);l=this.Hd(j);if(!l){continue}}if(l.mE()!=p){l.vz(p)}if(b){l.show(p<g)}s(l.b,true)}if(b){for(var t=f;t>=0&&t<e;++t){var w=this.Hd(t);w.show(false)}this.U.cn(this.lc.Jf())}this.tg=
false;this.OO.start()};zb.prototype.VT=function(){var a=this.U.ce();this.yr=this.U.ng(a);this.Og()};zb.prototype.Og=function(){if(!this.A){return}var a=Math.max(0,this.lc.zr),b=-1,c=this.A.r(),d=this.lc.Po!=-1,e=d?this.U.Jf():this.lc.ES();if(d){var f=this.U.ce();b=this.yr>=0?this.yr:this.U.ng(f)}var g=this.A.yb(),h=a+e;for(var i=a;i<h;++i){var j=this.Hd(i);if(!j){continue}var l;if(b>=0){l=b+i;if(l<c){j.vz(l);j.show(true)}else{j.vz(-1);j.show(false)}}else{l=j?j.mE():-1}if(l>=0){var p=this.A.dm(l);
if(!p&&p!=Mh){g.lh(l)}j.qa(p)}}};var Vs=function(a){Q.call(this,"entitychanged",a);this.entity=a};S(Vs,Q);var Us=function(a,b){this.element=a;this.headerElement=b;this.titleElement=null};Us.prototype.J=function(){if(this.element){C(this.element)}};var ad=function(a){z.call(this);this.Vh=a;this.L=new ma(this);this.qI={}};S(ad,z);ad.prototype.I=function(){ad.j.I.call(this);this.L.m(this.Vh,"entitychanged",this.ei)};ad.prototype.J=function(){this.L.mc();zi(this.qI,function(a){a.J()});ad.j.J.call(this)};ad.prototype.ei=function(a){var b=a.entity;this.qa(b)};ad.prototype.o=function(){this.b=G("div",{"class":"lhcl_toolbox",
style:"display: none;"})};ad.prototype.Wr=function(a){var b=this.qI[a];if(!b){var c=G("div",{"class":"lhcl_tools lhcl_hideoverflow",style:"position: relative"}),d=u("table"),e=u("tbody"),f=u("tr");x(this.b,c);x(c,d);x(d,e);x(e,f);b=new Us(c,f);this.qI[a]=b}return b};ad.prototype.kn=function(a,b,c){var d=this.Wr(a),e;if(c){e=u("a");e.href=c;e.title=b;U(e,b)}if(!d.titleElement){d.titleElement=G("td",{"class":"lhcl_detailtitle"});x(d.headerElement,d.titleElement)}if(e){fc(d.titleElement);x(d.titleElement,
e)}else{U(d.titleElement,b)}};ad.prototype.show=function(a){if(this.b){s(this.b,a)}};var Kf=function(a){z.call(this);this.cg=a};S(Kf,z);Kf.prototype.Q=null;Kf.prototype.show=function(a){s(this.b,a)};Kf.prototype.Qe=function(a){this.Q=a};Kf.prototype.ba=function(){this.dispatchEvent(new Vs(this.A))};Kf.prototype.isOwner=function(a){return this.C&&this.C.isOwner(a)};var Ib=function(a){ad.call(this,a);this.pq=new jg;this.pq.uB("lhcl_addTagButton");this.xb(this.pq);this.za=[];this.Jp={}};S(Ib,ad);Ib.prototype.yH=null;Ib.prototype.Bp=null;Ib.prototype.Mu=null;Ib.prototype.Ze=null;Ib.prototype.I=function(){Ib.j.I.call(this);this.L.m(this.pq,[od,X],this.j0,true)};Ib.prototype.qa=function(a){Ib.j.qa.call(this,a);this.Dx();this.pq.ma(this.Vh.isOwner(a),true);gw(this.za,function(b){this.removeChild(b,true)},this);this.za=[];Xr(this.Jp);this.TB="";this.A.Li(m(function(){ab(this.A.ux(),
this.DB,this)},this));if(this.Bp){this.Bp.updateTagsSection(this.A.id,this.A.user.name,this.Vh.isOwner(this.A))}};Ib.prototype.o=function(){Ib.j.o.call(this);var a=ea("People & Tags");this.kn("tags",a);this.Mu=this.Wr("tags");this.bA=G("ul",{"class":"lhcl_taglist"});x(this.Mu.element,this.bA);this.yH=this.Wr("people");if(_features.fr){this.Bp=new Ss.sapphire.ui.ShapeTagsSection;this.xb(this.Bp,false);this.Bp.V(this.yH.element)}};Ib.prototype.V=function(a){Ib.j.V.call(this,a);var b=u("td");x(this.Mu.headerElement,
b);this.pq.V(b)};Ib.prototype.CB=function(a,b){var c=a.value,d=false;if(c){var e=ot(c);if(this.M1(e)){d=true;ab(e,function(f){var g=this.GO(f);if(g){var h=this.DB(g);d=d&&!(!h)}else{d=false}},this)}if(d){this.A.Ny()}}if(d){a.value=""}if(!b&&d){this.Dx()}};Ib.prototype.Dx=function(a){if(a){a.preventDefault()}if(this.Ze){s(this.Ze,false)}};Ib.prototype.j0=function(){if(!this.Ze){this.Ze=G("div",{"class":"lhcl_addtagform",style:"display: none;"});var a=G("table",{"class":"lhcl_addtag"}),b=u("tbody"),
c=u("tr"),d=G("td",{colspan:"2",width:"100%"}),e=G("input",{id:"lhid_newTagsText","class":"lhcl_taginputfield",type:"text",maxlength:"4096"}),f=G("td",{"class":"lhcl_addtagbuttoncell"}),g=G("td",{"class":"lhcl_addtagbuttoncell"}),h=u("tr"),i=new jg("Add"),j=new jg("Cancel");this.L.m(i,[X,od],m(function(t){t.preventDefault();this.CB(e)},this));this.L.m(j,[X,od],this.Dx);this.L.m(e,Ld,m(function(t){if(t.keyCode==13){this.CB(e,true);t.preventDefault()}},this));this.xb(i);this.xb(j);i.V(f);j.V(g);this.S0=
e;x(d,e);x(c,d);x(h,f);x(h,g);x(a,b);x(b,c);x(b,h);var l=G("div",{"class":"lhcl_pseudo_hr"});x(this.Ze,l);x(this.Ze,a);x(this.Mu.element,this.Ze);ym(this.Ze,this.bA);var p=G("div",{"class":"lhcl_addtaghelp"});p.innerHTML=Qp+"<br/>"+Pp;x(this.Ze,p)}if(this.Ze.style.display!="none"){s(this.Ze,false)}else{this.S0.value="";s(this.Ze,true);this.S0.focus()}};Ib.prototype.DB=function(a){var b=String(a.t).toLowerCase();if(!this.Jp[b]){var c=new Ek(a,this.Vh.isOwner(this.A)),d=mh(this.za,c,pz);if(d<0){d=-(d+
1);ki(this.za,c,d)}this.xb(c);c.V(this.bA);this.Jp[b]=c;if(d>=0){var e=this.bA.childNodes[d];if(e){ym(c.S(),e)}}return true}return false};Ib.prototype.bP=function(a){var b=a.tag;qc(this.za,a);this.removeChild(a,true);gg(this.Jp,b.title);this.A.IY(b,true)};Ib.prototype.GO=function(a,b){var c=this.Jp[a];if(c){return null}return this.A.JM(a,b)};Ib.prototype.M1=function(a){if(a.length>100){alert(Gp(100,a.length));return false}if(a.length==this.za.length){var b=0;for(var c=0;c<a.length;++c){if(this.Jp[a[c]]){++b}else{break}}if(b==
this.za.length){return false}}var d=0;for(var c=0;c<a.length;++c){var e=a[c];if(e.length>128){alert(Hp(128,e.length));return false}d+=e.length}if(d>4096){alert(Fl(4096,d));return false}return true};Ib.prototype.rS=function(a){if(!this.TB){var b=this.A.user.name;this.TB=(new B(window.location)).xi()+"?uname="+b+"&tags="}return this.TB+qb(a.t)};var Ek=function(a,b){z.call(this);this.tag=a;this.qm=b};S(Ek,z);var pz=function(a,b){return is(a.tag.t,b.tag.t)};Ek.prototype.o=function(){this.b=u("li");var a=
G("a"),b=this.tag.t,c=Hc(b);c=zn(c,30,true);a.title=b;U(a,c);a.href=this.C.rS(this.tag);x(this.b,a);if(this.qm){var d=G("a",{"class":"lhcl_tagdelete"});V(d,"position","absolute");x(this.b,d);ri(d,X,this.Nj,false,this)}};Ek.prototype.Nj=function(){if(this.C){this.C.bP(this)}};var Rd=function(a){ad.call(this,a)};S(Rd,ad);Rd.prototype.o=function(){};Rd.prototype.V=function(a){this.b=a;this.qi=a;this.vm=k("lhid_map");if(this.qi&&this.vm){this.n=new Y(this.vm,2);var b=k("lhid_geolinks");fc(b);this.Bj=G("span",{tabindex:0,"class":"lhcl_fakelink",style:"display: none;"});b.appendChild(this.Bj);b.appendChild(u("br"));this.L.m(this.Bj,X,this.BM);this.cv=G("a",{href:"#",style:"display: none;"},"View album map");b.appendChild(this.cv)}this.Al=null;this.I()};Rd.prototype.qa=function(a){Rd.j.qa.call(this,
a);s(this.Bj,this.Vh.isOwner(this.A));if(a){a.Li(m(function(){this.$J(a)},this))}};Rd.prototype.$J=function(a){if(_features.showgeo&&this.n){if(a.lat&&a.lon){this.Xk(true);this.n.Gg(a)}else{this.Xk(false)}this.z1()}};Rd.prototype.Xk=function(a){if(_features.geotagging){a=_features.showgeo&&a;var b=this.Vh.isOwner(this.A)?this.vm:this.qi;s(b,a)}};Rd.prototype.vr=function(a){return null};Rd.prototype.bR=function(a){if(_features.geotagging){if(a.lat&&a.lon){var b={lat:a.lat,lon:a.lon,address:a.location||
""};if(a.bb){b.bb={ll:{lat:a.bb.ll.lat,lon:a.bb.ll.lon},ur:{lat:a.bb.ur.lat,lon:a.bb.ur.lon},latSpan:a.bb.latSpan,lonSpan:a.bb.lonSpan}}return b}}return null};Rd.prototype.z1=function(){if(_features.showgeo){var a=this.A,b=a.lat&&a.lon;if(this.Vh.isOwner(a)){var c;if(b){c="Edit location"}else{c="Add location"}U(this.Bj,c)}}};Rd.prototype.BM=function(a){if(this.Vh.isOwner(this.A)){var b=this.A,c=this.Al,d;if(!(b.lat&&b.lon)&&!c){c=this.vr(this.Z)}if(this.If){this.If.e();this.If=null}if(this.Wj){ua(this.Wj);
this.Wj=null}this.If=new jf(b,m(this.AM,this,b),d,c?[c]:null)}};Rd.prototype.AM=function(a){if(this.Vh.isOwner(this.A)&&a==this.A){if(a.lat&&a.lon){this.Al=this.bR(a)}else{this.Al=null}this.$J(a)}};var Mf=function(a){ad.call(this,a)};S(Mf,ad);Mf.prototype.o=function(){var a=k("lhid_tools");this.Cb=new zc(null,a);this.b=this.Cb.b;var b=k("links");if(b){s(b,false)}this.xG=this.Wr("links");s(this.xG.element,false);this.fW(yl,this.Nj);this.show(false);C(this.b)};Mf.prototype.fW=function(a,b){var c=G("div",{"class":"lhcl_fakelink"});U(c,a);this.L.m(c,X,b);x(this.xG.element,c)};Mf.prototype.J=function(){Mf.j.J.call(this);this.Cb.P()};Mf.prototype.qa=function(a){Mf.j.qa.call(this,a);if(a){a.Li(m(function(){this.Cb.wa(a.g);
s(this.xG.element,this.Vh.isOwner(a))},this))}else{this.Cb.wa(null)}};Mf.prototype.Nj=function(){if(this.A){this.A.Tq()}};if(_features.fr){}var Pb=function(a,b){Kf.call(this,b);this.Ej=b.authUser;this.U=a;this.L=new ma(this)};S(Pb,Kf);Pb.prototype.Fa=rc("gphoto.PhotoEntityView");Pb.prototype.o=function(){Pb.j.o.call(this);this.Fh=new Ta;this.xb(this.Fh,true)};Pb.prototype.I=function(){Pb.j.I.call(this);if(this.gg){this.gg.I()}this.L.m(window,ee,this.Rb)};Pb.prototype.J=function(){Pb.j.J.call(this);this.L.mc();if(this.gg){this.gg.J()}};Pb.prototype.e=function(){if(!this.da()){Pb.j.e.call(this);this.L.e();if(this.gg){this.gg.e()}}};
Pb.prototype.show=function(a){Kf.prototype.show.call(this,a);if(a){this.L.m(this.U,rg,this.ei)}else{this.L.yd(this.U,rg,this.ei)}};Pb.prototype.V=function(a){Pb.j.V.call(this,a)};Pb.prototype.ei=function(){var a=this.U.hf();this.Fa.Pb("showing item: "+a);if(a<0){this.qa(null)}else{this.Q.Ea(a,1,m(this.jr,this))}};Pb.prototype.jr=function(a,b,c){var d=this.U.hf();this.Fa.Pb("entityLoaded: "+b+", myIndex: "+d);if(d==b){var e=a.si(b);this.qa(e)}};Pb.prototype.qa=function(a){Pb.j.qa.call(this,a);this.ba()};
Pb.prototype.ba=function(){Pb.j.ba.call(this);this.Rb();this.Fh.qa(this.A)};Pb.prototype.Rb=function(a){var b=gd(),c=Gh(this.S());this.Fh.VI(b.height-c);this.Fh.ba()};if(_features.fr){}var ib=function(a,b){z.call(this);this.U=a;this.L=new ma(this);this.cg=by(My);if(b){Vg(this.cg,b)}this.Rf=new this.cg.feedListClass(this.U,this.cg);this.Fl=new this.cg.entityDetailClass(this.U,this.cg);this.p3=new Eb(this.q_,1,this);this.xb(this.Fl);this.xb(this.Rf);if(this.cg.pageSize>=0&&this.cg.pageSize!=1000){this.yk=new lf(this.U,10);this.xb(this.yk)}};S(ib,z);var My={pageSize:24,feedListClass:zb,iconClass:yb,listCssClass:null,iconCssClass:null,entityDetailClass:Pb,keyboardShortcuts:false};
ib.prototype.Fa=rc("gphoto.BasicFeedView");ib.prototype.xZ=null;ib.prototype.yk=null;ib.prototype.Q=null;ib.prototype.FU=1;ib.prototype.yy=144;ib.prototype.Qe=function(a){var b=this.Q!=a;this.Q=a;if(b){this.VP()}};ib.prototype.yb=function(){return this.Q};ib.prototype.VP=function(){this.L.m(this.Q,Lh,function(){this.U.Pk(this.Q.$b())});this.U.Pk(this.Q.$b());if(!this.yG){this.yG=new hf(this.Q,this.U)}else{this.yG.Qe(this.Q)}this.Rf.qa(this.yG);this.Fl.Qe(this.Q)};ib.prototype.I=function(){z.prototype.I.call(this);
this.L.m(this.Rf,uh,this.Os);this.L.m(this.Rf,"select",this.yZ);this.L.m(this.U,Ji,this.rH)};ib.prototype.J=function(){this.L.mc();z.prototype.J.call(this)};ib.prototype.rH=function(){if(this.yk){this.yk.show(this.Rf.Oa()&&this.U.bs()>1)}};ib.prototype.e=function(){this.L.e();z.prototype.e.call(this)};ib.prototype.yZ=function(){var a=this.Rf.kf()[0];if(a){var b=a.Yn;this.U.Fg(b)}};ib.prototype.Xr=function(){var a=this.U.hf();return this.Q.si(a)};ib.prototype.Os=function(){var a=this.Rf.kf()[0];this.iu(a.fe());
this.dispatchEvent("itemactivated")};ib.prototype.dj=function(a){this.FU=a-this.yy;this.yy=a;this.p3.start()};ib.prototype.q_=function(a){this.Rf.dj(a||this.yy)};ib.prototype.V=function(a){z.prototype.V.call(this,a);this.Fl.V(a);this.Rf.V(a);if(this.yk){this.yk.V(a);this.yk.ba()}};ib.prototype.ba=function(){this.Rf.ba();this.Fl.ba()};ib.prototype.zu=function(a){if(!this.mb){return}if(a){this.Fl.show(false);this.Rf.show(true)}else{this.Rf.show(false);this.Fl.show(true)}this.rH()};ib.prototype.iu=function(a){this.xZ=
a;this.Fl.qa(a)};ib.prototype.isOwner=function(a){if(a&&this.cg&&this.cg.authUser){return a.isOwner(this.cg.authUser)}return false};var Gi="owner_id",Zy={value:"albums_list"},$y={value:"photos_list"},Ws={value:"tags_list",label:"Tags"},Xs={value:"person_filter"},Yn={value:"tag_filter",label:dv},Ys={value:"search_filter"},$n="uname",ao={name:"isOwner",value:"true"},Zn="aid",at="S",az="F",yk={name:"psc",value:"C"},Hi={name:"psc",value:"G"},ct="tags",bt="sids",Zs="optgt",$s="TAGS",bo="q",$c=function(a,b,c){this.aN=a;this.hb=b;this.aY=c};S($c,J);$c.prototype.Uh=null;$c.prototype.isOwner=false;$c.prototype.Cd=null;$c.prototype.Q=null;
$c.prototype.OC=false;$c.prototype.RC=null;$c.prototype.kA=function(){var a=window.location.hash;if(this.RC==a){return}this.RC=a;this.Xe(window.location);this.dispatchEvent("changed")};$c.prototype.Xe=function(a){var b=new B(a);this.ud=null;this.Uh=b.Za($n)||this.aN.Gr();if(b.Za(bo)!=undefined){this.ud="s"}else if(!this.Uh){return}this.Ph=b.Za(ct);this.Xi=b.Za(bo);if(this.Xi){this.OC=b.Za("filter")=="1";this.searchContext=b.Za("psc");if(this.searchContext==undefined){if(_authuser.isOwner){this.searchContext=
at}else if(_user.name){this.searchContext=az}else{this.searchContext=Hi.value}}}if(this.cA(b,yk)){if(this.Ph){this.ud="ft"}}else if(this.cA(b,Hi)){if(this.Ph){this.ud="ct"}}else{this.isOwner=this.cA(b,ao)&&_authuser.isOwner;this.Cd=b.Za(Zn);this.Bu=b.Za(bt);if(this.Ph){if(this.Cd){this.ud="at"}else{this.ud=this.isOwner?"gt":"pgt"}}else if(this.Bu){if(this.Cd){this.ud="ap"}else{this.ud=this.isOwner?"gp":"pgp"}}else if(this.Xi){}else{if(this.Cd){this.ud="a"}}}var c=b.cx();if(c&&c.length>0){this.eO=
null}else{var d=b.Za(Zs),e=$y;if(d==$s){e=Ws}else if(this.Cd==null&&this.Ph==null){e=Zy}this.eO=e}};$c.prototype.cA=function(a,b){return a.Za(b.name)==b.value};$c.prototype.Jr=function(){return this.eO};$c.prototype.XQ=function(){if(this.Ph){return Yn.label(ca(this.Ph))}else if(this.Bu){return _subject?ca(_subject.dispname):"unknown"}else if(this.Xi){return"search results for "+ca(this.Xi)}};$c.prototype.KE=function(){return this.ud};$c.prototype.yb=function(){if(!this.Q){if(this.ud=="a"){this.Q=
this.hb.IQ(this.Uh,this.Cd)}else{if(this.Xi){this.Q=this.hb.UE(this.Xi);var a=this.Q.Ib();a.II(this.searchContext);a.JI(this.Uh);a.rp(this.OC)}else{this.Q=this.hb.aS(this.aY)}}}return this.Q};$c.prototype.io=function(){var a=this.Jr(),b=null;if(!a){var c=window.location.hash.match(/#(\d+)/);if(c&&c.length==2){b=this.hb.$R(c[1],this.Uh,this.Cd)}}return b};var Lf=function(a){z.call(this);this.eb=a;q(this.eb,"changed",this.Qd,true,this);v("d_open",Ry);v("d_close",Ny);v("slideshow",function(){new Ag});v("share",m(this.lS,this))};S(Lf,z);var Xn=null;Lf.prototype.Qd=function(){this.Vf()};Lf.prototype.Vf=function(){var a=[],b={gallery:true,favorites:true,community:true,faces:false};this.sy=null;this.ry=[];var c=null,d=this.eb.KE();if(d=="pgt"){a.push({content:ci(_user.nickname),link:_user.link});b.gallery=false}else if(d=="gt"){var e=new B(window.location),
f="http://"+e.am();f+=e.Bo()?":"+e.dk():"";f+="/home";a.push({content:"My Photos",link:f});b.gallery=false}else if(d=="at"){a.push({content:_album.title,link:_album.link});c=_album.largepreview}else if(d=="ft"){var e=new B(window.location),f="http://"+e.am();f+=e.Bo()?":"+e.dk():"";f+="/lh/favorites";a.push({content:vl,link:f});b.favorites=false}else if(d=="ct"){a.push({content:bi});b.community=false}else if(d=="pgp"){a.push({content:ci(_user.nickname),link:_user.link});a.push({content:"People",link:"/lh/people?uname="+
_user.name});c=_subject.thumb;b={}}else if(d=="gp"){a.push({content:"People in my photos",link:"/lh/people?uname="+_user.name+"&isOwner=true"});c=_subject.thumb;b={}}else if(d=="ap"){a.push({content:_album.title,link:_album.link});c=_subject.thumb;b={faces:true}}else if(d=="a"){a.push({content:_album.title,link:_album.link});c=_album.largepreview;b={}}else if(d=="s"){if(this.eb.searchContext==yk.value){b.favorites=false;var e=new B(window.location),f="http://"+e.am();f+=e.Bo()?":"+e.dk():"";f+="/lh/favorites";
a.push({content:vl,link:f})}else if(this.eb.searchContext==Hi.value){b.community=false;a.push({content:bi})}else if(this.eb.searchContext==at){b.gallery=false;a.push({content:Gl,link:_user.link})}else{a.push({content:ci(_user.nickname),link:_user.link})}if(!_authuser.name){b.gallery=false}this.sy="More photos about "+ca(this.eb.Xi)+" in: "}var g=this.eb.XQ();if(!this.eb.Jr()){b={}}else{a.push({content:g});if(this.eb.Ph){this.sy="More photos tagged "+ca(this.eb.Ph)+" in: "}}Wn(a,c,this.eb.isOwner);
if(this.eb.isOwner&&this.eb.Bu){this.KL()}Sy(this.eb.aY,this.eb.isOwner,this.eb.Jr()==null,this.eb.isOwner);var h={type:0};if(this.eb.Ph){h={type:Yn,value:this.eb.Ph}}else if(this.eb.Bu){h={type:Xs,value:this.eb.Bu}}else if(this.eb.Xi){h={type:Ys,value:this.eb.Xi}}if(b.gallery){var i,j;if(this.eb.KE()=="s"){i=Gl;j=_authuser.name}else{i=this.eb.Uh==_authuser.name?Gl:ci(_user.nickname),j=_authuser.name?_authuser.name:_user.nickname}this.oq(i,this.xq([{type:Gi,value:j},h]))}if(b.favorites&&_authuser.user){this.oq("Favorites",
this.xq([{type:Gi,value:_authuser.name},{type:yk},h]))}if(b.community){this.oq("Community",this.xq([{type:Gi},{type:Hi},h]))}if(b.faces){var l=this.eb.isOwner?"See all photos of "+g+" in your Gallery":"See all photos of "+g+" in "+_user.nickname+"'s Gallery",p=[{type:Gi},h];if(this.eb.isOwner){p.push({type:ao})}this.oq(l,this.xq(p))}this.JY()};Lf.prototype.lS=function(){var a=[],b=Xn?Xn:this.eb.aN.lb.pE().yb().si(0);a.push("source="+ca(b.gb.content$src));a.push("uname="+ca(b.user.name));a.push("continue="+
ca(window.location.toString()));var c="/lh/emailFeedForm?"+a.join("&");window.location=c};Lf.prototype.oq=function(a,b){this.ry.push({text:a,link:b})};Lf.prototype.JY=function(){var a=k("lhid_more");if(!this.ry.length){a.innerHTML="";return}var b=[];for(var c=0;c<this.ry.length;c++){var d=this.ry[c];b.push('<a href="'+d.link+'">'+d.text+"</a>")}if(this.sy){a.innerHTML=this.sy+b.join("&nbsp;|&nbsp;")}else{a.innerHTML=b.join("&nbsp;|&nbsp;")}};Lf.prototype.xq=function(a){var b=new B(window.location),
c="http://"+b.am();c+=b.Bo()?":"+b.dk():"";c+=b.xi();var d=[];for(var e=0;e<a.length;e++){var f=a[e].type;switch(f){case Gi:var g=a[e].value?a[e].value:b.Za($n);if(g!=undefined){d.push($n+"="+g)}break;case "album_id":var h=a[e].value?a[e].value:b.Za(Zn);d.push(Zn+"="+h);break;case Ws:d.push(Zs+"="+$s);break;case Yn:d.push(ct+"="+a[e].value);break;case Xs:d.push(bt+"="+a[e].value);break;case Ys:d.push(bo+"="+a[e].value);break;case ao:case yk:case Hi:d.push(f.name+"="+f.value);break}}if(d.length>0){c+=
"?"+d.join("&")}return c};var Wn=function(a,b,c){var d=k("lhid_context");Ba(d,"lhcl_newmeta");var e=[];for(var f=0;f<a.length;f++){if(a[f].link){e.push('<a href="'+a[f].link+'" style="text-decoration:none;">'+a[f].content+"</a>")}else{e.push(a[f].content)}}var g='<span class="lhcl_title">'+e.join("&nbsp;&rsaquo;&nbsp;")+"</span>",h='<div id="lhid_subcontext" class="lhcl_meta_description"></div>',i=["<table cellspacing=0 cellpadding=0><tr><td>"];if(b){i.push('<img class="lhcl_metathumbnail" src="',
b,'"></td><td>',g)}else{i.push("<div>",g,"</div>")}i.push(h);if(c){i.push('</td><td style="width:100%"></td><td>',pg("javascript:LH_uploadDialog()",Pl,"img/upload_photos_icon.gif",true))}i.push("</td></tr></table>");d.innerHTML=i.join("")};Lf.prototype.KL=function(){if(_subject==null){return}var a=k("lhid_subcontext"),b={},c=[];c.push(_subject.name);if(_subject.email&&_subject.email.length>0){c.push(_subject.email)}if(_subject.phone&&_subject.phone.length>0){c.push(_subject.phone)}b.info=c.join("&nbsp;&nbsp;");
b.favorite=_subject.starlink?"&nbsp;"+pg(_subject.starlink,"Add To Favorites","img/favorite_gray.gif",true):"";var d=P("<div><table><tr><td>{info}</td><td>{favorite}</td></tr></table></div>",b);a.appendChild(d)};var Yy=function(a){if(a){Wn([{content:a}])}if(_authuser.isOwner){var b=k("lhid_uploadButton");if(b){var c=Xy();_uploadButton=new sb(Pl,"img/upload_photos_icon.gif",false,false,c,"");_uploadButton.Qk(Pl);_uploadButton.V(b)}}},Xy=function(a){a=a||_album;return a&&a.uploadlink?a.uploadlink:"javascript:LH_uploadDialog()"},
Sy=function(a,b,c,d){var e=k("lhid_context"),f=[],g={feed:a};f.push(Ty);g.shareurl="javascript:_d('share')";if(b){f.push(Py);_album.photosRss=g.feed.replace("alt=jsonm","alt=rss");g.embedurl="javascript:_d('slideshow')";f.push(Qy);g.linkurl="javascript:_d('d_open', location.toString())"}if(d&&_picasaInstalled){f.push(Oy);g.downloadurl="picasa://downloadfeed/?url="+encodeURIComponent(g.feed.replace("data/feed/api","data/feed/back_compat"))}f.push('<td style="width:100%"></td>');f.push(Vy);g.vieworderurl=
"/lh/viewCart";var h=P('<div><table style="border-collapse: collapse; margin:3px 0 3px 0;"><tr>'+f.join("&nbsp;")+"</tr></table></div>",g);e.appendChild(h)},Ry=function(a){document.body.appendChild(P('<div class="lhcl_cover" id="lhid_cover"></div>',{}));var b=P('<div class="lhcl_dialog" id="lhid_dialog"><div class="lhcl_dialog_body">{content}</div><button onclick="javascript:_d(\'d_close\')">OK</button></div>',{content:a});document.body.insertBefore(b,document.body.firstChild)},Ny=function(){C(k("lhid_cover"));
C(k("lhid_dialog"))},Uy=function(){if(!_picasaInstalled||!_album.picasa){var a=k("lhid_photolabtools");a.style.display="none";return}var b=k("dMenu");if(b){var c=new Pa;c.W_(true);c.ib(b);q(c,od,Wy)}},Wy=function(a){var b=a.target.S().id,c=_album.picasa;if(b=="lhid_tool_download"){}else if(b=="lhid_tool_print"){c=c.replace("picasa://downloadfeed","picasa://printalbumfeed")}else if(b=="lhid_tool_collage"){c=c.replace("picasa://downloadfeed","picasa://collagefeed")}else if(b=="lhid_tool_movie"){c=c.replace("picasa://downloadfeed",
"picasa://makemoviefeed")}k("lhid_hidden").src=c},pg=function(a,b,c,d,e){var f="<td><a "+(e?'id="'+e+'" ':"")+'href="'+a+'" style="text-decoration:none">',g="</a></td>",h=c?'<img src="'+c+'" style="height:11px">':"";if(d){return f+'<div class="lhcl_cbbox lhcl_cbox_disabled"><p class="lhcl_cbdesc"></p><p class="lhcl_cblink"><em>'+h+"<span>"+b+"</span></em></p></div>"+g}else{return f+h+'<span style="padding:4px; font-size:0.8em;">'+b+"</span>"+g}},Ty=pg("{shareurl}","Share Photos","img/share_icon.gif",
true,"lhid_sharelink"),Py=pg("{embedurl}","Embed","img/ctx_global.png"),Qy=pg("{linkurl}","Link","img/ctx_global.png"),Oy=pg("{downloadurl}","Download Photos","img/download.gif"),UA=pg("{orderprintsurl}","Order Prints","img/order.gif"),Vy=pg("{vieworderurl}","View order","img/order.gif");var Mc=function(a){z.call(this);this.ID=a;this.vb=a.pE();this.U=a.kx();this.L=new ma(this);this.db=new hc(document);this.Re=new da;this.Re.C_("horizontal");this.Re.up(72);this.Re.an(288);this.Re.wu(1);this.BC={};this.Af=[];this.ia=this.nl("slideshow",false);this.Lt=this.nl("previous",true);this.rt=this.nl("next",true);this.lI=this.nl("rotateleft",true);this.mI=this.nl("rotateright",true);this.el=this.nl("zoom",true);this.xb(this.Re);this.ia.Zm("img/slideshow_icon.gif");this.ia.va("Slideshow");this.hP()};
S(Mc,z);Mc.prototype.nl=function(a,b){var c=b?new jg:new sb;c.uB("lhcl_"+a);this.xb(c);return c};Mc.prototype.ai=function(a,b){var c=this.BC[a.wc()];if(!c){c=[];this.BC[a.wc()]=c}c.push(b)};Mc.prototype.Ob=function(a){z.prototype.Ob.call(a);var b=k("lhid_thumbsizes");if(b){b.style.width="220px";this.Re.ib(b)}else{this.Re.V(a)}var c=this.Re.S();Ic(c,"220px","20px");var d=this.Re.qb;Hn(d,"img/sliderknob.png");Hn(c,"img/slidertrack.png");var e=k("lhid_leftnav"),f=k("lhid_midnav"),g=k("lhid_rightnav");
this.ia.V(e);this.Lt.V(f);this.rt.V(f);this.el.V(g);this.lI.V(g);this.mI.V(g)};Mc.prototype.I=function(){z.prototype.I.call(this);var a=this.Re;this.Re.va(144);this.L.m(this.Re,ig,function(){this.vb.dj(a.H())});this.L.m(this.Lt,od,this.WG);this.L.m(this.rt,od,this.VG);this.L.m(this.ia,od,this.dU);this.L.m(this.ID,"modechanged",this.RG);this.L.m(this.U,jt,this.iA);this.L.m(this.U,rg,this.iA);this.L.m(this.db,"key",this.AT);this.RG()};Mc.prototype.AT=function(a){switch(a.keyCode){case 37:this.WG();
a.preventDefault();break;case 39:this.VG();a.preventDefault();break}};Mc.prototype.dU=function(a){var b="slideshow/";this.ID.getContext().Lh(b)};Mc.prototype.J=function(){this.L.mc();var a=k("lhid_thumbsizes");if(a){this.Re.e()}z.prototype.J.call(this)};Mc.prototype.x_=function(a,b){var c=this.BC[a.wc()];if(c){var d=0;for(var e=0;e<c.length;++e){var f=c[e];if(f&b){++d}}var g=d==c.length;s(a.b,g)}};Mc.prototype.RG=function(){var a=this.ID.OR();this.iA();this.Vj(m(function(b){this.x_(b,a)},this))};
Mc.prototype.Nd=function(a){var b=this.U.hf(),c=this.U.Qr(),d=qn(b+a,0,c-1);if(b!=d){this.U.Fg(d)}};Mc.prototype.iA=function(){var a=this.U.hf();this.EP(a)};Mc.prototype.hP=function(){this.Lt.Kb(false);this.rt.Kb(false)};Mc.prototype.EP=function(a){this.Lt.Kb(a>0);this.rt.Kb(a+1<this.U.Qr())};Mc.prototype.WG=function(){this.Nd(-1)};Mc.prototype.VG=function(){this.Nd(1)};var qe=function(a,b,c){this.Ej=a;this.dO=b;this.L=new ma(this);this.hb=new Zb;this.data=c;this.eb=new $c(this,this.hb,this.data);this.HF=new ub;this.Fa=rc("gphoto.AppContext");this.Ff=[];this.U=new Yb(0,24);this.U.Fg(0);km().ou(Ej);kw();this.L.m(this.HF,"navigate",this.wy)};qe.prototype.aD=null;qe.prototype.VH=function(a,b){this.Ff.push(new go(a,b))};qe.prototype.XZ=function(a){this.aD=new go(a,null)};qe.prototype.start=function(){this.Fa.Pb("Starting app");this.HF.Kb(true)};qe.prototype.Lh=function(a){this.HF.Lh(a)};
qe.prototype.Gr=function(){return this.Ej};qe.prototype.$l=function(){return this.dO};qe.prototype.hh=function(){return this.eb};qe.prototype.Yw=function(){return this.hb};qe.prototype.jf=function(){return this.U};qe.prototype.wy=function(a){this.Fa.Pb("nav to #"+a.token);var b;for(var c=0;c<this.Ff.length;++c){if(this.Ff[c].match(a.token)){b=this.Ff[c];break}}if(!b){b=this.aD}if(this.Et&&this.lb&&this.Et==b.vpage){this.lb.ba(a.token)}else{if(this.lb){this.lb.e()}this.lb=new b.vpage(this);this.lb.V(this.dO);
this.lb.ba(a.token)}document.title=this.lb.De();this.Et=b.vpage};var go=function(a,b){this.vpage=a;this.re=b};go.prototype.match=function(a){return this.re&&this.re.test(a)};var lc=function(a){z.call(this);this.fa("Created a thingy of type "+this.sa());this.fb=a;this.B=new ma(this)};S(lc,z);lc.prototype.e=function(){if(!this.da()){lc.j.e.call(this);this.B.e()}};lc.prototype.sa=function(){return"gphoto.BasePage"};lc.prototype.getContext=function(){return this.fb};lc.prototype.yb=function(){return this.fb.hh().yb()};lc.prototype.De=function(){return""};lc.prototype.I=function(){lc.j.I.call(this);this.hF();this.B.m(this.yb(),Lh,this.hF);var a=this.getContext().jf()};lc.prototype.J=
function(){lc.j.J.call(this);this.B.mc()};lc.prototype.ba=function(a){};lc.prototype.hF=function(a){var b=this.yb().$b();this.getContext().jf().Pk(b)};lc.prototype.fa=function(a){if(!this.Fa){this.Fa=rc(this.sa())}this.Fa.Pb(a)};var Qa=function(a){lc.call(this,a);this.Cx=[];this.Fh=new Ta;this.xb(this.Fh);this.zc=new Eb(this.SM,this.Dg,this)};S(Qa,lc);Qa.prototype.Dg=3000;Qa.prototype.sa=function(){return"gphoto.SlidePage"};Qa.prototype.De=function(){var a=ea("Slideshow");return a};Qa.prototype.o=function(){Qa.j.o.call(this);var a=document.body;this.U4=ss(a);V(a,"background","#000");var b=this.cF();this.V4=b.style.overflow;V(b,"overflow","hidden");var c=sm(document.body);while(c){if(c.style.display!="none"){s(c,false);this.Cx.push(c)}c=
vm(c)}this.Fh.V();this.W=new wc(this);this.W.zj(this.Dg)};Qa.prototype.I=function(){Qa.j.I.call(this);this.B.m(this.getContext().jf(),rg,this.cT);this.B.m(window,ee,this.Rb);this.Nl(true)};Qa.prototype.J=function(){Qa.j.J.call(this);this.Nl(false);this.W.P();while(this.Cx.length){s(this.Cx.pop(),true)}V(document.body,"background",this.U4);V(this.cF(),"overflow",this.V4)};Qa.prototype.e=function(){if(!this.da()){Qa.j.e.call(this);dm(this.Cx)}};Qa.prototype.qa=function(a){Qa.j.qa.call(this,a);this.Rb();
this.Fh.qa(this.A);if(this.A){this.W.gq(this.A.c)}};Qa.prototype.ba=function(a){var b=a.match(/slideshow\/(\d*)/)[0];if(wa(b)){this.ly(1)}else{this.ly(0)}};Qa.prototype.cF=function(){return n.IE?document.documentElement:document.body};Qa.prototype.jr=function(a,b,c){var d=this.getContext().jf(),e=d.hf();d.Fg(b);this.fa("entityLoaded: "+b+", oldIndex: "+e);if(e==b){var f=a.si(b);this.qa(f)}};Qa.prototype.cT=function(a){var b=this.getContext().jf().hf();this.fa("showing photo at: "+b);if(b<0){this.qa(null)}else{this.ly(b)}};
Qa.prototype.ly=function(a){this.yb().Ea(a,1,m(this.jr,this))};Qa.prototype.Nd=function(a){var b=this.getContext().jf(),c=b.hf(),d=gk(c+a,b.Qr());b.Fg(d)};Qa.prototype.SM=function(){this.Nd(1);this.zc.start()};Qa.prototype.Nl=function(a){if(a==this.ob){return}this.ob=a;if(a){this.zc.start()}else{this.zc.stop()}this.W.iq(a)};Qa.prototype.Rb=function(a){var b=gd();this.Fh.VI(b.height,true);this.Fh.ba()};Qa.prototype.xf=function(){this.Nl(false);this.Nd(-1)};Qa.prototype.wf=function(){this.Nl(false);
this.Nd(1)};Qa.prototype.qj=function(){this.getContext().Lh("")};Qa.prototype.eq=function(){this.Nl(true)};Qa.prototype.xj=function(){this.Nl(false)};Qa.prototype.sv=function(){this.Dg=Math.max(this.Dg-1000,1000);this.W.zj(this.Dg);if(this.ob){this.zc.start(this.Dg)}};Qa.prototype.rv=function(){this.Dg=Math.min(this.Dg+1000,10000);this.W.zj(this.Dg);if(this.ob){this.zc.start(this.Dg)}};var za=function(a){lc.call(this,a);this.L=new ma(this);this.zY();var b={},c=new B(window.location),d=Number(c.Za("pagesize"));if(!isNaN(d)){b.pageSize=d}b.debug=!(!c.Za("Debug"));b.authUser=this.fb.Gr();this.vb=new ib(this.fb.jf(),b);this.rr[eo].instance=this.vb;this.AC=new Lf(this.fb.hh());this.Sj=new Mf(this.vb);var e=k("lhid_feedview"),f=k("lhid_tools");this.Yb=new oc(this,e,f,true);this.v2=k("lhid_caption");this.tb=new td(this,this.v2,e);this.JG=new Rd(this.vb);this.aA=new Ib(this.vb);this.UG=
this.zO();this.xb(this.Sj);this.xb(this.JG);this.xb(this.aA);this.xb(this.AC);this.xb(this.UG);this.xb(this.vb)};S(za,lc);var eo="defaultview";za.prototype.Wc=function(a){var b=a.status;if(b>=400){var c;if(b==403){c=Cl}else if(b==404){c=Hl}else if(b>=500){c=di+"\n"+ih(b)}else{c=Nl+"\n"+ih(b)}alert(c);return true}return false};za.prototype.zd=function(a){var b=a.text;if(a.target&&a.target.Qc){b=a.target.Qc()}if(b.indexOf("success")<0){var c=b.replace(/\<[^>]*\>/g,"");alert(c);return true}return false};
za.prototype.vf=function(){var a=this.vb.Xr();a.g=null;a.Hf=null;a.Li(m(function(){this.Yb.wv(a);this.tb.Xd(a);Xn=a},this))};za.prototype.rr={};za.prototype.Fa=rc("gphoto.FeedViewPage");za.prototype.Zg=0;za.prototype.fa=function(a){this.Fa.Pb(a)};za.prototype.vp=function(a){if(a!=this.Zg){this.Zg=a;if(this.mb){var b=this.Zg&4;this.Yb.show(b);this.JG.show(b);this.aA.show(b);this.Sj.show(b)}this.dispatchEvent("modechanged")}};za.prototype.OR=function(){return this.Zg};za.prototype.zO=function(){var a=
new Mc(this);a.ai(a.Lt,4);a.ai(a.rt,4);a.ai(a.lI,1);a.ai(a.lI,4);a.ai(a.mI,1);a.ai(a.mI,4);a.ai(a.Re,2);a.ai(a.el,4);return a};za.prototype.pE=function(){return this.vb};za.prototype.kx=function(){return this.fb.jf()};za.prototype.sa=function(){return"gphoto.FeedViewPage"};za.prototype.o=function(){za.j.o.call(this);var a=k("lhid_navheader");if(a){this.UG.ib(a)}else{this.UG.V(this.b)}var b=k("lhid_context");if(b){this.AC.ib(b)}else{this.AC.V(this.b)}this.vb.V(this.b);this.vb.dj(144);var c=k("lhid_tools"),
d=k("lhid_geodiv");if(c){this.Sj.V(c);this.aA.V(c)}xm(this.Yb.tk,this.Sj.S());if(d){xm(d,this.aA.S());this.JG.V(d)}};za.prototype.I=function(){z.prototype.I.call(this);this.L.m(this.fb.hh(),"changed",this.gO);this.L.m(this.fb.jf(),rg,this.ei);this.L.m(this.vb,"itemactivated",this.Os);this.L.m(this.fb.Yw(),"deleterequested",this.aO);this.L.m(this.fb.Yw(),"deleteposted",this.rN);this.L.m(this.fb.Yw(),lo,this.XY)};za.prototype.J=function(){za.j.J.call(this);this.L.mc();this.Yb.P()};za.prototype.aO=function(a){var b=
a.target;return b&&confirm(typeof b.nb!="undefined"&&b.nb()?zp:yp)};za.prototype.Zz=function(a){var b=this.vb.yb(),c=b.$b(),d=!df(a)?this.fb.jf().hf():a;this.fa("syncWithFeed_, index: "+d+" count: "+c);this.fb.jf().Pk(c);if(0==c){this.vb.iu(null);this.vb.zu(true);this.Op(null);return}var e=qn(d,0,c-1);if(d!=e){this.fb.jf().Fg(e)}else{var f=b.si(d);if(f==Mh){f=null}this.vb.iu(f);this.Op(f)}};za.prototype.rN=function(a){this.Zz()};za.prototype.XY=function(a){this.Zz()};za.prototype.e=function(){this.L.e();
z.prototype.e.call(this)};za.prototype.wy=function(){if(window.location.href==this.D6){return}this.fa("NEW context");this.fb.hh().kA()};za.prototype.zY=function(){this.rr[eo]={construct:ib,instance:null}};za.prototype.DS=function(a){var b=a?this.rr[a.value]:null;if(!b){b=this.rr[eo]}if(!b.instance){b.instance=new b.construct}return b.instance};za.prototype.ba=function(a){this.vb.zu(!a);this.fb.hh().kA()};za.prototype.gO=function(){var a=this.fb.hh().yb(),b=this.fb.hh().Jr();if(a!=this.vb.yb()){var c=
this.DS(b);if(this.vb!=c){this.vb=c}this.vb.Qe(a)}var d=this.fb.hh().io();this.fa("contextChanged, entity: "+d);if(d&&this.vb.Xr()==d){return}var e=this.Zg,f=b!=null;if(f){if(d){this.fa("loading entity details, "+d.wc()+", "+d.De());d.Ea(m(function(){this.vb.iu(d);this.Op(d)},this))}e|=2;e&=-5;var g=a.Ib().io();if(g){e=this.$u(g,e)}}else{e|=4;e&=-3;e=this.$u(d,e)}this.vp(e);var h=k("lhid_more");s(h,f);this.vb.zu(f);if(!f&&d){var i=this.kx(),j=i.hf(),l=!a.isLoaded();if(!this.WP){this.WP=new Hk("id",
a)}this.WP.Pw(d.id,m(this.a_,this,l))}};za.prototype.a_=function(a,b){var c=b[0];if(a){this.Zz(c)}var d=this.kx();d.Fg(c)};za.prototype.qm=function(a){return this.fb.Gr()&&a&&typeof a.isOwner!="undefined"&&a.isOwner(this.fb.Gr())};za.prototype.$u=function(a,b){if(this.qm(a)){b|=1}else{b&=-2}return b};za.prototype.Os=function(){this.fa("itemActivated_");var a=this.Zg;a|=4;a&=-3;var b=this.vb.Xr();a=this.$u(b,a);this.vp(a);this.Op(b);var c=k("lhid_more");s(c,false);this.vb.zu(false)};za.prototype.Op=
function(a){this.fa("updateDetails_, detail mode? :"+this.Zg&4);if(this.Zg&4){if(a){a.Li(m(function(){this.Yb.wv(a);this.tb.Xd(a);var b=k("lhid_sharelink");b.href="/lh/emailPhoto?uname="+a.user.name+"&iid="+a.id},this))}}};za.prototype.ei=function(){var a=this.vb.Xr();if(a){this.Op(a);var b=a.id;this.fb.Lh(b);var c=this.$u(a,this.Zg);this.vp(c);this.fb.hh().kA()}};var ft=function(a,b,c){var d=k(a);if(d){var e=new qe(b,d,c);e.XZ(za);e.VH(lc,/^base$/);e.VH(Qa,/^slideshow\/\d*$/);e.start()}};Nd("pwa.view",
ft);if(_features.fr){}var rz=function(){if(_features.geotagging){var a=k("lhid_map");if(a){var b=new Y(a,1,{albums:_user.albums})}}for(var c=0;c<_user.albums.length;c++){var d=k("title_"+_user.albums[c].id);V(d,"paddingLeft","3em");Vl(d,2,_user.albums[c].title,225);V(d,"paddingLeft","0")}ai();v("index",Gf(lj,jp))},Cz=function(a,b){if(hg(n.PLATFORM,"Win")){if(a){s(k("lhid_launchpicasafooter"),true);s(k("lhid_downloadpicasafooter"),false)}}else if(hg(n.PLATFORM,"Mac")){k("lhid_downloadpicasafooter").href=
b}else if(hg(n.PLATFORM,"Linux")){s(k("lhid_downloadpicasafooter"),false)}},Lz=function(){if(!oa.il()){return _redirect()}var a=new pf(iq);if(!location.hash){location.replace(location.toString()+"#0+1")}a.fl(Ma,/^#(\d+)\+(\d+)$/,true);a.fl(jb,/^#(\d+)$/,true);a.fl(Ma,/^#-.*$/,true);a.tv();ai()},Nz=function(){if(!oa.il()){return _redirect()}var a=new pf(gq);a.fl(T,/^#(\d+)$/);a.fl(Cb,/^#s(\d+)$/);if(_features.geotagging){if(_album.hasGeotaggedPhotos||_authuser.isOwner){a.fl(ya,/^#(map)$/i)}}a.tv();
if(typeof _addStarPath!="undefined"){oa.Fb(_addStarPath+"&redir=/",null)}ai()},uo=[],qz=function(a){uo.push(Gf.apply(null,arguments))},Kz=function(){while(uo.length){uo.pop()()}};(function(){zi({compatible:Bz,setup:qz,start:Kz,albumList:rz,footer:Cz,flagger:fz,reportAbuse:ez,mail:Dz,searchPage:Lz,slideshow:Nz,uploadForm:Sz,viewAlbum:Vz,view:ft,contextWidget:Yy},function(a,b){Nd("pwa."+b,a)});po=_authuser||po;nt=Dl})();var ka=new dj,oa=new We(1),Pc=null,Vh=n.flash.isVersion("7");function Ph(a){if(Pc)Pc.hide();
if(a)Pc=null}(function(){window._d=Ac;function a(){var f=k("lhid_settingsform"),g=k("lhid_personaurl");if(!f||!g)return;var h=f.urlnick;if(!h)return;if(h.length){for(var i=0;i<h.length;i++){if(h[i].checked){U(g,h[i].value);break}}}else{U(g,h.value)}}function b(){var f=k("lhid_email_upload_enabled"),g=k("lhid_email_upload_additional_settings"),h=k("lhid_email_upload_secret_word"),i=k("lhid_email_upload_address_box"),j=k("lhid_personaurl");if(!f||!g)return;s(g,f.checked);if(!h||!i||!j)return;if(h.value==
""){var l=ea("Enter a secret word above to create your address");U(i,l);V(i,"color","red")}else if(h.value!=$f(i)){i.innerHTML=$f(j)+".<b>"+ca(h.value)+"</b>@picasaweb.com";V(i,"color","black")}}function c(){Px(_LH.locale);if(!Hr(He,dg())){nn(zd,dg())}window._fd=function(f){return Rv(f,2)};window._pd=function(f,g,h){aA(f,g,h,2)}}window._fd=function(f){c();return window._fd(f)};window._pd=function(f,g,h){c();window._pd(f,g,h)};window._ps=function(f){re.prototype.P=re.prototype.e;var g=f.foreign;if(Ca(g)){g.name=
Dl(g.name)}window.LH_SEARCH_CONTEXT_INFO=f;ka.fc(new re(f))};window._st=function(){v("updateGalleryUrl",a);v("updateEmailUploadSettings",b);a();b();var f=function(g){s(k("lhid_publicalbumindexing_set"),true);s(k("lhid_publicalbumindexing_unset"),false);k("lhid_publicalbumindexing").checked=g};v("index",Gf(lj,f))};window._sl=function(){v("index",Gf(lj,Gf(null,document.referrer)))};window._h=function(f,g){if(_features.geotagging){var h=k("lhid_map");if(h){var i=new Y(h,1,{albums:_user.albums})}}if(_user.albums.length>
0){new nl(_user.albums,k("lhid_albumsort"),k("lhid_albums"),f,g)}Tk();ai();v("index",Gf(lj,jp))};window._b=function(){new cc(_thumbnail,_updateCaptionsPath,k("lhid_captions"))};window._f=function(f,g,h){var f=new sf(f,g,h)};window._vc=function(){window._selectProvider=Du;window._sendToProvider=nA;window._removeCart=dA;new ll};window._sp=function(f,g){if(Ur(pl)){un(pl);f.submit()}else{window.location=g}};window._onload=function(){Tk()};v("closePromo",function(){k("lhid_promoWidget").style.display=
"none";oa.Fb(_setPrefUrl,null,"pref=HIDE_PROMO")});v("ProfilePicker",function(){if(Pc==null){Pc=new va(_selectedPhotosPath,_user.name,_album.id,"PORTRAIT")}Pc.Ez("PORTRAIT",false);Ac("hideVideo");Pc.show(function(){Ac("restoreVideo")})});v("SettingsPicker",function(){if(Pc==null){Pc=new va(_selectedPhotosPath,_user.name,_album.id,"PORTRAIT")}Pc.Ez("PORTRAIT",true);Pc.show()});v("CoverPicker",function(){if(Pc==null){Pc=new va(_selectedPhotosPath,_user.name,_album.id,"BANNER")}Pc.Ez("BANNER",false);
Pc.show()});window._reorganize=function(f){if(_features.newStrings){var g=n.MAC?"lhid_helpSelectMac":"lhid_helpSelect";s(k(g),true)}var h=k("lhid_edit_frame"),i=u("div");i.className="lhcl_lighttable";h.appendChild(i);var j=[k("lhid_copy"),k("lhid_move"),k("lhid_delete")],l=new Na(i,k("lhid_done"),j);for(var p=0;p<f.length;p++){var t=f[p];l.OM(t.l,t.id,t.s,t.t,t.d)}if(_album.pageInterval>0){var w=[];if(_album.offset>0){w.push('<a href="',_album.pageLink,'&off=0">&laquo; 1</a>&nbsp;&nbsp;')}if(_album.offset>
_album.pageInterval){var y=_album.offset-_album.pageInterval,Z=y+1;w.push('<a href="',_album.pageLink,"&off=",y,'">&lsaquo; ',Z,"</a>&nbsp;&nbsp;")}w.push(sj(_album.offset+1,_album.offset+f.length,_album.photocount),"&nbsp;&nbsp;");if(_album.offset<_album.photocount-2*_album.pageInterval){var M=_album.offset+_album.pageInterval,Z=M+1;w.push('<a href="',_album.pageLink,"&off=",M,'">',Z," &rsaquo</a>&nbsp;&nbsp;")}if(_album.offset<_album.photocount-_album.pageInterval){var I=(Math.ceil(_album.photocount/
_album.pageInterval)-1)*_album.pageInterval,Z=I+1;w.push('<a href="',_album.pageLink,"&off=",I,'">',Z," &raquo;</a>&nbsp;&nbsp;")}k("lhid_pager").innerHTML=w.join("")}};window._userSettingsForm=function(f){k("save").disabled=true;k("cancel").disabled=true;if(Pc){return Pc.fZ(f)}return true};window._hideWidget=function(f,g){s(k(f),false);if(oa&&oa.il()){oa.Fb(g,null,"POST")}};window._ef=Ku;window._setVisibility=Fo;window._addFavorite=pu;window._w=Tk;window._v=Ru;window._setUpdateCartAction=Gu;window._setBackLink=
oA;var d=["BR_IsIE",function(){return n.IE},"BR_IsMac",function(){return hg(n.PLATFORM,"Mac")},"BR_IsWin",function(){return hg(n.PLATFORM,"Win")},"DeleteArrayElement",qc,"InsertArray",ji,"SetCookie",Ug,"UrlEncode",qb,"addWrangler",Yd,"get",k,"getWrangler",Jd,"killEvent",Qh,"minmax",Se,"offset",Ja,"removeWrangler",ue,"sortedInsert",Go,"sortedRemove",pA,"squaredDistance",sA,"templatize",ja,"LH_Dialog",Sa,"DIALOG_CREATE",0,"DIALOG_UPLOAD_FIRST",2,"DIALOG_UPLOAD",1,"DIALOG_EDIT",5,"DIALOG_COPY",3,"DIALOG_MOVE",
4,"CL_callInsertNotes",Lo,"LH_CreateActiveXUploader",ru,"FlashRequest",Gf(Ac,"f")];for(var e=0;e<d.length;e+=2){Nd(d[e],d[e+1])}Nd("_xmlhttp",oa);Nd("xmlhttp",oa);Ef(oa,"Supported",oa.il);Ef(oa,"Request",oa.Fb)})();;var sg=function(a){z.call(this);this.Hc=a||""};sg.prototype.xa=function(a){return this.Hc+(a?"-"+a:"")};sg.prototype.ic=function(a,b){var c=b||this.S(),d=this.wc()+"-"+a,e=k(d);if(!e){var f=rm(null,this.xa(a),c);if(f.length){e=f[0];e.id=d}else{e=null}}return e};var vo=function(a,b){Fi.call(this,"",new Re(b||"lhcl_Checkbox"))};S(vo,Fi);var Qz,Rz;vo.prototype.rm=0;vo.prototype.Va=function(a,b){if(this.mf(a)&&b!=this.Jc(a)){this.Ca=b?this.Ca|a:this.Ca&~a;this.Ba.Va(this,a,b)}};var Re=function(a){Yc.call(this);if(!vt){vt=true;Vg(Re.prototype,sg.prototype)}sg.call(this,a);this.Hc=a},vt;S(Re,Yc);Re.prototype.Nb=function(){return false};Re.prototype.o=function(){return G("div",{"class":this.Hc})};Re.prototype.qd=function(a,b){switch(a||0){case 4096:return b&&this.xa("checkedActive_")||
null;case Qz:case Rz:if(!b){return null}default:return Re.j.qd.call(this,a)}};Re.prototype.Yc=function(){return null};Re.prototype.Bc=function(){};Re.prototype.Va=function(a,b,c){var d=a.S();if(b==4||b==16){Oa(d,this.qd(this.rm,true));var b=null;if(a.Jc(4)){if(a.Jc(16)){b=4096}else{b=4}}else if(a.Jc(16)){b=16}this.rm=b;ga(d,this.qd(b,true))}else{Re.j.Va.call(this,a,b,c)}};var Dd=function(a){z.call(this);if(!xt){xt=true;Vg(Dd.prototype,sg.prototype)}sg.call(this,a);this.L=new ma(this);this.af={};this.Ta=[]},xt;S(Dd,z);var wt=new RegExp("\\{\\$prefix\\}","g");Dd.prototype.Vn=function(a){return wm(a.replace(wt,this.xa()))};Dd.prototype.e=function(){if(this.da()){return}Dd.j.e.call(this);this.L.e()};Dd.prototype.az=function(a){while(this.Ta.length){this.removeChild(this.Ta[0],a)}};var sb=function(a,b,c,d,e,f){jg.call(this,"",new ac(f||"lhcl_Button"));this.Jg(4096,true);this.Jg(16384,true);this.va(a);this.sp(d||false);this.l_(e||null);this.Zm(b||null);this.Fz(c||false)};S(sb,jg);var Oz,Pz;sb.prototype.bD=false;sb.prototype.Ix=null;sb.prototype.LF=null;sb.prototype.rm=0;sb.prototype.AJ=false;sb.prototype.o=function(){sb.j.o.call(this);this.va(this.H());this.Zm(this.getIcon());this.sp(this.nV());this.Fz(this.wV());this.Qk(this.fk())};sb.prototype.e=function(){sb.j.e.call(this);
var a=this.jh();if(a){a.e()}};sb.prototype.I=function(){sb.j.I.call(this);q(this,od,this.gF,false,this)};sb.prototype.J=function(){sb.j.J.call(this);L(this,od,this.gF,false,this)};sb.prototype.getIcon=function(){return this.LF};sb.prototype.nV=function(){return this.bD};sb.prototype.wV=function(){return this.AJ};sb.prototype.sp=function(a){this.bD=a;if(a){this.Fz(false)}if(this.S()){this.Va(4096,a)}};sb.prototype.l_=function(a){this.Ix=a};sb.prototype.Zm=function(a){this.LF=a;if(this.S()){this.jh().Zm(a)}};
sb.prototype.Fz=function(a){this.AJ=a;if(a){this.sp(false)}if(this.S()){this.Va(16384,a)}};sb.prototype.Va=function(a,b){if(this.mf(a)&&b!=this.Jc(a)){this.Ca=b?this.Ca|a:this.Ca&~a;this.Ba.Va(this,a,b)}};sb.prototype.gF=function(){if(this.Ix){window.location=this.Ix}};var ac=function(a){Yc.call(this);if(!ut){ut=true;Vg(ac.prototype,sg.prototype)}sg.call(this,a)},ut;S(ac,Yc);ac.prototype.b=null;ac.prototype.Na=null;ac.prototype.Ve=null;ac.prototype.Nb=function(){return false};ac.prototype.o=function(){this.b=
this.Vn('<table class="{$prefix} lhcl_NoSpace"><tr><td><div class="lhcl_RelativeContainer lhcl_FillVertical"><div class="{$prefix}-backgroundLeft_"></div><div class="{$prefix}-contents_"><table class="lhcl_NoSpace lhcl_Fill"><tr><td class="{$prefix}-contentsCell_"><span class="{$prefix}-icon_"></span><span class="{$prefix}-caption_"></span></td></tr></table></div><div class="{$prefix}-backgroundRight_"></div><div class="{$prefix}-glassPane_"></div></div></td></tr></table>');return this.b};ac.prototype.e=
function(){if(this.Ve){this.Ve.e()}};ac.prototype.Vn=function(a){return wm(a.replace(wt,this.xa()))};ac.prototype.qd=function(a,b){switch(a||0){case 4096:return b&&this.xa("default_")||null;case 8192:return b&&this.xa("defaultActive_")||null;case 16384:return b&&this.xa("small_")||null;case 65536:return b&&this.xa("smallActive_")||null;case 131072:return b&&this.xa("smallDisabled_")||null;case Oz:case Pz:if(!b){return null}default:return ac.j.qd.call(this,a)}};ac.prototype.Yc=function(){return null};
ac.prototype.wc=function(){return this.Na||(this.Na=":"+As++)};ac.prototype.Va=function(a,b,c){if(b==4||b==1||b==4096||b==16384){Oa(this.b,this.qd(this.rm,true));var b=null;if(a.Jc(4)){if(a.Jc(4096)){b=8192}else if(a.Jc(16384)){b=65536}else{b=4}}else if(a.Jc(1)){if(a.Jc(16384)){b=131072}else{b=1}}else if(a.Jc(4096)){b=4096}else if(a.Jc(16384)){b=16384}this.rm=b;ga(this.b,this.qd(b,true))}else{ac.j.Va.call(this,a,b,c)}};ac.prototype.va=function(a,b){if(!this.b){return}var c=this.ic("caption_",this.b);
U(c,b||"");Ze(this.b,this.xa("noText_"),!b)};ac.prototype.Bc=function(){};ac.prototype.Zm=function(a){var b=this.ic("icon_",this.b);fc(b);if(a){var c=G("img",{src:a});x(b,c)}};ac.prototype.Qk=function(a,b){if(!this.b){return}if(this.Ve){this.Ve.e();this.Ve=null}if(b){this.Ve=new Za(this.b);this.Ve.m_('<div class="lhcl_Tooltip">'+b+"</div>")}};var Ra=function(a){Dd.call(this,a||"lhcl_Compartment");this.EJ={}};S(Ra,Dd);var wo={minimum:0,summary:1,maximum:2},Nk=["minimum","summary","maximum"];Ra.prototype.OS=null;Ra.prototype.NS=true;Ra.prototype.Ba=null;Ra.prototype.Ca="maximum";Ra.prototype.Gp=true;Ra.prototype.Te=null;Ra.prototype.a1=null;Ra.prototype.c1=null;Ra.prototype.KN=function(){if(this.Gp&&this.Ca=="minimum"||!this.Gp&&this.Ca=="maximum"){this.Gp=!this.Gp}if(this.Gp){for(var a=wo[this.Ca]-1;a>=0;a--){var b=Nk[a];if(this.po(b)||
b=="minimum"){this.Va(b);return}}}else{var c=Nk.length;for(var a=wo[this.Ca]+1;a<c;a++){var b=Nk[a];if(this.po(b)){this.Va(b);return}}}};Ra.prototype.o=function(){var a=this.jh();a.o(this);this.hu(a.S())};Ra.prototype.Ob=function(a){var b=a.parentNode;if(b){var c=u("div");b.replaceChild(c,a)}this.U_("maximum",a);this.o();if(b){b.replaceChild(this.S(),c)}};Ra.prototype.e=function(){if(this.da()){return}Ra.j.e.call(this);if(this.Ba){this.Ba.e()}};Ra.prototype.I=function(){Ra.j.I.call(this);this.jh().I()};
Ra.prototype.J=function(){Ra.j.J.call(this);this.jh().J()};Ra.prototype.rE=function(){return this.OS};Ra.prototype.jh=function(){if(!this.Ba){this.Ba=new Nc(this.xa())}return this.Ba};Ra.prototype.fm=function(){return this.Ca};Ra.prototype.po=function(a){return this.EJ[a]};Ra.prototype.De=function(){return this.Te};Ra.prototype.vS=function(){return this.a1};Ra.prototype.wS=function(){return this.c1};Ra.prototype.MS=function(){this.KN()};Ra.prototype.aG=function(){return this.NS};Ra.prototype.Va=function(a){var b=
this.Ca;if(b==a){return}this.Ca=a;this.tw("state",b,a)};Ra.prototype.U_=function(a,b){var c=this.EJ[a];if(c==b){return}this.EJ[a]=b;this.tw(a+"StateElement",c,b)};Ra.prototype.kn=function(a){var b=this.Te;if(b==a){return}this.Te=a;this.tw("title",b,a)};Ra.prototype.tw=function(a,b,c){this.dispatchEvent({type:"propertychanged",property:a,oldValue:b,newValue:c})};var nc=function(a){Dd.call(this,a||"lhcl_PhotoOverlay");this.gC=new Eb(this.lc,250,this);this.xU=new Eb(this.uT,3000,this);this.Db={}};S(nc,Dd);nc.prototype.Ov=0;nc.prototype.cc=null;nc.prototype.th=null;nc.prototype.Jy=null;nc.prototype.dA=false;nc.prototype.o=function(){this.hu(this.Vn('<div class="{$prefix}"><div class="lhcl_RelativeContainer lhcl_FillVertical"><div class="{$prefix}-background_"></div><div class="{$prefix}-above_"></div><div class="{$prefix}-photo_"></div><div class="{$prefix}-below_"></div><div class="{$prefix}-upperThird_"></div><div class="{$prefix}-middleThird_"></div><div class="{$prefix}-lowerThird_"></div></div></div>'))};
nc.prototype.e=function(){if(this.da()){return}nc.j.e.call(this);this.gC.e();this.xU.e()};nc.prototype.I=function(){nc.j.I.call(this);if(this.Jy){this.I_(this.Jy)}zi(this.Db,function(a,b){this.G_(b,a)},this);this.L.m(this.S(),vd,this.wo);if(n.IE&&n.compare(n.VERSION,7)<0){this.L.m(window,"scroll",this.jT)}};nc.prototype.jT=function(){if(md().scrollTop>0){var a=md().scrollTop+"px",b=this.S();V(b,"top",a)}};nc.prototype.G_=function(a,b){this.Db[a]=b;if(!this.Ie()){return}var c=this.ic(a);fc(c);if(!b){return}x(c,
b);if(!this.dA&&(a=="lowerThird_"||a=="middleThird_"||a=="upperThird_")){s(b,false)}else if(a=="above_"||a=="below_"){this.th=null}};nc.prototype.I_=function(a){this.Jy=a;if(!this.Ie()){return}if(this.cc){this.removeChild(this.cc,true);this.cc=null}this.cc=new Oc(a);this.xb(this.cc);var b=this.ic("photo_");this.cc.V(b);this.gC.start()};nc.prototype.nS=function(){var a=this.S();return new cb(a.offsetWidth,a.offsetHeight)};nc.prototype.uT=function(){this.eJ(false)};nc.prototype.wo=function(){this.eJ(true)};
nc.prototype.lc=function(){var a=this.nS();if(!Mr(this.th,a)){this.th=a;if(n.IE&&n.compare(n.VERSION,7)<0){var b=document.documentElement.clientHeight+"px",c=this.S();V(c,"height",b);var d=this.ic("background_");V(d,"height",b)}var e=this.Db.T5,f=e&&e.offsetHeight||0,g=this.Db.Z5,h=g&&g.offsetHeight||0;this.cc.dJ(1,a.width-this.Ov*2,a.height-f-h-this.Ov*2);var i=this.cc.S(),j=i.offsetHeight;V(i,"visibility",j!=0?"visible":"hidden");if(j==0){this.th=null;pc(this.lc,0,this)}var l=j+f+h,p=(a.height-
l)/2;if(e){var t=this.ic("above_");ef(t,0,p)}var w=this.ic("photo_");ef(w,0,p+f);if(g){var y=this.ic("below_");ef(y,0,p+f+j)}}this.gC.start()};nc.prototype.eJ=function(a){if(this.dA!=a){ab(["lowerThird_","middleThird_","upperThird_"],function(b){var c=this.Db[b];if(c){s(c,a)}},this)}this.dA=a;if(a){this.xU.start()}};var Oc=function(a,b,c,d,e){Dd.call(this,e||"lhcl_ScaledImage");this.PF=a;this.ad=d||-1;this.Ke=c||-1;this.Vt=b||1};S(Oc,Dd);Oc.prototype.oi=null;Oc.prototype.cc=null;Oc.prototype.jk=false;Oc.prototype.Pf=null;Oc.prototype.ym="standard";Oc.prototype.o=function(){Oc.j.o.call(this);ga(this.b,this.xa());this.s_(this.PF)};Oc.prototype.fx=function(){return this.cc};Oc.prototype.isLoaded=function(){return this.jk};Oc.prototype.s_=function(a){this.PF=a;this.cc=u("img");this.jk=false;ri(this.cc,"load",this.vT,
false,this);this.cc.src=this.PF};Oc.prototype.vp=function(a){this.ym=a};Oc.prototype.dJ=function(a,b,c){this.Vt=a||this.Vt;this.Ke=b||this.Ke;this.ad=c||this.ad;this.Zu()};Oc.prototype.fw=function(a){var b=new gb(a.top,a.width+a.left,a.height+a.top,a.left),c="rect("+Math.round(b.top)+"px "+Math.round(b.right)+"px "+Math.round(b.bottom)+"px "+Math.round(b.left)+"px)";V(this.cc,"clip",c);var d=Math.round(-b.top)+"px 0 0 "+Math.round(-b.left)+"px";V(this.cc,"margin",d);V(this.cc,"position","absolute")};
Oc.prototype.vT=function(){this.jk=true;this.Pf=new cb(this.cc.width,this.cc.height);this.dJ();var a=this.S();fc(a);x(a,this.cc);this.dispatchEvent("load")};Oc.prototype.Zu=function(){if(!this.jk){return}if(this.ym=="standard"){var a=this.Vt;if(this.Ke>=0&&this.Pf.width*a>this.Ke){a=this.Ke/this.Pf.width}if(this.ad>=0&&this.Pf.height*a>this.ad){a=this.ad/this.Pf.height}Ic(this.cc,this.Pf.width*a,this.Pf.height*a)}else if(this.ym=="zoomandcrop"){var a;if(this.oi){a=Math.min(this.Vt,Math.min(this.Ke/
this.oi.width,this.ad/this.oi.height))}else{a=Math.min(this.Vt,Math.max(this.Ke/this.Pf.width,this.ad/this.Pf.height))}var b=this.Pf.width*a,c=this.Pf.height*a;Ic(this.cc,b,c);var d=new Je(0,0,b,c);if(this.oi){d.left=this.oi.left*a-(this.Ke-this.oi.width*a)/2;d.width=this.Ke;d.top=this.oi.top*a-(this.ad-this.oi.height*a)/2;d.height=this.ad}else{if(b>this.Ke){var e=b-this.Ke;d.left=e/2;d.width-=e}if(c>this.ad){var e=c-this.ad;d.top=e/2;d.height-=e}}this.fw(d)}};var Nc=function(a){Dd.call(this,a||"lhcl_Compartment")};S(Nc,Dd);Nc.prototype.b=null;Nc.prototype.o=function(a){this.te=a;this.b=this.tO();this.WJ(this.te.rE(),this.te.aG());this.bK(this.te.fm());this.eK(this.te.De());this.cK(this.te.vS());this.dK(this.te.wS());this.L.m(a,"propertychanged",this.bT)};Nc.prototype.I=function(){var a=this.ic("gripArea_");this.L.m(a,ta,this.nF)};Nc.prototype.J=function(){var a=this.ic("gripArea_");this.L.yd(a,ta,this.nF)};Nc.prototype.S=function(){return this.b};Nc.prototype.nO=
function(){return G("span",null,"\u2261")};Nc.prototype.tO=function(){return this.Vn('<div class="{$prefix} {$prefix}-DefaultRenderer"><div class="{$prefix}-titleArea_"><table class="lhcl_NoSpace lhcl_FillHorizontal"><tr><td class="{$prefix}-icon_"></td><td class="{$prefix}-title_"></td><td class="{$prefix}-actionElement_"></td></tr></table></div><div class="{$prefix}-contentArea_"><div class="{$prefix}-content_"></div></div><div class="{$prefix}-gripArea_"><div class="{$prefix}-grip_"></div></div></div>')};
Nc.prototype.LS=function(a){if(this.te.po(a)){return false}for(var b=wo[a]-1;b>=0;b--){var c=Nk[b];if(this.te.po(c)){this.te.Va(c);return true}}return false};Nc.prototype.bT=function(a){var b=a.property;if(b=="gripEnabled"||b=="grip"){this.WJ(this.te.rE(),this.te.aG())}else if(b=="title"){this.eK(a.newValue)}else if(b=="titleActionElement"){this.cK(a.newValue)}else if(b=="titleIcon"){this.dK(a.newValue)}else if(b=="minimumStateElement"||b=="summaryStateElement"||b=="maximumStateElement"||b=="state"){this.bK(this.te.fm())}};
Nc.prototype.nF=function(a){a.stopPropagation();this.te.MS()};Nc.prototype.WJ=function(a,b){var c=this.ic("grip_"),d=this.ic("gripArea_");fc(c);x(c,a?a:this.nO());Ze(d,this.xa("disabled_"),!b)};Nc.prototype.bK=function(a){var b=this.ic("content_"),c=this.ic("contentArea_");fc(b);if(!this.LS(a)){var d=this.te.po(a);if(d){x(b,d)}Ze(c,this.xa("empty_"),!d)}};Nc.prototype.eK=function(a){var b=this.ic("title_");U(b,a||"");Ze(b,this.xa("empty_"),!a)};Nc.prototype.cK=function(a){var b=this.ic("actionElement_");
fc(b);if(a){x(b,a)}Ze(b,this.xa("empty_"),!a)};Nc.prototype.dK=function(a){var b=this.ic("icon_");fc(b);if(a){var c=G("img",{src:a});x(b,c)}Ze(b,this.xa("empty_"),!a)};;var Fd={ERAS:["BC","AD"],ERANAMES:["Before Christ","Anno Domini"],NARROWMONTHS:["J","F","M","A","M","J","J","A","S","O","N","D"],MONTHS:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTMONTHS:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],WEEKDAYS:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],SHORTWEEKDAYS:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],NARROWWEEKDAYS:["S","M","T",
"W","T","F","S"],SHORTQUARTERS:["Q1","Q2","Q3","Q4"],QUARTERS:["1st quarter","2nd quarter","3rd quarter","4th quarter"],AMPMS:["AM","PM"],DATEFORMATS:["EEEE, MMMM d, yyyy","MMMM d, yyyy","MMM d, yyyy","M/d/yy"],TIMEFORMATS:["h:mm:ss a v","h:mm:ss a z","h:mm:ss a","h:mm a"],ZONESTRINGS:null};Fd.STANDALONENARROWMONTHS=Fd.NARROWMONTHS;Fd.STANDALONEMONTHS=Fd.MONTHS;Fd.STANDALONESHORTMONTHS=Fd.SHORTMONTHS;Fd.STANDALONEWEEKDAYS=Fd.WEEKDAYS;Fd.STANDALONESHORTWEEKDAYS=Fd.SHORTWEEKDAYS;Fd.STANDALONENARROWWEEKDAYS=
Fd.NARROWWEEKDAYS;cA(Fd,"en");;

